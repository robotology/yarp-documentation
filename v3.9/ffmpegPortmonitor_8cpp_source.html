<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: src/portmonitors/image_compression_ffmpeg/ffmpegPortmonitor.cpp Source File</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.9.1' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<script src="https://cookiehub.net/c2/44d56061.js"></script>
<script type="text/javascript">
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('consent', 'default', {'ad_storage': 'denied', 'analytics_storage': 'denied', 'wait_for_update': 500});
document.addEventListener("DOMContentLoaded", function(event) {
var cpm = {};
window.cookiehub.load(cpm);
});
</script>
<!--
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.eu/other/personal_data_notice.html"
  }
})});
</script>
-->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ffmpegPortmonitor_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ffmpegPortmonitor.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="ffmpegPortmonitor_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * SPDX-FileCopyrightText: 2006-2021 Istituto Italiano di Tecnologia (IIT)</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> * SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> */</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">// Local imports</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="ffmpegPortmonitor_8h.html">ffmpegPortmonitor.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="constants_8h.html">constants.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">// YARP imports</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;<a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html">yarp/os/LogComponent.h</a>&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;<a class="code" href="libYARP__sig_2src_2yarp_2sig_2all_8h.html">yarp/sig/all.h</a>&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment">// Standard imports</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment">// Ffmpeg imports</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">    #include &lt;libavcodec/avcodec.h&gt;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">    #include &lt;libavutil/opt.h&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">    #include &lt;libavutil/imgutils.h&gt;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">    #include &lt;libavformat/avformat.h&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">    #include &lt;libswscale/swscale.h&gt;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>}</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceyarp_1_1os.html">yarp::os</a>;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceyarp_1_1sig.html">yarp::sig</a>;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="comment">// YARP logging component</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a86dd8a06be6e589f92112c953c8f8009">YARP_LOG_COMPONENT</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>,</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>                   <span class="stringliteral">&quot;yarp.carrier.portmonitor.image_compression_ffmpeg&quot;</span>,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>                   <a class="code hl_function" href="classyarp_1_1os_1_1Log.html#a4af3169c483a9d7ac43522437034e813">yarp::os::Log::minimumPrintLevel</a>(),</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>                   <a class="code hl_enumvalue" href="classyarp_1_1os_1_1Log.html#aa16b46ff27fe977029d4830eb3fc3453a17b88e418da2ad6f0972cc4ba968f00c">yarp::os::Log::LogTypeReserved</a>,</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>                   <a class="code hl_function" href="classyarp_1_1os_1_1Log.html#a1de7735583572abed6178c3bd4b72e06">yarp::os::Log::printCallback</a>(),</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>                   <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>}</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="foldopen" id="foldopen00058" data-start="{" data-end="}">
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="ffmpegPortmonitor_8cpp.html#af8f3d95f510dbd3d062913127505a7f0">   58</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="ffmpegPortmonitor_8cpp.html#af8f3d95f510dbd3d062913127505a7f0">split</a>(<span class="keyword">const</span> std::string &amp;s, <span class="keywordtype">char</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">delim</a>, std::vector&lt;std::string&gt; &amp;elements) {</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    std::istringstream <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">iss</a>(s);</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    std::string <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">item</a>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="keywordflow">while</span> (std::getline(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">iss</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">item</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">delim</a>)) {</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>        elements.push_back(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">item</a>);</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    }</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>}</div>
</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="foldopen" id="foldopen00066" data-start="{" data-end="}">
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#ac178e515106b0362e8756632bd9a1aa6">   66</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#ac178e515106b0362e8756632bd9a1aa6">FfmpegMonitorObject::create</a>(<span class="keyword">const</span> <a class="code hl_class" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a>&amp; options)</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>{</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="comment">// Check if this is sender or not</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <a class="code hl_variable" href="classFfmpegMonitorObject.html#abf1d53be6b768cbb9f463e60b2498b38">senderSide</a> = (options.<a class="code hl_function" href="classyarp_1_1os_1_1Property.html#a01b2c87730d92ac79189a139874b8f32">find</a>(<span class="stringliteral">&quot;sender_side&quot;</span>).<a class="code hl_function" href="classyarp_1_1os_1_1Value.html#a3f49bd86a14537ca63f59297513e80eb">asBool</a>());</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="comment">// Set default codec</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVCodecID</a> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">codecId</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AV_CODEC_ID_MPEG2VIDEO</a>;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <a class="code hl_variable" href="classFfmpegMonitorObject.html#a6fe92a674eb0452c5f18984e57edb690">codecName</a> = <span class="stringliteral">&quot;mpeg2video&quot;</span>;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="comment">// Parse command line parameters and set them into global variable &quot;paramsMap&quot;</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    std::string str = options.<a class="code hl_function" href="classyarp_1_1os_1_1Property.html#a01b2c87730d92ac79189a139874b8f32">find</a>(<span class="stringliteral">&quot;carrier&quot;</span>).<a class="code hl_function" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>();</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classFfmpegMonitorObject.html#a1845e6017b736e03cbbdd42f3e4dd4c7">getParamsFromCommandLine</a>(str, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">codecId</a>) == -1) {</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    }</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="comment">// Find encoder/decoder</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classFfmpegMonitorObject.html#abf1d53be6b768cbb9f463e60b2498b38">senderSide</a>) {</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">codec</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_find_encoder</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">codecId</a>);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">codec</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_find_decoder</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">codecId</a>);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    }</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">codec</a>) {</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Can&#39;t find codec %s&quot;</span>, <a class="code hl_variable" href="classFfmpegMonitorObject.html#a6fe92a674eb0452c5f18984e57edb690">codecName</a>.c_str());</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    }</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="comment">// Prepare codec context</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>) {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_alloc_context3</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">codec</a>);</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Codec context is already allocated&quot;</span>);</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    }</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>) {</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Could not allocate video codec context&quot;</span>);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    }</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <a class="code hl_variable" href="classFfmpegMonitorObject.html#a6bf62c495c8caf76c2d4fd13fc1050e1">firstTime</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="comment">// Set time base parameter</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;time_base.num = 1;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;time_base.den = 15;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="comment">// Set command line params</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classFfmpegMonitorObject.html#a61e157817130937d82ffc465281bd45d">setCommandLineParams</a>() == -1) {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    }</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>}</div>
</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="foldopen" id="foldopen00117" data-start="{" data-end="}">
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#af4bde074b5f89cb84a8e2f189019ab26">  117</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#af4bde074b5f89cb84a8e2f189019ab26">FfmpegMonitorObject::destroy</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>{</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <a class="code hl_variable" href="classFfmpegMonitorObject.html#ade74d4e5d3d012600817df0f0b5467c8">paramsMap</a>.clear();</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="comment">// Check if codec context is freeable, if yes free it.</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a> != <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>) {</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_close</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_free_context</a>(&amp;<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>);</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    }</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>}</div>
</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="foldopen" id="foldopen00129" data-start="{" data-end="}">
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#ac4986d4d412e7a325f940f671d907df8">  129</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#ac4986d4d412e7a325f940f671d907df8">FfmpegMonitorObject::setparam</a>(<span class="keyword">const</span> <a class="code hl_class" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a>&amp; params)</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>{</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;setparam&quot;</span>);</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>}</div>
</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
<div class="foldopen" id="foldopen00135" data-start="{" data-end="}">
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#acabc1b0c5ca0515d851e89bcb2e4d65a">  135</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#acabc1b0c5ca0515d851e89bcb2e4d65a">FfmpegMonitorObject::getparam</a>(<a class="code hl_class" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a>&amp; params)</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>{</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;getparam&quot;</span>);</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>}</div>
</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="foldopen" id="foldopen00141" data-start="{" data-end="}">
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a3c83c43b5a89060a8956171a4d7c2926">  141</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#a3c83c43b5a89060a8956171a4d7c2926">FfmpegMonitorObject::accept</a>(<a class="code hl_class" href="classyarp_1_1os_1_1Things.html">yarp::os::Things</a>&amp; thing)</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>{</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classFfmpegMonitorObject.html#abf1d53be6b768cbb9f463e60b2498b38">senderSide</a>) {</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        <span class="comment">// If sender side</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;accept - sender&quot;</span>);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        <span class="comment">// Try to cast the Thing into an Image</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <a class="code hl_class" href="classyarp_1_1sig_1_1Image.html">Image</a>* img = thing.<a class="code hl_function" href="classyarp_1_1os_1_1Things.html#af1dfba477718fd3df0d74b21fc536a11">cast_as</a>&lt; <a class="code hl_class" href="classyarp_1_1sig_1_1Image.html">Image</a> &gt;();</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>        <span class="comment">// If cast fails, return error</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>        <span class="keywordflow">if</span>(img == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Expected type Image in sender side, but got wrong data type!&quot;</span>);</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    }</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        <span class="comment">// If receiver side</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;accept - receiver&quot;</span>);</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        <span class="comment">// Try to cast the Thing into a Bottle</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        <a class="code hl_class" href="classyarp_1_1os_1_1Bottle.html">Bottle</a>* bt = thing.<a class="code hl_function" href="classyarp_1_1os_1_1Things.html#af1dfba477718fd3df0d74b21fc536a11">cast_as</a>&lt;<a class="code hl_class" href="classyarp_1_1os_1_1Bottle.html">Bottle</a>&gt;();</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        <span class="comment">// If cast fails, return error</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        <span class="keywordflow">if</span>(bt == <span class="keyword">nullptr</span>){</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Expected type Bottle in receiver side, but got wrong data type!&quot;</span>);</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>        }</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    }</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>}</div>
</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="foldopen" id="foldopen00168" data-start="{" data-end="}">
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a94bf295ce404010c0991ada9e93976fe">  168</a></span><a class="code hl_class" href="classyarp_1_1os_1_1Things.html">yarp::os::Things</a>&amp; <a class="code hl_function" href="classFfmpegMonitorObject.html#a94bf295ce404010c0991ada9e93976fe">FfmpegMonitorObject::update</a>(<a class="code hl_class" href="classyarp_1_1os_1_1Things.html">yarp::os::Things</a>&amp; thing)</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>{</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classFfmpegMonitorObject.html#abf1d53be6b768cbb9f463e60b2498b38">senderSide</a>) {</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        <span class="keywordtype">bool</span> success = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;update - sender&quot;</span>);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        <span class="comment">// Cast Thing into an Image</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>        <a class="code hl_class" href="classyarp_1_1sig_1_1Image.html">Image</a>* img = thing.<a class="code hl_function" href="classyarp_1_1os_1_1Things.html#af1dfba477718fd3df0d74b21fc536a11">cast_as</a>&lt; <a class="code hl_class" href="classyarp_1_1sig_1_1Image.html">Image</a> &gt;();</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        <span class="comment">// Allocate memory for packet</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPacket</a> *packet = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_packet_alloc</a>();</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        <span class="keywordflow">if</span> (packet == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>) {</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error in packet allocation&quot;</span>);</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>            success = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        }</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <span class="comment">// Call compress function</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        <span class="keywordflow">if</span> (success &amp;&amp; <a class="code hl_function" href="classFfmpegMonitorObject.html#a30ba51d8dd51cbfbcbbf7838b702c71c">compress</a>(img, packet) != 0) {</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error in compression&quot;</span>);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>            success = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        }</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span> </div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="comment">// Insert compressed image into a Bottle to be sent</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#ab4c9755e05f65d8c89d9b406bb3da64d">clear</a>();</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        <span class="keywordtype">int</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">successCode</a> = success ? 1 : 0;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#ac5ff63ea20f6c877e5c4541121f98482">addInt32</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">successCode</a>);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#ac5ff63ea20f6c877e5c4541121f98482">addInt32</a>(img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#a27a6819365e6aaae8c89e401ca9f5475">width</a>());</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#ac5ff63ea20f6c877e5c4541121f98482">addInt32</a>(img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#ac5ceeddf1a947a79fae87c089f33745f">height</a>());</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#ac5ff63ea20f6c877e5c4541121f98482">addInt32</a>(img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#ad18cd8fe7ce79d52901316c93e09d396">getPixelCode</a>());</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#ac5ff63ea20f6c877e5c4541121f98482">addInt32</a>(img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#a67454e32db13eace0407f962b17ea19c">getPixelSize</a>());</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        <span class="keywordflow">if</span> (success) {  <span class="comment">// If compression was successful, insert also compressed data</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            <span class="comment">// Packet</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            <a class="code hl_class" href="classyarp_1_1os_1_1Value.html">Value</a> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">p</a>(packet, <span class="keyword">sizeof</span>(*packet));</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>            <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#a150eebc6ad332acb0e9cfe8b4b9b6059">add</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">p</a>);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>            <span class="comment">// Packet data</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>            <a class="code hl_class" href="classyarp_1_1os_1_1Value.html">Value</a> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">d</a>(packet-&gt;data, packet-&gt;size);</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#a150eebc6ad332acb0e9cfe8b4b9b6059">add</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">d</a>);</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            <span class="comment">// Buffer size</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#ac5ff63ea20f6c877e5c4541121f98482">addInt32</a>(packet-&gt;buf-&gt;size);</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>            <span class="comment">// Buffer data</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>            <a class="code hl_class" href="classyarp_1_1os_1_1Value.html">Value</a> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">bd</a>(packet-&gt;buf-&gt;data, packet-&gt;buf-&gt;size);</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>            <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#a150eebc6ad332acb0e9cfe8b4b9b6059">add</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">bd</a>);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>            <span class="comment">// Side data elements</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a> = 0; <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a> &lt; packet-&gt;side_data_elems; <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a>++) {</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>                <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#ac5ff63ea20f6c877e5c4541121f98482">addInt32</a>(packet-&gt;side_data[<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a>].size);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#ac5ff63ea20f6c877e5c4541121f98482">addInt32</a>(packet-&gt;side_data[<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a>].type);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>                <a class="code hl_class" href="classyarp_1_1os_1_1Value.html">Value</a> sd(packet-&gt;side_data[<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a>].data, packet-&gt;side_data[<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a>].size);</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>                <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Bottle.html#a150eebc6ad332acb0e9cfe8b4b9b6059">add</a>(sd);</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>            }</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        }</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#ab69d168b2258b596385103546aad58bb">th</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Things.html#af7256b90b3b06dbd148e17787ea150b2">setPortWriter</a>(&amp;<a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>);</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        <span class="comment">// Free the memory allocated for the packet</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_packet_unref</a>(packet);</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    }</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;update - receiver&quot;</span>);</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        <span class="comment">// Cast the Thin as a Bottle</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <a class="code hl_class" href="classyarp_1_1os_1_1Bottle.html">Bottle</a>* <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a> = thing.<a class="code hl_function" href="classyarp_1_1os_1_1Things.html#af1dfba477718fd3df0d74b21fc536a11">cast_as</a>&lt;<a class="code hl_class" href="classyarp_1_1os_1_1Bottle.html">Bottle</a>&gt;();</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="comment">// Fill the final image with zeros</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">imageOut</a>.<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#ab43564f91395e59e84707845f4328e98">zero</a>();</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        <span class="comment">// Extract decompression data from the Bottle</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        <span class="keywordtype">int</span> width = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(1).asInt32();</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        <span class="keywordtype">int</span> height = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(2).asInt32();</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        <span class="keywordtype">int</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pixelCode</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(3).asInt32();</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        <span class="keywordtype">int</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pixelSize</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(4).asInt32();</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        <span class="comment">// Set information into final image</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">imageOut</a>.<a class="code hl_function" href="classyarp_1_1sig_1_1FlexImage.html#a94d328b7253d0c1a264a1d38a89041d7">setPixelCode</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pixelCode</a>);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">imageOut</a>.<a class="code hl_function" href="classyarp_1_1sig_1_1FlexImage.html#aedf1bba9ddcbdb1b4a6ef3aa321fa061">setPixelSize</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pixelSize</a>);</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">imageOut</a>.<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#a973864b80bf12a2f1575234d8d64fc37">resize</a>(width, height);</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        <span class="comment">// Check if compression was successful</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(0).asInt32() == 1) {</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>            <span class="keywordtype">bool</span> success = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>            <span class="comment">// Get compressed image from Bottle</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPacket</a>* <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">tmp</a> = (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPacket</a>*) <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(5).asBlob();</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>            <span class="comment">// Allocate memory for packet</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>            <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPacket</a>* packet = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_packet_alloc</a>();</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>            <span class="comment">// Set all packet parameters</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>            packet-&gt;dts = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">tmp</a>-&gt;dts;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>            packet-&gt;duration = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">tmp</a>-&gt;duration;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>            packet-&gt;flags = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">tmp</a>-&gt;flags;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>            packet-&gt;pos = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">tmp</a>-&gt;pos;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>            packet-&gt;pts = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">tmp</a>-&gt;pts;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>            packet-&gt;side_data_elems = 0;</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>            packet-&gt;stream_index = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">tmp</a>-&gt;stream_index;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            packet-&gt;size = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">tmp</a>-&gt;size;</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            <span class="comment">// Image data</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>            packet-&gt;data = (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">uint8_t</a> *) <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(6).asBlob();</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            <span class="comment">// Buffer data</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            packet-&gt;buf = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_buffer_create</a>((<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">uint8_t</a> *) <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(8).asBlob(),</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                                            <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(7).asInt32(), <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_buffer_default_free</a>,</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                                            <span class="keyword">nullptr</span>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AV_BUFFER_FLAG_READONLY</a>);</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span> </div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            <span class="comment">// Packet side data</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a> = 0; <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a> &lt; <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">tmp</a>-&gt;side_data_elems; <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a>++) {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                <span class="keywordtype">int</span> <a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_packet_add_side_data</a>(packet,</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                                                    (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPacketSideDataType</a>) <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(10).asInt32(),     <span class="comment">// Type</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                                                    (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">uint8_t</a> *) <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(11).asBlob(),                 <span class="comment">// Data</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                                                    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">compressedBottle</a>-&gt;get(9).asInt32());                            <span class="comment">// Size</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>                    success = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>                }</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>            }</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>            <span class="comment">// Call to decompress function</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>            <span class="keywordflow">if</span> (success &amp;&amp; <a class="code hl_function" href="classFfmpegMonitorObject.html#ad879ca0b9bae10b490fd7b48567b3604">decompress</a>(packet, width, height, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pixelCode</a>) != 0) {</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>                <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error in decompression&quot;</span>);</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>                success = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>            <span class="comment">// Free memory allocated for side data and packet</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>            <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;packet-&gt;side_data);</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>            <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;packet);</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span> </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        }</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#ab69d168b2258b596385103546aad58bb">th</a>.<a class="code hl_function" href="classyarp_1_1os_1_1Things.html#af7256b90b3b06dbd148e17787ea150b2">setPortWriter</a>(&amp;<a class="code hl_variable" href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">imageOut</a>);</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    }</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classFfmpegMonitorObject.html#ab69d168b2258b596385103546aad58bb">th</a>;</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>}</div>
</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span> </div>
<div class="foldopen" id="foldopen00293" data-start="{" data-end="}">
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a30ba51d8dd51cbfbcbbf7838b702c71c">  293</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#a30ba51d8dd51cbfbcbbf7838b702c71c">FfmpegMonitorObject::compress</a>(<a class="code hl_class" href="classyarp_1_1sig_1_1Image.html">Image</a>* img, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPacket</a> *<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pkt</a>) {</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;compress&quot;</span>);</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVFrame</a> *<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVFrame</a> *<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    <span class="comment">// Get width and height</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    <span class="keywordtype">int</span> w = img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#a27a6819365e6aaae8c89e401ca9f5475">width</a>();</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <span class="keywordtype">int</span> h = img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#ac5ceeddf1a947a79fae87c089f33745f">height</a>();</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <span class="comment">// Allocate video frame for original frames</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_alloc</a>();</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>) {</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Cannot allocate starting frame!&quot;</span>);</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    }</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span> </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <span class="comment">// Allocate a video frame for end frame</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_alloc</a>();</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>) {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Cannot allocate end frame!&quot;</span>);</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    }</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span> </div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    <span class="comment">// Allocate space into start frame to contain data</span></div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="keywordtype">int</span> success = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_image_alloc</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;data, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;linesize,</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                    w, h,</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                    (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a5c12ed8df1467187b428314c3495b295">FFMPEGPORTMONITOR_PIXELMAP</a>[img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#ad18cd8fe7ce79d52901316c93e09d396">getPixelCode</a>()], 16);</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span> </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    <span class="keywordflow">if</span> (success &lt; 0) {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Cannot allocate starting frame buffer!&quot;</span>);</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <span class="comment">// Set Image data into AVFrame</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;linesize[0] = img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#a572b18b78003ec8895465094eecab73f">getRowSize</a>();</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    <span class="comment">// Free old pointer (because we will use the buffer contained into img)</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;data[0]);</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;data[0] = img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#a581675815272442f61670c023115ec77">getRawImage</a>();</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;height = h;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;width = w;</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;format = (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a5c12ed8df1467187b428314c3495b295">FFMPEGPORTMONITOR_PIXELMAP</a>[img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#ad18cd8fe7ce79d52901316c93e09d396">getPixelCode</a>()];</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <span class="comment">// Allocate memory for end frame data</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    success = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_image_alloc</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;linesize,</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>                    w, h,</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                    (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a17efa08234b70443d9744838180cc945">FFMPEGPORTMONITOR_CODECPIXELMAP</a>[<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;codec_id], 16);</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span> </div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <span class="keywordflow">if</span> (success &lt; 0) {</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Cannot allocate end frame buffer!&quot;</span>);</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="comment">// Set end frame parameters</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;height = h;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;width = w;</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;format = (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a17efa08234b70443d9744838180cc945">FFMPEGPORTMONITOR_CODECPIXELMAP</a>[<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;codec_id];</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <span class="comment">// Convert the image from start format into end format</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="keyword">static</span> <span class="keyword">struct </span><a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">SwsContext</a> *<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="comment">// Allocate context for conversion</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_getContext</a>(w, h,</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                                        (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a5c12ed8df1467187b428314c3495b295">FFMPEGPORTMONITOR_PIXELMAP</a>[img-&gt;<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#ad18cd8fe7ce79d52901316c93e09d396">getPixelCode</a>()],</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                                        w, h,</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>                                        (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a17efa08234b70443d9744838180cc945">FFMPEGPORTMONITOR_CODECPIXELMAP</a>[<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;codec_id],</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>                                        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">SWS_BICUBIC</a>,</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>                                        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>) {</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Cannot initialize pixel format conversion context!&quot;</span>);</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data[0]);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    }</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span> </div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="comment">// Perform conversion</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_scale</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;data, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;linesize, 0,</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>                        h, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;linesize);</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span> </div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Could not convert pixel format!&quot;</span>);</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_freeContext</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data[0]);</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classFfmpegMonitorObject.html#a6bf62c495c8caf76c2d4fd13fc1050e1">firstTime</a>) {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        <span class="comment">// If this is the first compression</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span> </div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        <span class="comment">// Set codec context parameters</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;width = w;</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;height = h;</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;pix_fmt = (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a17efa08234b70443d9744838180cc945">FFMPEGPORTMONITOR_CODECPIXELMAP</a>[<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;codec_id];</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        <span class="comment">// Open codec</span></div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>        <a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_open2</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>, <a class="code hl_variable" href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">codec</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>);</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Could not open codec&quot;</span>);</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>            <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_freeContext</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>);</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>            <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data[0]);</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>            <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        }</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a6bf62c495c8caf76c2d4fd13fc1050e1">firstTime</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    }</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="comment">// Set presentation timestamp</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;pts = <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;frame_number;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="comment">// Send image frame to codec</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_send_frame</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error sending a frame for encoding&quot;</span>);</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_freeContext</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>);</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data[0]);</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span> </div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="comment">// Receive compressed data into packet</span></div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    <a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_receive_packet</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pkt</a>);</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_freeContext</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>);</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data[0]);</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">EAGAIN</a>)) {</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        <span class="comment">// Not enough data</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error EAGAIN&quot;</span>);</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR_EOF</a>) {</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>        <span class="comment">// End of file reached</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error EOF&quot;</span>);</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error during encoding&quot;</span>);</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    }</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span> </div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>}</div>
</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span> </div>
<div class="foldopen" id="foldopen00445" data-start="{" data-end="}">
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#ad879ca0b9bae10b490fd7b48567b3604">  445</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#ad879ca0b9bae10b490fd7b48567b3604">FfmpegMonitorObject::decompress</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPacket</a>* <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pkt</a>, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pixelCode</a>) {</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span> </div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;decompress&quot;</span>);</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVFrame</a> *<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVFrame</a> *<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span> </div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classFfmpegMonitorObject.html#a6bf62c495c8caf76c2d4fd13fc1050e1">firstTime</a>) {</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        <span class="comment">// If this is the first decompression</span></div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        <span class="comment">// Set codec context parameters</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;width = w;</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;height = h;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;pix_fmt = (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a17efa08234b70443d9744838180cc945">FFMPEGPORTMONITOR_CODECPIXELMAP</a>[<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;codec_id];</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span> </div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        <span class="comment">// Open codec</span></div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_open2</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>, <a class="code hl_variable" href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">codec</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>);</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Could not open codec&quot;</span>);</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>        }</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#a6bf62c495c8caf76c2d4fd13fc1050e1">firstTime</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    }</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span> </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    <span class="comment">// Allocate video frame</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_alloc</a>();</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>) {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Could not allocate start frame!&quot;</span>);</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    }</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span> </div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <span class="comment">// Send compressed packet to codec</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_send_packet</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pkt</a>);</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error sending a frame for encoding&quot;</span>);</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="comment">// Receive decompressed image into an AVFrame</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    <a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">avcodec_receive_frame</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">EAGAIN</a>)) {</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        <span class="comment">// No enough data</span></div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error EAGAIN&quot;</span>);</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    }</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR_EOF</a>) {</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>        <span class="comment">// End of file reached</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error EOF&quot;</span>);</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    }</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error during encoding&quot;</span>);</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    }</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span> </div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>    <span class="comment">// Allocate a video frame for end frame</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_alloc</a>();</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>) {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Could not allocate start frame!&quot;</span>);</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    }</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span> </div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    <span class="comment">// Allocate memory into end frame to contain data</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    <span class="keywordtype">int</span> success = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_image_alloc</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;linesize,</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>                    w, h,</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>                    (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a5c12ed8df1467187b428314c3495b295">FFMPEGPORTMONITOR_PIXELMAP</a>[<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pixelCode</a>], 16);</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span> </div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <span class="keywordflow">if</span> (success &lt; 0) {</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error allocating end frame buffer!&quot;</span>);</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    }</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span> </div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <span class="comment">// Set end frame parameters</span></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;height = h;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;width = w;</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;format = (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a5c12ed8df1467187b428314c3495b295">FFMPEGPORTMONITOR_PIXELMAP</a>[<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pixelCode</a>];</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span> </div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    <span class="comment">// Convert the image into RGB format</span></div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="keyword">static</span> <span class="keyword">struct </span><a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">SwsContext</a> *<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>;</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <span class="comment">// Allocate conversion context</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_getContext</a>(w, h,</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>                                        (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a17efa08234b70443d9744838180cc945">FFMPEGPORTMONITOR_CODECPIXELMAP</a>[<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;codec_id],</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>                                        w, h,</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>                                        (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVPixelFormat</a>) <a class="code hl_variable" href="constants_8h.html#a5c12ed8df1467187b428314c3495b295">FFMPEGPORTMONITOR_PIXELMAP</a>[<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pixelCode</a>],</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>                                        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">SWS_BICUBIC</a>,</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>                                        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>);</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">NULL</a>) {</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Cannot initialize the pixel format conversion context!&quot;</span>);</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data[0]);</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    }</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span> </div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="comment">// Perform conversion</span></div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_scale</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;data, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>-&gt;linesize, 0,</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>                        h, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;linesize);</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span> </div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>        <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Could not convert pixel format!&quot;</span>);</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data[0]);</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_freeContext</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>);</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    }</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="comment">// Copy decompressed data from end frame to imageOut</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">memcpy</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">imageOut</a>.<a class="code hl_function" href="classyarp_1_1sig_1_1Image.html#a581675815272442f61670c023115ec77">getRawImage</a>(), <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data[0], success);</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span> </div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    <span class="comment">// Free allocated memory</span></div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_freep</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>-&gt;data[0]);</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">endFrame</a>);</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_frame_free</a>(&amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">startFrame</a>);</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">sws_freeContext</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">img_convert_ctx</a>);</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span> </div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span> </div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>}</div>
</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span> </div>
<div class="foldopen" id="foldopen00572" data-start="{" data-end="}">
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a1845e6017b736e03cbbdd42f3e4dd4c7">  572</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#a1845e6017b736e03cbbdd42f3e4dd4c7">FfmpegMonitorObject::getParamsFromCommandLine</a>(std::string <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">carrierString</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVCodecID</a> &amp;<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">codecId</a>) {</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span> </div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    std::vector&lt;std::string&gt; <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">parameters</a>;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    <span class="comment">// Split command line string using &#39;+&#39; delimiter</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <a class="code hl_function" href="BottleZlibPortmonitor_8cpp.html#af8f3d95f510dbd3d062913127505a7f0">split</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">carrierString</a>, <span class="charliteral">&#39;+&#39;</span>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">parameters</a>);</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span> </div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <span class="comment">// Iterate over result strings</span></div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    <span class="keywordflow">for</span> (std::string param: <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">parameters</a>) {</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span> </div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>        <span class="comment">// Skip YARP initial parameters</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>        <span class="keywordflow">if</span> (find(<a class="code hl_variable" href="constants_8h.html#a0810904221a48210c01b13d52c135c95">FFMPEGPORTMONITOR_IGNORE_PARAMS</a>.begin(), <a class="code hl_variable" href="constants_8h.html#a0810904221a48210c01b13d52c135c95">FFMPEGPORTMONITOR_IGNORE_PARAMS</a>.end(), param) != <a class="code hl_variable" href="constants_8h.html#a0810904221a48210c01b13d52c135c95">FFMPEGPORTMONITOR_IGNORE_PARAMS</a>.end()) {</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        }</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span> </div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>        <span class="comment">// If there is no &#39;.&#39;, the param is bad formatted, return error</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>        <span class="keyword">auto</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pointPosition</a> = param.find(<span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pointPosition</a> == std::string::npos) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Error parsing parameters!&quot;</span>);</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>        }</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>        <span class="comment">// Otherwise, separate key and value</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        std::string <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">paramKey</a> = param.substr(0, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pointPosition</a>);</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        std::string <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">paramValue</a> = param.substr(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">pointPosition</a> + 1, param.length());</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span> </div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>        <span class="comment">// Parsing codec</span></div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">paramKey</a> == <a class="code hl_variable" href="constants_8h.html#a0ec5787d99e66098771f99c0db9cfc5b">FFMPEGPORTMONITOR_CL_CODEC_KEY</a>) {</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>            <span class="keywordtype">bool</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">found</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>            <span class="comment">// Iterate over codecs command line possibilities</span></div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a> = 0; <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a> &lt; <a class="code hl_variable" href="constants_8h.html#a4a09bbbda96d0a49f1449439e2e2bbb4">FFMPEGPORTMONITOR_CL_CODECS</a>.size(); <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a>++) {</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>                <span class="comment">// If found</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">paramValue</a> == <a class="code hl_variable" href="constants_8h.html#a4a09bbbda96d0a49f1449439e2e2bbb4">FFMPEGPORTMONITOR_CL_CODECS</a>[<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a>]) {</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>                    <span class="comment">// Set codec id basing on codec command line name</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>                    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">codecId</a> = (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVCodecID</a>) <a class="code hl_variable" href="constants_8h.html#aa1f4c4efce9f1be021e225ce89affbed">FFMPEGPORTMONITOR_CODE_CODECS</a>[<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">i</a>];</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>                    <a class="code hl_variable" href="classFfmpegMonitorObject.html#a6fe92a674eb0452c5f18984e57edb690">codecName</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">paramValue</a>;</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>                    <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">found</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>                }</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>            }</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>            <span class="comment">// If not found, unrecognized codec, return error</span></div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>            <span class="keywordflow">if</span> (!<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">found</a>) {</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>                <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Unrecognized codec: %s&quot;</span>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">paramValue</a>.c_str());</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>            }</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span> </div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>        }</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>        <span class="comment">// Save param into params map</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>        <a class="code hl_variable" href="classFfmpegMonitorObject.html#ade74d4e5d3d012600817df0f0b5467c8">paramsMap</a>.insert( std::pair&lt;std::string, std::string&gt;(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">paramKey</a>, <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">paramValue</a>) );</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    }</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span> </div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>}</div>
</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span> </div>
<div class="foldopen" id="foldopen00629" data-start="{" data-end="}">
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a61e157817130937d82ffc465281bd45d">  629</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#a61e157817130937d82ffc465281bd45d">FfmpegMonitorObject::setCommandLineParams</a>() {</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>    <span class="comment">// Iterate over all saved parameters</span></div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; x : <a class="code hl_variable" href="classFfmpegMonitorObject.html#ade74d4e5d3d012600817df0f0b5467c8">paramsMap</a>) {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span> </div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>        <span class="comment">// Get key and value</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>        std::string key = x.first;</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>        std::string value = x.second;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span> </div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        <span class="comment">// Try to set this pair (key, value) into codec context (global parameters).</span></div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        <span class="keywordtype">int</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">globalError</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_opt_set</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>, key.c_str(), value.c_str(), 0);</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>        <span class="comment">// Try to set this pair (key, value) into codec context -&gt; priv data (parameters that are specific for a codec).</span></div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        <span class="keywordtype">int</span> <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">privError</a> = <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">av_opt_set</a>(<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a>-&gt;priv_data, key.c_str(), value.c_str(), 0);</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>        <span class="comment">// If the param exists, but the value is out of range</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">globalError</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">ERANGE</a>) || <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">privError</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">ERANGE</a>)) {</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Parameter out of range: %s&quot;</span>, key.c_str());</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        }</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>        <span class="comment">// If the param exists, but the value is invalid</span></div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">globalError</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">EINVAL</a>) || <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">privError</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">EINVAL</a>)) {</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Invalid value for parameter: %s&quot;</span>, key.c_str());</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>        }</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        <span class="comment">// If the param doesn&#39;t exists (we check only in sender side because some parameters doesn&#39;t exist in the decoders)</span></div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classFfmpegMonitorObject.html#abf1d53be6b768cbb9f463e60b2498b38">senderSide</a> &amp;&amp; <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">globalError</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR_OPTION_NOT_FOUND</a> &amp;&amp; <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">privError</a> == <a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">AVERROR_OPTION_NOT_FOUND</a>) {</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>            <a class="code hl_define" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code hl_class" href="classyarp_1_1os_1_1BufferedPort.html">FFMPEGMONITOR</a>, <span class="stringliteral">&quot;Parameter not found: %s&quot;</span>, key.c_str());</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>        }</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span> </div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    }</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>}</div>
</div>
<div class="ttc" id="aBottleZlibPortmonitor_8cpp_html_af8f3d95f510dbd3d062913127505a7f0"><div class="ttname"><a href="BottleZlibPortmonitor_8cpp.html#af8f3d95f510dbd3d062913127505a7f0">split</a></div><div class="ttdeci">void split(const std::string &amp;s, char delim, std::vector&lt; std::string &gt; &amp;elements)</div><div class="ttdef"><b>Definition</b> <a href="BottleZlibPortmonitor_8cpp_source.html#l00032">BottleZlibPortmonitor.cpp:32</a></div></div>
<div class="ttc" id="aImplementAxisInfo_8cpp_html_ab295c2135096172ff421e6b33358407d"><div class="ttname"><a href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a></div><div class="ttdeci">bool ret</div><div class="ttdef"><b>Definition</b> <a href="ImplementAxisInfo_8cpp_source.html#l00077">ImplementAxisInfo.cpp:77</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a1845e6017b736e03cbbdd42f3e4dd4c7"><div class="ttname"><a href="classFfmpegMonitorObject.html#a1845e6017b736e03cbbdd42f3e4dd4c7">FfmpegMonitorObject::getParamsFromCommandLine</a></div><div class="ttdeci">int getParamsFromCommandLine(std::string carrierString, AVCodecID &amp;codecId)</div><div class="ttdoc">This function parses the command line parameters from a string containing the entire command used to ...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00572">ffmpegPortmonitor.cpp:572</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a2562cfb685be4c15f9f3fa91378742a5"><div class="ttname"><a href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">FfmpegMonitorObject::imageOut</a></div><div class="ttdeci">yarp::sig::FlexImage imageOut</div><div class="ttdoc">The final decompressed image that will be sent to the original destination.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00125">ffmpegPortmonitor.h:125</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a30ba51d8dd51cbfbcbbf7838b702c71c"><div class="ttname"><a href="classFfmpegMonitorObject.html#a30ba51d8dd51cbfbcbbf7838b702c71c">FfmpegMonitorObject::compress</a></div><div class="ttdeci">int compress(yarp::sig::Image *img, AVPacket *pkt)</div><div class="ttdoc">This function performs all the compression actions on the incoming Image and saves the resulting comp...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00293">ffmpegPortmonitor.cpp:293</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a3c83c43b5a89060a8956171a4d7c2926"><div class="ttname"><a href="classFfmpegMonitorObject.html#a3c83c43b5a89060a8956171a4d7c2926">FfmpegMonitorObject::accept</a></div><div class="ttdeci">bool accept(yarp::os::Things &amp;thing) override</div><div class="ttdoc">This function is used by the port monitor to decide if an incoming packet can be accepted (it tries t...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00141">ffmpegPortmonitor.cpp:141</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a61e157817130937d82ffc465281bd45d"><div class="ttname"><a href="classFfmpegMonitorObject.html#a61e157817130937d82ffc465281bd45d">FfmpegMonitorObject::setCommandLineParams</a></div><div class="ttdeci">int setCommandLineParams()</div><div class="ttdoc">This function iterates over the attribute paramsMap and sets all the specified parameters into the at...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00629">ffmpegPortmonitor.cpp:629</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a6bf62c495c8caf76c2d4fd13fc1050e1"><div class="ttname"><a href="classFfmpegMonitorObject.html#a6bf62c495c8caf76c2d4fd13fc1050e1">FfmpegMonitorObject::firstTime</a></div><div class="ttdeci">bool firstTime</div><div class="ttdoc">Boolean variable used to check if the current call to the &quot;compression&quot; (or &quot;decompression&quot;) function...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00155">ffmpegPortmonitor.h:155</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a6fe92a674eb0452c5f18984e57edb690"><div class="ttname"><a href="classFfmpegMonitorObject.html#a6fe92a674eb0452c5f18984e57edb690">FfmpegMonitorObject::codecName</a></div><div class="ttdeci">std::string codecName</div><div class="ttdoc">The string containing codec name.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00137">ffmpegPortmonitor.h:137</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a94bf295ce404010c0991ada9e93976fe"><div class="ttname"><a href="classFfmpegMonitorObject.html#a94bf295ce404010c0991ada9e93976fe">FfmpegMonitorObject::update</a></div><div class="ttdeci">yarp::os::Things &amp; update(yarp::os::Things &amp;thing) override</div><div class="ttdoc">This function is the one that manipulates the incoming packet.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00168">ffmpegPortmonitor.cpp:168</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a97cceae14b03f03aba03ccafac8195cf"><div class="ttname"><a href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">FfmpegMonitorObject::data</a></div><div class="ttdeci">yarp::os::Bottle data</div><div class="ttdoc">The bottle that is filled with compressed image and all the information needed for decompression (it ...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00119">ffmpegPortmonitor.h:119</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_aa3fa05ccc84387dd42864555ff70c036"><div class="ttname"><a href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">FfmpegMonitorObject::codec</a></div><div class="ttdeci">const AVCodec * codec</div><div class="ttdoc">Ffmpeg structure containing all codec information needed for compression / decompression.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00143">ffmpegPortmonitor.h:143</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ab69d168b2258b596385103546aad58bb"><div class="ttname"><a href="classFfmpegMonitorObject.html#ab69d168b2258b596385103546aad58bb">FfmpegMonitorObject::th</a></div><div class="ttdeci">yarp::os::Things th</div><div class="ttdoc">The object returned by the &quot;update&quot; function; it can be a yarp::os::Bottle (sender side) or a yarp::s...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00113">ffmpegPortmonitor.h:113</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_abf1d53be6b768cbb9f463e60b2498b38"><div class="ttname"><a href="classFfmpegMonitorObject.html#abf1d53be6b768cbb9f463e60b2498b38">FfmpegMonitorObject::senderSide</a></div><div class="ttdeci">bool senderSide</div><div class="ttdoc">Boolean variable that tells if the current execution is in sender side or not.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00131">ffmpegPortmonitor.h:131</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ac178e515106b0362e8756632bd9a1aa6"><div class="ttname"><a href="classFfmpegMonitorObject.html#ac178e515106b0362e8756632bd9a1aa6">FfmpegMonitorObject::create</a></div><div class="ttdeci">bool create(const yarp::os::Property &amp;options) override</div><div class="ttdoc">This function is called when the object is created and it is used to initialize all its attributes.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00066">ffmpegPortmonitor.cpp:66</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ac4986d4d412e7a325f940f671d907df8"><div class="ttname"><a href="classFfmpegMonitorObject.html#ac4986d4d412e7a325f940f671d907df8">FfmpegMonitorObject::setparam</a></div><div class="ttdeci">bool setparam(const yarp::os::Property &amp;params) override</div><div class="ttdoc">This will be called when the portmonitor carrier parameters are set via YARP admin port.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00129">ffmpegPortmonitor.cpp:129</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_acabc1b0c5ca0515d851e89bcb2e4d65a"><div class="ttname"><a href="classFfmpegMonitorObject.html#acabc1b0c5ca0515d851e89bcb2e4d65a">FfmpegMonitorObject::getparam</a></div><div class="ttdeci">bool getparam(yarp::os::Property &amp;params) override</div><div class="ttdoc">This will be called when the portmonitor carrier parameters are requested via YARP admin port.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00135">ffmpegPortmonitor.cpp:135</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ad879ca0b9bae10b490fd7b48567b3604"><div class="ttname"><a href="classFfmpegMonitorObject.html#ad879ca0b9bae10b490fd7b48567b3604">FfmpegMonitorObject::decompress</a></div><div class="ttdeci">int decompress(AVPacket *pkt, int w, int h, int pixelCode)</div><div class="ttdoc">This function decompresses the incoming AVPacket passed as parameter and saves decompressed data into...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00445">ffmpegPortmonitor.cpp:445</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ade74d4e5d3d012600817df0f0b5467c8"><div class="ttname"><a href="classFfmpegMonitorObject.html#ade74d4e5d3d012600817df0f0b5467c8">FfmpegMonitorObject::paramsMap</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; paramsMap</div><div class="ttdoc">Structure that maps every parameter inserted from command line into its value (both as strings).</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00161">ffmpegPortmonitor.h:161</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_af4bde074b5f89cb84a8e2f189019ab26"><div class="ttname"><a href="classFfmpegMonitorObject.html#af4bde074b5f89cb84a8e2f189019ab26">FfmpegMonitorObject::destroy</a></div><div class="ttdeci">void destroy(void) override</div><div class="ttdoc">This function is called when the execution is terminated and the object is destroyed.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00117">ffmpegPortmonitor.cpp:117</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_afa49170dd9d42a56912745abe55d9642"><div class="ttname"><a href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">FfmpegMonitorObject::codecContext</a></div><div class="ttdeci">AVCodecContext * codecContext</div><div class="ttdoc">Ffmpeg structure containing all codec context information needed for compression / decompression.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00149">ffmpegPortmonitor.h:149</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a></div><div class="ttdoc">A simple collection of objects that can be described and transmitted in a portable way.</div><div class="ttdef"><b>Definition</b> <a href="Bottle_8h_source.html#l00063">Bottle.h:64</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a150eebc6ad332acb0e9cfe8b4b9b6059"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a150eebc6ad332acb0e9cfe8b4b9b6059">yarp::os::Bottle::add</a></div><div class="ttdeci">void add(const Value &amp;value)</div><div class="ttdoc">Add a Value to the bottle, at the end of the list.</div><div class="ttdef"><b>Definition</b> <a href="Bottle_8cpp_source.html#l00336">Bottle.cpp:336</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_ab4c9755e05f65d8c89d9b406bb3da64d"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#ab4c9755e05f65d8c89d9b406bb3da64d">yarp::os::Bottle::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Empties the bottle of any objects it contains.</div><div class="ttdef"><b>Definition</b> <a href="Bottle_8cpp_source.html#l00121">Bottle.cpp:121</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_ac5ff63ea20f6c877e5c4541121f98482"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#ac5ff63ea20f6c877e5c4541121f98482">yarp::os::Bottle::addInt32</a></div><div class="ttdeci">void addInt32(std::int32_t x)</div><div class="ttdoc">Places a 32-bit integer in the bottle, at the end of the list.</div><div class="ttdef"><b>Definition</b> <a href="Bottle_8cpp_source.html#l00140">Bottle.cpp:140</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1BufferedPort_html"><div class="ttname"><a href="classyarp_1_1os_1_1BufferedPort.html">yarp::os::BufferedPort</a></div><div class="ttdoc">A mini-server for performing network communication in the background.</div><div class="ttdef"><b>Definition</b> <a href="BufferedPort_8h_source.html#l00059">BufferedPort.h:60</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Log_html_a1de7735583572abed6178c3bd4b72e06"><div class="ttname"><a href="classyarp_1_1os_1_1Log.html#a1de7735583572abed6178c3bd4b72e06">yarp::os::Log::printCallback</a></div><div class="ttdeci">static LogCallback printCallback()</div><div class="ttdoc">Get current print callback.</div><div class="ttdef"><b>Definition</b> <a href="Log_8cpp_source.html#l00873">Log.cpp:873</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Log_html_a4af3169c483a9d7ac43522437034e813"><div class="ttname"><a href="classyarp_1_1os_1_1Log.html#a4af3169c483a9d7ac43522437034e813">yarp::os::Log::minimumPrintLevel</a></div><div class="ttdeci">static LogType minimumPrintLevel()</div><div class="ttdoc">Get current minimum print level.</div><div class="ttdef"><b>Definition</b> <a href="Log_8cpp_source.html#l00833">Log.cpp:833</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Log_html_aa16b46ff27fe977029d4830eb3fc3453a17b88e418da2ad6f0972cc4ba968f00c"><div class="ttname"><a href="classyarp_1_1os_1_1Log.html#aa16b46ff27fe977029d4830eb3fc3453a17b88e418da2ad6f0972cc4ba968f00c">yarp::os::Log::LogTypeReserved</a></div><div class="ttdeci">@ LogTypeReserved</div><div class="ttdef"><b>Definition</b> <a href="Log_8h_source.html#l00099">Log.h:98</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a></div><div class="ttdoc">A class for storing options and configuration information.</div><div class="ttdef"><b>Definition</b> <a href="Property_8h_source.html#l00030">Property.h:33</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html_a01b2c87730d92ac79189a139874b8f32"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html#a01b2c87730d92ac79189a139874b8f32">yarp::os::Property::find</a></div><div class="ttdeci">Value &amp; find(const std::string &amp;key) const override</div><div class="ttdoc">Gets a value corresponding to a given keyword.</div><div class="ttdef"><b>Definition</b> <a href="Property_8cpp_source.html#l01041">Property.cpp:1041</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Things_html"><div class="ttname"><a href="classyarp_1_1os_1_1Things.html">yarp::os::Things</a></div><div class="ttdoc">Base class for generic things.</div><div class="ttdef"><b>Definition</b> <a href="Things_8h_source.html#l00017">Things.h:18</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Things_html_af1dfba477718fd3df0d74b21fc536a11"><div class="ttname"><a href="classyarp_1_1os_1_1Things.html#af1dfba477718fd3df0d74b21fc536a11">yarp::os::Things::cast_as</a></div><div class="ttdeci">T * cast_as()</div><div class="ttdef"><b>Definition</b> <a href="Things_8h_source.html#l00053">Things.h:53</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Things_html_af7256b90b3b06dbd148e17787ea150b2"><div class="ttname"><a href="classyarp_1_1os_1_1Things.html#af7256b90b3b06dbd148e17787ea150b2">yarp::os::Things::setPortWriter</a></div><div class="ttdeci">void setPortWriter(yarp::os::PortWriter *writer)</div><div class="ttdoc">Set the reference to a PortWriter object.</div><div class="ttdef"><b>Definition</b> <a href="Things_8cpp_source.html#l00026">Things.cpp:26</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a></div><div class="ttdoc">A single value (typically within a Bottle).</div><div class="ttdef"><b>Definition</b> <a href="Value_8h_source.html#l00042">Value.h:43</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a3f49bd86a14537ca63f59297513e80eb"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a3f49bd86a14537ca63f59297513e80eb">yarp::os::Value::asBool</a></div><div class="ttdeci">virtual bool asBool() const</div><div class="ttdoc">Get boolean value.</div><div class="ttdef"><b>Definition</b> <a href="Value_8cpp_source.html#l00186">Value.cpp:186</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_af2125ceb5eb007b6cd6ab77666682117"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">yarp::os::Value::asString</a></div><div class="ttdeci">virtual std::string asString() const</div><div class="ttdoc">Get string value.</div><div class="ttdef"><b>Definition</b> <a href="Value_8cpp_source.html#l00234">Value.cpp:234</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1FlexImage_html_a94d328b7253d0c1a264a1d38a89041d7"><div class="ttname"><a href="classyarp_1_1sig_1_1FlexImage.html#a94d328b7253d0c1a264a1d38a89041d7">yarp::sig::FlexImage::setPixelCode</a></div><div class="ttdeci">void setPixelCode(int imgPixelCode)</div><div class="ttdef"><b>Definition</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00377">Image.h:377</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1FlexImage_html_aedf1bba9ddcbdb1b4a6ef3aa321fa061"><div class="ttname"><a href="classyarp_1_1sig_1_1FlexImage.html#aedf1bba9ddcbdb1b4a6ef3aa321fa061">yarp::sig::FlexImage::setPixelSize</a></div><div class="ttdeci">void setPixelSize(size_t imgPixelSize)</div><div class="ttdef"><b>Definition</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00382">Image.h:382</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html">yarp::sig::Image</a></div><div class="ttdoc">Base class for storing images.</div><div class="ttdef"><b>Definition</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00079">Image.h:79</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_a27a6819365e6aaae8c89e401ca9f5475"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#a27a6819365e6aaae8c89e401ca9f5475">yarp::sig::Image::width</a></div><div class="ttdeci">size_t width() const</div><div class="ttdoc">Gets width of image in pixels.</div><div class="ttdef"><b>Definition</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00163">Image.h:163</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_a572b18b78003ec8895465094eecab73f"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#a572b18b78003ec8895465094eecab73f">yarp::sig::Image::getRowSize</a></div><div class="ttdeci">size_t getRowSize() const</div><div class="ttdoc">Size of the underlying image buffer rows.</div><div class="ttdef"><b>Definition</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00189">Image.h:189</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_a581675815272442f61670c023115ec77"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#a581675815272442f61670c023115ec77">yarp::sig::Image::getRawImage</a></div><div class="ttdeci">unsigned char * getRawImage() const</div><div class="ttdoc">Access to the internal image buffer.</div><div class="ttdef"><b>Definition</b> <a href="Image_8cpp_source.html#l00542">Image.cpp:542</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_a67454e32db13eace0407f962b17ea19c"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#a67454e32db13eace0407f962b17ea19c">yarp::sig::Image::getPixelSize</a></div><div class="ttdeci">virtual size_t getPixelSize() const</div><div class="ttdoc">Gets pixel size in memory in bytes.</div><div class="ttdef"><b>Definition</b> <a href="Image_8cpp_source.html#l00436">Image.cpp:436</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_a973864b80bf12a2f1575234d8d64fc37"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#a973864b80bf12a2f1575234d8d64fc37">yarp::sig::Image::resize</a></div><div class="ttdeci">void resize(size_t imgWidth, size_t imgHeight)</div><div class="ttdoc">Reallocate an image to be of a desired size, throwing away its current contents.</div><div class="ttdef"><b>Definition</b> <a href="Image_8cpp_source.html#l00453">Image.cpp:453</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_ab43564f91395e59e84707845f4328e98"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#ab43564f91395e59e84707845f4328e98">yarp::sig::Image::zero</a></div><div class="ttdeci">void zero()</div><div class="ttdoc">Set all pixels to 0.</div><div class="ttdef"><b>Definition</b> <a href="Image_8cpp_source.html#l00446">Image.cpp:446</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_ac5ceeddf1a947a79fae87c089f33745f"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#ac5ceeddf1a947a79fae87c089f33745f">yarp::sig::Image::height</a></div><div class="ttdeci">size_t height() const</div><div class="ttdoc">Gets height of image in pixels.</div><div class="ttdef"><b>Definition</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00169">Image.h:169</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_ad18cd8fe7ce79d52901316c93e09d396"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#ad18cd8fe7ce79d52901316c93e09d396">yarp::sig::Image::getPixelCode</a></div><div class="ttdeci">virtual int getPixelCode() const</div><div class="ttdoc">Gets pixel type identifier.</div><div class="ttdef"><b>Definition</b> <a href="Image_8cpp_source.html#l00441">Image.cpp:441</a></div></div>
<div class="ttc" id="aconstants_8h_html"><div class="ttname"><a href="constants_8h.html">constants.h</a></div><div class="ttdoc">File containing constans used in FfmpegPortmonitor.cpp.</div></div>
<div class="ttc" id="aconstants_8h_html_a0810904221a48210c01b13d52c135c95"><div class="ttname"><a href="constants_8h.html#a0810904221a48210c01b13d52c135c95">FFMPEGPORTMONITOR_IGNORE_PARAMS</a></div><div class="ttdeci">static const std::vector&lt; std::string &gt; FFMPEGPORTMONITOR_IGNORE_PARAMS</div><div class="ttdoc">This vector contains all parameters that have to be ignored while parsing command line string.</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00034">constants.h:34</a></div></div>
<div class="ttc" id="aconstants_8h_html_a0ec5787d99e66098771f99c0db9cfc5b"><div class="ttname"><a href="constants_8h.html#a0ec5787d99e66098771f99c0db9cfc5b">FFMPEGPORTMONITOR_CL_CODEC_KEY</a></div><div class="ttdeci">static const std::string FFMPEGPORTMONITOR_CL_CODEC_KEY</div><div class="ttdoc">This string is the &quot;key&quot; value for the codec parameter.</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00048">constants.h:48</a></div></div>
<div class="ttc" id="aconstants_8h_html_a17efa08234b70443d9744838180cc945"><div class="ttname"><a href="constants_8h.html#a17efa08234b70443d9744838180cc945">FFMPEGPORTMONITOR_CODECPIXELMAP</a></div><div class="ttdeci">static std::map&lt; int, int &gt; FFMPEGPORTMONITOR_CODECPIXELMAP</div><div class="ttdoc">This structure maps Ffmpeg video codecs with their needed Ffmpeg pixel format code.</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00086">constants.h:86</a></div></div>
<div class="ttc" id="aconstants_8h_html_a4a09bbbda96d0a49f1449439e2e2bbb4"><div class="ttname"><a href="constants_8h.html#a4a09bbbda96d0a49f1449439e2e2bbb4">FFMPEGPORTMONITOR_CL_CODECS</a></div><div class="ttdeci">static const std::vector&lt; std::string &gt; FFMPEGPORTMONITOR_CL_CODECS</div><div class="ttdoc">This vector contains the only accepted values for the command line parameter &quot;codec&quot;.</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00054">constants.h:54</a></div></div>
<div class="ttc" id="aconstants_8h_html_a5c12ed8df1467187b428314c3495b295"><div class="ttname"><a href="constants_8h.html#a5c12ed8df1467187b428314c3495b295">FFMPEGPORTMONITOR_PIXELMAP</a></div><div class="ttdeci">static std::map&lt; int, int &gt; FFMPEGPORTMONITOR_PIXELMAP</div><div class="ttdoc">This structure maps YARP pixel format codec into Ffmpeg pixel format codes.</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00074">constants.h:74</a></div></div>
<div class="ttc" id="aconstants_8h_html_aa1f4c4efce9f1be021e225ce89affbed"><div class="ttname"><a href="constants_8h.html#aa1f4c4efce9f1be021e225ce89affbed">FFMPEGPORTMONITOR_CODE_CODECS</a></div><div class="ttdeci">static const std::vector&lt; int &gt; FFMPEGPORTMONITOR_CODE_CODECS</div><div class="ttdoc">This vector contains the codec ids corresponding to the codecs of the FFMPEGPORTMONITOR_CL_CODECS vec...</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00064">constants.h:64</a></div></div>
<div class="ttc" id="affmpegPortmonitor_8cpp_html_af8f3d95f510dbd3d062913127505a7f0"><div class="ttname"><a href="ffmpegPortmonitor_8cpp.html#af8f3d95f510dbd3d062913127505a7f0">split</a></div><div class="ttdeci">void split(const std::string &amp;s, char delim, std::vector&lt; std::string &gt; &amp;elements)</div><div class="ttdoc">This function simply splits a string into a vector of strings basing on a delimiter character.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00058">ffmpegPortmonitor.cpp:58</a></div></div>
<div class="ttc" id="affmpegPortmonitor_8h_html"><div class="ttname"><a href="ffmpegPortmonitor_8h.html">ffmpegPortmonitor.h</a></div><div class="ttdoc">Header file of FfmpegPortmonitor: a port monitor for video compression/decompression.</div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html">LogComponent.h</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a224fd66c5d833ba0367a2ed54bcc279a"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a></div><div class="ttdeci">#define yCError(component,...)</div><div class="ttdef"><b>Definition</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00213">LogComponent.h:213</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a3ffb0d629a2cfebb6abdc73e93a11bce"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a></div><div class="ttdeci">#define yCTrace(component,...)</div><div class="ttdef"><b>Definition</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00084">LogComponent.h:84</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a86dd8a06be6e589f92112c953c8f8009"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a86dd8a06be6e589f92112c953c8f8009">YARP_LOG_COMPONENT</a></div><div class="ttdeci">#define YARP_LOG_COMPONENT(name,...)</div><div class="ttdef"><b>Definition</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00076">LogComponent.h:76</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2all_8h_html"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2all_8h.html">all.h</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_html"><div class="ttname"><a href="namespaceyarp_1_1os.html">yarp::os</a></div><div class="ttdoc">An interface to the operating system, including Port based communication.</div><div class="ttdef"><b>Definition</b> <a href="AbstractCarrier_8h_source.html#l00013">AbstractCarrier.h:13</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1sig_html"><div class="ttname"><a href="namespaceyarp_1_1sig.html">yarp::sig</a></div><div class="ttdef"><b>Definition</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00018">Image.h:18</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.9.1</span></li>
    <li class="navelem"><a class="el" href="dir_d946d32291de7db32f6a943fb45d46f4.html">src</a></li><li class="navelem"><a class="el" href="dir_ed56939134dbd2b7345279494eb57894.html">portmonitors</a></li><li class="navelem"><a class="el" href="dir_53cdc3d2d5aa5349dc4cfaa6465357e0.html">image_compression_ffmpeg</a></li><li class="navelem"><a class="el" href="ffmpegPortmonitor_8cpp.html">ffmpegPortmonitor.cpp</a></li>
    <li class="footer">Generated on Wed Nov 13 2024 03:00:52 for YARP by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
