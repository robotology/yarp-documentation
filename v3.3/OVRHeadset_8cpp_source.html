<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: src/devices/ovrheadset/OVRHeadset.cpp Source File</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.3.3' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('OVRHeadset_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">OVRHeadset.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="OVRHeadset_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2006-2020 Istituto Italiano di Tecnologia (IIT)</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This library is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This library is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with this library; if not, write to the Free Software</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a525335710b53cb064ca56b936120431e">   19</a></span>&#160;<span class="preprocessor">#define _USE_MATH_DEFINES</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OVRHeadset_8h.html">OVRHeadset.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InputCallback_8h.html">InputCallback.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TextureBuffer_8h.html">TextureBuffer.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TextureStatic_8h.html">TextureStatic.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TextureBattery_8h.html">TextureBattery.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GLDebug_8h.html">GLDebug.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="img-yarp-robot-64_8h.html">img-yarp-robot-64.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="img-crosshairs_8h.html">img-crosshairs.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="BufferedPort_8h.html">yarp/os/BufferedPort.h</a>&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="LogStream_8h.html">yarp/os/LogStream.h</a>&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Network_8h.html">yarp/os/Network.h</a>&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Stamp_8h.html">yarp/os/Stamp.h</a>&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="libYARP__os_2src_2yarp_2os_2Time_8h.html">yarp/os/Time.h</a>&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html">yarp/sig/Image.h</a>&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Property_8h.html">yarp/os/Property.h</a>&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="SystemClock_8h.html">yarp/os/SystemClock.h</a>&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="FrameTransform_8h.html">yarp/math/FrameTransform.h</a>&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;mutex&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;OVR_CAPI_Util.h&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;OVR_Math.h&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#if defined(_WIN32)</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;dxgi.h&gt;</span> <span class="comment">// for GetDefaultAdapterLuid</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#pragma comment(lib, &quot;dxgi.lib&quot;)</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a59293596d499b1d2109f5915e91f1477">   51</a></span>&#160;<a class="code" href="compiler_8h.html#a510840f0a75925f060a695c42d37740c">YARP_CONSTEXPR</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="OVRHeadset_8cpp.html#a59293596d499b1d2109f5915e91f1477">AXIS_COUNT</a>   = 8;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a3ae16d5e5129ee0fdd1a7e6a78f5a672">   52</a></span>&#160;<a class="code" href="compiler_8h.html#a510840f0a75925f060a695c42d37740c">YARP_CONSTEXPR</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="OVRHeadset_8cpp.html#a3ae16d5e5129ee0fdd1a7e6a78f5a672">STICK_COUNT</a>  = 2;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a7848050558c867a8e1954e67b433c445">   53</a></span>&#160;<a class="code" href="compiler_8h.html#a510840f0a75925f060a695c42d37740c">YARP_CONSTEXPR</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="OVRHeadset_8cpp.html#a7848050558c867a8e1954e67b433c445">BUTTON_COUNT</a> = 13;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#if defined(_WIN32)</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor"> #define GLFW_EXPOSE_NATIVE_WIN32</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor"> #define GLFW_EXPOSE_NATIVE_WGL</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor"> #define OVR_OS_WIN32</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#elif defined(__APPLE__)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor"> #define GLFW_EXPOSE_NATIVE_COCOA</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor"> #define GLFW_EXPOSE_NATIVE_NSGL</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor"> #define OVR_OS_MAC</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#elif defined(__linux__)</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor"> #define GLFW_EXPOSE_NATIVE_X11</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor"> #define GLFW_EXPOSE_NATIVE_GLX</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor"> #define OVR_OS_LINUX</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &lt;GLFW/glfw3.h&gt;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &lt;GLFW/glfw3native.h&gt;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &lt;OVR_System.h&gt;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &lt;OVR_CAPI_GL.h&gt;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#ifdef check</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// Undefine the check macro in AssertMacros.h on OSX or the &quot;cfg.check&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">// call will fail compiling.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#undef check</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#ad1a581785202df3a73af4fa24095fedc">   81</a></span>&#160;<span class="keyword">typedef</span> bool(<a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>::*<a class="code" href="OVRHeadset_8cpp.html#ad1a581785202df3a73af4fa24095fedc">valueIsType</a>)(void) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a0be8d4eefc642a3892f0387b06b2ee7a">   82</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="classyarp_1_1os_1_1BufferedPort.html">yarp::os::BufferedPort&lt;yarp::sig::FlexImage&gt;</a> <a class="code" href="OVRHeadset_8cpp.html#a0be8d4eefc642a3892f0387b06b2ee7a">FlexImagePort</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="structguiParam.html">   83</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structguiParam.html">guiParam</a></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structguiParam.html#a470623167f18675b4e4a61cb7dbfe601">   85</a></span>&#160;    <span class="keywordtype">double</span>         <a class="code" href="structguiParam.html#a470623167f18675b4e4a61cb7dbfe601">resizeW</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="structguiParam.html#a0d1240c11c9d854229e0ee61d86223fa">   86</a></span>&#160;    <span class="keywordtype">double</span>         <a class="code" href="structguiParam.html#a0d1240c11c9d854229e0ee61d86223fa">resizeH</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="structguiParam.html#a0470e92f5403e86495fa739dd6ab0b68">   87</a></span>&#160;    <span class="keywordtype">double</span>         <a class="code" href="structguiParam.html#a0470e92f5403e86495fa739dd6ab0b68">x</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structguiParam.html#aba9ba9e8478c9d05b7c4910996c17f3b">   88</a></span>&#160;    <span class="keywordtype">double</span>         <a class="code" href="structguiParam.html#aba9ba9e8478c9d05b7c4910996c17f3b">y</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="structguiParam.html#abd6bf09fe1eb38b20127c93497dd1263">   89</a></span>&#160;    <span class="keywordtype">double</span>         <a class="code" href="structguiParam.html#abd6bf09fe1eb38b20127c93497dd1263">z</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="structguiParam.html#a10bb8f1fd56cdfacb8a04038243d334a">   90</a></span>&#160;    <span class="keywordtype">double</span>         <a class="code" href="structguiParam.html#a10bb8f1fd56cdfacb8a04038243d334a">alpha</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="structguiParam.html#a3f9992692699080e01da7d0b161d7dc3">   91</a></span>&#160;    <a class="code" href="classyarp_1_1os_1_1BufferedPort.html">FlexImagePort</a>* <a class="code" href="structguiParam.html#a3f9992692699080e01da7d0b161d7dc3">port</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="structguiParam.html#a7db0404c5b3d158183da7d15d115f4f5">   92</a></span>&#160;    ovrLayerQuad   <a class="code" href="structguiParam.html#a7db0404c5b3d158183da7d15d115f4f5">layer</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="structguiParam.html#aca8a3eadf878c0a3b079d13270256cf7">   93</a></span>&#160;    <a class="code" href="classTextureBuffer.html">TextureBuffer</a>*  <a class="code" href="structguiParam.html#aca8a3eadf878c0a3b079d13270256cf7">texture</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;};</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">//----------------[utilities]</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">//WARNING it makes a conversion of the coordinate system</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a3df6f1622850f59c84ca447a778c8580">   97</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a> <a class="code" href="OVRHeadset_8cpp.html#a3df6f1622850f59c84ca447a778c8580">ovrVec3ToYarp</a>(<span class="keyword">const</span> ovrVector3f&amp; v)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>(3);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>[0] = -v.z;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>[1] = -v.x;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>[2] =  v.y;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">//WARNING it makes a conversion of the coordinate system</span></div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#af68493faa48a0c27688cf95372e3ee90">  109</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a> <a class="code" href="OVRHeadset_8cpp.html#af68493faa48a0c27688cf95372e3ee90">ovrRot2YarpRPY</a>(<span class="keyword">const</span> OVR::Quatf&amp; rot)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">float</span> yaw, pitch, roll;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a> v(3);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    rot.GetEulerAngles&lt;OVR::Axis_Y, OVR::Axis_X, OVR::Axis_Z&gt;(&amp;yaw, &amp;pitch, &amp;roll);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    v[0] = -roll; v[1] = -pitch; v[2] = yaw;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> v;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a8a32fc208dc0915fec9c0ed75c9bf457">  120</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="classyarp_1_1sig_1_1Matrix.html">yarp::sig::Matrix</a> <a class="code" href="OVRHeadset_8cpp.html#a8a32fc208dc0915fec9c0ed75c9bf457">ovr2matrix</a>(<span class="keyword">const</span> ovrVector3f&amp; pos, <span class="keyword">const</span> OVR::Quatf&amp; orientation)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;{</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="classyarp_1_1sig_1_1Matrix.html">yarp::sig::Matrix</a> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>  = <a class="code" href="namespaceyarp_1_1math.html#a71b54571a34f67f993a2e0fe30a56856">yarp::math::rpy2dcm</a>(<a class="code" href="OVRHeadset_8cpp.html#af68493faa48a0c27688cf95372e3ee90">ovrRot2YarpRPY</a>(orientation));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>.setSubcol(<a class="code" href="OVRHeadset_8cpp.html#a3df6f1622850f59c84ca447a778c8580">ovrVec3ToYarp</a>(pos), 0, 3);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a0f4eac70be345a455ced3d11db42c1be">  129</a></span>&#160;<span class="keyword">inline</span> ovrVector3f <a class="code" href="OVRHeadset_8cpp.html#a0f4eac70be345a455ced3d11db42c1be">vecSubtract</a>(<span class="keyword">const</span> ovrVector3f&amp; a, <span class="keyword">const</span> ovrVector3f&amp; b)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    ovrVector3f <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>.x = a.x - b.x;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>.y = a.y - b.y;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>.z = a.z - b.z;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a4d5466b734bf37bf7617dfe8eff87507">  138</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="OVRHeadset_8cpp.html#a4d5466b734bf37bf7617dfe8eff87507">debugTangent</a>(std::string message, <span class="keywordtype">float</span> tangent1, <span class="keywordtype">float</span> tangent2)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>((message + <span class="stringliteral">&quot;    %10f (%5f[rad] = %5f[deg])        %10f (%5f[rad] = %5f[deg])\n&quot;</span>).c_str(),</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        tangent1,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        atan(tangent1),</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        OVR::RadToDegree(atan(tangent1)),</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        tangent2,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        atan(tangent2),</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        OVR::RadToDegree(atan(tangent2)));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a28ebbd80b79fee3b36693da753345b45">  148</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OVRHeadset_8cpp.html#a28ebbd80b79fee3b36693da753345b45">debugFov</a>(<span class="keyword">const</span> ovrFovPort fov[2]) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;             Left Eye                                           Right Eye\n&quot;</span>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="OVRHeadset_8cpp.html#a4d5466b734bf37bf7617dfe8eff87507">debugTangent</a>(<span class="stringliteral">&quot;LeftTan&quot;</span>,  fov[0].LeftTan , fov[0].LeftTan);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="OVRHeadset_8cpp.html#a4d5466b734bf37bf7617dfe8eff87507">debugTangent</a>(<span class="stringliteral">&quot;RightTan&quot;</span>, fov[0].RightTan, fov[0].RightTan);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="OVRHeadset_8cpp.html#a4d5466b734bf37bf7617dfe8eff87507">debugTangent</a>(<span class="stringliteral">&quot;UpTan&quot;</span>,    fov[0].UpTan   , fov[0].UpTan   );</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="OVRHeadset_8cpp.html#a4d5466b734bf37bf7617dfe8eff87507">debugTangent</a>(<span class="stringliteral">&quot;DownTan&quot;</span>,  fov[0].DownTan , fov[0].DownTan );</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;\n\n\n&quot;</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a6fa0db6383a97c067435e3b5a9492a02">  157</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="OVRHeadset_8cpp.html#a6fa0db6383a97c067435e3b5a9492a02">compareLuid</a>(<span class="keyword">const</span> ovrGraphicsLuid&amp; lhs, <span class="keyword">const</span> ovrGraphicsLuid&amp; rhs)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> memcmp(&amp;lhs, &amp;rhs, <span class="keyword">sizeof</span>(ovrGraphicsLuid));</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#aeddc5f52b166e572e17ee6a932a14e3e">  162</a></span>&#160;<span class="keyword">static</span> ovrGraphicsLuid <a class="code" href="OVRHeadset_8cpp.html#aeddc5f52b166e572e17ee6a932a14e3e">GetDefaultAdapterLuid</a>()</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;{</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    ovrGraphicsLuid luid = ovrGraphicsLuid();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#if defined(_WIN32)</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    IDXGIFactory* factory = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (SUCCEEDED(CreateDXGIFactory(IID_PPV_ARGS(&amp;factory))))</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        IDXGIAdapter* adapter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span> (SUCCEEDED(factory-&gt;EnumAdapters(0, &amp;adapter)))</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            DXGI_ADAPTER_DESC desc;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            adapter-&gt;GetDesc(&amp;desc);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            memcpy(&amp;luid, &amp;desc.AdapterLuid, <span class="keyword">sizeof</span>(luid));</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            adapter-&gt;Release();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        factory-&gt;Release();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> luid;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">  189</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(<a class="code" href="classyarp_1_1os_1_1BufferedPort.html">yarp::os::BufferedPort&lt;yarp::os::Bottle&gt;</a>*<span class="keyword">const</span> &amp; port, <span class="keyword">const</span> OVR::Vector3f&amp; vec3, <a class="code" href="classyarp_1_1os_1_1Stamp.html">yarp::os::Stamp</a>&amp; stamp)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (port || port-&gt;<a class="code" href="classyarp_1_1os_1_1BufferedPort.html#aeda71e41212d06a9f08efa28e3f27233">getOutputCount</a>() &gt; 0)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a>&amp; output = port-&gt;<a class="code" href="classyarp_1_1os_1_1BufferedPort.html#af79f22ea0a51e1e6262a13ed83227b66">prepare</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        output.<a class="code" href="classyarp_1_1os_1_1Bottle.html#ab4c9755e05f65d8c89d9b406bb3da64d">clear</a>();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        output.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a6159dafcf3acdadec8dc7336451c9a20">addFloat64</a>(vec3.x);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        output.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a6159dafcf3acdadec8dc7336451c9a20">addFloat64</a>(vec3.y);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        output.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a6159dafcf3acdadec8dc7336451c9a20">addFloat64</a>(vec3.z);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        port-&gt;<a class="code" href="classyarp_1_1os_1_1BufferedPort.html#a6cea630ef774d9184cfc7cc481e6abbb">setEnvelope</a>(stamp);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        port-&gt;<a class="code" href="classyarp_1_1os_1_1BufferedPort.html#af24f1371b310763572aa7f22459fd71d">write</a>();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#a1141fc39c690c1c6316e05669f775a09">  203</a></span>&#160;<span class="keyword">inline</span> OVR::Vector3f <a class="code" href="OVRHeadset_8cpp.html#a1141fc39c690c1c6316e05669f775a09">radToDeg</a>(<span class="keyword">const</span> OVR::Vector3f&amp; v)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    OVR::Vector3f <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>.x = OVR::RadToDegree(v.x);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>.y = OVR::RadToDegree(v.y);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>.z = OVR::RadToDegree(v.z);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#aa445caa57666433c43d084de62ff47d2">  214</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="OVRHeadset_8cpp.html#aa445caa57666433c43d084de62ff47d2">setHeadLockedLayer</a>(ovrLayerQuad&amp; layer, <a class="code" href="classTextureStatic.html">TextureStatic</a>* tex,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">float</span> x,     <span class="keyword">const</span> <span class="keywordtype">float</span> y,  <span class="keyword">const</span> <span class="keywordtype">float</span> z, <span class="comment">//position</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">float</span> rx,    <span class="keyword">const</span> <span class="keywordtype">float</span> ry, <span class="keyword">const</span> <span class="keywordtype">float</span> rz, <span class="keywordtype">float</span> rw, <span class="comment">//rotation</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">float</span> sizeX, <span class="keyword">const</span> <span class="keywordtype">float</span> sizeY)<span class="comment">//scale</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    layer.Header.Type                  = ovrLayerType_Quad;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    layer.Header.Flags                 = ovrLayerFlag_HeadLocked;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    layer.ColorTexture                 = tex-&gt;<a class="code" href="classTextureStatic.html#aab51acdcceaa0dbeb32dd95baed76a3f">textureSwapChain</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    layer.QuadPoseCenter.Position.x    = x;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    layer.QuadPoseCenter.Position.y    = y;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    layer.QuadPoseCenter.Position.z    = z;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    layer.QuadPoseCenter.Orientation.x = rx;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    layer.QuadPoseCenter.Orientation.y = ry;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    layer.QuadPoseCenter.Orientation.z = rz;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    layer.QuadPoseCenter.Orientation.w = rw;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    layer.QuadSize.x                   = sizeX;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    layer.QuadSize.y                   = sizeY;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    layer.Viewport = OVR::Recti(0, 0, tex-&gt;<a class="code" href="classTextureStatic.html#abec685cae5c2135c7e59c67097928b02">width</a>, tex-&gt;<a class="code" href="classTextureStatic.html#afaa4f3648389ec2b5681ff7f54ecf858">height</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="OVRHeadset_8cpp.html#ac2c6e66acb010b5c11bea56c771b6cca">  235</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="OVRHeadset_8cpp.html#aa445caa57666433c43d084de62ff47d2">setHeadLockedLayer</a>(ovrLayerQuad&amp; layer, <a class="code" href="classTextureBuffer.html">TextureBuffer</a>* tex,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> x, <span class="keyword">const</span> <span class="keywordtype">float</span> y, <span class="keyword">const</span> <span class="keywordtype">float</span> z, <span class="comment">//position</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> rx, <span class="keyword">const</span> <span class="keywordtype">float</span> ry, <span class="keyword">const</span> <span class="keywordtype">float</span> rz, <span class="keywordtype">float</span> rw, <span class="comment">//rotation</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> sizeX, <span class="keyword">const</span> <span class="keywordtype">float</span> sizeY)<span class="comment">//scale</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    layer.Header.Type = ovrLayerType_Quad;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    layer.Header.Flags = ovrLayerFlag_HeadLocked;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    layer.ColorTexture = tex-&gt;<a class="code" href="classTextureBuffer.html#a4a58956947b7f2fd42fa64046687e097">textureSwapChain</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    layer.QuadPoseCenter.Position.x = x;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    layer.QuadPoseCenter.Position.y = y;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    layer.QuadPoseCenter.Position.z = z;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    layer.QuadPoseCenter.Orientation.x = rx;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    layer.QuadPoseCenter.Orientation.y = ry;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    layer.QuadPoseCenter.Orientation.z = rz;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    layer.QuadPoseCenter.Orientation.w = rw;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    layer.QuadSize.x = sizeX;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    layer.QuadSize.y = sizeY;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    layer.Viewport = OVR::Recti(0, 0, tex-&gt;<a class="code" href="classTextureBuffer.html#a22bc30e42d5e3d56f8a5a155c91a5b76">width</a>, tex-&gt;<a class="code" href="classTextureBuffer.html#a592e74178bc177c6f774305c6ea4490a">height</a>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">//----------------end [utilities]</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#ac66525e004360fbc0e81d4628c55a2ef">  258</a></span>&#160;<a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#ac66525e004360fbc0e81d4628c55a2ef">yarp::dev::OVRHeadset::OVRHeadset</a>() :</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="namespaceyarp.html">yarp</a>::dev::<a class="code" href="classyarp_1_1dev_1_1DeviceDriver.html">DeviceDriver</a>(),</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="namespaceyarp.html">yarp</a>::os::PeriodicThread(0.011, <a class="code" href="namespaceyarp.html">yarp</a>::os::<a class="code" href="namespaceyarp_1_1os.html#ad34742716afe2bd0d87a5c5d06ad25d0">ShouldUseSystemClock</a>::Yes) <span class="comment">// ~90 fps</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a975b251eaf2e470451d1a785ad1207c4">  264</a></span>&#160;<a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a975b251eaf2e470451d1a785ad1207c4">yarp::dev::OVRHeadset::~OVRHeadset</a>()</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::fillAxisStorage()</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    axisIdToValue.push_back(inputState.IndexTrigger);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    axisIdToValue.push_back(inputState.IndexTrigger + 1);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    axisIdToValue.push_back(inputState.HandTrigger);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    axisIdToValue.push_back(inputState.HandTrigger + 1 );</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (getStickAsAxis)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        axisIdToValue.push_back(&amp;inputState.Thumbstick[ovrHand_Left].x);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        axisIdToValue.push_back(&amp;inputState.Thumbstick[ovrHand_Left].y);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        axisIdToValue.push_back(&amp;inputState.Thumbstick[ovrHand_Right].x);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        axisIdToValue.push_back(&amp;inputState.Thumbstick[ovrHand_Right].y);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::fillErrorStorage()</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    error_messages[ovrError_MemoryAllocationFailure       ] = <span class="stringliteral">&quot;Failure to allocate memory.&quot;</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    error_messages[ovrError_InvalidSession                ] = <span class="stringliteral">&quot;Invalid ovrSession parameter provided.&quot;</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    error_messages[ovrError_Timeout                       ] = <span class="stringliteral">&quot;The operation timed out.&quot;</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    error_messages[ovrError_NotInitialized                ] = <span class="stringliteral">&quot;The system or component has not been initialized.&quot;</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    error_messages[ovrError_InvalidParameter              ] = <span class="stringliteral">&quot;Invalid parameter provided.See error info or log for details.&quot;</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    error_messages[ovrError_ServiceError                  ] = <span class="stringliteral">&quot;Generic service error.See error info or log for details.&quot;</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    error_messages[ovrError_NoHmd                         ] = <span class="stringliteral">&quot;The given HMD doesn&#39;t exist.&quot;</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    error_messages[ovrError_Unsupported                   ] = <span class="stringliteral">&quot;Function call is not supported on this hardware / software.&quot;</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    error_messages[ovrError_DeviceUnavailable             ] = <span class="stringliteral">&quot;Specified device type isn&#39;t available.&quot;</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    error_messages[ovrError_InvalidHeadsetOrientation     ] = <span class="stringliteral">&quot;The headset was in an invalid orientation for the requested operation(e.g.vertically oriented during ovr_RecenterPose).&quot;</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    error_messages[ovrError_ClientSkippedDestroy          ] = <span class="stringliteral">&quot;The client failed to call ovr_Destroy on an active session before calling ovr_Shutdown.Or the client crashed.&quot;</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    error_messages[ovrError_ClientSkippedShutdown         ] = <span class="stringliteral">&quot;The client failed to call ovr_Shutdown or the client crashed.&quot;</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    error_messages[ovrError_ServiceDeadlockDetected       ] = <span class="stringliteral">&quot;The service watchdog discovered a deadlock.&quot;</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    error_messages[ovrError_InvalidOperation              ] = <span class="stringliteral">&quot;Function call is invalid for object&#39;s current state.&quot;</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    error_messages[ovrError_AudioDeviceNotFound           ] = <span class="stringliteral">&quot;Failure to find the specified audio device.&quot;</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    error_messages[ovrError_AudioComError                 ] = <span class="stringliteral">&quot;Generic COM error.&quot;</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    error_messages[ovrError_Initialize                    ] = <span class="stringliteral">&quot;Generic initialization error.&quot;</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    error_messages[ovrError_LibLoad                       ] = <span class="stringliteral">&quot;Couldn&#39;t load LibOVRRT.&quot;</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    error_messages[ovrError_LibVersion                    ] = <span class="stringliteral">&quot;LibOVRRT version incompatibility.&quot;</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    error_messages[ovrError_ServiceConnection             ] = <span class="stringliteral">&quot;Couldn&#39;t connect to the OVR Service.&quot;</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    error_messages[ovrError_ServiceVersion                ] = <span class="stringliteral">&quot;OVR Service version incompatibility.&quot;</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    error_messages[ovrError_IncompatibleOS                ] = <span class="stringliteral">&quot;The operating system version is incompatible.&quot;</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    error_messages[ovrError_DisplayInit                   ] = <span class="stringliteral">&quot;Unable to initialize the HMD display.&quot;</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    error_messages[ovrError_ServerStart                   ] = <span class="stringliteral">&quot;Unable to start the server.Is it already running ?&quot;</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    error_messages[ovrError_Reinitialization              ] = <span class="stringliteral">&quot;Attempting to re - initialize with a different version.&quot;</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    error_messages[ovrError_MismatchedAdapters            ] = <span class="stringliteral">&quot;Chosen rendering adapters between client and service do not match.&quot;</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    error_messages[ovrError_LeakingResources              ] = <span class="stringliteral">&quot;Calling application has leaked resources.&quot;</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    error_messages[ovrError_ClientVersion                 ] = <span class="stringliteral">&quot;Client version too old to connect to service.&quot;</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    error_messages[ovrError_OutOfDateOS                   ] = <span class="stringliteral">&quot;The operating system is out of date.&quot;</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    error_messages[ovrError_OutOfDateGfxDriver            ] = <span class="stringliteral">&quot;The graphics driver is out of date.&quot;</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    error_messages[ovrError_IncompatibleGPU               ] = <span class="stringliteral">&quot;The graphics hardware is not supported.&quot;</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    error_messages[ovrError_NoValidVRDisplaySystem        ] = <span class="stringliteral">&quot;No valid VR display system found.&quot;</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    error_messages[ovrError_Obsolete                      ] = <span class="stringliteral">&quot;Feature or API is obsolete and no longer supported.&quot;</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    error_messages[ovrError_DisabledOrDefaultAdapter      ] = <span class="stringliteral">&quot;No supported VR display system found, but disabled or driverless adapter found.&quot;</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    error_messages[ovrError_HybridGraphicsNotSupported    ] = <span class="stringliteral">&quot;The system is using hybrid graphics(Optimus, etc...), which is not support.&quot;</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    error_messages[ovrError_DisplayManagerInit            ] = <span class="stringliteral">&quot;Initialization of the DisplayManager failed.&quot;</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    error_messages[ovrError_TrackerDriverInit             ] = <span class="stringliteral">&quot;Failed to get the interface for an attached tracker.&quot;</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    error_messages[ovrError_LibSignCheck                  ] = <span class="stringliteral">&quot;LibOVRRT signature check failure.&quot;</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    error_messages[ovrError_LibPath                       ] = <span class="stringliteral">&quot;LibOVRRT path failure.&quot;</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    error_messages[ovrError_LibSymbols                    ] = <span class="stringliteral">&quot;LibOVRRT symbol resolution failure.&quot;</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    error_messages[ovrError_RemoteSession                 ] = <span class="stringliteral">&quot;Failed to connect to the service because remote connections to the service are not allowed.&quot;</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    error_messages[ovrError_DisplayLost                   ] = <span class="stringliteral">&quot;In the event of a system - wide graphics reset or cable unplug this is returned to the app.&quot;</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    error_messages[ovrError_TextureSwapChainFull          ] = <span class="stringliteral">&quot;ovr_CommitTextureSwapChain was called too many times on a texture swapchain without calling submit to use the chain.&quot;</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    error_messages[ovrError_TextureSwapChainInvalid       ] = <span class="stringliteral">&quot;The ovrTextureSwapChain is in an incomplete or inconsistent state.Ensure ovr_CommitTextureSwapChain was called at least once first.&quot;</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    error_messages[ovrError_GraphicsDeviceReset           ] = <span class="stringliteral">&quot;Graphics device has been reset(TDR, etc...)&quot;</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    error_messages[ovrError_DisplayRemoved                ] = <span class="stringliteral">&quot;HMD removed from the display adapter.&quot;</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    error_messages[ovrError_ContentProtectionNotAvailable ] = <span class="stringliteral">&quot;Content protection is not available for the display.&quot;</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    error_messages[ovrError_ApplicationInvisible          ] = <span class="stringliteral">&quot;Application declared itself as an invisible type and is not allowed to submit frames.&quot;</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    error_messages[ovrError_Disallowed                    ] = <span class="stringliteral">&quot;The given request is disallowed under the current conditions.&quot;</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    error_messages[ovrError_DisplayPluggedIncorrectly     ] = <span class="stringliteral">&quot;Display portion of HMD is plugged into an incompatible port(ex: IGP)&quot;</span>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    error_messages[ovrError_RuntimeException              ] = <span class="stringliteral">&quot;A runtime exception occurred.The application is required to shutdown LibOVR and re - initialize it before this error state will be cleared.&quot;</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    error_messages[ovrError_NoCalibration                 ] = <span class="stringliteral">&quot;Result of a missing calibration block.&quot;</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    error_messages[ovrError_OldVersion                    ] = <span class="stringliteral">&quot;Result of an old calibration block.&quot;</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    error_messages[ovrError_MisformattedBlock             ] = <span class="stringliteral">&quot;Result of a bad calibration block due to lengths.&quot;</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::fillButtonStorage()</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_A);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_B);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_RThumb);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_RShoulder);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_X);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_Y);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_LThumb);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_LShoulder);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_Enter);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_Back);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_VolUp);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_VolDown);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    buttonIdToOvrButton.push_back(ovrButton_Home);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::fillHatStorage()</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    DButtonToHat[0]               = <a class="code" href="IJoypadController_8h.html#a23a90ff010f1d3b71979b8366a853e12">YRPJOY_HAT_CENTERED</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    DButtonToHat[ovrButton_Up]    = <a class="code" href="IJoypadController_8h.html#ad58b1f44772b3dc5d7097a5d63aacee3">YRPJOY_HAT_UP</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    DButtonToHat[ovrButton_Right] = <a class="code" href="IJoypadController_8h.html#a6811631defc87d6238b693db3105a1d5">YRPJOY_HAT_RIGHT</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    DButtonToHat[ovrButton_Down]  = <a class="code" href="IJoypadController_8h.html#a21d237a390bc7b9a294981e216c4d161">YRPJOY_HAT_DOWN</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    DButtonToHat[ovrButton_Left]  = <a class="code" href="IJoypadController_8h.html#a656a30326dd0430003238a121be9b488">YRPJOY_HAT_LEFT</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a7905064f0a700c2c61da69e504049fc1">  370</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a7905064f0a700c2c61da69e504049fc1">yarp::dev::OVRHeadset::open</a>(<a class="code" href="classyarp_1_1os_1_1Searchable.html">yarp::os::Searchable</a>&amp; cfg)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;{</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keyword">typedef</span> std::vector&lt;std::pair&lt;yarp::os::BufferedPort&lt;yarp::os::Bottle&gt;**, std::string&gt; &gt; port_params;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keyword">typedef</span> std::vector&lt;std::tuple&lt;std::string, std::string, bool*, bool&gt; &gt;                 optionalParamType;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a> tfClientCfg;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    port_params        ports;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    optionalParamType  optionalParams;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    std::string        standardPortPrefix;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    standardPortPrefix = <span class="stringliteral">&quot;/oculus&quot;</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">//checking all the parameter in the configuration file..</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        constexpr <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> STRING = 0;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        constexpr <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> BOOL   = 1;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        constexpr <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> INT    = 2;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        constexpr <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DOUBLE = 3;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        std::map&lt;int, std::string&gt;                err_msgs;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        std::map&lt;int, valueIsType&gt;                isFunctionMap;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        std::vector&lt;std::pair&lt;std::string, int&gt; &gt; paramParser;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        err_msgs[STRING]      = <span class="stringliteral">&quot;a string&quot;</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        err_msgs[BOOL]        = <span class="stringliteral">&quot;a boolean type&quot;</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        err_msgs[INT]         = <span class="stringliteral">&quot;an integer type&quot;</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        err_msgs[DOUBLE]      = <span class="stringliteral">&quot;a real type&quot;</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        isFunctionMap[STRING] = &amp;<a class="code" href="classyarp_1_1os_1_1Value.html#a000b840d8fca1c09cf4f2d05e333e88a">yarp::os::Value::isString</a>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        isFunctionMap[BOOL]   = &amp;<a class="code" href="classyarp_1_1os_1_1Value.html#a25dd9800211ebfcae3a9d5da18344d9d">yarp::os::Value::isBool</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        isFunctionMap[INT]    = &amp;<a class="code" href="classyarp_1_1os_1_1Value.html#a942639c39161135049e19ebdb1eeae9a">yarp::os::Value::isInt32</a>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        isFunctionMap[DOUBLE] = &amp;<a class="code" href="classyarp_1_1os_1_1Value.html#a74fc086a15b4a57c827132841aaff88e">yarp::os::Value::isFloat64</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="comment">//to add a parameter check, simply add a line below here and let the magic happens</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;tfDevice&quot;</span>,            STRING));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;tfLocal&quot;</span>,             STRING));</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;tfRemote&quot;</span>,            STRING));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;tf_left_hand_frame&quot;</span>,  STRING));</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;tf_right_hand_frame&quot;</span>, STRING));</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;tf_root_frame&quot;</span>,       STRING));</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;stick_as_axis&quot;</span>,       BOOL));</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;gui_elements&quot;</span>,        INT));</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; p : paramParser)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="keywordflow">if</span> (!cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(p.first) || !(cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(p.first).*isFunctionMap[p.second])())</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                std::string err_type = err_msgs.find(p.second) == err_msgs.end() ? <span class="stringliteral">&quot;[unknown type]&quot;</span> : err_msgs[p.second];</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;ovrHeadset: parameter&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;not found or not&quot;</span> &lt;&lt; err_type &lt;&lt; <span class="stringliteral">&quot;in configuration file&quot;</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        guiCount = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;gui_elements&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">asInt32</a>();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        paramParser.clear();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">if</span> (guiCount)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;width&quot;</span>,  DOUBLE));</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;height&quot;</span>, DOUBLE));</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;x&quot;</span>,      DOUBLE));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;y&quot;</span>,      DOUBLE));</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;z&quot;</span>,      DOUBLE));</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            paramParser.push_back(std::make_pair(<span class="stringliteral">&quot;alpha&quot;</span>,  DOUBLE));</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; guiCount; ++i)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                std::string       groupName  = <span class="stringliteral">&quot;GUI_&quot;</span> + std::to_string(i);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <a class="code" href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a>&amp; guip       = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#ac1d084873c863c7d4bcb8ca36cf84367">findGroup</a>(groupName);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <a class="code" href="structguiParam.html">guiParam</a>          hud;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                <span class="keywordflow">if</span> (guip.<a class="code" href="classyarp_1_1os_1_1Bottle.html#ad014b5d06b10e037c462abfcf34a9e45">isNull</a>())</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;group:&quot;</span> &lt;&lt; groupName &lt;&lt; <span class="stringliteral">&quot;not found in configuration file..&quot;</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; p : paramParser)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    <span class="keywordflow">if</span> (!guip.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">check</a>(p.first) || !(guip.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(p.first).*isFunctionMap[p.second])())</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                        std::string err_type = err_msgs.find(p.second) == err_msgs.end() ? <span class="stringliteral">&quot;[unknow type]&quot;</span> : err_msgs[p.second];</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;ovrHeadset: parameter&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;not found or not&quot;</span> &lt;&lt; err_type &lt;&lt; <span class="stringliteral">&quot;in&quot;</span> &lt;&lt; groupName &lt;&lt; <span class="stringliteral">&quot;group in configuration file&quot;</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                hud.<a class="code" href="structguiParam.html#a470623167f18675b4e4a61cb7dbfe601">resizeW</a> = guip.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;width&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">asFloat64</a>();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                hud.<a class="code" href="structguiParam.html#a0d1240c11c9d854229e0ee61d86223fa">resizeH</a> = guip.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;height&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">asFloat64</a>();</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                hud.<a class="code" href="structguiParam.html#a0470e92f5403e86495fa739dd6ab0b68">x</a>       = guip.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;x&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">asFloat64</a>();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                hud.<a class="code" href="structguiParam.html#aba9ba9e8478c9d05b7c4910996c17f3b">y</a>       = guip.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;y&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">asFloat64</a>();</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                hud.<a class="code" href="structguiParam.html#abd6bf09fe1eb38b20127c93497dd1263">z</a>       = guip.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;z&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">asFloat64</a>();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                hud.<a class="code" href="structguiParam.html#a10bb8f1fd56cdfacb8a04038243d334a">alpha</a>   = guip.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;alpha&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">asFloat64</a>();</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                hud.<a class="code" href="structguiParam.html#a3f9992692699080e01da7d0b161d7dc3">port</a>    = <span class="keyword">new</span> <a class="code" href="OVRHeadset_8cpp.html#a0be8d4eefc642a3892f0387b06b2ee7a">FlexImagePort</a>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                hud.<a class="code" href="structguiParam.html#aca8a3eadf878c0a3b079d13270256cf7">texture</a> = <span class="keyword">new</span> <a class="code" href="classTextureBuffer.html">TextureBuffer</a>();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                std::transform(groupName.begin(), groupName.end(), groupName.begin(), ::tolower);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                hud.<a class="code" href="structguiParam.html#a3f9992692699080e01da7d0b161d7dc3">port</a>-&gt;<a class="code" href="classyarp_1_1os_1_1BufferedPort.html#a938b0e335554aa0e7fb1d919e51a665f">open</a>(standardPortPrefix + <span class="stringliteral">&quot;/&quot;</span> + groupName);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                huds.push_back(hud);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            guiEnabled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    getStickAsAxis = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;stick_as_axis&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a3f49bd86a14537ca63f59297513e80eb">asBool</a>();</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    left_frame     = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;tf_left_hand_frame&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    right_frame    = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;tf_right_hand_frame&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>();</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    root_frame     = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;tf_root_frame&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    relative       = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;hands_relative&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(<span class="keyword">false</span>)).asBool();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">//getting gui information from cfg</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    fillAxisStorage();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    fillButtonStorage();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    fillErrorStorage();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    fillHatStorage();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">//opening tf client</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    tfClientCfg.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;device&quot;</span>, cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;tfDevice&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>());</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    tfClientCfg.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;local&quot;</span>, cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;tfLocal&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>());</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    tfClientCfg.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;remote&quot;</span>, cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;tfRemote&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>());</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (!driver.open(tfClientCfg))</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;unable to open PolyDriver&quot;</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (!driver.view(tfPublisher) || tfPublisher == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;unable to dynamic cast device to IFrameTransform interface&quot;</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="Log_8h.html#a52c3dab24cf55da2806a5c6e5f5d3b55">yInfo</a>() &lt;&lt; <span class="stringliteral">&quot;TransformCLient successfully opened at port: &quot;</span> &lt;&lt; cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;tfLocal&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="comment">//opening ports</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    ports =</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        { &amp;orientationPort,                  <span class="stringliteral">&quot;orientation&quot;</span>                  },</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        { &amp;positionPort,                     <span class="stringliteral">&quot;position&quot;</span>                     },</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        { &amp;angularVelocityPort,              <span class="stringliteral">&quot;angularVelocity&quot;</span>              },</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        { &amp;linearVelocityPort,               <span class="stringliteral">&quot;linearVelocity&quot;</span>               },</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        { &amp;angularAccelerationPort,          <span class="stringliteral">&quot;angularAcceleration&quot;</span>          },</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        { &amp;linearAccelerationPort,           <span class="stringliteral">&quot;linearAcceleration&quot;</span>           },</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        { &amp;predictedOrientationPort,         <span class="stringliteral">&quot;predictedOrientation&quot;</span>         },</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        { &amp;predictedPositionPort,            <span class="stringliteral">&quot;predictedPosition&quot;</span>            },</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        { &amp;predictedAngularVelocityPort,     <span class="stringliteral">&quot;predictedAngularVelocity&quot;</span>     },</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        { &amp;predictedLinearVelocityPort,      <span class="stringliteral">&quot;predictedLinearVelocity&quot;</span>      },</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        { &amp;predictedAngularAccelerationPort, <span class="stringliteral">&quot;predictedAngularAcceleration&quot;</span> },</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        { &amp;predictedLinearAccelerationPort,  <span class="stringliteral">&quot;predictedLinearAcceleration&quot;</span>  }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    };</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> port : ports)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        std::string name, prefix;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordtype">bool</span>        predicted;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        *port.first = <span class="keyword">new</span> <a class="code" href="classyarp_1_1os_1_1BufferedPort.html">yarp::os::BufferedPort&lt;yarp::os::Bottle&gt;</a>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        predicted   = port.second.find(<span class="stringliteral">&quot;predicted&quot;</span>) != std::string::npos;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        prefix      = predicted ? standardPortPrefix+<span class="stringliteral">&quot;/predicted&quot;</span> : standardPortPrefix;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        name        = prefix + <span class="stringliteral">&quot;/headpose/&quot;</span> + port.second + <span class="stringliteral">&quot;:o&quot;</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">if</span> (!(*port.first)-&gt;open(name))</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;Cannot open&quot;</span> &lt;&lt; port.second &lt;&lt; <span class="stringliteral">&quot;port&quot;</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            this-&gt;close();</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        (*port.first)-&gt;setWriteOnly();</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">//eyes set-up</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = <span class="keyword">new</span> <a class="code" href="classInputCallback.html">InputCallback</a>(<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">if</span> (!displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;open(<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> == ovrEye_Left ? <span class="stringliteral">&quot;/oculus/display/left:i&quot;</span> : <span class="stringliteral">&quot;/oculus/display/right:i&quot;</span>)) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;Cannot open &quot;</span> &lt;&lt; (<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> == ovrEye_Left ? <span class="stringliteral">&quot;left&quot;</span> : <span class="stringliteral">&quot;right&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;display port&quot;</span>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            this-&gt;close();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;setReadOnly();</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    texWidth  = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;w&quot;</span>,    <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(640), <span class="stringliteral">&quot;Texture width (usually same as camera width)&quot;</span>).asInt32();</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    texHeight = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;h&quot;</span>,    <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(480), <span class="stringliteral">&quot;Texture height (usually same as camera height)&quot;</span>).asInt32();</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="comment">// TODO accept different fov for right and left eye?</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordtype">double</span> hfov   = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;hfov&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(105.),  <span class="stringliteral">&quot;Camera horizontal field of view&quot;</span>).asFloat64();</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    camHFOV[0] = hfov;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    camHFOV[1] = hfov;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">//optional params</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    optionalParams =</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        { <span class="stringliteral">&quot;flipinput&quot;</span>,     <span class="stringliteral">&quot;[F] Enable input flipping&quot;</span>,                &amp;flipInputEnabled,  <span class="keyword">true</span> },</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        { <span class="stringliteral">&quot;no-imagepose&quot;</span>,  <span class="stringliteral">&quot;[I] Disable image pose&quot;</span>,                   &amp;imagePoseEnabled,  <span class="keyword">false</span> },</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        { <span class="stringliteral">&quot;userpose&quot;</span>,      <span class="stringliteral">&quot;[U] Use user pose instead of camera pose&quot;</span>, &amp;userPoseEnabled,   <span class="keyword">true</span>  },</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        { <span class="stringliteral">&quot;no-logo&quot;</span>,       <span class="stringliteral">&quot;[L] Disable logo&quot;</span>,                         &amp;logoEnabled,       <span class="keyword">false</span> },</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        { <span class="stringliteral">&quot;no-crosshairs&quot;</span>, <span class="stringliteral">&quot;[C] Disable crosshairs&quot;</span>,                   &amp;crosshairsEnabled, <span class="keyword">false</span> },</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        { <span class="stringliteral">&quot;no-battery&quot;</span>,    <span class="stringliteral">&quot;[B] Disable battery&quot;</span>,                      &amp;batteryEnabled,    <span class="keyword">false</span> }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    };</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : optionalParams)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">if</span> (cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(std::get&lt;0&gt;(p), std::get&lt;1&gt;(p)))</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            *std::get&lt;2&gt;(p) = std::get&lt;3&gt;(p);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    prediction = cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;prediction&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(0.01), <span class="stringliteral">&quot;Prediction [sec]&quot;</span>).asFloat64();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    displayPorts[0]-&gt;rollOffset  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;left-roll-offset&quot;</span>,   <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(0.0), <span class="stringliteral">&quot;[LEFT_SHIFT+PAGE_UP][LEFT_SHIFT+PAGE_DOWN] Left eye roll offset&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    displayPorts[0]-&gt;pitchOffset = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;left-pitch-offset&quot;</span>,  <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(0.0), <span class="stringliteral">&quot;[LEFT_SHIFT+UP_ARROW][LEFT_SHIFT+DOWN_ARROW] Left eye pitch offset&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    displayPorts[0]-&gt;yawOffset   = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;left-yaw-offset&quot;</span>,    <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(0.0), <span class="stringliteral">&quot;[LEFT_SHIFT+LEFT_ARROW][LEFT_SHIFT+RIGHT_ARROW] Left eye yaw offset&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    displayPorts[1]-&gt;rollOffset  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;right-roll-offset&quot;</span>,  <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(0.0), <span class="stringliteral">&quot;[RIGHT_SHIFT+PAGE_UP][RIGHT_SHIFT+PAGE_DOWN] Right eye roll offset&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    displayPorts[1]-&gt;pitchOffset = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;right-pitch-offset&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(0.0), <span class="stringliteral">&quot;[RIGHT_SHIFT+UP_ARROW][RIGHT_SHIFT+DOWN_ARROW] Right eye pitch offset&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    displayPorts[1]-&gt;yawOffset   = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(cfg.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;right-yaw-offset&quot;</span>,   <a class="code" href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a>(0.0), <span class="stringliteral">&quot;[RIGHT_SHIFT+LEFT_ARROW][RIGHT_SHIFT+RIGHT_ARROW] Right eye yaw offset&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="comment">// Start the thread</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">if</span> (!this-&gt;start()) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;thread start failed, aborting.&quot;</span>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        this-&gt;close();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// Enable display port callbacks</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;useCallback();</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a6ba4ad45d4d58094d809f0cb99bc4ba2">  607</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a6ba4ad45d4d58094d809f0cb99bc4ba2">yarp::dev::OVRHeadset::threadInit</a>()</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    OVR::System::Init();</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// Initializes LibOVR, and the Rift</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    ovrInitParams initParams = { ovrInit_RequestVersion, OVR_MINOR_VERSION, ovrDebugCallback, <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(<span class="keyword">this</span>), 0 };</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    ovrResult r = ovr_Initialize(&amp;initParams);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">//    VALIDATE(OVR_SUCCESS(r), &quot;Failed to initialize libOVR.&quot;);</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span> (!OVR_SUCCESS(r)) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;Failed to initialize libOVR.&quot;</span>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// Detect and initialize Oculus Rift</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    ovrGraphicsLuid luid;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    ovrResult result = ovr_Create(&amp;session, &amp;luid);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span> (!OVR_SUCCESS(result)) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;Oculus Rift not detected.&quot;</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        this-&gt;close();</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="OVRHeadset_8cpp.html#a6fa0db6383a97c067435e3b5a9492a02">compareLuid</a>(luid, <a class="code" href="OVRHeadset_8cpp.html#aeddc5f52b166e572e17ee6a932a14e3e">GetDefaultAdapterLuid</a>())) <span class="comment">// If luid that the Rift is on is not the default adapter LUID...</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;OpenGL supports only the default graphics adapter.&quot;</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        this-&gt;close();</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// FIXME: Which one is better in this case?</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// ovrTrackingOrigin_FloorLevel will give tracking poses where the floor height is 0</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// ovrTrackingOrigin_EyeLevel will give tracking poses where the eye height is 0</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    ovr_SetTrackingOriginType(session, ovrTrackingOrigin_EyeLevel);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    hmdDesc = ovr_GetHmdDesc(session);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (hmdDesc.ProductName[0] == <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <a class="code" href="Log_8h.html#a74f4af60dea29713770bcde6ad428391">yWarning</a>() &lt;&lt; <span class="stringliteral">&quot;Rift detected, display not enabled.&quot;</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    DebugHmd(hmdDesc);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">// Initialize the GLFW system for creating and positioning windows</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">// GLFW must be initialized after LibOVR</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="comment">// see http://www.glfw.org/docs/latest/rift.html</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span> ( !glfwInit() ) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;Failed to initialize GLFW&quot;</span>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        this-&gt;close();</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    glfwSetErrorCallback(glfwErrorCallback);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    OVR::Sizei windowSize = hmdDesc.Resolution;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (!createWindow(windowSize.w, windowSize.h)) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;Failed to create window&quot;</span>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        this-&gt;close();</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// Initialize the GLEW OpenGL 3.x bindings</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// GLEW must be initialized after creating the window</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    glewExperimental = GL_TRUE;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    GLenum err = glewInit();</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (err != GLEW_OK) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;glewInit failed, aborting.&quot;</span>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        this-&gt;close();</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="Log_8h.html#a52c3dab24cf55da2806a5c6e5f5d3b55">yInfo</a>() &lt;&lt; <span class="stringliteral">&quot;Using GLEW&quot;</span> &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">char</span>*)glewGetString(GLEW_VERSION);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="GLDebug_8h.html#a85c59f738179d162934c1fb67d45d562">checkGlErrorMacro</a>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordtype">int</span> fbwidth, fbheight;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    glfwGetFramebufferSize(window, &amp;fbwidth, &amp;fbheight);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        camWidth[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = texWidth;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        camHeight[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = texHeight;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    reconfigureFOV();</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    reconfigureRendering();</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture = <span class="keyword">new</span> <a class="code" href="classTextureBuffer.html">TextureBuffer</a>(texWidth, texHeight, <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>, session);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    textureLogo = <span class="keyword">new</span> <a class="code" href="classTextureStatic.html">TextureStatic</a>(session, <a class="code" href="img-yarp-robot-64_8h.html#a6fac2c957ed579da1c933af1ebc2dc16">yarp_logo</a>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    textureCrosshairs = <span class="keyword">new</span> <a class="code" href="classTextureStatic.html">TextureStatic</a>(session, <a class="code" href="img-crosshairs_8h.html#a6790ae11648ed4b2696e30dcbfc34812">crosshairs</a>);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    textureBattery = <span class="keyword">new</span> <a class="code" href="classTextureBattery.html">TextureBattery</a>(session, batteryEnabled);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    ovrMirrorTextureDesc desc;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    memset(&amp;desc, 0, <span class="keyword">sizeof</span>(desc));</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    desc.Width = windowSize.w;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    desc.Height = windowSize.h;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    desc.Format = OVR_FORMAT_R8G8B8A8_UNORM_SRGB;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="comment">// Create mirror texture and an FBO used to copy mirror texture to back buffer</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    result = ovr_CreateMirrorTextureGL(session, &amp;desc, &amp;mirrorTexture);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (!OVR_SUCCESS(result))</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;Failed to create mirror texture.&quot;</span>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        this-&gt;close();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">// Configure the mirror read buffer</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    GLuint texId;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    ovr_GetMirrorTextureBufferGL(session, mirrorTexture, &amp;texId);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    glGenFramebuffers(1, &amp;mirrorFBO);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    glBindFramebuffer(GL_READ_FRAMEBUFFER, mirrorFBO);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    glFramebufferTexture2D(GL_READ_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, texId, 0);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    glFramebufferRenderbuffer(GL_READ_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, 0);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    glBindFramebuffer(GL_READ_FRAMEBUFFER, 0);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">// Recenter position</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    ovr_RecenterTrackingOrigin(session);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="GLDebug_8h.html#a85c59f738179d162934c1fb67d45d562">checkGlErrorMacro</a>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a12f4e98dc11cde9f24ddf5f22f050e2f">  732</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a12f4e98dc11cde9f24ddf5f22f050e2f">yarp::dev::OVRHeadset::threadRelease</a>()</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;{</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="comment">// Ensure that threadRelease is not called twice</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">if</span> (closed) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    closed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (mirrorFBO) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        glDeleteFramebuffers(1, &amp;mirrorFBO);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">if</span> (mirrorTexture) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        ovr_DestroyMirrorTexture(session, mirrorTexture);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (textureLogo) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keyword">delete</span> textureLogo;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        textureLogo = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">if</span> (textureCrosshairs) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keyword">delete</span> textureCrosshairs;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        textureCrosshairs = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    }</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (textureBattery) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="keyword">delete</span> textureBattery;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        textureBattery = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// Shut down GLFW</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    glfwTerminate();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="comment">// Shut down LibOVR</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">if</span> (session) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="comment">// Disable Performance Hud Mode before destroying the session,</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="comment">// or it will stay after the device is closed.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordtype">int</span> PerfHudMode = (int)ovrPerfHud_Off;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        ovr_SetInt(session, OVR_PERF_HUD_MODE, PerfHudMode);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        ovr_Destroy(session);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        session = 0;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        ovr_Shutdown();</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    std::vector&lt;yarp::os::Contactable*&gt; ports;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    ports.push_back(orientationPort);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    ports.push_back(positionPort);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    ports.push_back(angularVelocityPort);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    ports.push_back(linearVelocityPort);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    ports.push_back(angularAccelerationPort);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    ports.push_back(linearAccelerationPort);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    ports.push_back(predictedOrientationPort);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    ports.push_back(predictedPositionPort);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    ports.push_back(predictedAngularVelocityPort);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    ports.push_back(predictedLinearVelocityPort);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    ports.push_back(predictedAngularAccelerationPort);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    ports.push_back(predictedLinearAccelerationPort);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; hud : huds)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keyword">delete</span> hud.texture;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        ports.push_back(hud.port);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; p : ports)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">if</span> (p != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            p-&gt;interrupt();</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            p-&gt;close();</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keyword">delete</span> p;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            p = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">if</span> (displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]) {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;disableCallback();</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;interrupt();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;close();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <span class="keyword">delete</span> displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>];</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;}</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a1f1be75d803e990ca1c77fa07633af75">  823</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a1f1be75d803e990ca1c77fa07633af75">yarp::dev::OVRHeadset::close</a>()</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;{</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    this-&gt;askToStop();</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;}</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a1bd9461049fbe064361aa727cec75fd8">  830</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a1bd9461049fbe064361aa727cec75fd8">yarp::dev::OVRHeadset::startService</a>()</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;}</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#ad5991e2cc19472b8b1e5565a31ef5f23">  836</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#ad5991e2cc19472b8b1e5565a31ef5f23">yarp::dev::OVRHeadset::updateService</a>()</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;{</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span> (closed) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    constexpr <span class="keywordtype">double</span> <a class="code" href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">delay</a> = 60.0;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;Thread ran %d times, est period %lf[ms], used %lf[ms]&quot;</span>,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;           getIterations(),</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;           getEstimatedPeriod()*1000,</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;           getEstimatedUsed()*1000);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;Display refresh: %3.1f[hz]&quot;</span>, getIterations()/<a class="code" href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">delay</a>);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;%s eye: %3.1f[hz] - %d of %d frames missing, %d of %d frames dropped&quot;</span>,</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;               (<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> == ovrEye_Left ? <span class="stringliteral">&quot;Left &quot;</span> : <span class="stringliteral">&quot;Right&quot;</span>),</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;               (getIterations() - displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;missingFrames) / <a class="code" href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">delay</a>,</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;               displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;missingFrames,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;               getIterations(),</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;               displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;droppedFrames,</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;               getIterations());</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;missingFrames = 0;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        getIterations(),</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;droppedFrames = 0;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    resetStat();</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">delay</a>);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">return</span> !closed;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;}</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a25fd7f8924b80758f2fc2e0497d4f13c">  868</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a25fd7f8924b80758f2fc2e0497d4f13c">yarp::dev::OVRHeadset::stopService</a>()</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;{</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">return</span> this-&gt;close();</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;}</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::resetInput()</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;{</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    inputStateMutex.lock();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    inputState.Buttons = 0;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    inputState.HandTrigger[0] = 0;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    inputState.HandTrigger[1] = 0;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    inputState.IndexTrigger[0] = 0;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    inputState.IndexTrigger[1] = 0;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    inputState.Thumbstick[0].x = 0;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    inputState.Thumbstick[0].y = 0;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    inputState.Thumbstick[1].x = 0;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    inputState.Thumbstick[1].y = 0;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    inputStateMutex.unlock();</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#ae43fbd449904c36569019f2965578c42">  889</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#ae43fbd449904c36569019f2965578c42">yarp::dev::OVRHeadset::run</a>()</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;{</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    ovrResult        result = ovrError_InvalidSession;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    ovrSessionStatus sessionStatus;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> (glfwWindowShouldClose(window)) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        resetInput();</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        close();</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    ovr_GetSessionStatus(session, &amp;sessionStatus);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span> (sessionStatus.ShouldQuit) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        resetInput();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        close();</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">if</span> (sessionStatus.ShouldRecenter) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        ovr_RecenterTrackingOrigin(session);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="comment">// Check window events;</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    glfwPollEvents();</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">if</span> (!sessionStatus.IsVisible) {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        resetInput();</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment">// Begin frame</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    ++distortionFrameIndex;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordtype">double</span> frameTiming = ovr_GetPredictedDisplayTime(session, distortionFrameIndex);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <a class="code" href="yarp-v3_83-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h.html#a115a3e86265819f41c93ff12c2538d1f">YARP_UNUSED</a>(frameTiming);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="comment">// Query the HMD for the current tracking state.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    ts = ovr_GetTrackingState(session, ovr_GetTimeInSeconds(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    headpose = ts.HeadPose;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Stamp.html">yarp::os::Stamp</a> stamp(distortionFrameIndex, ts.HeadPose.TimeInSeconds);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="comment">//Get eye poses, feeding in correct IPD offset</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    ovrPosef ViewPose[2] = {EyeRenderDesc[0].HmdToEyePose,EyeRenderDesc[1].HmdToEyePose};</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    ovrPosef EyeRenderPose[2];</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    ovr_CalcEyePoses(headpose.ThePose, ViewPose, EyeRenderPose);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="comment">// Query the HMD for the predicted state</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    ovrTrackingState predicted_ts = ovr_GetTrackingState(session, ovr_GetTimeInSeconds() + prediction, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    ovrPoseStatef predicted_headpose = predicted_ts.HeadPose;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Stamp.html">yarp::os::Stamp</a> predicted_stamp(distortionFrameIndex, predicted_ts.HeadPose.TimeInSeconds);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment">//send hands frames</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (relative)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <a class="code" href="classyarp_1_1sig_1_1Matrix.html">yarp::sig::Matrix</a> T_Conv(4, 4), T_Head(4, 4), T_LHand(4, 4), T_RHand(4, 4), T_robotHead(4, 4);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a> rpyHead, rpyRobot;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        tfPublisher-&gt;getTransform(<span class="stringliteral">&quot;head_link&quot;</span>, <span class="stringliteral">&quot;mobile_base_body_link&quot;</span>, T_robotHead);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        ovrVector3f&amp; leftH = ts.HandPoses[ovrHand_Left].ThePose.Position;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        ovrVector3f&amp; rightH = ts.HandPoses[ovrHand_Right].ThePose.Position;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        T_RHand    = <a class="code" href="OVRHeadset_8cpp.html#a8a32fc208dc0915fec9c0ed75c9bf457">ovr2matrix</a>(<a class="code" href="OVRHeadset_8cpp.html#a0f4eac70be345a455ced3d11db42c1be">vecSubtract</a>(rightH, headpose.ThePose.Position), OVR::Quatf(ts.HandPoses[ovrHand_Right].ThePose.Orientation) * OVR::Quatf(OVR::Vector3f(0, 0, 1), M_PI_2));</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        T_LHand    = <a class="code" href="OVRHeadset_8cpp.html#a8a32fc208dc0915fec9c0ed75c9bf457">ovr2matrix</a>(<a class="code" href="OVRHeadset_8cpp.html#a0f4eac70be345a455ced3d11db42c1be">vecSubtract</a>(leftH, headpose.ThePose.Position), OVR::Quatf(ts.HandPoses[ovrHand_Left].ThePose.Orientation)   * OVR::Quatf(OVR::Vector3f(0, 0, 1), M_PI_2));</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        T_Head     = <a class="code" href="OVRHeadset_8cpp.html#a8a32fc208dc0915fec9c0ed75c9bf457">ovr2matrix</a>(headpose.ThePose.Position, headpose.ThePose.Orientation);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        rpyHead    = <a class="code" href="namespaceyarp_1_1math.html#ad14a738b45a6197d5db08a23564745d4">yarp::math::dcm2rpy</a>(T_Head);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        rpyRobot   = <a class="code" href="namespaceyarp_1_1math.html#ad14a738b45a6197d5db08a23564745d4">yarp::math::dcm2rpy</a>(T_robotHead);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        rpyHead[0] = 0;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        rpyHead[1] = rpyRobot[1];</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        rpyHead[2] = rpyRobot[2];</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        T_Head     = <a class="code" href="namespaceyarp_1_1math.html#a71b54571a34f67f993a2e0fe30a56856">yarp::math::rpy2dcm</a>(rpyHead);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        tfPublisher-&gt;setTransform(left_frame,    root_frame, <span class="keyword">operator</span>*(T_Head.transposed(), T_LHand));</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        tfPublisher-&gt;setTransform(right_frame,   root_frame, <span class="keyword">operator</span>*(T_Head.transposed(), T_RHand));</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        OVR::Quatf lRot = OVR::Quatf(ts.HandPoses[ovrHand_Left].ThePose.Orientation)  * OVR::Quatf(OVR::Vector3f(0, 0, 1), M_PI_2);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        OVR::Quatf rRot = OVR::Quatf(ts.HandPoses[ovrHand_Right].ThePose.Orientation) * OVR::Quatf(OVR::Vector3f(0, 0, 1), M_PI_2);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        tfPublisher-&gt;setTransform(left_frame, <span class="stringliteral">&quot;mobile_base_body_link&quot;</span>, <a class="code" href="OVRHeadset_8cpp.html#a8a32fc208dc0915fec9c0ed75c9bf457">ovr2matrix</a>(ts.HandPoses[ovrHand_Left].ThePose.Position,   lRot));</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        tfPublisher-&gt;setTransform(right_frame, <span class="stringliteral">&quot;mobile_base_body_link&quot;</span>, <a class="code" href="OVRHeadset_8cpp.html#a8a32fc208dc0915fec9c0ed75c9bf457">ovr2matrix</a>(ts.HandPoses[ovrHand_Right].ThePose.Position, rRot));</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="comment">//tfPublisher-&gt;setTransform(right_frame,   root_frame, yarp::math::operator*(T_Head.transposed(), T_RHand));</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="comment">// Get Input State</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    inputStateMutex.lock();</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    result = ovr_GetInputState(session, ovrControllerType_Active, &amp;inputState);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    inputStateMutex.unlock();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">if</span> (!OVR_SUCCESS(result))</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        errorManager(result);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        inputStateError = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="comment">// Read orientation and write it on the port</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">if</span> (ts.StatusFlags &amp; ovrStatus_OrientationTracked) {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">if</span> (orientationPort-&gt;getOutputCount() &gt; 0) {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            OVR::Quatf orientation = headpose.ThePose.Orientation;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keywordtype">float</span> yaw, pitch, roll;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            orientation.GetEulerAngles&lt;OVR::Axis_Y, OVR::Axis_X, OVR::Axis_Z&gt;(&amp;yaw, &amp;pitch, &amp;roll);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <a class="code" href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a>&amp; output_orientation = orientationPort-&gt;prepare();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            output_orientation.<a class="code" href="classyarp_1_1os_1_1Bottle.html#ab4c9755e05f65d8c89d9b406bb3da64d">clear</a>();</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            output_orientation.addFloat64(OVR::RadToDegree(pitch));</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            output_orientation.addFloat64(OVR::RadToDegree(-roll));</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            output_orientation.addFloat64(OVR::RadToDegree(yaw));</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            orientationPort-&gt;setEnvelope(stamp);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            orientationPort-&gt;write();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(angularVelocityPort,     <a class="code" href="OVRHeadset_8cpp.html#a1141fc39c690c1c6316e05669f775a09">radToDeg</a>(headpose.AngularVelocity),     stamp);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(angularAccelerationPort, <a class="code" href="OVRHeadset_8cpp.html#a1141fc39c690c1c6316e05669f775a09">radToDeg</a>(headpose.AngularAcceleration), stamp);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="comment">// Do not warn more than once every 5 seconds</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">double</span> lastOrientWarnTime = 0;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> = <a class="code" href="classyarp_1_1os_1_1SystemClock.html#a8bf2d789cc755768467e392f88eccaf2">yarp::os::SystemClock::nowSystem</a>();</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> &gt;= lastOrientWarnTime + 5) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Orientation not tracked&quot;</span>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            lastOrientWarnTime = <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="comment">// Read position and write it on the port</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">if</span> (ts.StatusFlags &amp; ovrStatus_PositionTracked) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(positionPort,           headpose.ThePose.Position,   stamp);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(linearVelocityPort,     headpose.LinearVelocity,     stamp);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(linearAccelerationPort, headpose.LinearAcceleration, stamp);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="comment">// Do not warn more than once every 5 seconds</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">double</span> lastPosWarnTime = 0;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> = <a class="code" href="classyarp_1_1os_1_1SystemClock.html#a8bf2d789cc755768467e392f88eccaf2">yarp::os::SystemClock::nowSystem</a>();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> &gt;= lastPosWarnTime + 5) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Position not tracked&quot;</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            lastPosWarnTime = <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="comment">// Read predicted orientation and write it on the port</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">if</span> (predicted_ts.StatusFlags &amp; ovrStatus_OrientationTracked) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">if</span> (predictedOrientationPort-&gt;getOutputCount() &gt; 0) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            OVR::Quatf orientation = predicted_headpose.ThePose.Orientation;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="keywordtype">float</span> yaw, pitch, roll;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            orientation.GetEulerAngles&lt;OVR::Axis_Y, OVR::Axis_X, OVR::Axis_Z&gt;(&amp;yaw, &amp;pitch, &amp;roll);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <a class="code" href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a>&amp; output_orientation = predictedOrientationPort-&gt;prepare();</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            output_orientation.<a class="code" href="classyarp_1_1os_1_1Bottle.html#ab4c9755e05f65d8c89d9b406bb3da64d">clear</a>();</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            output_orientation.addFloat64(OVR::RadToDegree(pitch));</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            output_orientation.addFloat64(OVR::RadToDegree(-roll));</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            output_orientation.addFloat64(OVR::RadToDegree(yaw));</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            predictedOrientationPort-&gt;setEnvelope(predicted_stamp);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            predictedOrientationPort-&gt;write();</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(predictedAngularVelocityPort,     <a class="code" href="OVRHeadset_8cpp.html#a1141fc39c690c1c6316e05669f775a09">radToDeg</a>(predicted_headpose.AngularVelocity),     stamp);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(predictedAngularAccelerationPort, <a class="code" href="OVRHeadset_8cpp.html#a1141fc39c690c1c6316e05669f775a09">radToDeg</a>(predicted_headpose.AngularAcceleration), stamp);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="comment">// Do not warn more than once every 5 seconds</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">double</span> lastPredOrientWarnTime = 0;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> = <a class="code" href="classyarp_1_1os_1_1SystemClock.html#a8bf2d789cc755768467e392f88eccaf2">yarp::os::SystemClock::nowSystem</a>();</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> &gt;= lastPredOrientWarnTime + 5) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Predicted orientation not tracked&quot;</span>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            lastPredOrientWarnTime = <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="comment">// Read predicted position and write it on the port</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">if</span> (predicted_ts.StatusFlags &amp; ovrStatus_PositionTracked) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(predictedPositionPort,           predicted_headpose.ThePose.Position,   stamp);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(predictedLinearVelocityPort,     predicted_headpose.LinearVelocity,     stamp);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <a class="code" href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a>(predictedLinearAccelerationPort, predicted_headpose.LinearAcceleration, stamp);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="comment">// Do not warn more than once every 5 seconds</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">double</span> lastPredPosWarnTime = 0;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> = <a class="code" href="classyarp_1_1os_1_1SystemClock.html#a8bf2d789cc755768467e392f88eccaf2">yarp::os::SystemClock::nowSystem</a>();</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> &gt;= lastPredPosWarnTime + 5) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Position not tracked&quot;</span>;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            lastPredPosWarnTime = <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">if</span> (displayPorts[0]-&gt;eyeRenderTexture &amp;&amp; displayPorts[1]-&gt;eyeRenderTexture) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="comment">// Do distortion rendering, Present and flush/sync</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="comment">// Update the textures</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;update();</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            <span class="keywordflow">if</span> (imagePoseEnabled) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                <span class="keywordflow">if</span> (userPoseEnabled) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                    <span class="comment">// Use orientation read from the HMD at the beginning of the frame</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                    EyeRenderPose[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].Orientation = headpose.ThePose.Orientation;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    <span class="comment">// Use orientation received from the image</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                    EyeRenderPose[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].Orientation = displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;eyePose.Orientation;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                EyeRenderPose[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].Orientation.w = -1.0f;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                EyeRenderPose[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].Orientation.x = 0.0f;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                EyeRenderPose[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].Orientation.y = 0.0f;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                EyeRenderPose[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].Orientation.z = 0.0f;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        }</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="comment">// If the image size is different from the texture size,</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="keywordtype">bool</span> needReconfigureFOV = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <span class="keywordflow">if</span> ((displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;imageWidth != 0 &amp;&amp; displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;imageWidth != camWidth[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]) ||</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                (displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;imageHeight != 0 &amp;&amp; displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;imageHeight != camHeight[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>])) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                camWidth[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;imageWidth;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                camHeight[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;imageHeight;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                needReconfigureFOV = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordflow">if</span> (needReconfigureFOV) {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            reconfigureFOV();</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            reconfigureRendering();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        std::list&lt;ovrLayerHeader*&gt; layerList;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        ovrLayerEyeFov eyeLayer;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        eyeLayer.Header.Type = ovrLayerType_EyeFov;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        eyeLayer.Header.Flags = ovrLayerFlag_HighQuality;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="keywordflow">if</span> (flipInputEnabled) {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            eyeLayer.Header.Flags |= ovrLayerFlag_TextureOriginAtBottomLeft;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; 2; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            eyeLayer.ColorTexture[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;textureSwapChain;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            eyeLayer.Viewport[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = OVR::Recti(0, 0, displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;width, displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;height);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            eyeLayer.Fov[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = fov[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>];</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            eyeLayer.RenderPose[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>] = EyeRenderPose[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>];</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        layerList.push_back(&amp;eyeLayer.Header);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <span class="keywordflow">if</span> (logoEnabled) {</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            <a class="code" href="OVRHeadset_8cpp.html#aa445caa57666433c43d084de62ff47d2">setHeadLockedLayer</a>(logoLayer, textureLogo, 0.2f, -0.2f, -0.5f, 0.0f, 0.0f, 0.0f, 1.0f, 0.05f, 0.05f);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            layerList.push_back(&amp;logoLayer.Header);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">if</span> (crosshairsEnabled) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            <a class="code" href="OVRHeadset_8cpp.html#aa445caa57666433c43d084de62ff47d2">setHeadLockedLayer</a>(crosshairsLayer, textureCrosshairs, 0.0f, 0.0f, -5.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.08f, 0.08f);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            layerList.push_back(&amp;crosshairsLayer.Header);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="keywordflow">if</span> (batteryEnabled) {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            <a class="code" href="OVRHeadset_8cpp.html#aa445caa57666433c43d084de62ff47d2">setHeadLockedLayer</a>(batteryLayer, textureBattery-&gt;currentTexture, 0.25f, 0.25f, -0.50f, 0.0f, 0.0f, 0.0f, 1.0f, 0.05f, 0.05f);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            layerList.push_back(&amp;batteryLayer.Header);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="comment">//setting up dynamic hud</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">if</span> (guiEnabled)</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        {</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; hud : huds)</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                <span class="keywordflow">if</span> (!hud.port-&gt;getInputCount())</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                <a class="code" href="classyarp_1_1sig_1_1FlexImage.html">yarp::sig::FlexImage</a>* image = hud.port-&gt;<a class="code" href="classyarp_1_1sig_1_1Image.html#a3dc0e7369c45d50e1c416d3f17449a6b">read</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                <span class="keywordflow">if</span> (!image)</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                    layerList.push_back(&amp;hud.layer.Header);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                hud.texture-&gt;fromImage(session, *image, hud.alpha);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                <a class="code" href="OVRHeadset_8cpp.html#aa445caa57666433c43d084de62ff47d2">setHeadLockedLayer</a>(hud.layer, hud.texture, hud.x, hud.y, hud.z, 0.0f, 0.0f, 0.0f, 1.0f, hud.resizeW, hud.resizeH);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                layerList.push_back(&amp;hud.layer.Header);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            }</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        ovrLayerHeader** layers = <span class="keyword">new</span> ovrLayerHeader*[layerList.size()];</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        std::copy(layerList.begin(), layerList.end(), layers);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        ovrResult result = ovr_SubmitFrame(session, distortionFrameIndex, <span class="keyword">nullptr</span>, layers, layerList.size());</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keyword">delete</span>[] layers;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="comment">// Blit mirror texture to back buffer</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        glBindFramebuffer(GL_READ_FRAMEBUFFER, mirrorFBO);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        GLint bw = hmdDesc.Resolution.w;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        GLint bh = hmdDesc.Resolution.h;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        GLint ww, wh;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        glfwGetWindowSize(window, &amp;ww, &amp;wh);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        glBlitFramebuffer(0, bh, bw, 0, 0, 0, ww, wh, GL_COLOR_BUFFER_BIT, GL_NEAREST);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        glBindFramebuffer(GL_READ_FRAMEBUFFER, 0);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <a class="code" href="GLDebug_8h.html#a85c59f738179d162934c1fb67d45d562">checkGlErrorMacro</a>;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        glfwSwapBuffers(window);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="comment">// Do not warn more than once every 5 seconds</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">double</span> lastImgWarnTime = 0;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> = <a class="code" href="classyarp_1_1os_1_1SystemClock.html#a8bf2d789cc755768467e392f88eccaf2">yarp::os::SystemClock::nowSystem</a>();</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a> &gt;= lastImgWarnTime + 5) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;No image received&quot;</span>;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            lastImgWarnTime = <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">now</a>;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        }</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="keywordtype">bool</span> yarp::dev::OVRHeadset::createWindow(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;{</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    glfwWindowHint(GLFW_DEPTH_BITS, 16);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    window = glfwCreateWindow(w/2, h/2, <span class="stringliteral">&quot;YARP Oculus&quot;</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">if</span> (!window) {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;Could not create window&quot;</span>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    glfwSetWindowUserPointer(window, <span class="keyword">this</span>);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    glfwSetKeyCallback(window, glfwKeyCallback);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    glfwMakeContextCurrent(window);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;}</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::onKey(<span class="keywordtype">int</span> key, <span class="keywordtype">int</span> scancode, <span class="keywordtype">int</span> action, <span class="keywordtype">int</span> mods)</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> (GLFW_PRESS != action) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordtype">bool</span> leftShiftPressed = (glfwGetKey(window, GLFW_KEY_LEFT_SHIFT) == GLFW_PRESS);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordtype">bool</span> rightShiftPressed = (glfwGetKey(window, GLFW_KEY_RIGHT_SHIFT) == GLFW_PRESS);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordtype">bool</span> leftCtrlPressed = (glfwGetKey(window, GLFW_KEY_LEFT_CONTROL) == GLFW_PRESS);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordtype">bool</span> rightCtrlPressed = (glfwGetKey(window, GLFW_KEY_RIGHT_CONTROL) == GLFW_PRESS);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordtype">bool</span> leftAltPressed = (glfwGetKey(window, GLFW_KEY_LEFT_ALT) == GLFW_PRESS);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordtype">bool</span> rightAltPressed = (glfwGetKey(window, GLFW_KEY_RIGHT_ALT) == GLFW_PRESS);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordtype">bool</span> shiftPressed = leftShiftPressed || rightShiftPressed;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordtype">bool</span> ctrlPressed = leftCtrlPressed || rightCtrlPressed;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordtype">bool</span> altPressed = leftAltPressed || rightAltPressed;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">switch</span> (key) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_R:</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <span class="keywordflow">if</span> (!leftShiftPressed &amp;&amp; !rightShiftPressed) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Recentering pose&quot;</span>;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            ovr_RecenterTrackingOrigin(session);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Resetting yaw offset to current position&quot;</span>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                <span class="keywordtype">float</span> iyaw, ipitch, iroll;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                <span class="keywordflow">if</span> (imagePoseEnabled) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                    OVR::Quatf imageOrientation = displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;eyeRenderTexture-&gt;eyePose.Orientation;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                    imageOrientation.GetEulerAngles&lt;OVR::Axis_Y, OVR::Axis_X, OVR::Axis_Z&gt;(&amp;iyaw, &amp;ipitch, &amp;iroll);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                    iyaw = 0.0f;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                    ipitch = 0.0f;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                    iyaw = 0.0f;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                }</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                iyaw -= displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;yawOffset;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;yawOffset = - iyaw;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; (<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> == ovrEye_Left? <span class="stringliteral">&quot;Left&quot;</span> : <span class="stringliteral">&quot;Right&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;eye yaw offset =&quot;</span> &lt;&lt; displayPorts[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]-&gt;yawOffset;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            }</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        }</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_F:</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        flipInputEnabled = !flipInputEnabled;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Flip input&quot;</span> &lt;&lt; (flipInputEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        reconfigureRendering();</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_I:</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        imagePoseEnabled = !imagePoseEnabled;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Image pose&quot;</span> &lt;&lt; (imagePoseEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;User pose&quot;</span> &lt;&lt; (userPoseEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_U:</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        userPoseEnabled = !userPoseEnabled;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Image pose&quot;</span> &lt;&lt; (imagePoseEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;User pose&quot;</span> &lt;&lt; (userPoseEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_L:</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        logoEnabled = !logoEnabled;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Overlays:&quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <span class="stringliteral">&quot;Logo&quot;</span> &lt;&lt; (logoEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <span class="stringliteral">&quot;Crosshairs&quot;</span> &lt;&lt; (crosshairsEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            <span class="stringliteral">&quot;Battery&quot;</span> &lt;&lt; (batteryEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            <span class="stringliteral">&quot;Gui&quot;</span> &lt;&lt; ((guiCount != 0) ? (guiEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) : <span class="stringliteral">&quot;DISABLED&quot;</span>);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_C:</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        crosshairsEnabled = !crosshairsEnabled;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Overlays:&quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            <span class="stringliteral">&quot;Logo&quot;</span> &lt;&lt; (logoEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            <span class="stringliteral">&quot;Crosshairs&quot;</span> &lt;&lt; (crosshairsEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            <span class="stringliteral">&quot;Battery&quot;</span> &lt;&lt; (batteryEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            <span class="stringliteral">&quot;Gui&quot;</span> &lt;&lt; ((guiCount != 0) ? (guiEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) : <span class="stringliteral">&quot;DISABLED&quot;</span>);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_B:</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        batteryEnabled = !batteryEnabled;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <span class="keywordflow">if</span> (batteryEnabled) {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            textureBattery-&gt;resume();</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            textureBattery-&gt;suspend();</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Overlays:&quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            <span class="stringliteral">&quot;Logo&quot;</span> &lt;&lt; (logoEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            <span class="stringliteral">&quot;Crosshairs&quot;</span> &lt;&lt; (crosshairsEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            <span class="stringliteral">&quot;Battery&quot;</span> &lt;&lt; (batteryEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            <span class="stringliteral">&quot;Gui&quot;</span> &lt;&lt; ((guiCount != 0) ? (guiEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) : <span class="stringliteral">&quot;DISABLED&quot;</span>);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_G:</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="keywordflow">if</span> (guiCount != 0) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            guiEnabled = !guiEnabled;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Overlays:&quot;</span> &lt;&lt;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            <span class="stringliteral">&quot;Logo&quot;</span> &lt;&lt; (logoEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="stringliteral">&quot;Crosshairs&quot;</span> &lt;&lt; (crosshairsEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            <span class="stringliteral">&quot;Battery&quot;</span> &lt;&lt; (batteryEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            <span class="stringliteral">&quot;Gui&quot;</span> &lt;&lt; ((guiCount != 0) ? (guiEnabled ? <span class="stringliteral">&quot;ON&quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) : <span class="stringliteral">&quot;DISABLED&quot;</span>) ;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_ESCAPE:</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        this-&gt;close();</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_Z:</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <span class="keywordflow">if</span> (!rightShiftPressed) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            --camHFOV[0];</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Left eye HFOV =&quot;</span> &lt;&lt; camHFOV[0];</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        <span class="keywordflow">if</span> (!leftShiftPressed) {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            --camHFOV[1];</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Right eye HFOV =&quot;</span> &lt;&lt; camHFOV[1];</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        reconfigureFOV();</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        reconfigureRendering();</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_X:</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="keywordflow">if</span> (!rightShiftPressed) {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            ++camHFOV[0];</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Left eye HFOV =&quot;</span> &lt;&lt; camHFOV[0];</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keywordflow">if</span> (!leftShiftPressed) {</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            ++camHFOV[1];</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Right eye HFOV =&quot;</span> &lt;&lt; camHFOV[1];</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        }</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        reconfigureFOV();</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        reconfigureRendering();</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_UP:</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <span class="keywordflow">if</span> (!rightShiftPressed) {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            displayPorts[0]-&gt;pitchOffset += ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Left eye pitch offset =&quot;</span> &lt;&lt; displayPorts[0]-&gt;pitchOffset;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        }</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="keywordflow">if</span> (!leftShiftPressed) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            displayPorts[1]-&gt;pitchOffset += ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Right eye pitch offset =&quot;</span> &lt;&lt; displayPorts[1]-&gt;pitchOffset;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        }</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_DOWN:</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        <span class="keywordflow">if</span> (!rightShiftPressed) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            displayPorts[0]-&gt;pitchOffset -= ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Left eye pitch offset =&quot;</span> &lt;&lt; displayPorts[0]-&gt;pitchOffset;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">if</span> (!leftShiftPressed) {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            displayPorts[1]-&gt;pitchOffset -= ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Right eye pitch offset =&quot;</span> &lt;&lt; displayPorts[1]-&gt;pitchOffset;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_LEFT:</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="keywordflow">if</span> (!rightShiftPressed) {</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            displayPorts[0]-&gt;yawOffset += ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Left eye yaw offset =&quot;</span> &lt;&lt; displayPorts[0]-&gt;yawOffset;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <span class="keywordflow">if</span> (!leftShiftPressed) {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            displayPorts[1]-&gt;yawOffset += ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Right eye yaw offset =&quot;</span> &lt;&lt; displayPorts[1]-&gt;yawOffset;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        }</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_RIGHT:</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <span class="keywordflow">if</span> (!rightShiftPressed) {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            displayPorts[0]-&gt;yawOffset -= ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Left eye yaw offset =&quot;</span> &lt;&lt; displayPorts[0]-&gt;yawOffset;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        }</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <span class="keywordflow">if</span> (!leftShiftPressed) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            displayPorts[1]-&gt;yawOffset -= ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Right eye yaw offset =&quot;</span> &lt;&lt; displayPorts[1]-&gt;yawOffset;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        }</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_PAGE_UP:</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        <span class="keywordflow">if</span> (!rightShiftPressed) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            displayPorts[0]-&gt;rollOffset += ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Left eye roll offset =&quot;</span> &lt;&lt; displayPorts[0]-&gt;rollOffset;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <span class="keywordflow">if</span> (!leftShiftPressed) {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            displayPorts[1]-&gt;rollOffset += ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Right eye roll offset =&quot;</span> &lt;&lt; displayPorts[1]-&gt;rollOffset;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        }</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_PAGE_DOWN:</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">if</span> (!rightShiftPressed) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            displayPorts[0]-&gt;rollOffset -= ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Left eye roll offset =&quot;</span> &lt;&lt; displayPorts[0]-&gt;rollOffset;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <span class="keywordflow">if</span> (!leftShiftPressed) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;            displayPorts[1]-&gt;rollOffset -= ctrlPressed ? 0.05f : 0.0025f;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;Right eye roll offset =&quot;</span> &lt;&lt; displayPorts[1]-&gt;rollOffset;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        }</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordflow">case</span> GLFW_KEY_SLASH:</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            <span class="keywordtype">int</span> PerfHudMode = ovr_GetInt(session, OVR_PERF_HUD_MODE, 0);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            PerfHudMode = (PerfHudMode + 1) % 8;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            ovr_SetInt(session, OVR_PERF_HUD_MODE, PerfHudMode);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    }</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;}</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160; </div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::reconfigureRendering()</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;{</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        ovr_GetRenderDesc(session, (ovrEyeType)<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>, fov[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    }</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;}</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160; </div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::reconfigureFOV()</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;{</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> = 0; <a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a> &lt; ovrEye_Count; ++<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keywordtype">double</span> camHFOV_rad = OVR::DegreeToRad(camHFOV[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>]);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="keywordtype">double</span> texCamRatio = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(texWidth)/camWidth[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>];</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        <span class="keywordtype">double</span> texHFOV_rad = 2 * (atan(texCamRatio * tan(camHFOV_rad/2)));</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160; </div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        <span class="keywordtype">double</span> aspectRatio = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(texWidth)/texHeight;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        fov[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].UpTan    = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(fabs(tan(texHFOV_rad/2)/aspectRatio));</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        fov[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].DownTan  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(fabs(tan(texHFOV_rad/2)/aspectRatio));</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        fov[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].LeftTan  = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(fabs(tan(texHFOV_rad/2)));</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        fov[<a class="code" href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">eye</a>].RightTan = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(fabs(tan(texHFOV_rad/2)));</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="OVRHeadset_8cpp.html#a28ebbd80b79fee3b36693da753345b45">debugFov</a>(fov);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;}</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::glfwKeyCallback(GLFWwindow* window, <span class="keywordtype">int</span> key, <span class="keywordtype">int</span> scancode, <span class="keywordtype">int</span> action, <span class="keywordtype">int</span> mods)</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;{</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    OVRHeadset* instance = (OVRHeadset*)glfwGetWindowUserPointer(window);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    instance-&gt;onKey(key, scancode, action, mods);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;}</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::glfwErrorCallback(<span class="keywordtype">int</span> error, <span class="keyword">const</span> <span class="keywordtype">char</span>* description)</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;{</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; error &lt;&lt; description;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;}</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::ovrDebugCallback(uintptr_t userData, <span class="keywordtype">int</span> level, <span class="keyword">const</span> <span class="keywordtype">char</span>* message)</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;{</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html">yarp::dev::OVRHeadset</a>* ovr = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html">yarp::dev::OVRHeadset</a>*<span class="keyword">&gt;</span>(userData);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <a class="code" href="yarp-v3_83-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h.html#a115a3e86265819f41c93ff12c2538d1f">YARP_UNUSED</a>(ovr);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">if</span> (!message)</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    }</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; </div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordflow">switch</span> (level) {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">case</span> ovrLogLevel_Debug:</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>() &lt;&lt; <span class="stringliteral">&quot;ovrDebugCallback&quot;</span> &lt;&lt; message;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="keywordflow">case</span> ovrLogLevel_Info:</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <a class="code" href="Log_8h.html#a52c3dab24cf55da2806a5c6e5f5d3b55">yInfo</a>() &lt;&lt; <span class="stringliteral">&quot;ovrDebugCallback&quot;</span> &lt;&lt; message;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordflow">case</span> ovrLogLevel_Error:</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;ovrDebugCallback&quot;</span> &lt;&lt; message;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        <a class="code" href="Log_8h.html#a74f4af60dea29713770bcde6ad428391">yWarning</a>() &lt;&lt; <span class="stringliteral">&quot;ovrDebugCallback&quot;</span> &lt;&lt; message;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;}</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160; </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::DebugHmd(ovrHmdDesc hmdDesc)</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;{</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;  * ProductName: %s&quot;</span>, hmdDesc.ProductName);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;  * Manufacturer: %s&quot;</span>, hmdDesc.Manufacturer);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;  * VendorId:ProductId: %04X:%04X&quot;</span>, hmdDesc.VendorId, hmdDesc.ProductId);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;  * SerialNumber: %s&quot;</span>, hmdDesc.SerialNumber);</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;  * Firmware Version: %d.%d&quot;</span>, hmdDesc.FirmwareMajor, hmdDesc.FirmwareMinor);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;  * Resolution: %dx%d&quot;</span>, hmdDesc.Resolution.w, hmdDesc.Resolution.h);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;}</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="keywordtype">void</span> yarp::dev::OVRHeadset::errorManager(ovrResult error)</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;{</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">if</span> (error_messages.find(error) != error_messages.end())</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; error_messages[error].c_str();</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    }</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="comment">//IJoypadController method</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#afd5fc032a4174e83e78f02989d2cb44b"> 1496</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#afd5fc032a4174e83e78f02989d2cb44b">yarp::dev::OVRHeadset::getAxisCount</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; axis_count)</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;{</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">if</span> (inputStateError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    axis_count = axisIdToValue.size();</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;}</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160; </div>
<div class="line"><a name="l01503"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a1fbbaa867cf7bedc825e7a0de06f2f65"> 1503</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a1fbbaa867cf7bedc825e7a0de06f2f65">yarp::dev::OVRHeadset::getButtonCount</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; button_count)</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;{</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">if</span> (inputStateError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    button_count = <a class="code" href="OVRHeadset_8cpp.html#a7848050558c867a8e1954e67b433c445">BUTTON_COUNT</a>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;}</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160; </div>
<div class="line"><a name="l01510"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a6ada87a4833f376d9532c046a1c6595b"> 1510</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a6ada87a4833f376d9532c046a1c6595b">yarp::dev::OVRHeadset::getTrackballCount</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; Trackball_count)</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;{</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="keywordflow">if</span> (inputStateError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    Trackball_count = 0;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;}</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a3588792495782e297deb3b5ea20c220e"> 1517</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a3588792495782e297deb3b5ea20c220e">yarp::dev::OVRHeadset::getHatCount</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; Hat_count)</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;{</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="keywordflow">if</span> (inputStateError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    Hat_count = 1;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;}</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a51420202eaf76cc89b2b84c5f1a55b9b"> 1524</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a51420202eaf76cc89b2b84c5f1a55b9b">yarp::dev::OVRHeadset::getTouchSurfaceCount</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; touch_count)</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;{</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keywordflow">if</span> (inputStateError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    touch_count = 0;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;}</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a9df94ba80d36a4530c43739ca0edd00b"> 1531</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a9df94ba80d36a4530c43739ca0edd00b">yarp::dev::OVRHeadset::getStickCount</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; stick_count)</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;{</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keywordflow">if</span> (inputStateError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    stick_count = getStickAsAxis ? 0 : <a class="code" href="OVRHeadset_8cpp.html#a3ae16d5e5129ee0fdd1a7e6a78f5a672">STICK_COUNT</a>;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;}</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160; </div>
<div class="line"><a name="l01538"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a01f657199e69555f7246228edb783aae"> 1538</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a01f657199e69555f7246228edb783aae">yarp::dev::OVRHeadset::getStickDoF</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stick_id, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; DoF)</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;{</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    DoF = 2;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;}</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a3dd71eba99b361974f62a6379a5fea5f"> 1544</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a3dd71eba99b361974f62a6379a5fea5f">yarp::dev::OVRHeadset::getButton</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> button_id, <span class="keywordtype">float</span>&amp; value)</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;{</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">if</span> (inputStateError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    std::lock_guard&lt;std::mutex&gt; lock(inputStateMutex);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">if</span> (button_id &gt; buttonIdToOvrButton.size() - 1)</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;OVRHeadset: button id out of bound&quot;</span>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    value = inputState.Buttons &amp; buttonIdToOvrButton[button_id] ? 1.0f : 0.0f;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;}</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#af9722881dd94dffe37e681419d24c096"> 1557</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#af9722881dd94dffe37e681419d24c096">yarp::dev::OVRHeadset::getTrackball</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> trackball_id, <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a>&amp; value)</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;{</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;}</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a22811c359bfe872c0a111969e4e2a691"> 1562</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a22811c359bfe872c0a111969e4e2a691">yarp::dev::OVRHeadset::getHat</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hat_id, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>&amp; value)</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;{</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">if</span> (inputStateError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    std::lock_guard&lt;std::mutex&gt; lock(inputStateMutex);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordflow">if</span> (hat_id &gt; 0)</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;OVRHeadset: hat id out of bound&quot;</span>;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    value = DButtonToHat[inputState.Buttons &amp; ovrButton_Up]    |</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            DButtonToHat[inputState.Buttons &amp; ovrButton_Down]  |</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            DButtonToHat[inputState.Buttons &amp; ovrButton_Right] |</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;            DButtonToHat[inputState.Buttons &amp; ovrButton_Left];</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;}</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#ae1c5661b28a110ee791e4b0211336d0f"> 1578</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#ae1c5661b28a110ee791e4b0211336d0f">yarp::dev::OVRHeadset::getAxis</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> axis_id, <span class="keywordtype">double</span>&amp; value)</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;{</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    std::lock_guard&lt;std::mutex&gt; lock(inputStateMutex);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="keywordflow">if</span> (axis_id &gt; axisIdToValue.size())</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;OVRHeadset: axis id out of bound&quot;</span>;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160; </div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    value = *axisIdToValue[axis_id];</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;}</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160; </div>
<div class="line"><a name="l01591"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#a453bca74fd08e350bf1e1f5c13801e32"> 1591</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#a453bca74fd08e350bf1e1f5c13801e32">yarp::dev::OVRHeadset::getStick</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> stick_id, <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a>&amp; value, <a class="code" href="classyarp_1_1dev_1_1IJoypadController.html#aad54932372581dcc5b5a832ca218921f">JoypadCtrl_coordinateMode</a> coordinate_mode)</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;{</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">if</span> (inputStateError) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    std::lock_guard&lt;std::mutex&gt; lock(inputStateMutex);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="keywordflow">if</span> (getStickAsAxis)</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span> (stick_id &gt; <a class="code" href="OVRHeadset_8cpp.html#a3ae16d5e5129ee0fdd1a7e6a78f5a672">STICK_COUNT</a> - 1)</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    {</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;stick id out of bound&quot;</span>;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    }</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    value.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#af07ea998717848ef60ea71bb37c77d52">clear</a>();</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keywordflow">if</span> (coordinate_mode == JoypadCtrl_coordinateMode::JypCtrlcoord_POLAR)</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        value.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a3b340b29d04e3fd3edaaf8aaba1ac41d">push_back</a>(sqrt(inputState.Thumbstick[stick_id].y * inputState.Thumbstick[stick_id].y +</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                             inputState.Thumbstick[stick_id].x * inputState.Thumbstick[stick_id].x));</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160; </div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        value.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a3b340b29d04e3fd3edaaf8aaba1ac41d">push_back</a>(atan2(inputState.Thumbstick[stick_id].y, inputState.Thumbstick[stick_id].x));</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    }</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    value.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a3b340b29d04e3fd3edaaf8aaba1ac41d">push_back</a>(inputState.Thumbstick[stick_id].x);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    value.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a3b340b29d04e3fd3edaaf8aaba1ac41d">push_back</a>(inputState.Thumbstick[stick_id].y);</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;}</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"><a class="line" href="classyarp_1_1dev_1_1OVRHeadset.html#abcb9095b517b93f64bec3890b100c775"> 1618</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1dev_1_1OVRHeadset.html#abcb9095b517b93f64bec3890b100c775">yarp::dev::OVRHeadset::getTouch</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> touch_id, <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a>&amp; value)</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;{</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aLogStream_8h_html"><div class="ttname"><a href="LogStream_8h.html">LogStream.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1IJoypadController_html_aad54932372581dcc5b5a832ca218921f"><div class="ttname"><a href="classyarp_1_1dev_1_1IJoypadController.html#aad54932372581dcc5b5a832ca218921f">yarp::dev::IJoypadController::JoypadCtrl_coordinateMode</a></div><div class="ttdeci">JoypadCtrl_coordinateMode</div><div class="ttdef"><b>Definition:</b> <a href="IJoypadController_8h_source.html#l00037">IJoypadController.h:37</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a></div><div class="ttdoc">A simple collection of objects that can be described and transmitted in a portable way.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8h_source.html#l00072">Bottle.h:73</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_abcb9095b517b93f64bec3890b100c775"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#abcb9095b517b93f64bec3890b100c775">yarp::dev::OVRHeadset::getTouch</a></div><div class="ttdeci">bool getTouch(unsigned int touch_id, yarp::sig::Vector &amp;value) override</div><div class="ttdoc">Get the value of a touch if present, return false otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01618">OVRHeadset.cpp:1618</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html_a2c90f76cba15b8cc9d1c88cf55b253a1"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">yarp::os::Property::put</a></div><div class="ttdeci">void put(const std::string &amp;key, const std::string &amp;value)</div><div class="ttdoc">Associate the given key with the given string.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8cpp_source.html#l00996">Property.cpp:996</a></div></div>
<div class="ttc" id="aSystemClock_8h_html"><div class="ttname"><a href="SystemClock_8h.html">SystemClock.h</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a28ebbd80b79fee3b36693da753345b45"><div class="ttname"><a href="OVRHeadset_8cpp.html#a28ebbd80b79fee3b36693da753345b45">debugFov</a></div><div class="ttdeci">static void debugFov(const ovrFovPort fov[2])</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00148">OVRHeadset.cpp:148</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_ae1c5661b28a110ee791e4b0211336d0f"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#ae1c5661b28a110ee791e4b0211336d0f">yarp::dev::OVRHeadset::getAxis</a></div><div class="ttdeci">bool getAxis(unsigned int axis_id, double &amp;value) override</div><div class="ttdoc">Get the value of an axis if present, return false otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01578">OVRHeadset.cpp:1578</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_ab4c9755e05f65d8c89d9b406bb3da64d"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#ab4c9755e05f65d8c89d9b406bb3da64d">yarp::os::Bottle::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Empties the bottle of any objects it contains.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00120">Bottle.cpp:120</a></div></div>
<div class="ttc" id="aNetwork_8h_html"><div class="ttname"><a href="Network_8h.html">Network.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a1bd9461049fbe064361aa727cec75fd8"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a1bd9461049fbe064361aa727cec75fd8">yarp::dev::OVRHeadset::startService</a></div><div class="ttdeci">virtual bool startService()</div><div class="ttdoc">Initiate the service, whatever it is.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00830">OVRHeadset.cpp:830</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html">yarp::os::Searchable</a></div><div class="ttdoc">A base class for nested structures that can be searched.</div><div class="ttdef"><b>Definition:</b> <a href="Searchable_8h_source.html#l00068">Searchable.h:69</a></div></div>
<div class="ttc" id="astructguiParam_html_a470623167f18675b4e4a61cb7dbfe601"><div class="ttname"><a href="structguiParam.html#a470623167f18675b4e4a61cb7dbfe601">guiParam::resizeW</a></div><div class="ttdeci">double resizeW</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00085">OVRHeadset.cpp:85</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a975b251eaf2e470451d1a785ad1207c4"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a975b251eaf2e470451d1a785ad1207c4">yarp::dev::OVRHeadset::~OVRHeadset</a></div><div class="ttdeci">virtual ~OVRHeadset()</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00264">OVRHeadset.cpp:264</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_afd5fc032a4174e83e78f02989d2cb44b"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#afd5fc032a4174e83e78f02989d2cb44b">yarp::dev::OVRHeadset::getAxisCount</a></div><div class="ttdeci">bool getAxisCount(unsigned int &amp;axis_count) override</div><div class="ttdoc">Get number of Axes.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01496">OVRHeadset.cpp:1496</a></div></div>
<div class="ttc" id="astructguiParam_html_a7db0404c5b3d158183da7d15d115f4f5"><div class="ttname"><a href="structguiParam.html#a7db0404c5b3d158183da7d15d115f4f5">guiParam::layer</a></div><div class="ttdeci">ovrLayerQuad layer</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00092">OVRHeadset.cpp:92</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_ac1d084873c863c7d4bcb8ca36cf84367"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#ac1d084873c863c7d4bcb8ca36cf84367">yarp::os::Searchable::findGroup</a></div><div class="ttdeci">virtual Bottle &amp; findGroup(const std::string &amp;key) const =0</div><div class="ttdoc">Gets a list corresponding to a given keyword.</div></div>
<div class="ttc" id="aclassInputCallback_html"><div class="ttname"><a href="classInputCallback.html">InputCallback</a></div><div class="ttdef"><b>Definition:</b> <a href="InputCallback_8h_source.html#l00030">InputCallback.h:31</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1math_html_ad14a738b45a6197d5db08a23564745d4"><div class="ttname"><a href="namespaceyarp_1_1math.html#ad14a738b45a6197d5db08a23564745d4">yarp::math::dcm2rpy</a></div><div class="ttdeci">yarp::sig::Vector dcm2rpy(const yarp::sig::Matrix &amp;R)</div><div class="ttdoc">Converts a dcm (direction cosine matrix) rotation matrix to roll-pitch-yaw angles (defined in Math....</div><div class="ttdef"><b>Definition:</b> <a href="math_8cpp_source.html#l00777">math.cpp:777</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a22811c359bfe872c0a111969e4e2a691"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a22811c359bfe872c0a111969e4e2a691">yarp::dev::OVRHeadset::getHat</a></div><div class="ttdeci">bool getHat(unsigned int hat_id, unsigned char &amp;value) override</div><div class="ttdoc">Get the value of an Hat.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01562">OVRHeadset.cpp:1562</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_aa206ea9fd9a122c114c630a33c5802d0"><div class="ttname"><a href="OVRHeadset_8cpp.html#aa206ea9fd9a122c114c630a33c5802d0">writeVec3OnPort</a></div><div class="ttdeci">void writeVec3OnPort(yarp::os::BufferedPort&lt; yarp::os::Bottle &gt; *const &amp;port, const OVR::Vector3f &amp;vec3, yarp::os::Stamp &amp;stamp)</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00189">OVRHeadset.cpp:189</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1DeviceDriver_html"><div class="ttname"><a href="classyarp_1_1dev_1_1DeviceDriver.html">yarp::dev::DeviceDriver</a></div><div class="ttdoc">Interface implemented by all device drivers.</div><div class="ttdef"><b>Definition:</b> <a href="DeviceDriver_8h_source.html#l00037">DeviceDriver.h:38</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a25fd7f8924b80758f2fc2e0497d4f13c"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a25fd7f8924b80758f2fc2e0497d4f13c">yarp::dev::OVRHeadset::stopService</a></div><div class="ttdeci">virtual bool stopService()</div><div class="ttdoc">Shut down the service, whatever it is.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00868">OVRHeadset.cpp:868</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a0be8d4eefc642a3892f0387b06b2ee7a"><div class="ttname"><a href="OVRHeadset_8cpp.html#a0be8d4eefc642a3892f0387b06b2ee7a">FlexImagePort</a></div><div class="ttdeci">yarp::os::BufferedPort&lt; yarp::sig::FlexImage &gt; FlexImagePort</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00082">OVRHeadset.cpp:82</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1math_html_a052a3f5f259db0ef75ae0b70d4f54874"><div class="ttname"><a href="namespaceyarp_1_1math.html#a052a3f5f259db0ef75ae0b70d4f54874">yarp::math::eye</a></div><div class="ttdeci">yarp::sig::Matrix eye(int r, int c)</div><div class="ttdoc">Build an identity matrix (defined in Math.h).</div><div class="ttdef"><b>Definition:</b> <a href="math_8cpp_source.html#l00559">math.cpp:559</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1BufferedPort_html_a6cea630ef774d9184cfc7cc481e6abbb"><div class="ttname"><a href="classyarp_1_1os_1_1BufferedPort.html#a6cea630ef774d9184cfc7cc481e6abbb">yarp::os::BufferedPort::setEnvelope</a></div><div class="ttdeci">bool setEnvelope(PortWriter &amp;envelope) override</div><div class="ttdoc">Set an envelope (e.g., a timestamp) to the next message which will be sent.</div><div class="ttdef"><b>Definition:</b> <a href="BufferedPort-inl_8h_source.html#l00232">BufferedPort-inl.h:232</a></div></div>
<div class="ttc" id="acompiler_8h_html_a510840f0a75925f060a695c42d37740c"><div class="ttname"><a href="compiler_8h.html#a510840f0a75925f060a695c42d37740c">YARP_CONSTEXPR</a></div><div class="ttdeci">#define YARP_CONSTEXPR</div><div class="ttdoc">Expands to constexpr if constant expressions are supported by the current c++ compiler and build flag...</div><div class="ttdef"><b>Definition:</b> <a href="compiler_8h_source.html#l02888">compiler.h:2888</a></div></div>
<div class="ttc" id="aImplementAxisInfo_8cpp_html_ab295c2135096172ff421e6b33358407d"><div class="ttname"><a href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a></div><div class="ttdeci">bool ret</div><div class="ttdef"><b>Definition:</b> <a href="ImplementAxisInfo_8cpp_source.html#l00072">ImplementAxisInfo.cpp:72</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1VectorOf_html_af07ea998717848ef60ea71bb37c77d52"><div class="ttname"><a href="classyarp_1_1sig_1_1VectorOf.html#af07ea998717848ef60ea71bb37c77d52">yarp::sig::VectorOf::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="Vector_8h_source.html#l00568">Vector.h:568</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a3dd71eba99b361974f62a6379a5fea5f"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a3dd71eba99b361974f62a6379a5fea5f">yarp::dev::OVRHeadset::getButton</a></div><div class="ttdeci">bool getButton(unsigned int button_id, float &amp;value) override</div><div class="ttdoc">Get the value of a button.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01544">OVRHeadset.cpp:1544</a></div></div>
<div class="ttc" id="astructguiParam_html_a3f9992692699080e01da7d0b161d7dc3"><div class="ttname"><a href="structguiParam.html#a3f9992692699080e01da7d0b161d7dc3">guiParam::port</a></div><div class="ttdeci">FlexImagePort * port</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00091">OVRHeadset.cpp:91</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a6159dafcf3acdadec8dc7336451c9a20"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a6159dafcf3acdadec8dc7336451c9a20">yarp::os::Bottle::addFloat64</a></div><div class="ttdeci">void addFloat64(yarp::conf::float64_t x)</div><div class="ttdoc">Places a 64-bit floating point number in the bottle, at the end of the list.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00157">Bottle.cpp:157</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_a3dc0e7369c45d50e1c416d3f17449a6b"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#a3dc0e7369c45d50e1c416d3f17449a6b">yarp::sig::Image::read</a></div><div class="ttdeci">bool read(yarp::os::ConnectionReader &amp;connection) override</div><div class="ttdoc">Read image from a connection.</div><div class="ttdef"><b>Definition:</b> <a href="Image_8cpp_source.html#l00658">Image.cpp:658</a></div></div>
<div class="ttc" id="aclassTextureStatic_html_abec685cae5c2135c7e59c67097928b02"><div class="ttname"><a href="classTextureStatic.html#abec685cae5c2135c7e59c67097928b02">TextureStatic::width</a></div><div class="ttdeci">unsigned int width</div><div class="ttdef"><b>Definition:</b> <a href="TextureStatic_8h_source.html#l00042">TextureStatic.h:42</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_aeed416df930c8e0f599e5fcbebb66324"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">yarp::os::Bottle::find</a></div><div class="ttdeci">Value &amp; find(const std::string &amp;key) const override</div><div class="ttdoc">Gets a value corresponding to a given keyword.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00286">Bottle.cpp:286</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_1_1Time_html_a9909c5613bb1daee8f1fd92e1f4c95f6"><div class="ttname"><a href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">yarp::os::Time::now</a></div><div class="ttdeci">double now()</div><div class="ttdoc">Return the current time in seconds, relative to an arbitrary starting point.</div><div class="ttdef"><b>Definition:</b> <a href="Time_8cpp_source.html#l00121">Time.cpp:121</a></div></div>
<div class="ttc" id="aclassTextureBuffer_html_a4a58956947b7f2fd42fa64046687e097"><div class="ttname"><a href="classTextureBuffer.html#a4a58956947b7f2fd42fa64046687e097">TextureBuffer::textureSwapChain</a></div><div class="ttdeci">ovrTextureSwapChain textureSwapChain</div><div class="ttdef"><b>Definition:</b> <a href="TextureBuffer_8h_source.html#l00049">TextureBuffer.h:49</a></div></div>
<div class="ttc" id="aLog_8h_html_a52c3dab24cf55da2806a5c6e5f5d3b55"><div class="ttname"><a href="Log_8h.html#a52c3dab24cf55da2806a5c6e5f5d3b55">yInfo</a></div><div class="ttdeci">#define yInfo</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00107">Log.h:107</a></div></div>
<div class="ttc" id="aIJoypadController_8h_html_a656a30326dd0430003238a121be9b488"><div class="ttname"><a href="IJoypadController_8h.html#a656a30326dd0430003238a121be9b488">YRPJOY_HAT_LEFT</a></div><div class="ttdeci">#define YRPJOY_HAT_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="IJoypadController_8h_source.html#l00281">IJoypadController.h:281</a></div></div>
<div class="ttc" id="aIJoypadController_8h_html_ad58b1f44772b3dc5d7097a5d63aacee3"><div class="ttname"><a href="IJoypadController_8h.html#ad58b1f44772b3dc5d7097a5d63aacee3">YRPJOY_HAT_UP</a></div><div class="ttdeci">#define YRPJOY_HAT_UP</div><div class="ttdef"><b>Definition:</b> <a href="IJoypadController_8h_source.html#l00278">IJoypadController.h:278</a></div></div>
<div class="ttc" id="aLog_8h_html_a4525d9acbf59f40a30c7f5476742a773"><div class="ttname"><a href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a></div><div class="ttdeci">#define yTrace</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00105">Log.h:105</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1SystemClock_html_a8bf2d789cc755768467e392f88eccaf2"><div class="ttname"><a href="classyarp_1_1os_1_1SystemClock.html#a8bf2d789cc755768467e392f88eccaf2">yarp::os::SystemClock::nowSystem</a></div><div class="ttdeci">static double nowSystem()</div><div class="ttdef"><b>Definition:</b> <a href="SystemClock_8cpp_source.html#l00037">SystemClock.cpp:37</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1math_html_a71b54571a34f67f993a2e0fe30a56856"><div class="ttname"><a href="namespaceyarp_1_1math.html#a71b54571a34f67f993a2e0fe30a56856">yarp::math::rpy2dcm</a></div><div class="ttdeci">yarp::sig::Matrix rpy2dcm(const yarp::sig::Vector &amp;rpy)</div><div class="ttdoc">Converts roll-pitch-yaw angles in the corresponding dcm (direction cosine matrix) rotation matrix (de...</div><div class="ttdef"><b>Definition:</b> <a href="math_8cpp_source.html#l00815">math.cpp:815</a></div></div>
<div class="ttc" id="astructguiParam_html_a10bb8f1fd56cdfacb8a04038243d334a"><div class="ttname"><a href="structguiParam.html#a10bb8f1fd56cdfacb8a04038243d334a">guiParam::alpha</a></div><div class="ttdeci">double alpha</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00090">OVRHeadset.cpp:90</a></div></div>
<div class="ttc" id="aGLDebug_8h_html_a85c59f738179d162934c1fb67d45d562"><div class="ttname"><a href="GLDebug_8h.html#a85c59f738179d162934c1fb67d45d562">checkGlErrorMacro</a></div><div class="ttdeci">#define checkGlErrorMacro</div><div class="ttdef"><b>Definition:</b> <a href="GLDebug_8h_source.html#l00032">GLDebug.h:32</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1BufferedPort_html_af79f22ea0a51e1e6262a13ed83227b66"><div class="ttname"><a href="classyarp_1_1os_1_1BufferedPort.html#af79f22ea0a51e1e6262a13ed83227b66">yarp::os::BufferedPort::prepare</a></div><div class="ttdeci">T &amp; prepare()</div><div class="ttdoc">Access the object which will be transmitted by the next call to yarp::os::BufferedPort::write.</div><div class="ttdef"><b>Definition:</b> <a href="BufferedPort-inl_8h_source.html#l00114">BufferedPort-inl.h:114</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1VectorOf_html"><div class="ttname"><a href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::VectorOf</a></div><div class="ttdoc">Provides:</div><div class="ttdef"><b>Definition:</b> <a href="Vector_8h_source.html#l00119">Vector.h:120</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1BufferedPort_html"><div class="ttname"><a href="classyarp_1_1os_1_1BufferedPort.html">yarp::os::BufferedPort&lt; yarp::sig::FlexImage &gt;</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a9a98533da1dfef02172cfcae62439f00"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">yarp::os::Bottle::check</a></div><div class="ttdeci">bool check(const std::string &amp;key) const override</div><div class="ttdoc">Check if there exists a property of the given name.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00276">Bottle.cpp:276</a></div></div>
<div class="ttc" id="aTextureStatic_8h_html"><div class="ttname"><a href="TextureStatic_8h.html">TextureStatic.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1BufferedPort_html_aeda71e41212d06a9f08efa28e3f27233"><div class="ttname"><a href="classyarp_1_1os_1_1BufferedPort.html#aeda71e41212d06a9f08efa28e3f27233">yarp::os::BufferedPort::getOutputCount</a></div><div class="ttdeci">int getOutputCount() override</div><div class="ttdoc">Determine how many output connections this port has.</div><div class="ttdef"><b>Definition:</b> <a href="BufferedPort-inl_8h_source.html#l00251">BufferedPort-inl.h:251</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a000b840d8fca1c09cf4f2d05e333e88a"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a000b840d8fca1c09cf4f2d05e333e88a">yarp::os::Value::isString</a></div><div class="ttdeci">virtual bool isString() const</div><div class="ttdoc">Checks if value is a string.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00159">Value.cpp:159</a></div></div>
<div class="ttc" id="aLog_8h_html_a1ad5ea4187c27a9a718e3aefd0bee299"><div class="ttname"><a href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a></div><div class="ttdeci">#define yError</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00109">Log.h:109</a></div></div>
<div class="ttc" id="astructguiParam_html_aba9ba9e8478c9d05b7c4910996c17f3b"><div class="ttname"><a href="structguiParam.html#aba9ba9e8478c9d05b7c4910996c17f3b">guiParam::y</a></div><div class="ttdeci">double y</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00088">OVRHeadset.cpp:88</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a6fa0db6383a97c067435e3b5a9492a02"><div class="ttname"><a href="OVRHeadset_8cpp.html#a6fa0db6383a97c067435e3b5a9492a02">compareLuid</a></div><div class="ttdeci">static int compareLuid(const ovrGraphicsLuid &amp;lhs, const ovrGraphicsLuid &amp;rhs)</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00157">OVRHeadset.cpp:157</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a4d5466b734bf37bf7617dfe8eff87507"><div class="ttname"><a href="OVRHeadset_8cpp.html#a4d5466b734bf37bf7617dfe8eff87507">debugTangent</a></div><div class="ttdeci">static void debugTangent(std::string message, float tangent1, float tangent2)</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00138">OVRHeadset.cpp:138</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a1fbbaa867cf7bedc825e7a0de06f2f65"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a1fbbaa867cf7bedc825e7a0de06f2f65">yarp::dev::OVRHeadset::getButtonCount</a></div><div class="ttdeci">bool getButtonCount(unsigned int &amp;button_count) override</div><div class="ttdoc">Get number of Buttons.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01503">OVRHeadset.cpp:1503</a></div></div>
<div class="ttc" id="aProperty_8h_html"><div class="ttname"><a href="Property_8h.html">Property.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a25dd9800211ebfcae3a9d5da18344d9d"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a25dd9800211ebfcae3a9d5da18344d9d">yarp::os::Value::isBool</a></div><div class="ttdeci">virtual bool isBool() const</div><div class="ttdoc">Checks if value is a boolean.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00117">Value.cpp:117</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a74fc086a15b4a57c827132841aaff88e"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a74fc086a15b4a57c827132841aaff88e">yarp::os::Value::isFloat64</a></div><div class="ttdeci">virtual bool isFloat64() const</div><div class="ttdoc">Checks if value is a 64-bit floating point number.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00153">Value.cpp:153</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1SystemClock_html_af9eba2d0a597ba1a53e6be7a47941314"><div class="ttname"><a href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a></div><div class="ttdeci">static void delaySystem(double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="SystemClock_8cpp_source.html#l00032">SystemClock.cpp:32</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1FlexImage_html"><div class="ttname"><a href="classyarp_1_1sig_1_1FlexImage.html">yarp::sig::FlexImage</a></div><div class="ttdoc">Image class with user control of representation details.</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00403">Image.h:403</a></div></div>
<div class="ttc" id="aclassTextureStatic_html_aab51acdcceaa0dbeb32dd95baed76a3f"><div class="ttname"><a href="classTextureStatic.html#aab51acdcceaa0dbeb32dd95baed76a3f">TextureStatic::textureSwapChain</a></div><div class="ttdeci">ovrTextureSwapChain textureSwapChain</div><div class="ttdef"><b>Definition:</b> <a href="TextureStatic_8h_source.html#l00040">TextureStatic.h:40</a></div></div>
<div class="ttc" id="aTextureBuffer_8h_html"><div class="ttname"><a href="TextureBuffer_8h.html">TextureBuffer.h</a></div></div>
<div class="ttc" id="aimg-yarp-robot-64_8h_html"><div class="ttname"><a href="img-yarp-robot-64_8h.html">img-yarp-robot-64.h</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_aeddc5f52b166e572e17ee6a932a14e3e"><div class="ttname"><a href="OVRHeadset_8cpp.html#aeddc5f52b166e572e17ee6a932a14e3e">GetDefaultAdapterLuid</a></div><div class="ttdeci">static ovrGraphicsLuid GetDefaultAdapterLuid()</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00162">OVRHeadset.cpp:162</a></div></div>
<div class="ttc" id="aStamp_8h_html"><div class="ttname"><a href="Stamp_8h.html">Stamp.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a7905064f0a700c2c61da69e504049fc1"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a7905064f0a700c2c61da69e504049fc1">yarp::dev::OVRHeadset::open</a></div><div class="ttdeci">virtual bool open(yarp::os::Searchable &amp;cfg)</div><div class="ttdoc">Open the DeviceDriver.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00370">OVRHeadset.cpp:370</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a3f49bd86a14537ca63f59297513e80eb"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a3f49bd86a14537ca63f59297513e80eb">yarp::os::Value::asBool</a></div><div class="ttdeci">virtual bool asBool() const</div><div class="ttdoc">Get boolean value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00189">Value.cpp:189</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_af2125ceb5eb007b6cd6ab77666682117"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">yarp::os::Value::asString</a></div><div class="ttdeci">virtual std::string asString() const</div><div class="ttdoc">Get string value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00237">Value.cpp:237</a></div></div>
<div class="ttc" id="astructguiParam_html_a0d1240c11c9d854229e0ee61d86223fa"><div class="ttname"><a href="structguiParam.html#a0d1240c11c9d854229e0ee61d86223fa">guiParam::resizeH</a></div><div class="ttdeci">double resizeH</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00086">OVRHeadset.cpp:86</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a6ada87a4833f376d9532c046a1c6595b"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a6ada87a4833f376d9532c046a1c6595b">yarp::dev::OVRHeadset::getTrackballCount</a></div><div class="ttdeci">bool getTrackballCount(unsigned int &amp;Trackball_count) override</div><div class="ttdoc">Get number of trackballs.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01510">OVRHeadset.cpp:1510</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1BufferedPort_html_a938b0e335554aa0e7fb1d919e51a665f"><div class="ttname"><a href="classyarp_1_1os_1_1BufferedPort.html#a938b0e335554aa0e7fb1d919e51a665f">yarp::os::BufferedPort::open</a></div><div class="ttdeci">bool open(const std::string &amp;name) override</div><div class="ttdoc">Start port operation, with a specific name, with automatically-chosen network parameters.</div><div class="ttdef"><b>Definition:</b> <a href="BufferedPort-inl_8h_source.html#l00041">BufferedPort-inl.h:41</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_ad5991e2cc19472b8b1e5565a31ef5f23"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#ad5991e2cc19472b8b1e5565a31ef5f23">yarp::dev::OVRHeadset::updateService</a></div><div class="ttdeci">virtual bool updateService()</div><div class="ttdoc">Give the service the chance to run for a while.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00836">OVRHeadset.cpp:836</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_ad1a581785202df3a73af4fa24095fedc"><div class="ttname"><a href="OVRHeadset_8cpp.html#ad1a581785202df3a73af4fa24095fedc">valueIsType</a></div><div class="ttdeci">bool(yarp::os::Value::* valueIsType)(void) const</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00081">OVRHeadset.cpp:81</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_aa7b406215b653817f2450ac416b65867"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">yarp::os::Searchable::check</a></div><div class="ttdeci">virtual bool check(const std::string &amp;key) const =0</div><div class="ttdoc">Check if there exists a property of the given name.</div></div>
<div class="ttc" id="aOVRHeadset_8h_html"><div class="ttname"><a href="OVRHeadset_8h.html">OVRHeadset.h</a></div></div>
<div class="ttc" id="aimg-crosshairs_8h_html_a6790ae11648ed4b2696e30dcbfc34812"><div class="ttname"><a href="img-crosshairs_8h.html#a6790ae11648ed4b2696e30dcbfc34812">crosshairs</a></div><div class="ttdeci">const TextureStatic::Image crosshairs</div><div class="ttdef"><b>Definition:</b> <a href="img-crosshairs_8h_source.html#l00025">img-crosshairs.h:25</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_a4a254e53809b70f78822c7f0e1b2b5c6"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">yarp::os::Searchable::find</a></div><div class="ttdeci">virtual Value &amp; find(const std::string &amp;key) const =0</div><div class="ttdoc">Gets a value corresponding to a given keyword.</div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a59293596d499b1d2109f5915e91f1477"><div class="ttname"><a href="OVRHeadset_8cpp.html#a59293596d499b1d2109f5915e91f1477">AXIS_COUNT</a></div><div class="ttdeci">constexpr unsigned int AXIS_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00051">OVRHeadset.cpp:51</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a0f4eac70be345a455ced3d11db42c1be"><div class="ttname"><a href="OVRHeadset_8cpp.html#a0f4eac70be345a455ced3d11db42c1be">vecSubtract</a></div><div class="ttdeci">ovrVector3f vecSubtract(const ovrVector3f &amp;a, const ovrVector3f &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00129">OVRHeadset.cpp:129</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a01f657199e69555f7246228edb783aae"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a01f657199e69555f7246228edb783aae">yarp::dev::OVRHeadset::getStickDoF</a></div><div class="ttdeci">bool getStickDoF(unsigned int stick_id, unsigned int &amp;DoF) override</div><div class="ttdoc">Get the Degree Of Freedom count for desired stick.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01538">OVRHeadset.cpp:1538</a></div></div>
<div class="ttc" id="aTextureBattery_8h_html"><div class="ttname"><a href="TextureBattery_8h.html">TextureBattery.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a453bca74fd08e350bf1e1f5c13801e32"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a453bca74fd08e350bf1e1f5c13801e32">yarp::dev::OVRHeadset::getStick</a></div><div class="ttdeci">bool getStick(unsigned int stick_id, yarp::sig::Vector &amp;value, JoypadCtrl_coordinateMode coordinate_mode) override</div><div class="ttdoc">Get the value of a stick if present, return false otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01591">OVRHeadset.cpp:1591</a></div></div>
<div class="ttc" id="astructguiParam_html_a0470e92f5403e86495fa739dd6ab0b68"><div class="ttname"><a href="structguiParam.html#a0470e92f5403e86495fa739dd6ab0b68">guiParam::x</a></div><div class="ttdeci">double x</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00087">OVRHeadset.cpp:87</a></div></div>
<div class="ttc" id="aBufferedPort_8h_html"><div class="ttname"><a href="BufferedPort_8h.html">BufferedPort.h</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a1141fc39c690c1c6316e05669f775a09"><div class="ttname"><a href="OVRHeadset_8cpp.html#a1141fc39c690c1c6316e05669f775a09">radToDeg</a></div><div class="ttdeci">OVR::Vector3f radToDeg(const OVR::Vector3f &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00203">OVRHeadset.cpp:203</a></div></div>
<div class="ttc" id="aIJoypadController_8h_html_a23a90ff010f1d3b71979b8366a853e12"><div class="ttname"><a href="IJoypadController_8h.html#a23a90ff010f1d3b71979b8366a853e12">YRPJOY_HAT_CENTERED</a></div><div class="ttdeci">#define YRPJOY_HAT_CENTERED</div><div class="ttdef"><b>Definition:</b> <a href="IJoypadController_8h_source.html#l00277">IJoypadController.h:277</a></div></div>
<div class="ttc" id="aimg-crosshairs_8h_html"><div class="ttname"><a href="img-crosshairs_8h.html">img-crosshairs.h</a></div></div>
<div class="ttc" id="aclassTextureBuffer_html_a592e74178bc177c6f774305c6ea4490a"><div class="ttname"><a href="classTextureBuffer.html#a592e74178bc177c6f774305c6ea4490a">TextureBuffer::height</a></div><div class="ttdeci">size_t height</div><div class="ttdef"><b>Definition:</b> <a href="TextureBuffer_8h_source.html#l00053">TextureBuffer.h:53</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a51420202eaf76cc89b2b84c5f1a55b9b"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a51420202eaf76cc89b2b84c5f1a55b9b">yarp::dev::OVRHeadset::getTouchSurfaceCount</a></div><div class="ttdeci">bool getTouchSurfaceCount(unsigned int &amp;touch_count) override</div><div class="ttdoc">get the number of touch surface.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01524">OVRHeadset.cpp:1524</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_ad014b5d06b10e037c462abfcf34a9e45"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#ad014b5d06b10e037c462abfcf34a9e45">yarp::os::Bottle::isNull</a></div><div class="ttdeci">bool isNull() const override</div><div class="ttdoc">Checks if the object is invalid.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00369">Bottle.cpp:369</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_af9722881dd94dffe37e681419d24c096"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#af9722881dd94dffe37e681419d24c096">yarp::dev::OVRHeadset::getTrackball</a></div><div class="ttdeci">bool getTrackball(unsigned int trackball_id, yarp::sig::Vector &amp;value) override</div><div class="ttdoc">Get the axes change of a Trackball.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01557">OVRHeadset.cpp:1557</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html">Image.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_ae43fbd449904c36569019f2965578c42"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#ae43fbd449904c36569019f2965578c42">yarp::dev::OVRHeadset::run</a></div><div class="ttdeci">virtual void run()</div><div class="ttdoc">Loop function.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00889">OVRHeadset.cpp:889</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a12f4e98dc11cde9f24ddf5f22f050e2f"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a12f4e98dc11cde9f24ddf5f22f050e2f">yarp::dev::OVRHeadset::threadRelease</a></div><div class="ttdeci">virtual void threadRelease()</div><div class="ttdoc">Release method.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00732">OVRHeadset.cpp:732</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Stamp_html"><div class="ttname"><a href="classyarp_1_1os_1_1Stamp.html">yarp::os::Stamp</a></div><div class="ttdoc">An abstraction for a time stamp and/or sequence number.</div><div class="ttdef"><b>Definition:</b> <a href="Stamp_8h_source.html#l00024">Stamp.h:25</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a4775a45e57c40460b0202c74f1a9bc4e"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">yarp::os::Value::asInt32</a></div><div class="ttdeci">virtual std::int32_t asInt32() const</div><div class="ttdoc">Get 32-bit integer value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00207">Value.cpp:207</a></div></div>
<div class="ttc" id="astructguiParam_html_aca8a3eadf878c0a3b079d13270256cf7"><div class="ttname"><a href="structguiParam.html#aca8a3eadf878c0a3b079d13270256cf7">guiParam::texture</a></div><div class="ttdeci">TextureBuffer * texture</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00093">OVRHeadset.cpp:93</a></div></div>
<div class="ttc" id="aclassTextureBuffer_html_a22bc30e42d5e3d56f8a5a155c91a5b76"><div class="ttname"><a href="classTextureBuffer.html#a22bc30e42d5e3d56f8a5a155c91a5b76">TextureBuffer::width</a></div><div class="ttdeci">size_t width</div><div class="ttdef"><b>Definition:</b> <a href="TextureBuffer_8h_source.html#l00052">TextureBuffer.h:52</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1BufferedPort_html_af24f1371b310763572aa7f22459fd71d"><div class="ttname"><a href="classyarp_1_1os_1_1BufferedPort.html#af24f1371b310763572aa7f22459fd71d">yarp::os::BufferedPort::write</a></div><div class="ttdeci">void write(bool forceStrict=false)</div><div class="ttdoc">Write the current object being returned by BufferedPort::prepare.</div><div class="ttdef"><b>Definition:</b> <a href="BufferedPort-inl_8h_source.html#l00126">BufferedPort-inl.h:126</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html">yarp::dev::OVRHeadset</a></div><div class="ttdoc">Device that manages the Oculus Rift Headset.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8h_source.html#l00079">OVRHeadset.h:83</a></div></div>
<div class="ttc" id="aclassTextureStatic_html"><div class="ttname"><a href="classTextureStatic.html">TextureStatic</a></div><div class="ttdef"><b>Definition:</b> <a href="TextureStatic_8h_source.html#l00026">TextureStatic.h:27</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a3588792495782e297deb3b5ea20c220e"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a3588792495782e297deb3b5ea20c220e">yarp::dev::OVRHeadset::getHatCount</a></div><div class="ttdeci">bool getHatCount(unsigned int &amp;Hat_count) override</div><div class="ttdoc">Get number of Hats.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01517">OVRHeadset.cpp:1517</a></div></div>
<div class="ttc" id="anamespaceyarp_html"><div class="ttname"><a href="namespaceyarp.html">yarp</a></div><div class="ttdoc">The main, catch-all namespace for YARP.</div><div class="ttdef"><b>Definition:</b> <a href="numeric_8h_source.html#l00047">numeric.h:47</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_html_ad34742716afe2bd0d87a5c5d06ad25d0"><div class="ttname"><a href="namespaceyarp_1_1os.html#ad34742716afe2bd0d87a5c5d06ad25d0">yarp::os::ShouldUseSystemClock</a></div><div class="ttdeci">ShouldUseSystemClock</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2Time_8h_source.html#l00022">Time.h:23</a></div></div>
<div class="ttc" id="aFrameTransform_8h_html"><div class="ttname"><a href="FrameTransform_8h.html">FrameTransform.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a6ba4ad45d4d58094d809f0cb99bc4ba2"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a6ba4ad45d4d58094d809f0cb99bc4ba2">yarp::dev::OVRHeadset::threadInit</a></div><div class="ttdeci">virtual bool threadInit()</div><div class="ttdoc">Initialization method.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00607">OVRHeadset.cpp:607</a></div></div>
<div class="ttc" id="ayarp-v3_83-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h_html_a115a3e86265819f41c93ff12c2538d1f"><div class="ttname"><a href="yarp-v3_83-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h.html#a115a3e86265819f41c93ff12c2538d1f">YARP_UNUSED</a></div><div class="ttdeci">#define YARP_UNUSED(var)</div><div class="ttdef"><b>Definition:</b> <a href="yarp-v3_83-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h_source.html#l00159">api.h:159</a></div></div>
<div class="ttc" id="aIJoypadController_8h_html_a21d237a390bc7b9a294981e216c4d161"><div class="ttname"><a href="IJoypadController_8h.html#a21d237a390bc7b9a294981e216c4d161">YRPJOY_HAT_DOWN</a></div><div class="ttdeci">#define YRPJOY_HAT_DOWN</div><div class="ttdef"><b>Definition:</b> <a href="IJoypadController_8h_source.html#l00280">IJoypadController.h:280</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a9df94ba80d36a4530c43739ca0edd00b"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a9df94ba80d36a4530c43739ca0edd00b">yarp::dev::OVRHeadset::getStickCount</a></div><div class="ttdeci">bool getStickCount(unsigned int &amp;stick_count) override</div><div class="ttdoc">get the number of the sticks</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l01531">OVRHeadset.cpp:1531</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a3df6f1622850f59c84ca447a778c8580"><div class="ttname"><a href="OVRHeadset_8cpp.html#a3df6f1622850f59c84ca447a778c8580">ovrVec3ToYarp</a></div><div class="ttdeci">yarp::sig::Vector ovrVec3ToYarp(const ovrVector3f &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00097">OVRHeadset.cpp:97</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a3ae16d5e5129ee0fdd1a7e6a78f5a672"><div class="ttname"><a href="OVRHeadset_8cpp.html#a3ae16d5e5129ee0fdd1a7e6a78f5a672">STICK_COUNT</a></div><div class="ttdeci">constexpr unsigned int STICK_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00052">OVRHeadset.cpp:52</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_ac66525e004360fbc0e81d4628c55a2ef"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#ac66525e004360fbc0e81d4628c55a2ef">yarp::dev::OVRHeadset::OVRHeadset</a></div><div class="ttdeci">OVRHeadset()</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00258">OVRHeadset.cpp:258</a></div></div>
<div class="ttc" id="aInputCallback_8h_html"><div class="ttname"><a href="InputCallback_8h.html">InputCallback.h</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2Time_8h_html"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2Time_8h.html">Time.h</a></div></div>
<div class="ttc" id="aLog_8h_html_ac30f48ad1ac5027a608ca8630e17b1d5"><div class="ttname"><a href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a></div><div class="ttdeci">#define yDebug</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00106">Log.h:106</a></div></div>
<div class="ttc" id="astructguiParam_html"><div class="ttname"><a href="structguiParam.html">guiParam</a></div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00083">OVRHeadset.cpp:84</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_af68493faa48a0c27688cf95372e3ee90"><div class="ttname"><a href="OVRHeadset_8cpp.html#af68493faa48a0c27688cf95372e3ee90">ovrRot2YarpRPY</a></div><div class="ttdeci">yarp::sig::Vector ovrRot2YarpRPY(const OVR::Quatf &amp;rot)</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00109">OVRHeadset.cpp:109</a></div></div>
<div class="ttc" id="aLog_8h_html_a74f4af60dea29713770bcde6ad428391"><div class="ttname"><a href="Log_8h.html#a74f4af60dea29713770bcde6ad428391">yWarning</a></div><div class="ttdeci">#define yWarning</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00108">Log.h:108</a></div></div>
<div class="ttc" id="aIJoypadController_8h_html_a6811631defc87d6238b693db3105a1d5"><div class="ttname"><a href="IJoypadController_8h.html#a6811631defc87d6238b693db3105a1d5">YRPJOY_HAT_RIGHT</a></div><div class="ttdeci">#define YRPJOY_HAT_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="IJoypadController_8h_source.html#l00279">IJoypadController.h:279</a></div></div>
<div class="ttc" id="aGLDebug_8h_html"><div class="ttname"><a href="GLDebug_8h.html">GLDebug.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a></div><div class="ttdoc">A single value (typically within a Bottle).</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00046">Value.h:47</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a7848050558c867a8e1954e67b433c445"><div class="ttname"><a href="OVRHeadset_8cpp.html#a7848050558c867a8e1954e67b433c445">BUTTON_COUNT</a></div><div class="ttdeci">constexpr unsigned int BUTTON_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00053">OVRHeadset.cpp:53</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a0003d9cf199c58ecd412825528fe10d0"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">yarp::os::Value::asFloat64</a></div><div class="ttdeci">virtual yarp::conf::float64_t asFloat64() const</div><div class="ttdoc">Get 64-bit floating point value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00225">Value.cpp:225</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_aa445caa57666433c43d084de62ff47d2"><div class="ttname"><a href="OVRHeadset_8cpp.html#aa445caa57666433c43d084de62ff47d2">setHeadLockedLayer</a></div><div class="ttdeci">void setHeadLockedLayer(ovrLayerQuad &amp;layer, TextureStatic *tex, const float x, const float y, const float z, const float rx, const float ry, const float rz, float rw, const float sizeX, const float sizeY)</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00214">OVRHeadset.cpp:214</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1VectorOf_html_a3b340b29d04e3fd3edaaf8aaba1ac41d"><div class="ttname"><a href="classyarp_1_1sig_1_1VectorOf.html#a3b340b29d04e3fd3edaaf8aaba1ac41d">yarp::sig::VectorOf::push_back</a></div><div class="ttdeci">void push_back(const T &amp;elem)</div><div class="ttdoc">Push a new element in the vector: size is changed.</div><div class="ttdef"><b>Definition:</b> <a href="Vector_8h_source.html#l00309">Vector.h:309</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_1_1Time_html_aca80809e0597551745954e2547e581ee"><div class="ttname"><a href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">yarp::os::Time::delay</a></div><div class="ttdeci">void delay(double seconds)</div><div class="ttdoc">Wait for a certain number of seconds.</div><div class="ttdef"><b>Definition:</b> <a href="Time_8cpp_source.html#l00111">Time.cpp:111</a></div></div>
<div class="ttc" id="aimg-yarp-robot-64_8h_html_a6fac2c957ed579da1c933af1ebc2dc16"><div class="ttname"><a href="img-yarp-robot-64_8h.html#a6fac2c957ed579da1c933af1ebc2dc16">yarp_logo</a></div><div class="ttdeci">const TextureStatic::Image yarp_logo</div><div class="ttdef"><b>Definition:</b> <a href="img-yarp-robot-64_8h_source.html#l00025">img-yarp-robot-64.h:25</a></div></div>
<div class="ttc" id="aclassTextureStatic_html_afaa4f3648389ec2b5681ff7f54ecf858"><div class="ttname"><a href="classTextureStatic.html#afaa4f3648389ec2b5681ff7f54ecf858">TextureStatic::height</a></div><div class="ttdeci">unsigned int height</div><div class="ttdef"><b>Definition:</b> <a href="TextureStatic_8h_source.html#l00043">TextureStatic.h:43</a></div></div>
<div class="ttc" id="aclassTextureBuffer_html"><div class="ttname"><a href="classTextureBuffer.html">TextureBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="TextureBuffer_8h_source.html#l00028">TextureBuffer.h:29</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1OVRHeadset_html_a1f1be75d803e990ca1c77fa07633af75"><div class="ttname"><a href="classyarp_1_1dev_1_1OVRHeadset.html#a1f1be75d803e990ca1c77fa07633af75">yarp::dev::OVRHeadset::close</a></div><div class="ttdeci">virtual bool close()</div><div class="ttdoc">Close the DeviceDriver.</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00823">OVRHeadset.cpp:823</a></div></div>
<div class="ttc" id="aclassTextureBattery_html"><div class="ttname"><a href="classTextureBattery.html">TextureBattery</a></div><div class="ttdef"><b>Definition:</b> <a href="TextureBattery_8h_source.html#l00033">TextureBattery.h:34</a></div></div>
<div class="ttc" id="aOVRHeadset_8cpp_html_a8a32fc208dc0915fec9c0ed75c9bf457"><div class="ttname"><a href="OVRHeadset_8cpp.html#a8a32fc208dc0915fec9c0ed75c9bf457">ovr2matrix</a></div><div class="ttdeci">yarp::sig::Matrix ovr2matrix(const ovrVector3f &amp;pos, const OVR::Quatf &amp;orientation)</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00120">OVRHeadset.cpp:120</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a></div><div class="ttdoc">A class for storing options and configuration information.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8h_source.html#l00034">Property.h:37</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Matrix_html"><div class="ttname"><a href="classyarp_1_1sig_1_1Matrix.html">yarp::sig::Matrix</a></div><div class="ttdoc">A class for a Matrix.</div><div class="ttdef"><b>Definition:</b> <a href="Matrix_8h_source.html#l00045">Matrix.h:46</a></div></div>
<div class="ttc" id="astructguiParam_html_abd6bf09fe1eb38b20127c93497dd1263"><div class="ttname"><a href="structguiParam.html#abd6bf09fe1eb38b20127c93497dd1263">guiParam::z</a></div><div class="ttdeci">double z</div><div class="ttdef"><b>Definition:</b> <a href="OVRHeadset_8cpp_source.html#l00089">OVRHeadset.cpp:89</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a942639c39161135049e19ebdb1eeae9a"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a942639c39161135049e19ebdb1eeae9a">yarp::os::Value::isInt32</a></div><div class="ttdeci">virtual bool isInt32() const</div><div class="ttdoc">Checks if value is a 32-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00135">Value.cpp:135</a></div></div>
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.3.3</span></li>
    <li class="navelem"><a class="el" href="dir_d946d32291de7db32f6a943fb45d46f4.html">src</a></li><li class="navelem"><a class="el" href="dir_abd80c029d214e783ff905e909ed9db6.html">devices</a></li><li class="navelem"><a class="el" href="dir_d369513ef608f4e55c3ff2cab4b225e7.html">ovrheadset</a></li><li class="navelem"><a class="el" href="OVRHeadset_8cpp.html">OVRHeadset.cpp</a></li>
    <li class="footer">Generated on Tue Nov 3 2020 16:57:00 for YARP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
