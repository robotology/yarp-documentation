<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: src/devices/imuBosch_BNO055/imuBosch_BNO055.cpp Source File</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.3.3' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('imuBosch__BNO055_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">imuBosch_BNO055.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="imuBosch__BNO055_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2006-2020 Istituto Italiano di Tecnologia (IIT)</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This library is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This library is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with this library; if not, write to the Free Software</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;arpa/inet.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;cerrno&gt;</span>   <span class="comment">// Error number definitions</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span>   <span class="comment">// File control definitions</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;termios.h&gt;</span> <span class="comment">// terminal io (serial port) interface</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;linux/i2c-dev.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#ifdef I2C_HAS_SMBUS_H</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor"># include &lt;i2c/smbus.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;}</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;linux/kernel.h&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;mutex&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Log_8h.html">yarp/os/Log.h</a>&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="LogStream_8h.html">yarp/os/LogStream.h</a>&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Math_8h.html">yarp/math/Math.h</a>&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="libYARP__os_2src_2yarp_2os_2Time_8h.html">yarp/os/Time.h</a>&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imuBosch__BNO055_8h.html">imuBosch_BNO055.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceyarp_1_1os.html">yarp::os</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceyarp_1_1dev.html">yarp::dev</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="imuBosch__BNO055_8cpp.html#aca604b497ce91a03d9bbec13df5a6e59">   53</a></span>&#160;constexpr uint8_t <a class="code" href="imuBosch__BNO055_8cpp.html#aca604b497ce91a03d9bbec13df5a6e59">i2cAddrA</a> = 0x28;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">//constexpr uint8_t i2cAddrB = 0x29;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a32412676dd04ffbe173d6c6e94faae82">   56</a></span>&#160;<a class="code" href="classBoschIMU.html#a32412676dd04ffbe173d6c6e94faae82">BoschIMU::BoschIMU</a>() : <a class="code" href="classyarp_1_1os_1_1PeriodicThread.html">PeriodicThread</a>(0.02),</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="yarpros_8cpp.html#ab3f078684998b83967d507d0f453f454">verbose</a>(false),</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    status(0),</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    nChannels(12),</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    m_timeStamp(0.0),</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    timeLastReport(0.0),</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    i2c_flag(false),</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    checkError(false),</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    fd(0),</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    responseOffset(0),</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    readFunc(&amp;<a class="code" href="classBoschIMU.html">BoschIMU</a>::sendReadCommandSer),</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    totMessagesRead(0),</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    errs(0),</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    dataIsValid(false)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">resize</a>(12);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#ae9d8cdc242bd0687a2f1404114963247">zero</a>();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">resize</a>(12);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#ae9d8cdc242bd0687a2f1404114963247">zero</a>();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="classBoschIMU.html#a90df914c339d263ef74d62692461d2fe">errorCounter</a>.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">resize</a>(11);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="classBoschIMU.html#a90df914c339d263ef74d62692461d2fe">errorCounter</a>.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#ae9d8cdc242bd0687a2f1404114963247">zero</a>();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<a class="code" href="classBoschIMU.html#ab256ea4a225a513e04505e87b161d969">BoschIMU::~BoschIMU</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classBoschIMU.html#ac7935ebe20faff4c73275b744f465e5e">   82</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#ac7935ebe20faff4c73275b744f465e5e">BoschIMU::open</a>(<a class="code" href="classyarp_1_1os_1_1Searchable.html">yarp::os::Searchable</a>&amp; config)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">//debug</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>(<span class="stringliteral">&quot;Parameters are:\n\t%s&quot;</span>, config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa8e76c64a9251dc4485022aa7140d150">toString</a>().c_str());</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span>(!config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;comport&quot;</span>) &amp;&amp; !config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;i2c&quot;</span>))</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschImu: Params &#39;comport&#39; and &#39;i2c&#39; not found&quot;</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> (config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;comport&quot;</span>) &amp;&amp; config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;i2c&quot;</span>))</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschImu: Params &#39;comport&#39; and &#39;i2c&#39; both specified&quot;</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="classBoschIMU.html#a46b37e7eb24f66d906f557c029a307cb">i2c_flag</a> = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;i2c&quot;</span>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="classBoschIMU.html#a2970ef93541ac41df67a331193b66456">readFunc</a> = <a class="code" href="classBoschIMU.html#a46b37e7eb24f66d906f557c029a307cb">i2c_flag</a> ? &amp;<a class="code" href="classBoschIMU.html#a37152e926108123b77148f7b4f4d8b0b">BoschIMU::sendReadCommandI2c</a> : &amp;<a class="code" href="classBoschIMU.html#a13c6b491b7568fed80f9dd256b1ef34c">BoschIMU::sendReadCommandSer</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// In case of reading through serial the first two bytes of the response are the ack, so</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// they need to be discarded when publishing the data.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="classBoschIMU.html#a1a7663de36ed66c45f5f69b14962ee21">responseOffset</a> = <a class="code" href="classBoschIMU.html#a46b37e7eb24f66d906f557c029a307cb">i2c_flag</a> ? 0 : 2;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classBoschIMU.html#a46b37e7eb24f66d906f557c029a307cb">i2c_flag</a>)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (!config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;i2c&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a000b840d8fca1c09cf4f2d05e333e88a">isString</a>())</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()&lt;&lt;<span class="stringliteral">&quot;BoschImu: i2c param malformed, it should be a string, aborting.&quot;</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        std::string i2cDevFile = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;i2c&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a> = <a class="code" href="classBoschIMU.html#ac7935ebe20faff4c73275b744f465e5e">::open</a>(i2cDevFile.c_str(), O_RDWR);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a> &lt; 0)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>(<span class="stringliteral">&quot;BoschImu: can&#39;t open %s, %s&quot;</span>, i2cDevFile.c_str(), strerror(errno));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">if</span> (::ioctl(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, I2C_SLAVE, <a class="code" href="imuBosch__BNO055_8cpp.html#aca604b497ce91a03d9bbec13df5a6e59">i2cAddrA</a>) &lt; 0)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>(<span class="stringliteral">&quot;BoschImu: ioctl failed on %s, %s&quot;</span>, i2cDevFile.c_str(), strerror(errno));</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a> = <a class="code" href="classBoschIMU.html#ac7935ebe20faff4c73275b744f465e5e">::open</a>(config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;comport&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a807e82fec8408b7be003fa1c491eda2c">toString</a>().c_str(), O_RDWR | O_NOCTTY );</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a> &lt; 0) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>(<span class="stringliteral">&quot;can&#39;t open %s, %s&quot;</span>, config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;comport&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a807e82fec8408b7be003fa1c491eda2c">toString</a>().c_str(), strerror(errno));</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment">//Get the current options for the port...</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keyword">struct </span>termios options;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        tcgetattr(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, &amp;options);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        cfmakeraw(&amp;options);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment">//set the baud rate to 115200</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordtype">int</span> baudRate = B115200;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        cfsetospeed(&amp;options, baudRate);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        cfsetispeed(&amp;options, baudRate);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">//set the number of data bits.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        options.c_cflag &amp;= ~CSIZE;  <span class="comment">// Mask the character size bits</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        options.c_cflag |= CS8;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">//set the number of stop bits to 1</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        options.c_cflag &amp;= ~CSTOPB;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="comment">//Set parity to None</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        options.c_cflag &amp;=~PARENB;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">//set for non-canonical (raw processing, no echo, etc.)</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">//     options.c_iflag = IGNPAR; // ignore parity check</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        options.c_oflag = 0; <span class="comment">// raw output</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        options.c_lflag = 0; <span class="comment">// raw input</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="comment">// SET NOT BLOCKING READ</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        options.c_cc[VMIN]  = 0;   <span class="comment">// block reading until RX x characters. If x = 0, it is non-blocking.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        options.c_cc[VTIME] = 2;   <span class="comment">// Inter-Character Timer -- i.e. timeout= x*.1 s</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="comment">//Set local mode and enable the receiver</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        options.c_cflag |= (CLOCAL | CREAD);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        tcflush(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, TCIOFLUSH);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">//Set the new options for the port...</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> ( tcsetattr(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, TCSANOW, &amp;options) != 0)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>(<span class="stringliteral">&quot;Configuring comport failed&quot;</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classBoschIMU.html#a96f6054c40e3aeb2555ce833734d855d">nChannels</a> = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;channels&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(12)).asInt32();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">double</span> period = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;period&quot;</span>,<a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(10),<span class="stringliteral">&quot;Thread period in ms&quot;</span>).asInt32() / 1000.0;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classyarp_1_1os_1_1PeriodicThread.html#a070daf7983102f96609a6a956ae7771f">setPeriod</a>(period);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;sensor_name&quot;</span>) &amp;&amp; config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;sensor_name&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a000b840d8fca1c09cf4f2d05e333e88a">isString</a>())</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        m_sensorName = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;sensor_name&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        m_sensorName = <span class="stringliteral">&quot;sensor_imu_bosch_bno055&quot;</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="Log_8h.html#a74f4af60dea29713770bcde6ad428391">yWarning</a>() &lt;&lt; <span class="stringliteral">&quot;Bosch BNO055 IMU -  Parameter \&quot;sensor_name\&quot; not set. Using default value  \&quot;&quot;</span> &lt;&lt; m_sensorName &lt;&lt; <span class="stringliteral">&quot;\&quot; for this parameter.&quot;</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;frame_name&quot;</span>) &amp;&amp; config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;frame_name&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a000b840d8fca1c09cf4f2d05e333e88a">isString</a>())</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        m_frameName = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;frame_name&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        m_frameName = m_sensorName;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="Log_8h.html#a74f4af60dea29713770bcde6ad428391">yWarning</a>() &lt;&lt; <span class="stringliteral">&quot;Bosch BNO055 IMU -  Parameter \&quot;frame_name\&quot; not set. Using the same value as \&quot;sensor_name\&quot; for this parameter.&quot;</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">return</span> PeriodicThread::start();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a460c436cb5346f53bb16c73b7b08f995">  210</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a460c436cb5346f53bb16c73b7b08f995">BoschIMU::close</a>()</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">//stop the thread</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    PeriodicThread::stop();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a21139c7577a4460dfc175a47eb05ea90">  218</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a21139c7577a4460dfc175a47eb05ea90">BoschIMU::checkReadResponse</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* response)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;{</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[0] == (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) <a class="code" href="imuBosch__BNO055_8h.html#a2002aea78b48c89e51345c41351e0c84">REPLY_HEAD</a>)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[0] == (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) <a class="code" href="imuBosch__BNO055_8h.html#a84245340db71f3d977cb62a11ab03714">ERROR_HEAD</a>)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[1] != <a class="code" href="imuBosch__BNO055_8h.html#aad3ae11c832343293b140dafc3b984ad">REGISTER_NOT_READY</a>)   <span class="comment">// if error is 0x07, do not print error messages</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>(<span class="stringliteral">&quot;Bosch BNO055 IMU - Inertial sensor didn&#39;t understand the command. \n\</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="stringliteral">            If this error happens more than once in a row, please check serial communication is working fine and it isn&#39;t affected by electrical disturbance.&quot;</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="classBoschIMU.html#a90df914c339d263ef74d62692461d2fe">errorCounter</a>[<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[1]]++;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <a class="code" href="classBoschIMU.html#aacda221b5f05558a3caf5bd6b4ea7eac">readSysError</a>();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="classBoschIMU.html#a90df914c339d263ef74d62692461d2fe">errorCounter</a>[0]++;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>(<span class="stringliteral">&quot;Bosch BNO055 IMU - Received unknown response message. \n\</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral">            If this error happens more than once in a row, please check serial communication is working fine and it isn&#39;t affected by electrical disturbance.&quot;</span>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="classBoschIMU.html#a4f823e5224ec3be2be0c2d8e1997f6b1">dropGarbage</a>();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="classBoschIMU.html#aacda221b5f05558a3caf5bd6b4ea7eac">readSysError</a>();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a87cab617a9c90f9204e1b60b7c2e6246">  245</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a87cab617a9c90f9204e1b60b7c2e6246">BoschIMU::checkWriteResponse</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* response)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[0] == (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) <a class="code" href="imuBosch__BNO055_8h.html#a84245340db71f3d977cb62a11ab03714">ERROR_HEAD</a>)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[1] == (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) <a class="code" href="imuBosch__BNO055_8h.html#a706dc7c2c079e0c9addcc45d853fcf02">WRITE_SUCC</a>)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[1] != <a class="code" href="imuBosch__BNO055_8h.html#aad3ae11c832343293b140dafc3b984ad">REGISTER_NOT_READY</a>)   <span class="comment">// if error is 0x07, do not print error messages</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>(<span class="stringliteral">&quot;Bosch BNO055 IMU - Inertial sensor didn&#39;t understand the command. \n\</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="stringliteral">            If this error happens more than once in a row, please check serial communication is working fine and it isn&#39;t affected by electrical disturbance.&quot;</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="classBoschIMU.html#a90df914c339d263ef74d62692461d2fe">errorCounter</a>[<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[1]]++;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="classBoschIMU.html#aacda221b5f05558a3caf5bd6b4ea7eac">readSysError</a>();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="classBoschIMU.html#a90df914c339d263ef74d62692461d2fe">errorCounter</a>[0]++;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>(<span class="stringliteral">&quot;Bosch BNO055 IMU - Received unknown response message. \n\</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="stringliteral">            If this error happens more than once in a row, please check serial communication is working fine and it isn&#39;t affected by electrical disturbance.&quot;</span>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="classBoschIMU.html#a4f823e5224ec3be2be0c2d8e1997f6b1">dropGarbage</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="classBoschIMU.html#aacda221b5f05558a3caf5bd6b4ea7eac">readSysError</a>();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a13c6b491b7568fed80f9dd256b1ef34c">  271</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a13c6b491b7568fed80f9dd256b1ef34c">BoschIMU::sendReadCommandSer</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> register_add, <span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, std::string comment)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordtype">int</span> command_len;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordtype">int</span> nbytes_w;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">//   Create a READ message</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> trials=0; (trials&lt;3) &amp;&amp; (success==<span class="keyword">false</span>); trials++)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <a class="code" href="classBoschIMU.html#a74506b19f0f13fbd6be250bc7dde0521">totMessagesRead</a>++;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        command_len = 4;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>[0]= <a class="code" href="imuBosch__BNO055_8h.html#a30d2043ca397843e08c43ade3aaee5b2">START_BYTE</a>;     <span class="comment">// start byte</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>[1]= <a class="code" href="imuBosch__BNO055_8h.html#a21623e2a5501c821da54dd76ffc1d077">READ_CMD</a>;       <span class="comment">// read operation</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>[2]= register_add;   <span class="comment">// register to read</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>[3]= len;            <span class="comment">// length in bytes</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">//         printf(&quot;&gt; READ_COMMAND: %s ... &quot;, comment.c_str());</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">//         printf(&quot;\nCommand is:\n&quot;);</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">//         printBuffer(command, command_len);</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        nbytes_w = <a class="code" href="namespaceyarp_1_1sig_1_1file.html#ab329defdeb7a6f62ebc1ce82978e69c5">::write</a>(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, (<span class="keywordtype">void</span>*)<a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>, command_len);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">if</span>(nbytes_w != command_len)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschIMU device cannot correctly send the message: &quot;</span> &lt;&lt; comment;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="comment">// DO NOT return here. If something was sent, then the imu will reply with a message</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="comment">// even an error message. I have to parse it before proceeding and not leave garbage behind.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="comment">// Read the write reply</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        memset(buf, 0x00, 20);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordtype">int</span> readbytes = <a class="code" href="classBoschIMU.html#ac0e7c6d53f14132e41361e39e7049ab8">readBytes</a>(buf, <a class="code" href="imuBosch__BNO055_8h.html#a687bd4ac36ee56652f2e50c385bc07c1">RESP_HEADER_SIZE</a>);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span>(readbytes != <a class="code" href="imuBosch__BNO055_8h.html#a687bd4ac36ee56652f2e50c385bc07c1">RESP_HEADER_SIZE</a>)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>(<span class="stringliteral">&quot;Expected %d bytes, read %d instead\n&quot;</span>, <a class="code" href="imuBosch__BNO055_8h.html#a687bd4ac36ee56652f2e50c385bc07c1">RESP_HEADER_SIZE</a>, readbytes);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="classBoschIMU.html#a21139c7577a4460dfc175a47eb05ea90">checkReadResponse</a>(buf))</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(0.002);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">//             printf(&quot;&gt; SUCCESS!\n&quot;); fflush(stdout);</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="comment">// Read the data payload</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <a class="code" href="classBoschIMU.html#ac0e7c6d53f14132e41361e39e7049ab8">readBytes</a>(&amp;buf[2], (<span class="keywordtype">int</span>) buf[1]);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">//             printf(&quot;\tReply is:\n&quot;);</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">//             printBuffer(buf, buf[1]+2);</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">//             printf(&quot;***************\n&quot;);</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">//     if(!success)</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">//         yError(&quot;&gt; FAILED reading %s!\n&quot;, comment.c_str());</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> success;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="classBoschIMU.html#ab81529a43e8c7fce7e954e09138c35b2">  331</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#ab81529a43e8c7fce7e954e09138c35b2">BoschIMU::sendWriteCommandSer</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> register_add, <span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* cmd, std::string comment)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;{</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordtype">int</span> command_len = 4+len;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordtype">int</span> nbytes_w;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>[0]= <a class="code" href="imuBosch__BNO055_8h.html#a30d2043ca397843e08c43ade3aaee5b2">START_BYTE</a>;     <span class="comment">// start byte</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>[1]= <a class="code" href="imuBosch__BNO055_8h.html#af792feb13ae0c1eab8f95f64c8baa96d">WRITE_CMD</a>;      <span class="comment">// read operation</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>[2]= register_add;   <span class="comment">// operation mode register</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>[3]= (<span class="keywordtype">unsigned</span> char) len;     <span class="comment">// length 1 byte</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;len; i++)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>[4+i] = cmd[i];  <span class="comment">// data</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">//     printf(&quot;&gt; WRITE_COMMAND:  %s ... &quot;, comment.c_str());</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">//     printf(&quot;\nCommand is:\n&quot;);</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">//     printBuffer(command, command_len);</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    nbytes_w = <a class="code" href="namespaceyarp_1_1sig_1_1file.html#ab329defdeb7a6f62ebc1ce82978e69c5">::write</a>(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, (<span class="keywordtype">void</span>*)<a class="code" href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">command</a>, command_len);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span>(nbytes_w != command_len)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschIMU device cannot correctly send the message: &quot;</span> &lt;&lt; comment;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="comment">// DO NOT return here. If something was sent, then the imu will reply with a message</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="comment">// even an error message. I have to parse it before proceeding and not leave garbage behind.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// Read the write reply</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    memset(<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>, 0x00, 20);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="classBoschIMU.html#ac0e7c6d53f14132e41361e39e7049ab8">readBytes</a>(<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>, 2);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classBoschIMU.html#a87cab617a9c90f9204e1b60b7c2e6246">checkWriteResponse</a>(<a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>))</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">//         printf(&quot;&gt; FAILED!\n&quot;); fflush(stdout);</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;FAILED writing &quot;</span> &lt;&lt; comment;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">//     printf(&quot;&gt; SUCCESS!\n&quot;); fflush(stdout);</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">//     printf(&quot;\tReply is:\n&quot;);</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">//     printBuffer(response, 2);</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">//     printf(&quot;***************\n&quot;);</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="classBoschIMU.html#ac0e7c6d53f14132e41361e39e7049ab8">  371</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classBoschIMU.html#ac0e7c6d53f14132e41361e39e7049ab8">BoschIMU::readBytes</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="structbuffer.html">buffer</a>, <span class="keywordtype">int</span> bytes)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordtype">int</span> bytesRead = 0;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        r = <a class="code" href="classBoschIMU.html#aa19d1d06c23315369b83197da220dd60">::read</a>(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, (<span class="keywordtype">void</span>*)&amp;<a class="code" href="structbuffer.html">buffer</a>[bytesRead], 1);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span>(r &gt; 0)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            bytesRead += r;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">while</span>(r!=0 &amp;&amp; bytesRead &lt; bytes);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">return</span> bytesRead;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a4f823e5224ec3be2be0c2d8e1997f6b1">  386</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classBoschIMU.html#a4f823e5224ec3be2be0c2d8e1997f6b1">BoschIMU::dropGarbage</a>()</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="laserFromDepth_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">while</span>( (::<a class="code" href="classBoschIMU.html#aa19d1d06c23315369b83197da220dd60">read</a>(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>,  (<span class="keywordtype">void</span>*) &amp;<span class="keywordtype">byte</span>, 1) &gt; 0 ))</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">//         printf(&quot;Dropping byte 0x%02X \n&quot;, byte);</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a2de8bbfe8baa1af470d262aa61a2ff32">  396</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classBoschIMU.html#a2de8bbfe8baa1af470d262aa61a2ff32">BoschIMU::printBuffer</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="structbuffer.html">buffer</a>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt; length; i++)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        printf(<span class="stringliteral">&quot;\t0x%02X &quot;</span>, <a class="code" href="structbuffer.html">buffer</a>[i]);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="classBoschIMU.html#aacda221b5f05558a3caf5bd6b4ea7eac">  403</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classBoschIMU.html#aacda221b5f05558a3caf5bd6b4ea7eac">BoschIMU::readSysError</a>()</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;{</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// avoid recursive error check</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a303530aa3ef7e701a5e3b8ba8d444af8">checkError</a>)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="classBoschIMU.html#a303530aa3ef7e701a5e3b8ba8d444af8">checkError</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(0.002);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classBoschIMU.html#a13c6b491b7568fed80f9dd256b1ef34c">sendReadCommandSer</a>(<a class="code" href="imuBosch__BNO055_8h.html#a2147e50d6a0a456cb86be7dfd8cc09fe">REG_SYS_STATUS</a>, 1, <a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>, <span class="stringliteral">&quot;Read SYS_STATUS register&quot;</span>) )</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()  &lt;&lt; <span class="stringliteral">&quot;@ line &quot;</span> &lt;&lt; __LINE__;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classBoschIMU.html#a13c6b491b7568fed80f9dd256b1ef34c">sendReadCommandSer</a>(<a class="code" href="imuBosch__BNO055_8h.html#a0a4dcd6b3b2f8ef7ef805fd6413c6a13">REG_SYS_ERR</a>, 1, <a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>, <span class="stringliteral">&quot;Read SYS_ERR register&quot;</span>) )</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()  &lt;&lt; <span class="stringliteral">&quot;@ line &quot;</span> &lt;&lt; __LINE__;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="classBoschIMU.html#a303530aa3ef7e701a5e3b8ba8d444af8">checkError</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a80bb1eadee2ae1de487596a6914c69ae">  424</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a80bb1eadee2ae1de487596a6914c69ae">BoschIMU::sendAndVerifyCommandSer</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> register_add, <span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* cmd, std::string comment)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;{</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    uint8_t attempts=0;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>=<a class="code" href="classBoschIMU.html#ab81529a43e8c7fce7e954e09138c35b2">sendWriteCommandSer</a>(register_add, len, cmd, comment);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      attempts++;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }<span class="keywordflow">while</span>((attempts&lt;= <a class="code" href="imuBosch__BNO055_8h.html#a4a055b06d903721f52a1a46581c43578">ATTEMPTS_NUM_OF_SEND_CONFIG_CMD</a>) &amp;&amp; (<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>==<span class="keyword">false</span>));</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a37152e926108123b77148f7b4f4d8b0b">  437</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a37152e926108123b77148f7b4f4d8b0b">BoschIMU::sendReadCommandI2c</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> register_add, <span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, std::string comment)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;{</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">if</span> (i2c_smbus_read_i2c_block_data(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, register_add, len, buf) &lt; 0)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschIMU device cannot correctly send the message: &quot;</span> &lt;&lt; comment;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a63ce0f047a82379a67b8eeb992ef17d6">  447</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a63ce0f047a82379a67b8eeb992ef17d6">BoschIMU::threadInit</a>()</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classBoschIMU.html#a46b37e7eb24f66d906f557c029a307cb">i2c_flag</a>)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordtype">int</span> trials = 0;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// Make sure we have the right device</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">while</span> (i2c_smbus_read_byte_data(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, <a class="code" href="imuBosch__BNO055_8h.html#abead2f4994c6f3b4a3b9ca286d00f13b">REG_CHIP_ID</a>) != <a class="code" href="imuBosch__BNO055_8h.html#a5d61e3776e3b3017ed5e2d84ed9ec578">BNO055_ID</a>)</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">if</span> (trials == 10)</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()&lt;&lt;<span class="stringliteral">&quot;BoschImu: wrong device on the bus, it is not BNO055&quot;</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <a class="code" href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">yarp::os::Time::delay</a>(0.1);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            trials++;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">// Set the device in config mode</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">if</span> (i2c_smbus_write_byte_data(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, <a class="code" href="imuBosch__BNO055_8h.html#a250bcedd7826aa7c25f80654368d0a72">REG_OP_MODE</a>, <a class="code" href="imuBosch__BNO055_8h.html#a89081dcebea8b8f7f30fa5dd8ba1df59">CONFIG_MODE</a>) &lt; 0)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()&lt;&lt;<span class="stringliteral">&quot;BoschImu: Unable to set the Config mode&quot;</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">if</span> (i2c_smbus_write_byte_data(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, <a class="code" href="imuBosch__BNO055_8h.html#a7fc0dd5087b6b72326e0a56e253ebb31">REG_SYS_TRIGGER</a>, <a class="code" href="imuBosch__BNO055_8h.html#ab07e81801c2652984a0f4472ec15594d">TRIG_EXT_CLK_SEL</a>) &lt; 0)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()&lt;&lt;<span class="stringliteral">&quot;BoschImu: Unable to set external clock&quot;</span>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="comment">// Perform any required configuration</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">if</span> (i2c_smbus_write_byte_data(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, <a class="code" href="imuBosch__BNO055_8h.html#a3ec3aedf2b5f26313a427d66812bf5e6">REG_PAGE_ID</a>, 0x00) &lt; 0)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()&lt;&lt;<span class="stringliteral">&quot;BoschImu: Unable to set the page ID&quot;</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="comment">// Set the device into operative mode</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">if</span> (i2c_smbus_write_byte_data(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>, <a class="code" href="imuBosch__BNO055_8h.html#a250bcedd7826aa7c25f80654368d0a72">REG_OP_MODE</a>, <a class="code" href="imuBosch__BNO055_8h.html#a0e10ff104993a164fd03c2a43cfd8648">NDOF_MODE</a>) &lt; 0)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()&lt;&lt;<span class="stringliteral">&quot;BoschImu: Unable to set the Operative mode&quot;</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> msg;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <a class="code" href="classBoschIMU.html#abe5e7d9df72728f44c7518db9ee18687">timeLastReport</a> = <a class="code" href="classyarp_1_1os_1_1SystemClock.html#a8bf2d789cc755768467e392f88eccaf2">yarp::os::SystemClock::nowSystem</a>();</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        msg = 0x00;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classBoschIMU.html#a80bb1eadee2ae1de487596a6914c69ae">sendAndVerifyCommandSer</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3ec3aedf2b5f26313a427d66812bf5e6">REG_PAGE_ID</a>, 1, &amp;msg, <span class="stringliteral">&quot;PAGE_ID&quot;</span>) )</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()  &lt;&lt; <span class="stringliteral">&quot;BoschIMU: set page id 0 failed&quot;</span>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">return</span>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">//Removed because useless</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"></span>        <span class="comment">//</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="comment">//      Set power mode</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"></span>    <span class="comment">//     msg = 0x00;</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="comment">//     if(!sendAndVerifyCommand(REG_POWER_MODE, 1, &amp;msg, &quot;Set power mode&quot;) )</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">//     {</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">//          yError()  &lt;&lt; &quot;BoschIMU: set power mode failed&quot;;</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">//          return(false);</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="comment">//     }</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="comment">//     yarp::os::SystemClock::delaySystem(SWITCHING_TIME);</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="comment">//  Set the device in config mode</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        msg = <a class="code" href="imuBosch__BNO055_8h.html#a89081dcebea8b8f7f30fa5dd8ba1df59">CONFIG_MODE</a>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classBoschIMU.html#a80bb1eadee2ae1de487596a6914c69ae">sendAndVerifyCommandSer</a>(<a class="code" href="imuBosch__BNO055_8h.html#a250bcedd7826aa7c25f80654368d0a72">REG_OP_MODE</a>, 1, &amp;msg, <span class="stringliteral">&quot;Set config mode&quot;</span>) )</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()  &lt;&lt; <span class="stringliteral">&quot;BoschIMU: set config mode failed&quot;</span>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="keywordflow">return</span>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="comment">//     Set external clock</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        msg = <a class="code" href="imuBosch__BNO055_8h.html#ab07e81801c2652984a0f4472ec15594d">TRIG_EXT_CLK_SEL</a>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classBoschIMU.html#a80bb1eadee2ae1de487596a6914c69ae">sendAndVerifyCommandSer</a>(<a class="code" href="imuBosch__BNO055_8h.html#a7fc0dd5087b6b72326e0a56e253ebb31">REG_SYS_TRIGGER</a>, 1, &amp;msg, <span class="stringliteral">&quot;Set external clock&quot;</span>) )</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()  &lt;&lt; <span class="stringliteral">&quot;BoschIMU: set external clock failed&quot;</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="keywordflow">return</span>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment">// Perform any required configuration</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="comment">// Set the device into operative mode</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        msg = <a class="code" href="imuBosch__BNO055_8h.html#a0e10ff104993a164fd03c2a43cfd8648">NDOF_MODE</a>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classBoschIMU.html#a80bb1eadee2ae1de487596a6914c69ae">sendAndVerifyCommandSer</a>(<a class="code" href="imuBosch__BNO055_8h.html#a250bcedd7826aa7c25f80654368d0a72">REG_OP_MODE</a>, 1, &amp;msg, <span class="stringliteral">&quot;Set config NDOF_MODE&quot;</span>) )</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()  &lt;&lt; <span class="stringliteral">&quot;BoschIMU: set config NDOF_MODE failed&quot;</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(<a class="code" href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="comment">// Do a first read procedure to verify everything is fine.</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="comment">// In case the device fails to read, stop it and quit</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;10; i++)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="comment">// read data from IMU</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <a class="code" href="classBoschIMU.html#aff82066cbbe7906ee6f0add9852cafbc">run</a>();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a13ed45518b4a31425efb37e0458cc83f">dataIsValid</a>)</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <a class="code" href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a>(0.01);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classBoschIMU.html#a13ed45518b4a31425efb37e0458cc83f">dataIsValid</a>)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;First read from the device failed, check everything is fine and retry&quot;</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno"><a class="line" href="classBoschIMU.html#aff82066cbbe7906ee6f0add9852cafbc">  611</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classBoschIMU.html#aff82066cbbe7906ee6f0add9852cafbc">BoschIMU::run</a>()</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;{</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="classBoschIMU.html#a48e874d1d341600f0d77f7a594346006">m_timeStamp</a> = <a class="code" href="classyarp_1_1os_1_1SystemClock.html#a8bf2d789cc755768467e392f88eccaf2">yarp::os::SystemClock::nowSystem</a>();</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    int16_t raw_data[16];</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">// In order to avoid zeros when a single read from a sensor is missing,</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// initialize the new measure to be equal to the previous one</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a> = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">if</span> (!(this-&gt;*<a class="code" href="classBoschIMU.html#a2970ef93541ac41df67a331193b66456">readFunc</a>)(<a class="code" href="imuBosch__BNO055_8h.html#ac8f08974d7181407ec32a78d7fd01534">REG_ACC_DATA</a>, 32, <a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>, <span class="stringliteral">&quot;Read all&quot;</span>))</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>()&lt;&lt;<span class="stringliteral">&quot;BoschImu: failed to read all the data&quot;</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <a class="code" href="classBoschIMU.html#a89078c9604733cb8564efc84c8173b43">errs</a>++;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <a class="code" href="classBoschIMU.html#a13ed45518b4a31425efb37e0458cc83f">dataIsValid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="comment">// Correctly construct int16 data</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;16; i++)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            raw_data[i] = <a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[<a class="code" href="classBoschIMU.html#a1a7663de36ed66c45f5f69b14962ee21">responseOffset</a>+1+i*2] &lt;&lt; 8 | <a class="code" href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">response</a>[<a class="code" href="classBoschIMU.html#a1a7663de36ed66c45f5f69b14962ee21">responseOffset</a>+i*2];</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="comment">// Get quaternion</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a> = <a class="code" href="classBoschIMU.html#ab44ce5c690ecd9bc5c5d53793e54f213">quaternion</a>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a76cfcd95a8e086284b6be55b76f9846b">w</a>() = ((double)raw_data[12]) / (2 &lt;&lt; 13);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a11b8e1e8ab0c621823d14778cb41882b">x</a>() = ((double)raw_data[13]) / (2 &lt;&lt; 13);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#ac17147055235ccc4ba2292987c6de2b8">y</a>() = ((double)raw_data[14]) / (2 &lt;&lt; 13);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a743ed8333fd5237bcf66c5e7f5756e64">z</a>() = ((double)raw_data[15]) / (2 &lt;&lt; 13);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="comment">// Convert to RPY angles</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <a class="code" href="classBoschIMU.html#ae3d88aa5702d4da1532a5f705c76c6c6">RPY_angle</a>.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">resize</a>(3);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="comment">// Check quaternion values are meaningful. The aim of this check is simply</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="comment">// to verify values are not garbage.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="comment">// Ideally the correct check is that quaternion.abs ~= 1, but to avoid</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="comment">// calling a sqrt every cicle only for a rough estimate, the check here</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="comment">// is that the self product is nearly 1</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordtype">double</span> sum_squared = <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a76cfcd95a8e086284b6be55b76f9846b">w</a>() * <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a76cfcd95a8e086284b6be55b76f9846b">w</a>() +</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                             <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a11b8e1e8ab0c621823d14778cb41882b">x</a>() * <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a11b8e1e8ab0c621823d14778cb41882b">x</a>() +</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                             <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#ac17147055235ccc4ba2292987c6de2b8">y</a>() * <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#ac17147055235ccc4ba2292987c6de2b8">y</a>() +</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                             <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a743ed8333fd5237bcf66c5e7f5756e64">z</a>() * <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a743ed8333fd5237bcf66c5e7f5756e64">z</a>();</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">if</span>( (sum_squared &lt; 0.9) || (sum_squared &gt; 1.2) )</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <a class="code" href="classBoschIMU.html#a13ed45518b4a31425efb37e0458cc83f">dataIsValid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <a class="code" href="classBoschIMU.html#a13ed45518b4a31425efb37e0458cc83f">dataIsValid</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <a class="code" href="classBoschIMU.html#ae3d88aa5702d4da1532a5f705c76c6c6">RPY_angle</a>   = <a class="code" href="namespaceyarp_1_1math.html#ad14a738b45a6197d5db08a23564745d4">yarp::math::dcm2rpy</a>(<a class="code" href="classBoschIMU.html#ab44ce5c690ecd9bc5c5d53793e54f213">quaternion</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a7076d3dae14ba17237525372aa869dce">toRotationMatrix4x4</a>());</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[0] = <a class="code" href="classBoschIMU.html#ae3d88aa5702d4da1532a5f705c76c6c6">RPY_angle</a>[0] * 180 / <a class="code" href="fakeLocalizerDev_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[1] = <a class="code" href="classBoschIMU.html#ae3d88aa5702d4da1532a5f705c76c6c6">RPY_angle</a>[1] * 180 / <a class="code" href="fakeLocalizerDev_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[2] = <a class="code" href="classBoschIMU.html#ae3d88aa5702d4da1532a5f705c76c6c6">RPY_angle</a>[2] * 180 / <a class="code" href="fakeLocalizerDev_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">// Fill in accel values</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[3] = (double)raw_data[0] / 100.0;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[4] = (double)raw_data[1] / 100.0;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[5] = (double)raw_data[2] / 100.0;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="comment">// Fill in Gyro values</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[6] = (double)raw_data[6] / 16.0;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[7] = (double)raw_data[7] / 16.0;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[8] = (double)raw_data[8] / 16.0;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="comment">// Fill in Magnetometer values</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[9]  = (double)raw_data[3] / 16.0;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[10] = (double)raw_data[4] / 16.0;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>[11] = (double)raw_data[5] / 16.0;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="comment">// Protect only this section in order to avoid slow race conditions when gathering this data</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classBoschIMU.html#a163d519a674b485748b373c438a52dab">mutex</a>);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>       = <a class="code" href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">data_tmp</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <a class="code" href="classBoschIMU.html#ab44ce5c690ecd9bc5c5d53793e54f213">quaternion</a> = <a class="code" href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">quaternion_tmp</a>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classBoschIMU.html#a48e874d1d341600f0d77f7a594346006">m_timeStamp</a> &gt; <a class="code" href="classBoschIMU.html#abe5e7d9df72728f44c7518db9ee18687">timeLastReport</a> + <a class="code" href="imuBosch__BNO055_8h.html#ac15f243ea53fdf5749537c514a38f95f">TIME_REPORT_INTERVAL</a>) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="comment">// if almost 1 errors occourred in last interval, then print report</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a89078c9604733cb8564efc84c8173b43">errs</a> != 0)</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot; IMUBOSCH periodic error report of last %d sec:&quot;</span>, <a class="code" href="imuBosch__BNO055_8h.html#ac15f243ea53fdf5749537c514a38f95f">TIME_REPORT_INTERVAL</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <a class="code" href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a>(<span class="stringliteral">&quot;\t errors while reading data: %d&quot;</span>, <a class="code" href="classBoschIMU.html#a89078c9604733cb8564efc84c8173b43">errs</a>);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <a class="code" href="classBoschIMU.html#a89078c9604733cb8564efc84c8173b43">errs</a> = 0;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <a class="code" href="classBoschIMU.html#abe5e7d9df72728f44c7518db9ee18687">timeLastReport</a>=<a class="code" href="classBoschIMU.html#a48e874d1d341600f0d77f7a594346006">m_timeStamp</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="classBoschIMU.html#aa19d1d06c23315369b83197da220dd60">  706</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#aa19d1d06c23315369b83197da220dd60">BoschIMU::read</a>(<a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a> &amp;out)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;{</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classBoschIMU.html#a163d519a674b485748b373c438a52dab">mutex</a>);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    out.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">resize</a>(<a class="code" href="classBoschIMU.html#a96f6054c40e3aeb2555ce833734d855d">nChannels</a>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    out.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#ae9d8cdc242bd0687a2f1404114963247">zero</a>();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    out = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classBoschIMU.html#a96f6054c40e3aeb2555ce833734d855d">nChannels</a> == 16)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        out[12] = <a class="code" href="classBoschIMU.html#ab44ce5c690ecd9bc5c5d53793e54f213">quaternion</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a76cfcd95a8e086284b6be55b76f9846b">w</a>();</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        out[13] = <a class="code" href="classBoschIMU.html#ab44ce5c690ecd9bc5c5d53793e54f213">quaternion</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a11b8e1e8ab0c621823d14778cb41882b">x</a>();</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        out[14] = <a class="code" href="classBoschIMU.html#ab44ce5c690ecd9bc5c5d53793e54f213">quaternion</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#ac17147055235ccc4ba2292987c6de2b8">y</a>();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        out[15] = <a class="code" href="classBoschIMU.html#ab44ce5c690ecd9bc5c5d53793e54f213">quaternion</a>.<a class="code" href="classyarp_1_1math_1_1Quaternion.html#a743ed8333fd5237bcf66c5e7f5756e64">z</a>();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classBoschIMU.html#a13ed45518b4a31425efb37e0458cc83f">dataIsValid</a>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a35a7002b233314e4be82112ce837b496">  724</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a35a7002b233314e4be82112ce837b496">BoschIMU::getChannels</a>(<span class="keywordtype">int</span> *nc)</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;{</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    *nc = <a class="code" href="classBoschIMU.html#a96f6054c40e3aeb2555ce833734d855d">nChannels</a>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a90c6ac39fdfee6bc034f996b22a09a9c">  730</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a90c6ac39fdfee6bc034f996b22a09a9c">BoschIMU::calibrate</a>(<span class="keywordtype">int</span> ch, <span class="keywordtype">double</span> v)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;{</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="comment">// TODO: start a calib procedure in which the calib status register is read</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// until all sensors are calibrated (0xFFFF). Then the offsets are saved</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">// into memory for the next run.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="comment">// This procedure should be abortable by CTRL+C</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;}</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<a class="code" href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3">yarp::dev::MAS_status</a> BoschIMU::genericGetStatus(<span class="keywordtype">size_t</span> sens_index)<span class="keyword"> const</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (sens_index != 0)</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschImu: sens_index must be equal to 0, since there is  only one sensor in consideration&quot;</span>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3a942a1dcc72c4d9e4d17569e9b2447760">yarp::dev::MAS_status::MAS_ERROR</a>;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3aba6830cb9442c17e42e60a0441d072a3">yarp::dev::MAS_status::MAS_OK</a>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="keywordtype">bool</span> BoschIMU::genericGetSensorName(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; name)<span class="keyword"> const</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">if</span> (sens_index != 0)</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschImu: sens_index must be equal to 0, since there is  only one sensor in consideration&quot;</span>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    name = m_sensorName;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;}</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="keywordtype">bool</span> BoschIMU::genericGetFrameName(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; frameName)<span class="keyword"> const</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (sens_index != 0)</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschImu: sens_index must be equal to 0, since there is  only one sensor in consideration&quot;</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    frameName = m_frameName;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="classBoschIMU.html#ac3befa57ee0b91b0b33ca057f016fe6e">  776</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="classBoschIMU.html#ac3befa57ee0b91b0b33ca057f016fe6e">BoschIMU::getNrOfThreeAxisLinearAccelerometers</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="classBoschIMU.html#ae9c04ac95ebab65f297a330a2c44b857">  782</a></span>&#160;<a class="code" href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3">yarp::dev::MAS_status</a> <a class="code" href="classBoschIMU.html#ae9c04ac95ebab65f297a330a2c44b857">BoschIMU::getThreeAxisLinearAccelerometerStatus</a>(<span class="keywordtype">size_t</span> sens_index)<span class="keyword"> const</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">return</span> genericGetStatus(sens_index);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;}</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a9f97d22ec4353f87adf4744a646238b1">  787</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a9f97d22ec4353f87adf4744a646238b1">BoschIMU::getThreeAxisLinearAccelerometerName</a>(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; name)<span class="keyword"> const</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">return</span> genericGetSensorName(sens_index, name);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;}</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a3a0a3ef689cd79a8864ec196ccddc88e">  792</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a3a0a3ef689cd79a8864ec196ccddc88e">BoschIMU::getThreeAxisLinearAccelerometerFrameName</a>(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; frameName)<span class="keyword"> const</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">return</span> genericGetFrameName(sens_index, frameName);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;}</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno"><a class="line" href="classBoschIMU.html#ad48a9ebe359b5057d0a519cf3f87213a">  797</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#ad48a9ebe359b5057d0a519cf3f87213a">BoschIMU::getThreeAxisLinearAccelerometerMeasure</a>(<span class="keywordtype">size_t</span> sens_index, <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a>&amp; out, <span class="keywordtype">double</span>&amp; timestamp)<span class="keyword"> const</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">if</span> (sens_index != 0)</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschImu: sens_index must be equal to 0, since there is  only one sensor in consideration&quot;</span>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    }</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    out.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">resize</a>(3);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classBoschIMU.html#a163d519a674b485748b373c438a52dab">mutex</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    out[0] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[3];</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    out[1] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[4];</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    out[2] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[5];</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    timestamp = <a class="code" href="classBoschIMU.html#a48e874d1d341600f0d77f7a594346006">m_timeStamp</a>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno"><a class="line" href="classBoschIMU.html#ac1a42f9f3dec61355597f5f7bc0643ef">  816</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="classBoschIMU.html#ac1a42f9f3dec61355597f5f7bc0643ef">BoschIMU::getNrOfThreeAxisGyroscopes</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;}</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="classBoschIMU.html#aaef0e9fe738ff4850ad8118e46dd1be5">  822</a></span>&#160;<a class="code" href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3">yarp::dev::MAS_status</a> <a class="code" href="classBoschIMU.html#aaef0e9fe738ff4850ad8118e46dd1be5">BoschIMU::getThreeAxisGyroscopeStatus</a>(<span class="keywordtype">size_t</span> sens_index)<span class="keyword"> const</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">return</span> genericGetStatus(sens_index);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a820c9833c98c7364730067306824c31c">  827</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a820c9833c98c7364730067306824c31c">BoschIMU::getThreeAxisGyroscopeName</a>(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; name)<span class="keyword"> const</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">return</span> genericGetSensorName(sens_index, name);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;}</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a3b8f497fb963e6945fb75807883fec43">  832</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a3b8f497fb963e6945fb75807883fec43">BoschIMU::getThreeAxisGyroscopeFrameName</a>(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; frameName)<span class="keyword"> const</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">return</span> genericGetFrameName(sens_index, frameName);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a0d9b95a5751da368fc317b634616f0b7">  837</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a0d9b95a5751da368fc317b634616f0b7">BoschIMU::getThreeAxisGyroscopeMeasure</a>(<span class="keywordtype">size_t</span> sens_index, <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a>&amp; out, <span class="keywordtype">double</span>&amp; timestamp)<span class="keyword"> const</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (sens_index != 0)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschImu: sens_index must be equal to 0, since there is  only one sensor in consideration&quot;</span>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    out.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">resize</a>(3);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classBoschIMU.html#a163d519a674b485748b373c438a52dab">mutex</a>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    out[0] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[6];</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    out[1] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[7];</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    out[2] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[8];</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    timestamp = <a class="code" href="classBoschIMU.html#a48e874d1d341600f0d77f7a594346006">m_timeStamp</a>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;}</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="classBoschIMU.html#ad33edeaf988fd8ef8bc883093a453135">  855</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="classBoschIMU.html#ad33edeaf988fd8ef8bc883093a453135">BoschIMU::getNrOfOrientationSensors</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a9a43821da8506fb63f8aae9841e82344">  860</a></span>&#160;<a class="code" href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3">yarp::dev::MAS_status</a> <a class="code" href="classBoschIMU.html#a9a43821da8506fb63f8aae9841e82344">BoschIMU::getOrientationSensorStatus</a>(<span class="keywordtype">size_t</span> sens_index)<span class="keyword"> const</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">return</span> genericGetStatus(sens_index);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;}</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno"><a class="line" href="classBoschIMU.html#aa42272123a7b3579463dad48779d2890">  865</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#aa42272123a7b3579463dad48779d2890">BoschIMU::getOrientationSensorName</a>(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; name)<span class="keyword"> const</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordflow">return</span> genericGetSensorName(sens_index, name);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;}</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a4d70a1cdf4ec4085f11828eca2806630">  870</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a4d70a1cdf4ec4085f11828eca2806630">BoschIMU::getOrientationSensorFrameName</a>(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; frameName)<span class="keyword"> const</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">return</span> genericGetFrameName(sens_index, frameName);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;}</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a879b858101e232a542e786190b6aaf10">  875</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a879b858101e232a542e786190b6aaf10">BoschIMU::getOrientationSensorMeasureAsRollPitchYaw</a>(<span class="keywordtype">size_t</span> sens_index, <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a>&amp; rpy, <span class="keywordtype">double</span>&amp; timestamp)<span class="keyword"> const</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (sens_index != 0)</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschImu: sens_index must be equal to 0, since there is  only one sensor in consideration&quot;</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    rpy.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">resize</a>(3);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classBoschIMU.html#a163d519a674b485748b373c438a52dab">mutex</a>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    rpy[0] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[0];</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    rpy[1] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[1];</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    rpy[2] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[2];</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    timestamp = <a class="code" href="classBoschIMU.html#a48e874d1d341600f0d77f7a594346006">m_timeStamp</a>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;}</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a2db46d120abe9e00b8866237f586610b">  893</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="classBoschIMU.html#a2db46d120abe9e00b8866237f586610b">BoschIMU::getNrOfThreeAxisMagnetometers</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;}</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno"><a class="line" href="classBoschIMU.html#abc4b5cb02c1af7e5b06c2d14a39cf27b">  898</a></span>&#160;<a class="code" href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3">yarp::dev::MAS_status</a> <a class="code" href="classBoschIMU.html#abc4b5cb02c1af7e5b06c2d14a39cf27b">BoschIMU::getThreeAxisMagnetometerStatus</a>(<span class="keywordtype">size_t</span> sens_index)<span class="keyword"> const</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">return</span> genericGetStatus(sens_index);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;}</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="classBoschIMU.html#ab0b34c6943d2c76f463520c1b7d1f68c">  903</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#ab0b34c6943d2c76f463520c1b7d1f68c">BoschIMU::getThreeAxisMagnetometerName</a>(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; name)<span class="keyword"> const</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">return</span> genericGetSensorName(sens_index, name);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;}</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a96b1dde128ceba3805694ead02842a51">  908</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#a96b1dde128ceba3805694ead02842a51">BoschIMU::getThreeAxisMagnetometerFrameName</a>(<span class="keywordtype">size_t</span> sens_index, <span class="keywordtype">string</span>&amp; frameName)<span class="keyword"> const</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">return</span> genericGetFrameName(sens_index, frameName);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;}</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno"><a class="line" href="classBoschIMU.html#aea070d44f62ec85603ea9620ed18f43a">  913</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classBoschIMU.html#aea070d44f62ec85603ea9620ed18f43a">BoschIMU::getThreeAxisMagnetometerMeasure</a>(<span class="keywordtype">size_t</span> sens_index, <a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::Vector</a>&amp; out, <span class="keywordtype">double</span>&amp; timestamp)<span class="keyword"> const</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">if</span> (sens_index != 0)</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <a class="code" href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a>() &lt;&lt; <span class="stringliteral">&quot;BoschImu: sens_index must be equal to 0, since there is  only one sensor in consideration&quot;</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    out.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">resize</a>(3);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    std::lock_guard&lt;std::mutex&gt; guard(<a class="code" href="classBoschIMU.html#a163d519a674b485748b373c438a52dab">mutex</a>);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="comment">// The unit measure of Bosch BNO055 is uT</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    out[0] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[9] / 1000000;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    out[1] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[10]/ 1000000;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    out[2] = <a class="code" href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">data</a>[11]/ 1000000;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    timestamp = <a class="code" href="classBoschIMU.html#a48e874d1d341600f0d77f7a594346006">m_timeStamp</a>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;}</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno"><a class="line" href="classBoschIMU.html#a008ccc72dc773ad48f725a194ce133dc">  933</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classBoschIMU.html#a008ccc72dc773ad48f725a194ce133dc">BoschIMU::threadRelease</a>()</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;{</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a>(<span class="stringliteral">&quot;BoschIMU Thread released\n&quot;</span>);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="comment">//TBD write more meaningful report</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment">//    for(unsigned int i=0; i&lt;errorCounter.size(); i++)</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">//        printf(&quot;Error type %d, counter is %d\n&quot;, i, (int)errorCounter[i]);</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">//    printf(&quot;On overall read operations of %ld\n&quot;, totMessagesRead);</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="classBoschIMU.html#a460c436cb5346f53bb16c73b7b08f995">::close</a>(<a class="code" href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">fd</a>);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aLogStream_8h_html"><div class="ttname"><a href="LogStream_8h.html">LogStream.h</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a89081dcebea8b8f7f30fa5dd8ba1df59"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a89081dcebea8b8f7f30fa5dd8ba1df59">CONFIG_MODE</a></div><div class="ttdeci">#define CONFIG_MODE</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00104">imuBosch_BNO055.h:104</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ad33edeaf988fd8ef8bc883093a453135"><div class="ttname"><a href="classBoschIMU.html#ad33edeaf988fd8ef8bc883093a453135">BoschIMU::getNrOfOrientationSensors</a></div><div class="ttdeci">size_t getNrOfOrientationSensors() const override</div><div class="ttdoc">Get the number of orientation sensors in the device.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00855">imuBosch_BNO055.cpp:855</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ad1d5d9b423739ac796ba5b5ca7a1cf6a"><div class="ttname"><a href="classBoschIMU.html#ad1d5d9b423739ac796ba5b5ca7a1cf6a">BoschIMU::data_tmp</a></div><div class="ttdeci">yarp::sig::Vector data_tmp</div><div class="ttdoc">sensor data temporary buffer</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00159">imuBosch_BNO055.h:159</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a9a43821da8506fb63f8aae9841e82344"><div class="ttname"><a href="classBoschIMU.html#a9a43821da8506fb63f8aae9841e82344">BoschIMU::getOrientationSensorStatus</a></div><div class="ttdeci">yarp::dev::MAS_status getOrientationSensorStatus(size_t sens_index) const override</div><div class="ttdoc">Get the status of orientation sensor.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00860">imuBosch_BNO055.cpp:860</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ab81529a43e8c7fce7e954e09138c35b2"><div class="ttname"><a href="classBoschIMU.html#ab81529a43e8c7fce7e954e09138c35b2">BoschIMU::sendWriteCommandSer</a></div><div class="ttdeci">bool sendWriteCommandSer(unsigned char register_add, int len, unsigned char *cmd, std::string comment=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00331">imuBosch_BNO055.cpp:331</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ac3befa57ee0b91b0b33ca057f016fe6e"><div class="ttname"><a href="classBoschIMU.html#ac3befa57ee0b91b0b33ca057f016fe6e">BoschIMU::getNrOfThreeAxisLinearAccelerometers</a></div><div class="ttdeci">size_t getNrOfThreeAxisLinearAccelerometers() const override</div><div class="ttdoc">Get the number of three axis linear accelerometers in the device.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00776">imuBosch_BNO055.cpp:776</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1VectorOf_html_a2370ac1710b2dd357d134e94a0a373f8"><div class="ttname"><a href="classyarp_1_1sig_1_1VectorOf.html#a2370ac1710b2dd357d134e94a0a373f8">yarp::sig::VectorOf::resize</a></div><div class="ttdeci">void resize(size_t size) override</div><div class="ttdoc">Resize the vector.</div><div class="ttdef"><b>Definition:</b> <a href="Vector_8h_source.html#l00270">Vector.h:270</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a460c436cb5346f53bb16c73b7b08f995"><div class="ttname"><a href="classBoschIMU.html#a460c436cb5346f53bb16c73b7b08f995">BoschIMU::close</a></div><div class="ttdeci">bool close() override</div><div class="ttdoc">Close the device.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00210">imuBosch_BNO055.cpp:210</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a35a7002b233314e4be82112ce837b496"><div class="ttname"><a href="classBoschIMU.html#a35a7002b233314e4be82112ce837b496">BoschIMU::getChannels</a></div><div class="ttdeci">bool getChannels(int *nc) override</div><div class="ttdoc">Get the number of channels of the sensor.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00724">imuBosch_BNO055.cpp:724</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html">yarp::os::Searchable</a></div><div class="ttdoc">A base class for nested structures that can be searched.</div><div class="ttdef"><b>Definition:</b> <a href="Searchable_8h_source.html#l00068">Searchable.h:69</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a21623e2a5501c821da54dd76ffc1d077"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a21623e2a5501c821da54dd76ffc1d077">READ_CMD</a></div><div class="ttdeci">#define READ_CMD</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00069">imuBosch_BNO055.h:69</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a89078c9604733cb8564efc84c8173b43"><div class="ttname"><a href="classBoschIMU.html#a89078c9604733cb8564efc84c8173b43">BoschIMU::errs</a></div><div class="ttdeci">int errs</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00201">imuBosch_BNO055.h:201</a></div></div>
<div class="ttc" id="aclassyarp_1_1math_1_1Quaternion_html_ac17147055235ccc4ba2292987c6de2b8"><div class="ttname"><a href="classyarp_1_1math_1_1Quaternion.html#ac17147055235ccc4ba2292987c6de2b8">yarp::math::Quaternion::y</a></div><div class="ttdeci">double y() const</div><div class="ttdef"><b>Definition:</b> <a href="Quaternion_8cpp_source.html#l00075">Quaternion.cpp:75</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a84245340db71f3d977cb62a11ab03714"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a84245340db71f3d977cb62a11ab03714">ERROR_HEAD</a></div><div class="ttdeci">#define ERROR_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00073">imuBosch_BNO055.h:73</a></div></div>
<div class="ttc" id="afakeLocalizerDev_8cpp_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="fakeLocalizerDev_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="fakeLocalizerDev_8cpp_source.html#l00040">fakeLocalizerDev.cpp:40</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1math_html_ad14a738b45a6197d5db08a23564745d4"><div class="ttname"><a href="namespaceyarp_1_1math.html#ad14a738b45a6197d5db08a23564745d4">yarp::math::dcm2rpy</a></div><div class="ttdeci">yarp::sig::Vector dcm2rpy(const yarp::sig::Matrix &amp;R)</div><div class="ttdoc">Converts a dcm (direction cosine matrix) rotation matrix to roll-pitch-yaw angles (defined in Math....</div><div class="ttdef"><b>Definition:</b> <a href="math_8cpp_source.html#l00777">math.cpp:777</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_aa8e76c64a9251dc4485022aa7140d150"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#aa8e76c64a9251dc4485022aa7140d150">yarp::os::Searchable::toString</a></div><div class="ttdeci">virtual std::string toString() const =0</div><div class="ttdoc">Return a standard text representation of the content of the object.</div></div>
<div class="ttc" id="aclassyarp_1_1math_1_1Quaternion_html_a743ed8333fd5237bcf66c5e7f5756e64"><div class="ttname"><a href="classyarp_1_1math_1_1Quaternion.html#a743ed8333fd5237bcf66c5e7f5756e64">yarp::math::Quaternion::z</a></div><div class="ttdeci">double z() const</div><div class="ttdef"><b>Definition:</b> <a href="Quaternion_8cpp_source.html#l00080">Quaternion.cpp:80</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a63ce0f047a82379a67b8eeb992ef17d6"><div class="ttname"><a href="classBoschIMU.html#a63ce0f047a82379a67b8eeb992ef17d6">BoschIMU::threadInit</a></div><div class="ttdeci">bool threadInit() override</div><div class="ttdoc">Initialize process with desired device configurations.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00447">imuBosch_BNO055.cpp:447</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a96b1dde128ceba3805694ead02842a51"><div class="ttname"><a href="classBoschIMU.html#a96b1dde128ceba3805694ead02842a51">BoschIMU::getThreeAxisMagnetometerFrameName</a></div><div class="ttdeci">bool getThreeAxisMagnetometerFrameName(size_t sens_index, std::string &amp;frameName) const override</div><div class="ttdoc">Get the name of the frame in which three axis magnetometer measurements are expressed.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00908">imuBosch_BNO055.cpp:908</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ab44ce5c690ecd9bc5c5d53793e54f213"><div class="ttname"><a href="classBoschIMU.html#ab44ce5c690ecd9bc5c5d53793e54f213">BoschIMU::quaternion</a></div><div class="ttdeci">yarp::math::Quaternion quaternion</div><div class="ttdoc">orientation in quaternion representation</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00160">imuBosch_BNO055.h:160</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a90c6ac39fdfee6bc034f996b22a09a9c"><div class="ttname"><a href="classBoschIMU.html#a90c6ac39fdfee6bc034f996b22a09a9c">BoschIMU::calibrate</a></div><div class="ttdeci">bool calibrate(int ch, double v) override</div><div class="ttdoc">Calibrate the sensor, single channel.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00730">imuBosch_BNO055.cpp:730</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_abc4b5cb02c1af7e5b06c2d14a39cf27b"><div class="ttname"><a href="classBoschIMU.html#abc4b5cb02c1af7e5b06c2d14a39cf27b">BoschIMU::getThreeAxisMagnetometerStatus</a></div><div class="ttdeci">yarp::dev::MAS_status getThreeAxisMagnetometerStatus(size_t sens_index) const override</div><div class="ttdoc">Get the status of three axis magnetometer.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00898">imuBosch_BNO055.cpp:898</a></div></div>
<div class="ttc" id="aclassyarp_1_1math_1_1Quaternion_html_a7076d3dae14ba17237525372aa869dce"><div class="ttname"><a href="classyarp_1_1math_1_1Quaternion.html#a7076d3dae14ba17237525372aa869dce">yarp::math::Quaternion::toRotationMatrix4x4</a></div><div class="ttdeci">yarp::sig::Matrix toRotationMatrix4x4() const</div><div class="ttdoc">Converts a quaternion to a rotation matrix.</div><div class="ttdef"><b>Definition:</b> <a href="Quaternion_8cpp_source.html#l00206">Quaternion.cpp:206</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a0e10ff104993a164fd03c2a43cfd8648"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a0e10ff104993a164fd03c2a43cfd8648">NDOF_MODE</a></div><div class="ttdeci">#define NDOF_MODE</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00108">imuBosch_BNO055.h:108</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a4a055b06d903721f52a1a46581c43578"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a4a055b06d903721f52a1a46581c43578">ATTEMPTS_NUM_OF_SEND_CONFIG_CMD</a></div><div class="ttdeci">#define ATTEMPTS_NUM_OF_SEND_CONFIG_CMD</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00123">imuBosch_BNO055.h:123</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_aa19d1d06c23315369b83197da220dd60"><div class="ttname"><a href="classBoschIMU.html#aa19d1d06c23315369b83197da220dd60">BoschIMU::read</a></div><div class="ttdeci">bool read(yarp::sig::Vector &amp;out) override</div><div class="ttdoc">Read a vector from the sensor.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00706">imuBosch_BNO055.cpp:706</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_aacda221b5f05558a3caf5bd6b4ea7eac"><div class="ttname"><a href="classBoschIMU.html#aacda221b5f05558a3caf5bd6b4ea7eac">BoschIMU::readSysError</a></div><div class="ttdeci">void readSysError()</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00403">imuBosch_BNO055.cpp:403</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a2002aea78b48c89e51345c41351e0c84"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a2002aea78b48c89e51345c41351e0c84">REPLY_HEAD</a></div><div class="ttdeci">#define REPLY_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00072">imuBosch_BNO055.h:72</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a74506b19f0f13fbd6be250bc7dde0521"><div class="ttname"><a href="classBoschIMU.html#a74506b19f0f13fbd6be250bc7dde0521">BoschIMU::totMessagesRead</a></div><div class="ttdeci">long int totMessagesRead</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00188">imuBosch_BNO055.h:188</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_af792feb13ae0c1eab8f95f64c8baa96d"><div class="ttname"><a href="imuBosch__BNO055_8h.html#af792feb13ae0c1eab8f95f64c8baa96d">WRITE_CMD</a></div><div class="ttdeci">#define WRITE_CMD</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00068">imuBosch_BNO055.h:68</a></div></div>
<div class="ttc" id="aImplementAxisInfo_8cpp_html_ab295c2135096172ff421e6b33358407d"><div class="ttname"><a href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a></div><div class="ttdeci">bool ret</div><div class="ttdef"><b>Definition:</b> <a href="ImplementAxisInfo_8cpp_source.html#l00072">ImplementAxisInfo.cpp:72</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ad48a9ebe359b5057d0a519cf3f87213a"><div class="ttname"><a href="classBoschIMU.html#ad48a9ebe359b5057d0a519cf3f87213a">BoschIMU::getThreeAxisLinearAccelerometerMeasure</a></div><div class="ttdeci">bool getThreeAxisLinearAccelerometerMeasure(size_t sens_index, yarp::sig::Vector &amp;out, double &amp;timestamp) const override</div><div class="ttdoc">Get three axis linear accelerometer measurements.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00797">imuBosch_BNO055.cpp:797</a></div></div>
<div class="ttc" id="ayarpros_8cpp_html_ab3f078684998b83967d507d0f453f454"><div class="ttname"><a href="yarpros_8cpp.html#ab3f078684998b83967d507d0f453f454">verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdef"><b>Definition:</b> <a href="yarpros_8cpp_source.html#l00023">yarpros.cpp:23</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_aad3ae11c832343293b140dafc3b984ad"><div class="ttname"><a href="imuBosch__BNO055_8h.html#aad3ae11c832343293b140dafc3b984ad">REGISTER_NOT_READY</a></div><div class="ttdeci">#define REGISTER_NOT_READY</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00079">imuBosch_BNO055.h:79</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ae9c04ac95ebab65f297a330a2c44b857"><div class="ttname"><a href="classBoschIMU.html#ae9c04ac95ebab65f297a330a2c44b857">BoschIMU::getThreeAxisLinearAccelerometerStatus</a></div><div class="ttdeci">yarp::dev::MAS_status getThreeAxisLinearAccelerometerStatus(size_t sens_index) const override</div><div class="ttdoc">Get the status of three axis linear accelerometer.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00782">imuBosch_BNO055.cpp:782</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a46b37e7eb24f66d906f557c029a307cb"><div class="ttname"><a href="classBoschIMU.html#a46b37e7eb24f66d906f557c029a307cb">BoschIMU::i2c_flag</a></div><div class="ttdeci">bool i2c_flag</div><div class="ttdoc">flag to check if device connected through i2c commununication</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00166">imuBosch_BNO055.h:166</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1dev_html"><div class="ttname"><a href="namespaceyarp_1_1dev.html">yarp::dev</a></div><div class="ttdoc">An interface for the device drivers.</div><div class="ttdef"><b>Definition:</b> <a href="audioBufferSizeData_8cpp_source.html#l00017">audioBufferSizeData.cpp:17</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a32412676dd04ffbe173d6c6e94faae82"><div class="ttname"><a href="classBoschIMU.html#a32412676dd04ffbe173d6c6e94faae82">BoschIMU::BoschIMU</a></div><div class="ttdeci">BoschIMU()</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00056">imuBosch_BNO055.cpp:56</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a0d9b95a5751da368fc317b634616f0b7"><div class="ttname"><a href="classBoschIMU.html#a0d9b95a5751da368fc317b634616f0b7">BoschIMU::getThreeAxisGyroscopeMeasure</a></div><div class="ttdeci">bool getThreeAxisGyroscopeMeasure(size_t sens_index, yarp::sig::Vector &amp;out, double &amp;timestamp) const override</div><div class="ttdoc">Get three axis gyroscope measurements.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00837">imuBosch_BNO055.cpp:837</a></div></div>
<div class="ttc" id="aLog_8h_html_a4525d9acbf59f40a30c7f5476742a773"><div class="ttname"><a href="Log_8h.html#a4525d9acbf59f40a30c7f5476742a773">yTrace</a></div><div class="ttdeci">#define yTrace</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00105">Log.h:105</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1SystemClock_html_a8bf2d789cc755768467e392f88eccaf2"><div class="ttname"><a href="classyarp_1_1os_1_1SystemClock.html#a8bf2d789cc755768467e392f88eccaf2">yarp::os::SystemClock::nowSystem</a></div><div class="ttdeci">static double nowSystem()</div><div class="ttdef"><b>Definition:</b> <a href="SystemClock_8cpp_source.html#l00037">SystemClock.cpp:37</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a37152e926108123b77148f7b4f4d8b0b"><div class="ttname"><a href="classBoschIMU.html#a37152e926108123b77148f7b4f4d8b0b">BoschIMU::sendReadCommandI2c</a></div><div class="ttdeci">bool sendReadCommandI2c(unsigned char register_add, int len, unsigned char *buf, std::string comment=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00437">imuBosch_BNO055.cpp:437</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a3ec3aedf2b5f26313a427d66812bf5e6"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a3ec3aedf2b5f26313a427d66812bf5e6">REG_PAGE_ID</a></div><div class="ttdeci">#define REG_PAGE_ID</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00086">imuBosch_BNO055.h:86</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ab256ea4a225a513e04505e87b161d969"><div class="ttname"><a href="classBoschIMU.html#ab256ea4a225a513e04505e87b161d969">BoschIMU::~BoschIMU</a></div><div class="ttdeci">~BoschIMU()</div></div>
<div class="ttc" id="aclassBoschIMU_html_ac3929cf5dde0fd6d8a78c1594df0814a"><div class="ttname"><a href="classBoschIMU.html#ac3929cf5dde0fd6d8a78c1594df0814a">BoschIMU::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">file descriptor to open device at system level</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00170">imuBosch_BNO055.h:170</a></div></div>
<div class="ttc" id="aclassBoschIMU_html"><div class="ttname"><a href="classBoschIMU.html">BoschIMU</a></div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00145">imuBosch_BNO055.h:153</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a90df914c339d263ef74d62692461d2fe"><div class="ttname"><a href="classBoschIMU.html#a90df914c339d263ef74d62692461d2fe">BoschIMU::errorCounter</a></div><div class="ttdeci">yarp::sig::Vector errorCounter</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00189">imuBosch_BNO055.h:189</a></div></div>
<div class="ttc" id="aclassyarp_1_1math_1_1Quaternion_html_a11b8e1e8ab0c621823d14778cb41882b"><div class="ttname"><a href="classyarp_1_1math_1_1Quaternion.html#a11b8e1e8ab0c621823d14778cb41882b">yarp::math::Quaternion::x</a></div><div class="ttdeci">double x() const</div><div class="ttdef"><b>Definition:</b> <a href="Quaternion_8cpp_source.html#l00070">Quaternion.cpp:70</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1VectorOf_html"><div class="ttname"><a href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::VectorOf&lt; double &gt;</a></div></div>
<div class="ttc" id="aLog_8h_html"><div class="ttname"><a href="Log_8h.html">Log.h</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a3a0a3ef689cd79a8864ec196ccddc88e"><div class="ttname"><a href="classBoschIMU.html#a3a0a3ef689cd79a8864ec196ccddc88e">BoschIMU::getThreeAxisLinearAccelerometerFrameName</a></div><div class="ttdeci">bool getThreeAxisLinearAccelerometerFrameName(size_t sens_index, std::string &amp;frameName) const override</div><div class="ttdoc">Get the name of the frame in which three axis linear accelerometer measurements are expressed.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00792">imuBosch_BNO055.cpp:792</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a687bd4ac36ee56652f2e50c385bc07c1"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a687bd4ac36ee56652f2e50c385bc07c1">RESP_HEADER_SIZE</a></div><div class="ttdeci">#define RESP_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00118">imuBosch_BNO055.h:118</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a000b840d8fca1c09cf4f2d05e333e88a"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a000b840d8fca1c09cf4f2d05e333e88a">yarp::os::Value::isString</a></div><div class="ttdeci">virtual bool isString() const</div><div class="ttdoc">Checks if value is a string.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00159">Value.cpp:159</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ae3d88aa5702d4da1532a5f705c76c6c6"><div class="ttname"><a href="classBoschIMU.html#ae3d88aa5702d4da1532a5f705c76c6c6">BoschIMU::RPY_angle</a></div><div class="ttdeci">yarp::sig::Vector RPY_angle</div><div class="ttdoc">orientation in Euler angle representation</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00162">imuBosch_BNO055.h:162</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a87cab617a9c90f9204e1b60b7c2e6246"><div class="ttname"><a href="classBoschIMU.html#a87cab617a9c90f9204e1b60b7c2e6246">BoschIMU::checkWriteResponse</a></div><div class="ttdeci">bool checkWriteResponse(unsigned char *response)</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00245">imuBosch_BNO055.cpp:245</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a5d61e3776e3b3017ed5e2d84ed9ec578"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a5d61e3776e3b3017ed5e2d84ed9ec578">BNO055_ID</a></div><div class="ttdeci">#define BNO055_ID</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00116">imuBosch_BNO055.h:116</a></div></div>
<div class="ttc" id="aLog_8h_html_a1ad5ea4187c27a9a718e3aefd0bee299"><div class="ttname"><a href="Log_8h.html#a1ad5ea4187c27a9a718e3aefd0bee299">yError</a></div><div class="ttdeci">#define yError</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00109">Log.h:109</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a250bcedd7826aa7c25f80654368d0a72"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a250bcedd7826aa7c25f80654368d0a72">REG_OP_MODE</a></div><div class="ttdeci">#define REG_OP_MODE</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00099">imuBosch_BNO055.h:99</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a9f97d22ec4353f87adf4744a646238b1"><div class="ttname"><a href="classBoschIMU.html#a9f97d22ec4353f87adf4744a646238b1">BoschIMU::getThreeAxisLinearAccelerometerName</a></div><div class="ttdeci">bool getThreeAxisLinearAccelerometerName(size_t sens_index, std::string &amp;name) const override</div><div class="ttdoc">Get the name of three axis linear accelerometer.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00787">imuBosch_BNO055.cpp:787</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a7fc0dd5087b6b72326e0a56e253ebb31"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a7fc0dd5087b6b72326e0a56e253ebb31">REG_SYS_TRIGGER</a></div><div class="ttdeci">#define REG_SYS_TRIGGER</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00101">imuBosch_BNO055.h:101</a></div></div>
<div class="ttc" id="aMath_8h_html"><div class="ttname"><a href="Math_8h.html">Math.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1SystemClock_html_af9eba2d0a597ba1a53e6be7a47941314"><div class="ttname"><a href="classyarp_1_1os_1_1SystemClock.html#af9eba2d0a597ba1a53e6be7a47941314">yarp::os::SystemClock::delaySystem</a></div><div class="ttdeci">static void delaySystem(double seconds)</div><div class="ttdef"><b>Definition:</b> <a href="SystemClock_8cpp_source.html#l00032">SystemClock.cpp:32</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a2147e50d6a0a456cb86be7dfd8cc09fe"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a2147e50d6a0a456cb86be7dfd8cc09fe">REG_SYS_STATUS</a></div><div class="ttdeci">#define REG_SYS_STATUS</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00096">imuBosch_BNO055.h:96</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a820c9833c98c7364730067306824c31c"><div class="ttname"><a href="classBoschIMU.html#a820c9833c98c7364730067306824c31c">BoschIMU::getThreeAxisGyroscopeName</a></div><div class="ttdeci">bool getThreeAxisGyroscopeName(size_t sens_index, std::string &amp;name) const override</div><div class="ttdoc">Get the name of three axis gyroscope.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00827">imuBosch_BNO055.cpp:827</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8cpp_html_aca604b497ce91a03d9bbec13df5a6e59"><div class="ttname"><a href="imuBosch__BNO055_8cpp.html#aca604b497ce91a03d9bbec13df5a6e59">i2cAddrA</a></div><div class="ttdeci">constexpr uint8_t i2cAddrA</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00053">imuBosch_BNO055.cpp:53</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_af2125ceb5eb007b6cd6ab77666682117"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">yarp::os::Value::asString</a></div><div class="ttdeci">virtual std::string asString() const</div><div class="ttdoc">Get string value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00237">Value.cpp:237</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a13ed45518b4a31425efb37e0458cc83f"><div class="ttname"><a href="classBoschIMU.html#a13ed45518b4a31425efb37e0458cc83f">BoschIMU::dataIsValid</a></div><div class="ttdeci">std::atomic&lt; bool &gt; dataIsValid</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00202">imuBosch_BNO055.h:202</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a96f6054c40e3aeb2555ce833734d855d"><div class="ttname"><a href="classBoschIMU.html#a96f6054c40e3aeb2555ce833734d855d">BoschIMU::nChannels</a></div><div class="ttdeci">int nChannels</div><div class="ttdoc">number of channels in the output port. Default 12. If 16, also includes quaternion data</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00157">imuBosch_BNO055.h:157</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_aa7b406215b653817f2450ac416b65867"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">yarp::os::Searchable::check</a></div><div class="ttdeci">virtual bool check(const std::string &amp;key) const =0</div><div class="ttdoc">Check if there exists a property of the given name.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1PeriodicThread_html_a070daf7983102f96609a6a956ae7771f"><div class="ttname"><a href="classyarp_1_1os_1_1PeriodicThread.html#a070daf7983102f96609a6a956ae7771f">yarp::os::PeriodicThread::setPeriod</a></div><div class="ttdeci">bool setPeriod(double period)</div><div class="ttdoc">Set the (new) period of the thread.</div><div class="ttdef"><b>Definition:</b> <a href="PeriodicThread_8cpp_source.html#l00282">PeriodicThread.cpp:282</a></div></div>
<div class="ttc" id="astructbuffer_html"><div class="ttname"><a href="structbuffer.html">buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00074">V4L_camera.h:75</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1VectorOf_html_ae9d8cdc242bd0687a2f1404114963247"><div class="ttname"><a href="classyarp_1_1sig_1_1VectorOf.html#ae9d8cdc242bd0687a2f1404114963247">yarp::sig::VectorOf::zero</a></div><div class="ttdeci">void zero()</div><div class="ttdoc">Zero the elements of the vector.</div><div class="ttdef"><b>Definition:</b> <a href="Vector_8h_source.html#l00415">Vector.h:415</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html"><div class="ttname"><a href="imuBosch__BNO055_8h.html">imuBosch_BNO055.h</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a163d519a674b485748b373c438a52dab"><div class="ttname"><a href="classBoschIMU.html#a163d519a674b485748b373c438a52dab">BoschIMU::mutex</a></div><div class="ttdeci">std::mutex mutex</div><div class="ttdoc">mutex to avoid resource clash</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00165">imuBosch_BNO055.h:165</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a706dc7c2c079e0c9addcc45d853fcf02"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a706dc7c2c079e0c9addcc45d853fcf02">WRITE_SUCC</a></div><div class="ttdeci">#define WRITE_SUCC</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00074">imuBosch_BNO055.h:74</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_a4a254e53809b70f78822c7f0e1b2b5c6"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">yarp::os::Searchable::find</a></div><div class="ttdeci">virtual Value &amp; find(const std::string &amp;key) const =0</div><div class="ttdoc">Gets a value corresponding to a given keyword.</div></div>
<div class="ttc" id="aclassBoschIMU_html_a48e874d1d341600f0d77f7a594346006"><div class="ttname"><a href="classBoschIMU.html#a48e874d1d341600f0d77f7a594346006">BoschIMU::m_timeStamp</a></div><div class="ttdeci">double m_timeStamp</div><div class="ttdoc">device timestamp</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00163">imuBosch_BNO055.h:163</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a2ce332af016696b00a5ff46409a401ed"><div class="ttname"><a href="classBoschIMU.html#a2ce332af016696b00a5ff46409a401ed">BoschIMU::quaternion_tmp</a></div><div class="ttdeci">yarp::math::Quaternion quaternion_tmp</div><div class="ttdoc">orientation in quaternion representation</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00161">imuBosch_BNO055.h:161</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a13c6b491b7568fed80f9dd256b1ef34c"><div class="ttname"><a href="classBoschIMU.html#a13c6b491b7568fed80f9dd256b1ef34c">BoschIMU::sendReadCommandSer</a></div><div class="ttdeci">bool sendReadCommandSer(unsigned char register_add, int len, unsigned char *buf, std::string comment=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00271">imuBosch_BNO055.cpp:271</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a21139c7577a4460dfc175a47eb05ea90"><div class="ttname"><a href="classBoschIMU.html#a21139c7577a4460dfc175a47eb05ea90">BoschIMU::checkReadResponse</a></div><div class="ttdeci">bool checkReadResponse(unsigned char *response)</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00218">imuBosch_BNO055.cpp:218</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_ac15f243ea53fdf5749537c514a38f95f"><div class="ttname"><a href="imuBosch__BNO055_8h.html#ac15f243ea53fdf5749537c514a38f95f">TIME_REPORT_INTERVAL</a></div><div class="ttdeci">#define TIME_REPORT_INTERVAL</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00121">imuBosch_BNO055.h:121</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a1a7663de36ed66c45f5f69b14962ee21"><div class="ttname"><a href="classBoschIMU.html#a1a7663de36ed66c45f5f69b14962ee21">BoschIMU::responseOffset</a></div><div class="ttdeci">size_t responseOffset</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00171">imuBosch_BNO055.h:171</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a2de8bbfe8baa1af470d262aa61a2ff32"><div class="ttname"><a href="classBoschIMU.html#a2de8bbfe8baa1af470d262aa61a2ff32">BoschIMU::printBuffer</a></div><div class="ttdeci">void printBuffer(unsigned char *buffer, int length)</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00396">imuBosch_BNO055.cpp:396</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_abead2f4994c6f3b4a3b9ca286d00f13b"><div class="ttname"><a href="imuBosch__BNO055_8h.html#abead2f4994c6f3b4a3b9ca286d00f13b">REG_CHIP_ID</a></div><div class="ttdeci">#define REG_CHIP_ID</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00083">imuBosch_BNO055.h:83</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1PeriodicThread_html"><div class="ttname"><a href="classyarp_1_1os_1_1PeriodicThread.html">yarp::os::PeriodicThread</a></div><div class="ttdoc">An abstraction for a periodic thread.</div><div class="ttdef"><b>Definition:</b> <a href="PeriodicThread_8h_source.html#l00024">PeriodicThread.h:25</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ac7935ebe20faff4c73275b744f465e5e"><div class="ttname"><a href="classBoschIMU.html#ac7935ebe20faff4c73275b744f465e5e">BoschIMU::open</a></div><div class="ttdeci">bool open(yarp::os::Searchable &amp;config) override</div><div class="ttdoc">Open the device and set up parameters/communication.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00082">imuBosch_BNO055.cpp:82</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a303530aa3ef7e701a5e3b8ba8d444af8"><div class="ttname"><a href="classBoschIMU.html#a303530aa3ef7e701a5e3b8ba8d444af8">BoschIMU::checkError</a></div><div class="ttdeci">bool checkError</div><div class="ttdoc">flag to check read error of sensor data</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00168">imuBosch_BNO055.h:168</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_ac8f08974d7181407ec32a78d7fd01534"><div class="ttname"><a href="imuBosch__BNO055_8h.html#ac8f08974d7181407ec32a78d7fd01534">REG_ACC_DATA</a></div><div class="ttdeci">#define REG_ACC_DATA</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00088">imuBosch_BNO055.h:88</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a3fbef5256ea7bf3c6d78d0b7a07843fb"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a3fbef5256ea7bf3c6d78d0b7a07843fb">SWITCHING_TIME</a></div><div class="ttdeci">#define SWITCHING_TIME</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00120">imuBosch_BNO055.h:120</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a2970ef93541ac41df67a331193b66456"><div class="ttname"><a href="classBoschIMU.html#a2970ef93541ac41df67a331193b66456">BoschIMU::readFunc</a></div><div class="ttdeci">ReadFuncPtr readFunc</div><div class="ttdoc">Functor object.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00175">imuBosch_BNO055.h:175</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_abe5e7d9df72728f44c7518db9ee18687"><div class="ttname"><a href="classBoschIMU.html#abe5e7d9df72728f44c7518db9ee18687">BoschIMU::timeLastReport</a></div><div class="ttdeci">double timeLastReport</div><div class="ttdoc">timestamp of last reported data</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00164">imuBosch_BNO055.h:164</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a30d2043ca397843e08c43ade3aaee5b2"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a30d2043ca397843e08c43ade3aaee5b2">START_BYTE</a></div><div class="ttdeci">#define START_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00067">imuBosch_BNO055.h:67</a></div></div>
<div class="ttc" id="aclassyarp_1_1math_1_1Quaternion_html_a76cfcd95a8e086284b6be55b76f9846b"><div class="ttname"><a href="classyarp_1_1math_1_1Quaternion.html#a76cfcd95a8e086284b6be55b76f9846b">yarp::math::Quaternion::w</a></div><div class="ttdeci">double w() const</div><div class="ttdef"><b>Definition:</b> <a href="Quaternion_8cpp_source.html#l00065">Quaternion.cpp:65</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ac0e7c6d53f14132e41361e39e7049ab8"><div class="ttname"><a href="classBoschIMU.html#ac0e7c6d53f14132e41361e39e7049ab8">BoschIMU::readBytes</a></div><div class="ttdeci">int readBytes(unsigned char *buffer, int bytes)</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00371">imuBosch_BNO055.cpp:371</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_html"><div class="ttname"><a href="namespaceyarp_1_1os.html">yarp::os</a></div><div class="ttdoc">An interface to the operating system, including Port based communication.</div><div class="ttdef"><b>Definition:</b> <a href="AbstractCarrier_8h_source.html#l00017">AbstractCarrier.h:17</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a80bb1eadee2ae1de487596a6914c69ae"><div class="ttname"><a href="classBoschIMU.html#a80bb1eadee2ae1de487596a6914c69ae">BoschIMU::sendAndVerifyCommandSer</a></div><div class="ttdeci">bool sendAndVerifyCommandSer(unsigned char register_add, int len, unsigned char *cmd, std::string comment)</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00424">imuBosch_BNO055.cpp:424</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a879b858101e232a542e786190b6aaf10"><div class="ttname"><a href="classBoschIMU.html#a879b858101e232a542e786190b6aaf10">BoschIMU::getOrientationSensorMeasureAsRollPitchYaw</a></div><div class="ttdeci">bool getOrientationSensorMeasureAsRollPitchYaw(size_t sens_index, yarp::sig::Vector &amp;rpy, double &amp;timestamp) const override</div><div class="ttdoc">Get orientation sensor measurements.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00875">imuBosch_BNO055.cpp:875</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_aaef0e9fe738ff4850ad8118e46dd1be5"><div class="ttname"><a href="classBoschIMU.html#aaef0e9fe738ff4850ad8118e46dd1be5">BoschIMU::getThreeAxisGyroscopeStatus</a></div><div class="ttdeci">yarp::dev::MAS_status getThreeAxisGyroscopeStatus(size_t sens_index) const override</div><div class="ttdoc">Get the status of three axis gyroscope.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00822">imuBosch_BNO055.cpp:822</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a4d70a1cdf4ec4085f11828eca2806630"><div class="ttname"><a href="classBoschIMU.html#a4d70a1cdf4ec4085f11828eca2806630">BoschIMU::getOrientationSensorFrameName</a></div><div class="ttdeci">bool getOrientationSensorFrameName(size_t sens_index, std::string &amp;frameName) const override</div><div class="ttdoc">Get the name of the frame in which orientation sensor measurements are expressed.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00870">imuBosch_BNO055.cpp:870</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1dev_html_a85759cb5433501b4db008efb0cd400f3"><div class="ttname"><a href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3">yarp::dev::MAS_status</a></div><div class="ttdeci">MAS_status</div><div class="ttdoc">Status of a given analog sensor exposed by a multiple analog sensors interface.</div><div class="ttdef"><b>Definition:</b> <a href="MultipleAnalogSensorsInterfaces_8h_source.html#l00035">MultipleAnalogSensorsInterfaces.h:36</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_a0a4dcd6b3b2f8ef7ef805fd6413c6a13"><div class="ttname"><a href="imuBosch__BNO055_8h.html#a0a4dcd6b3b2f8ef7ef805fd6413c6a13">REG_SYS_ERR</a></div><div class="ttdeci">#define REG_SYS_ERR</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00097">imuBosch_BNO055.h:97</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ab0b34c6943d2c76f463520c1b7d1f68c"><div class="ttname"><a href="classBoschIMU.html#ab0b34c6943d2c76f463520c1b7d1f68c">BoschIMU::getThreeAxisMagnetometerName</a></div><div class="ttdeci">bool getThreeAxisMagnetometerName(size_t sens_index, std::string &amp;name) const override</div><div class="ttdoc">Get the name of three axis magnetometer.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00903">imuBosch_BNO055.cpp:903</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1dev_html_a85759cb5433501b4db008efb0cd400f3a942a1dcc72c4d9e4d17569e9b2447760"><div class="ttname"><a href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3a942a1dcc72c4d9e4d17569e9b2447760">yarp::dev::MAS_ERROR</a></div><div class="ttdeci">@ MAS_ERROR</div><div class="ttdoc">The sensor is in generic error state.</div><div class="ttdef"><b>Definition:</b> <a href="MultipleAnalogSensorsInterfaces_8h_source.html#l00038">MultipleAnalogSensorsInterfaces.h:38</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2Time_8h_html"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2Time_8h.html">Time.h</a></div></div>
<div class="ttc" id="aLog_8h_html_ac30f48ad1ac5027a608ca8630e17b1d5"><div class="ttname"><a href="Log_8h.html#ac30f48ad1ac5027a608ca8630e17b1d5">yDebug</a></div><div class="ttdeci">#define yDebug</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00106">Log.h:106</a></div></div>
<div class="ttc" id="aLog_8h_html_a74f4af60dea29713770bcde6ad428391"><div class="ttname"><a href="Log_8h.html#a74f4af60dea29713770bcde6ad428391">yWarning</a></div><div class="ttdeci">#define yWarning</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00108">Log.h:108</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a3b8f497fb963e6945fb75807883fec43"><div class="ttname"><a href="classBoschIMU.html#a3b8f497fb963e6945fb75807883fec43">BoschIMU::getThreeAxisGyroscopeFrameName</a></div><div class="ttdeci">bool getThreeAxisGyroscopeFrameName(size_t sens_index, std::string &amp;frameName) const override</div><div class="ttdoc">Get the name of the frame in which three axis gyroscope measurements are expressed.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00832">imuBosch_BNO055.cpp:832</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a2db46d120abe9e00b8866237f586610b"><div class="ttname"><a href="classBoschIMU.html#a2db46d120abe9e00b8866237f586610b">BoschIMU::getNrOfThreeAxisMagnetometers</a></div><div class="ttdeci">size_t getNrOfThreeAxisMagnetometers() const override</div><div class="ttdoc">Get the number of three axis magnetometers in the device.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00893">imuBosch_BNO055.cpp:893</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a807e82fec8408b7be003fa1c491eda2c"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a807e82fec8408b7be003fa1c491eda2c">yarp::os::Value::toString</a></div><div class="ttdeci">std::string toString() const override</div><div class="ttdoc">Return a standard text representation of the content of the object.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00359">Value.cpp:359</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_aea070d44f62ec85603ea9620ed18f43a"><div class="ttname"><a href="classBoschIMU.html#aea070d44f62ec85603ea9620ed18f43a">BoschIMU::getThreeAxisMagnetometerMeasure</a></div><div class="ttdeci">bool getThreeAxisMagnetometerMeasure(size_t sens_index, yarp::sig::Vector &amp;out, double &amp;timestamp) const override</div><div class="ttdoc">Get three axis magnetometer measurements.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00913">imuBosch_BNO055.cpp:913</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1sig_1_1file_html_ab329defdeb7a6f62ebc1ce82978e69c5"><div class="ttname"><a href="namespaceyarp_1_1sig_1_1file.html#ab329defdeb7a6f62ebc1ce82978e69c5">yarp::sig::file::write</a></div><div class="ttdeci">bool write(const ImageOf&lt; PixelRgb &gt; &amp;src, const std::string &amp;dest, image_fileformat format=FORMAT_PPM)</div><div class="ttdef"><b>Definition:</b> <a href="ImageFile_8cpp_source.html#l00553">ImageFile.cpp:553</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a></div><div class="ttdoc">A single value (typically within a Bottle).</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00046">Value.h:47</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_aff82066cbbe7906ee6f0add9852cafbc"><div class="ttname"><a href="classBoschIMU.html#aff82066cbbe7906ee6f0add9852cafbc">BoschIMU::run</a></div><div class="ttdeci">void run() override</div><div class="ttdoc">Update loop where measurements are read from the device.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00611">imuBosch_BNO055.cpp:611</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_ac1a42f9f3dec61355597f5f7bc0643ef"><div class="ttname"><a href="classBoschIMU.html#ac1a42f9f3dec61355597f5f7bc0643ef">BoschIMU::getNrOfThreeAxisGyroscopes</a></div><div class="ttdeci">size_t getNrOfThreeAxisGyroscopes() const override</div><div class="ttdoc">Get the number of three axis gyroscopes in the device.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00816">imuBosch_BNO055.cpp:816</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a0732f0e18f18bd58cc2f0d1f469ae5b0"><div class="ttname"><a href="classBoschIMU.html#a0732f0e18f18bd58cc2f0d1f469ae5b0">BoschIMU::command</a></div><div class="ttdeci">unsigned char command[MAX_MSG_LENGTH]</div><div class="ttdoc">packet to be written to the device</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00177">imuBosch_BNO055.h:177</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_1_1Time_html_aca80809e0597551745954e2547e581ee"><div class="ttname"><a href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">yarp::os::Time::delay</a></div><div class="ttdeci">void delay(double seconds)</div><div class="ttdoc">Wait for a certain number of seconds.</div><div class="ttdef"><b>Definition:</b> <a href="Time_8cpp_source.html#l00111">Time.cpp:111</a></div></div>
<div class="ttc" id="aimuBosch__BNO055_8h_html_ab07e81801c2652984a0f4472ec15594d"><div class="ttname"><a href="imuBosch__BNO055_8h.html#ab07e81801c2652984a0f4472ec15594d">TRIG_EXT_CLK_SEL</a></div><div class="ttdeci">#define TRIG_EXT_CLK_SEL</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00111">imuBosch_BNO055.h:111</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a4cf66fec03cf3d8f58eb9743fbe76e8c"><div class="ttname"><a href="classBoschIMU.html#a4cf66fec03cf3d8f58eb9743fbe76e8c">BoschIMU::response</a></div><div class="ttdeci">unsigned char response[MAX_MSG_LENGTH]</div><div class="ttdoc">packet to be read from the device</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00178">imuBosch_BNO055.h:178</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a33ab866e38e8e4e9d745e73fdd870b65"><div class="ttname"><a href="classBoschIMU.html#a33ab866e38e8e4e9d745e73fdd870b65">BoschIMU::data</a></div><div class="ttdeci">yarp::sig::Vector data</div><div class="ttdoc">sensor data buffer</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8h_source.html#l00158">imuBosch_BNO055.h:158</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1dev_html_a85759cb5433501b4db008efb0cd400f3aba6830cb9442c17e42e60a0441d072a3"><div class="ttname"><a href="namespaceyarp_1_1dev.html#a85759cb5433501b4db008efb0cd400f3aba6830cb9442c17e42e60a0441d072a3">yarp::dev::MAS_OK</a></div><div class="ttdeci">@ MAS_OK</div><div class="ttdoc">The sensor is working correctly.</div><div class="ttdef"><b>Definition:</b> <a href="MultipleAnalogSensorsInterfaces_8h_source.html#l00037">MultipleAnalogSensorsInterfaces.h:37</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a008ccc72dc773ad48f725a194ce133dc"><div class="ttname"><a href="classBoschIMU.html#a008ccc72dc773ad48f725a194ce133dc">BoschIMU::threadRelease</a></div><div class="ttdeci">void threadRelease() override</div><div class="ttdoc">Terminate communication with the device and release the thread.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00933">imuBosch_BNO055.cpp:933</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_aa42272123a7b3579463dad48779d2890"><div class="ttname"><a href="classBoschIMU.html#aa42272123a7b3579463dad48779d2890">BoschIMU::getOrientationSensorName</a></div><div class="ttdeci">bool getOrientationSensorName(size_t sens_index, std::string &amp;name) const override</div><div class="ttdoc">Get the name of orientation sensor.</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00865">imuBosch_BNO055.cpp:865</a></div></div>
<div class="ttc" id="alaserFromDepth_8h_html_a0c8186d9b9b7880309c27230bbb5e69d"><div class="ttname"><a href="laserFromDepth_8h.html#a0c8186d9b9b7880309c27230bbb5e69d">byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdef"><b>Definition:</b> <a href="laserFromDepth_8h_source.html#l00037">laserFromDepth.h:37</a></div></div>
<div class="ttc" id="aclassBoschIMU_html_a4f823e5224ec3be2be0c2d8e1997f6b1"><div class="ttname"><a href="classBoschIMU.html#a4f823e5224ec3be2be0c2d8e1997f6b1">BoschIMU::dropGarbage</a></div><div class="ttdeci">void dropGarbage()</div><div class="ttdef"><b>Definition:</b> <a href="imuBosch__BNO055_8cpp_source.html#l00386">imuBosch_BNO055.cpp:386</a></div></div>
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.3.3</span></li>
    <li class="navelem"><a class="el" href="dir_d946d32291de7db32f6a943fb45d46f4.html">src</a></li><li class="navelem"><a class="el" href="dir_abd80c029d214e783ff905e909ed9db6.html">devices</a></li><li class="navelem"><a class="el" href="dir_2eb7a1a663abe4a9afc664f31d7582b5.html">imuBosch_BNO055</a></li><li class="navelem"><a class="el" href="imuBosch__BNO055_8cpp.html">imuBosch_BNO055.cpp</a></li>
    <li class="footer">Generated on Tue Nov 3 2020 16:56:59 for YARP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
