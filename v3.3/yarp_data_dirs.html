<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: YARP data directories</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.3.3' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('yarp_data_dirs.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">YARP data directories </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#datafiles_rationale">Rationale</a></li>
<li class="level1"><a href="#datafiles_datadirs">Data directories contents</a><ul><li class="level2"><a href="#datafiles_lin">Linux</a></li>
<li class="level2"><a href="#datafiles_win">Windows</a></li>
<li class="level2"><a href="#datafiles_macos">MacOS</a></li>
</ul>
</li>
<li class="level1"><a href="#datafiles_searchpolicy">ResourceFinder Search policy</a><ul><li class="level2"><a href="#datafiles_contextsrobots">Contexts and Robots files</a><ul><li class="level3"><a href="#datafiles_shadow">Shadowing</a></li>
</ul>
</li>
<li class="level2"><a href="#datafiles_plugins">Plugins Manifest files</a></li>
<li class="level2"><a href="#datafiles_applications">Application Deployment files</a></li>
</ul>
</li>
<li class="level1"><a href="#managing_data_files">Managing data files: the yarp-config utility</a></li>
<li class="level1"><a href="#datafiles_3rdparty">3rd party packages (for developers)</a><ul><li class="level2"><a href="#datafiles_installedpkgs">Installed packages</a></li>
<li class="level2"><a href="#datafiles_extendsearch">Extending the search path</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>YARP utilities and modules written by users need to find and access data and configuration files at run-time.</p>
<p>The former use generic configuration files and manifest files for modules and plugins. The latter often require configuration and data files. YARP has an OS-dependent set of default locations where to look for files, and a set of rules that define the search priorities. The default locations can be overridden or extended by modifying the environment variables that YARP relies on. To simplify finding and accessing these files YARP provides a helper class called ResourceFinder.</p>
<p>A full description of the directories and environment variables used by the ResourceFinder is too detailed for most users. We provide here a short and simplified description of the files layout of typical YARP installations for Windows, Linux and MacOs.</p>
<p>If you are confused by this description you can jump directly to the tutorials <a class="el" href="yarp_resource_finder_tutorials.html">ResourceFinder Tutorials and Specification</a>.</p>
<h1><a class="anchor" id="datafiles_rationale"></a>
Rationale</h1>
<p>The key points to keep in mind are:</p>
<ul>
<li>The software installation should be able to provide reasonable defaults for configuration files so that applications can run out-of-the-box; </li>
<li>Installation directories are generally non-writable, users without root privileges cannot edit installed configuration files unless they first copy them inside their own private directories, the latter must take precedence and hide the others; </li>
<li>Therefore it is normal that configuration files can be in multiple places, inside user-specific, private or shared installation directories; </li>
<li>External packages can install files so that YARP can find them (see <a class="el" href="yarp_data_dirs.html#datafiles_3rdparty">here</a>); </li>
<li>Types of files are divided in families that are placed in specific sub-directories. Current allowed sub-directories are listed <a class="el" href="yarp_data_dirs.html#datafiles_datadirs">here</a>.</li>
</ul>
<p>File customization can happen by copying files or contexts from the shared installation directories to the ones private to the user. The <a class="el" href="yarp-config.html">yarp-config: the yarp-config tool</a> utility simplifies this process.</p>
<h1><a class="anchor" id="datafiles_datadirs"></a>
Data directories contents</h1>
<p>Files are normally organized in the following directories: </p><ul>
<li>
<a class="el" href="yarp_data_dirs.html#datafiles_contextsrobots">contexts</a>  </li>
<li>
<a class="el" href="yarp_data_dirs.html#datafiles_contextsrobots">robots</a>  </li>
<li>
<a class="el" href="yarp_data_dirs.html#datafiles_plugins">plugins</a>  </li>
<li>
<a class="el" href="yarp_data_dirs.html#datafiles_applications">applications</a>  </li>
<li>
<a class="el" href="yarp_data_dirs.html#datafiles_applications">modules</a>  </li>
<li>
<a class="el" href="yarp_data_dirs.html#datafiles_applications">resources</a>  </li>
<li>
<a class="el" href="yarp_data_dirs.html#datafiles_applications">templates</a>  <ul>
<li>
applications  </li>
<li>
modules  </li>
</ul>
</li>
</ul>
<p>These directories can be stored in a directory private for the <em>user</em> (usually in its home) or <em>installed</em> in a shared directory.</p>
<h2><a class="anchor" id="datafiles_lin"></a>
Linux</h2>
<p>The private directories for the user are in <em> $HOME/.local/share/yarp </em></p>
<p>The shared directories for installation are <em> usr/local/share/yarp </em> and <em> /usr/share/yarp </em></p>
<p>The latter can be changed by defining the environment variable YARP_DATA_DIRS or extended through <em>path.d</em> (see <a class="el" href="yarp_data_dirs.html#datafiles_extendsearch">below</a>).</p>
<h2><a class="anchor" id="datafiles_win"></a>
Windows</h2>
<p>The private directories for the user are in <em> %APPDATA%\yarp\ </em></p>
<p>The shared directory for installation are in <em> %YARP_DIR%\share\yarp\ </em></p>
<p>The latter can be changed by defining the environment variable YARP_DATA_DIRS or extended through <em>path.d</em> (see <a class="el" href="yarp_data_dirs.html#datafiles_extendsearch">below</a>).</p>
<h2><a class="anchor" id="datafiles_macos"></a>
MacOS</h2>
<p>The private directory for the user are in <em> $HOME/Library/Application Support/yarp </em></p>
<p>The shared directory for installation are in <em>/usr/local/share/yarp </em> and <em> /usr/share/yarp </em></p>
<p>The latter can be changed by defining the environment variable YARP_DATA_DIRS or extended through <em>path.d</em> (see <a class="el" href="yarp_data_dirs.html#datafiles_extendsearch">below</a>).</p>
<h1><a class="anchor" id="datafiles_searchpolicy"></a>
ResourceFinder Search policy</h1>
<p>The resource finder searchers for files in the following order of precedence:</p>
<ul>
<li>
Looking in the current working directory  </li>
<li>
Searches in the <em>robot</em> directory  <ul>
<li>
In the user private directory  </li>
<li>
In the shared, installation directory(ies)  </li>
</ul>
</li>
<li>
Searches in the <em>context</em> directory  <ul>
<li>
In the user private directory  </li>
<li>
In the shared, installation directory(ies)  </li>
</ul>
</li>
</ul>
<p>When searching for files and directories, the ResourceFinder looks inside these directories in the above order, so that files modified by the user take precedence over installed ones.</p>
<h2><a class="anchor" id="datafiles_contextsrobots"></a>
Contexts and Robots files</h2>
<p>The <em>contexts</em> folders contain multiple sub-folders. Each subfolder represents a context, i.e., a collection of configuration files and data that may be used to configure modules at runtime and read/write any type of files. When the resource finder is configured with a specific context-name (either a default, hard-coded one, or provided as command line parameter to the module), contexts/&lt;context-name&gt; is added to the search path in which the initial configuration file and any additional files are sought.</p>
<p>The <em>robots</em> folders contain multiple sub-folders as well. Each subfolder has the name of a robot, and contains robot-specific files. The ResourceFinder adds robots/$YARP_ROBOT_NAME (default value for this environment variable: default) to the search path, before the context-specific paths.</p>
<h3><a class="anchor" id="datafiles_shadow"></a>
Shadowing</h3>
<p>Search of files proceeds from the user private directories to shared installation directories. The same &lt;context-name&gt; directory can appear in multiple places and likely contain files with the same name. In this case the files that are found first take precedence and <em>hide</em> files in the other locations. This <em>shadowing</em> or <em>masking</em> mechanism is useful when the user needs to customize only a subset of the files of a specific context.</p>
<h2><a class="anchor" id="datafiles_plugins"></a>
Plugins Manifest files</h2>
<p>Plugin manifest files are INI files that describe which class implements the plugin, the library it is included in, and how to find such library. These files are needed when loading plugins (e.g. by the yarpdev executable).</p>
<h2><a class="anchor" id="datafiles_applications"></a>
Application Deployment files</h2>
<p><em>Applications</em>, <em>modules</em> and <em>resources</em> folders contain XML files that describe programs (modules), the resources available to run the programs (resources), and collections of interconnected modules (applications). The <a class="el" href="yarpmanager.html">yarpmanager</a> executable allow to run and monitor applications, while the yarpbuilder executables allows to design new ones.</p>
<p>Templates are XML files with a .template extension. Typical templates are applications that need to be configured (i.e., assigning the node where each module should be run) before they can be executed.</p>
<h1><a class="anchor" id="managing_data_files"></a>
Managing data files: the yarp-config utility</h1>
<p>Managing configuration and data files requires nothing special, you can copy, edit and remove them using the shell. However YARP provides an utility that simplifies this, see <a class="el" href="yarp-config.html">yarp-config: the yarp-config tool</a>.</p>
<h1><a class="anchor" id="datafiles_3rdparty"></a>
3rd party packages (for developers)</h1>
<p><em> If you are not a developer you can skip this section. </em></p>
<p>Other packages need to contribute configuration files for their modules, applications, plugins etc. This can be done in two ways.</p>
<ul>
<li>By installing the above files in the YARP directories (YARP exports a set of CMake variables that can be used to this aim); </li>
<li>By extending the ResourceFinder search path.</li>
</ul>
<p>YARP provides cmake variables and macros to simplify both the above tasks.</p>
<p>If you are not interested in the details you can skip the following sections and go directly to <a class="el" href="yarp_external_build.html">Configuring your external build</a>.</p>
<h2><a class="anchor" id="datafiles_installedpkgs"></a>
Installed packages</h2>
<p>If yarp is installed the </p><ul>
<li>YARP_INSTALL_PREFIX will contain the prefix where YARP was installed. If yarp is used from the binary tree, this variable is empty.</li>
</ul>
<p>YARP exports the following CMake variables that contain relative installation paths: </p><ul>
<li><code>YARP_DATA_INSTALL_DIR</code> </li>
<li><code>YARP_CONFIG_INSTALL_DIR</code> </li>
<li><code>YARP_PLUGIN_MANIFESTS_INSTALL_DIR</code> </li>
<li><code>YARP_MODULES_INSTALL_DIR</code> </li>
<li><code>YARP_APPLICATIONS_INSTALL_DIR</code> </li>
<li><code>YARP_TEMPLATES_INSTALL_DIR</code> </li>
<li><code>YARP_CONTEXTS_INSTALL_DIR</code> </li>
<li><code>YARP_APPLICATIONS_TEMPLATES_INSTALL_DIR</code> </li>
<li><code>YARP_MODULES_TEMPLATES_INSTALL_DIR</code> </li>
<li><code>YARP_ROBOTS_INSTALL_DIR</code> </li>
<li><code>YARP_STATIC_PLUGINS_INSTALL_DIR</code> </li>
<li><code>YARP_DYNAMIC_PLUGINS_INSTALL_DIR</code> </li>
</ul>
<p>and their corresponding that contain absolute paths: </p><ul>
<li><code>YARP_DATA_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_CONFIG_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_PLUGIN_MANIFESTS_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_MODULES_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_APPLICATIONS_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_TEMPLATES_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_CONTEXTS_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_APPLICATIONS_TEMPLATES_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_MODULES_TEMPLATES_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_ROBOTS_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_STATIC_PLUGINS_INSTALL_DIR_FULL</code> </li>
<li><code>YARP_DYNAMIC_PLUGINS_INSTALL_DIR_FULL</code> </li>
</ul>
<p>Using the correct CMake variables when installing files will ensure that those files will be in the correct place on every platform, provided CMake is instructed to use the same CMAKE_INSTALL_PREFIX (in Linux this is the case by default).</p>
<p>Also non-root installation is supported, but both YARP and 3rd party software will require to be configured with the same CMAKE_INSTALL_PREFIX, and the environment variables (YARP_DATA_DIRS) will require to be tweaked accordingly (see next section).</p>
<h2><a class="anchor" id="datafiles_extendsearch"></a>
Extending the search path</h2>
<p>For packages that are not installed, the search path followed by the ResourceFinder can be extended in two ways:</p>
<ul>
<li>Through the YARP_DATA_DIRS variable: this is a list of locations, each is used by the ResourceFinder when looking for shared installation directories</li>
</ul>
<p><em> Notice: the following should be considered experimental and could be removed in the future if not required) </em></p>
<ul>
<li>By extending the directory <em>path.d</em> </li>
</ul>
<p>This solution should be adopted for packages that are installed.</p>
<p><em>path.d</em> is a special folder used by YARP to provide an easy way to install 3rd party applications in separate folders. This folder contains a list of text files that contains extra search paths. The ResourceFinder searches for the directory <em>path.d</em> in the same locations as "Installed" configuration files before checking the same directory for other files. Each file inside <em>path.d</em> indicates an additional path to a directory; the latter is appended to the list of directories used by the ResourceFinder. This mechanisms works similarly to YARP_DATA_DIRS; however it is handy because it allows 3rd party applications to extend the search path without affecting the user environment.</p>
<p>To do so a package should install a .ini file in $YARP_PREFIX/yarp/config/path.d . This can be done using the <em>yarp_configure_external_installation</em> macro (see <a class="el" href="yarp_external_build.html">Configuring your external build</a>)</p>
<p>Example: the iCub package in Linux.</p>
<p>The iCub package contributes a set of application, modules, contexts and robot files to YARP. It does so by installing them in /usr/local/share/iCub to keep them separate from the ones in YARP (/usr/local/share/yarp). To make these files visible to the ResourceFinder <em>make</em> <em>install</em> adds the file <em>iCub.ini</em> in:</p>
<p>/usr/local/share/yarp/config/path.d</p>
<p>The content of the file iCub.ini tells YARP where to look for additional resource files:</p>
<pre class="fragment">  ###### This file is automatically generated by CMake.
  [search iCub]
  path "/usr/local/share/iCub"
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.3.3</span></li>
    <li class="footer">Generated on Tue Nov 3 2020 16:57:07 for YARP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
