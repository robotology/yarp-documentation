<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: Channel Prioritization</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.3.3' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('channelprioritization.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Channel Prioritization </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="content"></a>
Contents</h1>
<ul>
<li><a class="el" href="channelprioritization.html#why">Why channel prioritization?</a> </li>
<li><a class="el" href="channelprioritization.html#how">How does prioritization work?</a> </li>
<li><a class="el" href="channelprioritization.html#example">An example</a> </li>
<li><a class="el" href="portmonitor.html#reading">Further reading</a></li>
</ul>
<p><br  />
 </p>
<h1><a class="anchor" id="why"></a>
Why channel prioritization?</h1>
<p>When developing applications performances are affected by the available resources. This sounds like an obvious statement but it is often overlooked by users. In robotics developers should be concerned with communication latency and, perhaps more importantly, its jitter.</p>
<p>In a distributed system there are potential sources of bottlenecks. First of all, communication suffers if there is insufficient CPU time to delivery or retrieve messages. When using network protocols messages are queued on the network card and network switch. The situation is depicted in the figure below. Individual connections in YARP compete to get CPU time and network resources. When many components begin loading the available CPUs and using bandwidth performance may suffer.</p>
<div class="image">
<img src="priority1.png" alt=""/>
<div class="caption">
Bottlenecks in a switched network. Connections packets are queued in outgoing and incoming buffers at the level of the network card and network switch.</div></div>
<h1><a class="anchor" id="how"></a>
How does prioritization work?</h1>
<p>YARP allows users to assign priorities to connections. Connections with higher priority receive more CPU time and travel faster on the network, resulting in lower latency and more deterministic behavior.</p>
<p>Prioritization works by increasing the priority of threads that are serving a given connection and by assigning QoS parameters to the packets so that they receive higher priority when they traverse the network (the network card and network switch).</p>
<div class="image">
<img src="priority2.png" alt=""/>
<div class="caption">
Individual connections in YARP can be prioritized in two ways: 1) by increasing scheduling priority of the thread that is serving the connection and 2) by assigning higher priority to the packets that travel on the network.</div></div>
<p>Channel prioritization has been experimentally validated in [<a class="el" href="index.html#Paikan2015a">5</a>] and [<a class="el" href="index.html#Paikan2015b">6</a>] showing how it allows reducing latency and improving determinism for selected communication channels.</p>
<h1><a class="anchor" id="example"></a>
An example</h1>
<p>Suppose you want to modify the priority of the connection between /sender and /receiver.</p>
<p>Firstly you can select the scheduling policy and priority for the thread that manages the communication.</p>
<pre class="fragment"> $ yarp admin rpc /sender
   &gt;&gt; prop set /receiver (sched
                            ((policy SCHED_FIFO)
                            (priority 30)))
</pre><p>The first line "yarp admin rpc" opens an administrative session with the port object of /sender. The second line is the real command to the administrative port. It adjusts the scheduling policy and priority of the thread in /sender which handles the connection to /receiver respectively to SCHED_FIFO and 30 on Linux machines (scheduling parameters are OS specific).</p>
<p>Analogously, data packet priority can be configured via administrative commands by setting one of the predefined priority classes:</p>
<pre class="fragment"> $ yarp admin rpc /sender
  &gt;&gt; prop set /receiver (qos ((priority HIGH)))
</pre><p>This simply sets the outbound packets priority to HIGH for the connection from /sender to /receiver. The priority band affects the TOS/DSCP in the IP packets and the queuing policy used by the OS. Possible values are LOW, NORMAL, HIGH and CRITICAL.</p>
<p>These two set of parameters can be set for every channel in the same way and jointly define the actual priority of a communication channel in a YARP network.</p>
<p>Implementation details can be found in [<a class="el" href="index.html#Paikan2015a">5</a>] and [<a class="el" href="index.html#Paikan2015b">6</a>]. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.3.3</span></li>
    <li class="footer">Generated on Tue Nov 3 2020 16:57:06 for YARP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
