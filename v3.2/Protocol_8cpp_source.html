<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: src/libYARP_OS/src/Protocol.cpp Source File</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.2.2' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('Protocol_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Protocol.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Protocol_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (C) 2006-2019 Istituto Italiano di Tecnologia (IIT)</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (C) 2006-2010 RobotCub Consortium</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * This software may be modified and distributed under the terms of the</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * BSD-3-Clause license. See the accompanying LICENSE file for details.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Protocol_8h.html">yarp/os/impl/Protocol.h</a>&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Bottle_8h.html">yarp/os/Bottle.h</a>&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Carrier_8h.html">yarp/os/Carrier.h</a>&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Carriers_8h.html">yarp/os/Carriers.h</a>&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="NetType_8h.html">yarp/os/NetType.h</a>&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Portable_8h.html">yarp/os/Portable.h</a>&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ShiftStream_8h.html">yarp/os/ShiftStream.h</a>&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="TwoWayStream_8h.html">yarp/os/TwoWayStream.h</a>&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Logger_8h.html">yarp/os/impl/Logger.h</a>&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="StreamConnectionReader_8h.html">yarp/os/impl/StreamConnectionReader.h</a>&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceyarp_1_1os_1_1impl.html">yarp::os::impl</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceyarp_1_1os.html">yarp::os</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#aedb62edee84f0966f0ccab170f2cb9d2">   30</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#aedb62edee84f0966f0ccab170f2cb9d2">Protocol::Protocol</a>(<a class="code" href="classyarp_1_1os_1_1TwoWayStream.html">TwoWayStream</a>* stream) :</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        messageLen(0),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        pendingAck(false),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        log(<a class="code" href="classyarp_1_1os_1_1impl_1_1Logger.html">Logger</a>::get()),</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        active(true),</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        delegate(nullptr),</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        recv_delegate(nullptr),</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        send_delegate(nullptr),</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        need_recv_delegate(false),</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        need_send_delegate(false),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        recv_delegate_fail(false),</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        send_delegate_fail(false),</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        route(<span class="stringliteral">&quot;null&quot;</span>, <span class="stringliteral">&quot;null&quot;</span>, <span class="stringliteral">&quot;tcp&quot;</span>),</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        writer(nullptr),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        ref(nullptr),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        envelope(<span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        port(nullptr),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        pendingReply(false)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// We start off with the streams used to contact the port that</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// owns this connection.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    shift.<a class="code" href="classyarp_1_1os_1_1ShiftStream.html#a1d56f0dbd1e81b0cbb85a597d75fed47">takeStream</a>(stream);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    reader.<a class="code" href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#a3d83aa05c221de1730806aaac1cfd597">setProtocol</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ae78a2bc284f521aa47f3fd7718e23ead">   57</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ae78a2bc284f521aa47f3fd7718e23ead">Protocol::~Protocol</a>()</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    closeHelper();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af7442a632ae86af31308426e813d3c07">   63</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af7442a632ae86af31308426e813d3c07">Protocol::setRoute</a>(<span class="keyword">const</span> <a class="code" href="classyarp_1_1os_1_1Route.html">Route</a>&amp; route)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Route.html">Route</a> r = route;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// We reorganize the route to reduce variation in naming.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// If there are qualifiers in the source port name, propagate</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// those qualifiers to the carrier.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    std::string from = r.<a class="code" href="classyarp_1_1os_1_1Route.html#a9beaa65ef1683ab12367720e2e98d0f8">getFromName</a>();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    std::string carrier = r.<a class="code" href="classyarp_1_1os_1_1Route.html#a6a1d40ac1577aa9443338bbf3de7c081">getCarrierName</a>();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> (from.find(<span class="charliteral">&#39; &#39;</span>) != std::string::npos) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <a class="code" href="classyarp_1_1os_1_1Bottle.html">Bottle</a> b(from);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">if</span> (b.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a4d2e210ab875bff598973ab0a6919c31">size</a>() &gt; 1) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            r.<a class="code" href="classyarp_1_1os_1_1Route.html#aa9f8b41204a624642782b17a69523c59">setFromName</a>(b.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a6cd61ddbda2c4970bbe8087cf5986e42">get</a>(0).<a class="code" href="classyarp_1_1os_1_1Value.html#a807e82fec8408b7be003fa1c491eda2c">toString</a>());</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; b.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a4d2e210ab875bff598973ab0a6919c31">size</a>(); i++) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>&amp; v = b.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a6cd61ddbda2c4970bbe8087cf5986e42">get</a>(i);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                <a class="code" href="classyarp_1_1os_1_1Bottle.html">Bottle</a>* lst = v.<a class="code" href="classyarp_1_1os_1_1Value.html#a5a029b824ce967d21ce2ed92508ac9cf">asList</a>();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                <span class="keywordflow">if</span> (lst != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                    carrier.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a3aaf3d68715913bf052c4729485ba42c">append</a>(<span class="stringliteral">&quot;+&quot;</span>).append(lst-&gt;<a class="code" href="classyarp_1_1os_1_1Bottle.html#a6cd61ddbda2c4970bbe8087cf5986e42">get</a>(0).<a class="code" href="classyarp_1_1os_1_1Value.html#a807e82fec8408b7be003fa1c491eda2c">toString</a>()).append(<span class="stringliteral">&quot;.&quot;</span>).append(lst-&gt;<a class="code" href="classyarp_1_1os_1_1Bottle.html#a6cd61ddbda2c4970bbe8087cf5986e42">get</a>(1).<a class="code" href="classyarp_1_1os_1_1Value.html#a807e82fec8408b7be003fa1c491eda2c">toString</a>());</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                    carrier.append(<span class="stringliteral">&quot;+&quot;</span>).append(v.<a class="code" href="classyarp_1_1os_1_1Value.html#a807e82fec8408b7be003fa1c491eda2c">toString</a>());</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            r.<a class="code" href="classyarp_1_1os_1_1Route.html#ac1f6d13db4c1c43c8d9dfe50a7c7a8a6">setCarrierName</a>(carrier);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// Record canonicalized route.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    this-&gt;route = r;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// Check if we have a receiver modifier.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> (recv_delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="classyarp_1_1os_1_1Bottle.html">Bottle</a> b(<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a097f0824cf0c124675144c62d2402d02">getSenderSpecifier</a>());</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">if</span> (b.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">check</a>(<span class="stringliteral">&quot;recv&quot;</span>)) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            need_recv_delegate = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// Check if we have a sender modifier.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (send_delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="classyarp_1_1os_1_1Bottle.html">Bottle</a> b(<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a097f0824cf0c124675144c62d2402d02">getSenderSpecifier</a>());</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">if</span> (b.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">check</a>(<span class="stringliteral">&quot;send&quot;</span>)) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            need_send_delegate = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">  110</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classyarp_1_1os_1_1Route.html">Route</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">Protocol::getRoute</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">return</span> route;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">  116</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1TwoWayStream.html">TwoWayStream</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">Protocol::getStreams</a>()</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> shift;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a86e345848b2e955dfde1ad509d03624c">  122</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a86e345848b2e955dfde1ad509d03624c">Protocol::takeStreams</a>(<a class="code" href="classyarp_1_1os_1_1TwoWayStream.html">TwoWayStream</a>* streams)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    shift.<a class="code" href="classyarp_1_1os_1_1ShiftStream.html#a1d56f0dbd1e81b0cbb85a597d75fed47">takeStream</a>(streams);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (streams != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        active = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a17c06d0f6664adf9a7d2cbe0db86508e">  131</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1TwoWayStream.html">TwoWayStream</a>* <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a17c06d0f6664adf9a7d2cbe0db86508e">Protocol::giveStreams</a>()</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> shift.<a class="code" href="classyarp_1_1os_1_1ShiftStream.html#a61c2c1149f93a2e34811300cfe1184b3">giveStream</a>();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4a93b176589bbca1b5121a365941f3fa">  137</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4a93b176589bbca1b5121a365941f3fa">Protocol::checkStreams</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span> shift.<a class="code" href="classyarp_1_1os_1_1ShiftStream.html#a40e105022dc18b9c52b5bec3fdb711e3">isOk</a>();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a9e8c5e1b4b35be7573fc320756205490">  143</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a9e8c5e1b4b35be7573fc320756205490">Protocol::setReference</a>(<a class="code" href="classyarp_1_1os_1_1Portable.html">yarp::os::Portable</a>* ref)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    this-&gt;ref = ref;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a097f0824cf0c124675144c62d2402d02">  149</a></span>&#160;std::string <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a097f0824cf0c124675144c62d2402d02">Protocol::getSenderSpecifier</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Route.html">Route</a> r = <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">getRoute</a>();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// We pull the sender name from the route.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    std::string from = r.<a class="code" href="classyarp_1_1os_1_1Route.html#a9beaa65ef1683ab12367720e2e98d0f8">getFromName</a>();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// But we need to add any qualifiers looking in the carrier</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// name.  Ideally, we wouldn&#39;t need to bundle that in with</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// the sender name, but we do it for now in the name of</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// backwards compatibility.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    std::string carrier = r.<a class="code" href="classyarp_1_1os_1_1Route.html#a6a1d40ac1577aa9443338bbf3de7c081">getCarrierName</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">size_t</span> start = carrier.find(<span class="charliteral">&#39;+&#39;</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">if</span> (start != std::string::npos) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        from += <span class="stringliteral">&quot; (&quot;</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = start + 1; i &lt; (size_t)carrier.length(); i++) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordtype">char</span> ch = carrier[i];</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> (ch == <span class="charliteral">&#39;+&#39;</span>) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                from += <span class="stringliteral">&quot;) (&quot;</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch == <span class="charliteral">&#39;.&#39;</span>) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                from += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                from += ch;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        from += <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> from;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a69bf227e31ba6f80521d079449df5eba">  178</a></span>&#160;<span class="keyword">const</span> std::string&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a69bf227e31ba6f80521d079449df5eba">Protocol::getEnvelope</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">return</span> envelope;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ab98aeb943076ea6506968b7fae96ed7f">  184</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1Log.html">Log</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ab98aeb943076ea6506968b7fae96ed7f">Protocol::getLog</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> log;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#aa2d1335cc764c48d1b4c4cde104ed51e">  190</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#aa2d1335cc764c48d1b4c4cde104ed51e">Protocol::setRemainingLength</a>(<span class="keywordtype">int</span> len)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    messageLen = len;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#aaabf81f5b26b3914a2c1e0d66641427e">  196</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1Connection.html">Connection</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#aaabf81f5b26b3914a2c1e0d66641427e">Protocol::getConnection</a>()</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span> nullConnection;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> *delegate;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a38e914b168ed6c6d051264caaea8e43c">  205</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1Contactable.html">Contactable</a>* <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a38e914b168ed6c6d051264caaea8e43c">Protocol::getContactable</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">return</span> port;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a3c2a1e74f4e5dc9dbe1a14da2a48717f">  211</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a3c2a1e74f4e5dc9dbe1a14da2a48717f">Protocol::open</a>(<span class="keyword">const</span> std::string&amp; name)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (name.empty()) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Route.html">Route</a> r = <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">getRoute</a>();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    r.<a class="code" href="classyarp_1_1os_1_1Route.html#a6c82c3face96e368e8e806908fd8fb07">setToName</a>(name);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af7442a632ae86af31308426e813d3c07">setRoute</a>(r);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// We are not the initiator of the connection, so we</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// expect to receive a header (carrier-dependent).</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">bool</span> ok = expectHeader();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// Respond to header (carrier-dependent).</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">return</span> respondToHeader();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a75dd301de133dfa5809c49aed0f11e60">  230</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a3c2a1e74f4e5dc9dbe1a14da2a48717f">Protocol::open</a>(<span class="keyword">const</span> <a class="code" href="classyarp_1_1os_1_1Route.html">Route</a>&amp; route)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af7442a632ae86af31308426e813d3c07">setRoute</a>(route);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    setCarrier(route.<a class="code" href="classyarp_1_1os_1_1Route.html#a6a1d40ac1577aa9443338bbf3de7c081">getCarrierName</a>());</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// We are the initiator of the connection, so we</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// send a header (carrier-dependent).</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordtype">bool</span> ok = sendHeader();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// Expect a resonse to the header (carrier-dependent).</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> expectReplyToHeader();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">  248</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">Protocol::close</a>()</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    closeHelper();</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a91b553eb6eab17922edad3ef21755332">  254</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a91b553eb6eab17922edad3ef21755332">Protocol::interrupt</a>()</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;{</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (!active) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (pendingAck) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">// Don&#39;t neglect to send one last acknowledgement if needed.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        sendAck();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// Break the input stream.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    shift.<a class="code" href="classyarp_1_1os_1_1ShiftStream.html#a7399bad996e627e59a12757c3ba6bc55">getInputStream</a>().<a class="code" href="classyarp_1_1os_1_1InputStream.html#af16c93d5feb0c765e2f5fb753adac7c7">interrupt</a>();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    active = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a106ecf10b4116163a0963c443fdd4e3a">  269</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1OutputStream.html">OutputStream</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a106ecf10b4116163a0963c443fdd4e3a">Protocol::getOutputStream</a>()</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">return</span> shift.<a class="code" href="classyarp_1_1os_1_1ShiftStream.html#af1d87f1b3bfe1cf53fa2a4c7490da81b">getOutputStream</a>();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a92b4910a7ddb98edd0189d355a7def30">  275</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1InputStream.html">InputStream</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a92b4910a7ddb98edd0189d355a7def30">Protocol::getInputStream</a>()</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> shift.<a class="code" href="classyarp_1_1os_1_1ShiftStream.html#a7399bad996e627e59a12757c3ba6bc55">getInputStream</a>();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a3a84336bb13328a1da79eb923310e998">  281</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a3a84336bb13328a1da79eb923310e998">Protocol::rename</a>(<span class="keyword">const</span> <a class="code" href="classyarp_1_1os_1_1Route.html">Route</a>&amp; route)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af7442a632ae86af31308426e813d3c07">setRoute</a>(route);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a0a998cff34eed869bf0094e69caaa21c">  287</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a0a998cff34eed869bf0094e69caaa21c">Protocol::isOk</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">return</span> !(!<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4a93b176589bbca1b5121a365941f3fa">checkStreams</a>() || recv_delegate_fail || send_delegate_fail);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a7c4fbd5f0e16ec8d52c6895083ba53fd">  293</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a7c4fbd5f0e16ec8d52c6895083ba53fd">Protocol::write</a>(<a class="code" href="classyarp_1_1os_1_1SizedWriter.html">SizedWriter</a>&amp; writer)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;{</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// End any current write.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    writer.<a class="code" href="classyarp_1_1os_1_1SizedWriter.html#a762c122aab5c1a16b4df20cf7897c543">stopWrite</a>();</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// Skip if this connection is not active (e.g. when there are several</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// logical mcast connections but only one write is actually needed).</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#aaabf81f5b26b3914a2c1e0d66641427e">getConnection</a>().isActive()) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    this-&gt;writer = &amp;writer;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">bool</span> replied = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="Log_8h.html#a99f6f6827637a7bac4f0596004d6e82f">yAssert</a>(delegate != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">getStreams</a>().<a class="code" href="classyarp_1_1os_1_1TwoWayStream.html#aa4c7a1e96bfc722e8bed3460b4a32cfd">beginPacket</a>(); <span class="comment">// Message begins.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">bool</span> ok = delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a084328aa460dc7aac909cf3cb0d5f7c8">write</a>(*<span class="keyword">this</span>, writer);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">getStreams</a>().<a class="code" href="classyarp_1_1os_1_1TwoWayStream.html#a27beeb95dfd11f84284fca27144973f3">endPacket</a>(); <span class="comment">// Message ends.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="classyarp_1_1os_1_1PortReader.html">PortReader</a>* <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ad5896efaca2438c41c2bc84944213649">reply</a> = writer.<a class="code" href="classyarp_1_1os_1_1SizedWriter.html#ac3e1782595367c4a072c6986070a6aab">getReplyHandler</a>();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ad5896efaca2438c41c2bc84944213649">reply</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span> (!delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a01dd9e789b734394be9f9dbb16297b3c">supportReply</a>()) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="comment">// We are expected to get a reply, but cannot.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <a class="code" href="Logger_8h.html#a5b9096e58765e7831d54d0c250ffc8a8">YARP_INFO</a>(log, std::string(<span class="stringliteral">&quot;connection &quot;</span>) + <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">getRoute</a>().<a class="code" href="fakeMotionControl_8cpp.html#a1e803cea7d2670ece91f5465281446ba">toString</a>() + <span class="stringliteral">&quot; does not support replies (try \&quot;tcp\&quot; or \&quot;text_ack\&quot;)&quot;</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">if</span> (ok) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="comment">// Read reply.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            reader.<a class="code" href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#ab80ef26e720613c296781237753ec5f7">reset</a>(<a class="code" href="classyarp_1_1os_1_1ConnectionState.html#ae5bc55a55a1038c23603c4e287781213">is</a>(), &amp;<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">getStreams</a>(), <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">getRoute</a>(), messageLen, delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a53cf1b392dbc454b9a5aa53d887d7757">isTextMode</a>(), delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Connection.html#a50a7696d0ace7622264fb8f6b634bb72">isBareMode</a>());</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            replied = <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ad5896efaca2438c41c2bc84944213649">reply</a>-&gt;read(reader);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    expectAck(); <span class="comment">// Expect acknowledgement (carrier-specific).</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    this-&gt;writer = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> replied;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ad5896efaca2438c41c2bc84944213649">  326</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ad5896efaca2438c41c2bc84944213649">Protocol::reply</a>(<a class="code" href="classyarp_1_1os_1_1SizedWriter.html">SizedWriter</a>&amp; writer)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    writer.<a class="code" href="classyarp_1_1os_1_1SizedWriter.html#a762c122aab5c1a16b4df20cf7897c543">stopWrite</a>();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#ae20c98fae067b02a90f74d385af1137e">reply</a>(*<span class="keyword">this</span>, writer);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    pendingReply = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#aac94339bf75f0d2433b0a89d3f19ec98">  334</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1OutputProtocol.html">OutputProtocol</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#aac94339bf75f0d2433b0a89d3f19ec98">Protocol::getOutput</a>()</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ad8ae792a5ea4963ac79c9af5fd77da82">  340</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1InputProtocol.html">InputProtocol</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ad8ae792a5ea4963ac79c9af5fd77da82">Protocol::getInput</a>()</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a05c3783a7f78650f6d19e52e5974730a">  346</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1ConnectionReader.html">ConnectionReader</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a05c3783a7f78650f6d19e52e5974730a">Protocol::beginRead</a>()</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// We take care of reading the message index</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// (carrier-specific preamble), then leave it</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// up to caller to read the actual message payload.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    getRecvDelegate();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (delegate != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordtype">bool</span> ok = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">while</span> (!ok) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            ok = expectIndex();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classyarp_1_1os_1_1ConnectionState.html#ae5bc55a55a1038c23603c4e287781213">is</a>().<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a0a998cff34eed869bf0094e69caaa21c">isOk</a>()) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    <span class="comment">// Go ahead, we&#39;ll be shutting down, it&#39;ll</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                    <span class="comment">// work out.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                    ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        respondToIndex();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">return</span> reader;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a1a142bbb4f868958451fc5fddd1ccb18">  370</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a1a142bbb4f868958451fc5fddd1ccb18">Protocol::endRead</a>()</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;{</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    reader.<a class="code" href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#aa51ad92b670f685f26f4962be26f8207">flushWriter</a>();</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    sendAck(); <span class="comment">// acknowledge after reply (if there is one)</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4053d8e6e0f56a114455ed44fe60dca7">  377</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4053d8e6e0f56a114455ed44fe60dca7">Protocol::suppressReply</a>()</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;{</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    reader.<a class="code" href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#aefa0cc021bb3f736d1ffd858716889ae">suppressReply</a>();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a2f5dc6fdf7f9acd482b605940d21da03">  383</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a2f5dc6fdf7f9acd482b605940d21da03">Protocol::setTimeout</a>(<span class="keywordtype">double</span> timeout)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;{</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">bool</span> ok = <a class="code" href="classyarp_1_1os_1_1ConnectionState.html#aee31bb2bfc02862ffcedeccf84ece140">os</a>().<a class="code" href="classyarp_1_1os_1_1OutputStream.html#a6df7cbb8c986babad88660e69fc76e44">setWriteTimeout</a>(timeout);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1os_1_1ConnectionState.html#ae5bc55a55a1038c23603c4e287781213">is</a>().<a class="code" href="classyarp_1_1os_1_1InputStream.html#ab33565fbce25d9060a6401fab0bc672e">setReadTimeout</a>(timeout);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a77e0f1c9f08e388683fb461ee2a602fe">  393</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a77e0f1c9f08e388683fb461ee2a602fe">Protocol::setEnvelope</a>(<span class="keyword">const</span> std::string&amp; str)</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;{</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    envelope = str;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4b8c7bfc833935dbffdf6be07fb55162">  399</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1Connection.html">Connection</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4b8c7bfc833935dbffdf6be07fb55162">Protocol::getReceiver</a>()</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;{</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (recv_delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">return</span> nullConnection;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">return</span> *recv_delegate;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a1956b21e1ed0c9010369152a9908cdb6">  408</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a1956b21e1ed0c9010369152a9908cdb6">Protocol::attachPort</a>(<a class="code" href="classyarp_1_1os_1_1Contactable.html">yarp::os::Contactable</a>* port)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;{</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    this-&gt;port = port;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a5564af56a1eb6875b81f90c1eca99c6f">  414</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a5564af56a1eb6875b81f90c1eca99c6f">Protocol::isReplying</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">return</span> pendingReply;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a6e011c4135ccb1bde7bc233ee5dcadaa">  420</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a6e011c4135ccb1bde7bc233ee5dcadaa">Protocol::beginWrite</a>()</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    getSendDelegate();</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="classyarp_1_1os_1_1impl_1_1Protocol.html#acb317c609d9fea8895f49cc5c8a65abd">  426</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1Connection.html">Connection</a>&amp; <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#acb317c609d9fea8895f49cc5c8a65abd">Protocol::getSender</a>()</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;{</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">if</span> (send_delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">return</span> nullConnection;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">return</span> *send_delegate;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="keywordtype">bool</span> Protocol::getRecvDelegate()</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;{</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// If we&#39;ve already checked for a receiver modifier, return.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">if</span> (recv_delegate != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (!need_recv_delegate) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (recv_delegate_fail) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Bottle.html">Bottle</a> b(<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a097f0824cf0c124675144c62d2402d02">getSenderSpecifier</a>());</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">// Check for a &quot;recv&quot; qualifier.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    std::string tag = b.find(<span class="stringliteral">&quot;recv&quot;</span>).asString();</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    recv_delegate = <a class="code" href="classyarp_1_1os_1_1Carriers.html#a92af949ab4c0690338164d1d7d372f37">Carriers::chooseCarrier</a>(tag);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (recv_delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Need carrier \&quot;%s\&quot;, but cannot find it.\n&quot;</span>, tag.c_str());</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        recv_delegate_fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">close</a>();</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (!recv_delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#acf8d41a1e2095d257ad213b97edb656b">modifiesIncomingData</a>()) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Carrier \&quot;%s\&quot; does not modify incoming data as expected.\n&quot;</span>, tag.c_str());</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        recv_delegate_fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">close</a>();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// Configure the receiver modifier.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span> (!recv_delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a084d803edf7040bc544a607f93c8151b">configure</a>(*<span class="keyword">this</span>)) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Carrier \&quot;%s\&quot; could not configure the send delegate.\n&quot;</span>, tag.c_str());</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        recv_delegate_fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">close</a>();</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="keywordtype">bool</span> Protocol::getSendDelegate()</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;{</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// If we&#39;ve already checked for a sender modifier, return.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (send_delegate != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (!need_send_delegate) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (send_delegate_fail) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Bottle.html">Bottle</a> b(<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a097f0824cf0c124675144c62d2402d02">getSenderSpecifier</a>());</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// Check for a &quot;send&quot; qualifier.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    std::string tag = b.find(<span class="stringliteral">&quot;send&quot;</span>).asString();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    send_delegate = <a class="code" href="classyarp_1_1os_1_1Carriers.html#a92af949ab4c0690338164d1d7d372f37">Carriers::chooseCarrier</a>(tag);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span> (send_delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Need carrier \&quot;%s\&quot;, but cannot find it.\n&quot;</span>, tag.c_str());</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        send_delegate_fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">close</a>();</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">if</span> (!send_delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#aff588e23f945b4024db5695a15eb48c9">modifiesOutgoingData</a>()) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Carrier \&quot;%s\&quot; does not modify outgoing data as expected.\n&quot;</span>, tag.c_str());</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        send_delegate_fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">close</a>();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Configure the sender modifier.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">if</span> (!send_delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a084d803edf7040bc544a607f93c8151b">configure</a>(*<span class="keyword">this</span>)) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Carrier \&quot;%s\&quot; could not configure the send delegate.\n&quot;</span>, tag.c_str());</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        send_delegate_fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">close</a>();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="keywordtype">bool</span> Protocol::respondToHeader()</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;{</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <a class="code" href="Log_8h.html#a99f6f6827637a7bac4f0596004d6e82f">yAssert</a>(delegate != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordtype">bool</span> ok = delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a202825b56a69d0e3fbccd3154eed3c90">respondToHeader</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="classyarp_1_1os_1_1ConnectionState.html#aee31bb2bfc02862ffcedeccf84ece140">os</a>().<a class="code" href="classyarp_1_1os_1_1OutputStream.html#a36ab9b168185c63a46c4b8bd70205e97">flush</a>();</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classyarp_1_1os_1_1ConnectionState.html#aee31bb2bfc02862ffcedeccf84ece140">os</a>().<a class="code" href="classyarp_1_1os_1_1OutputStream.html#a88ed49f557bdce2d130810bebc62af31">isOk</a>();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="keywordtype">bool</span> Protocol::expectAck()</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;{</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="Log_8h.html#a99f6f6827637a7bac4f0596004d6e82f">yAssert</a>(delegate != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a49d47917e4231bb17224b90abeb6d04c">requireAck</a>()) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">return</span> delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#ac48549429fd1433a2781e5c57d54eb7a">expectAck</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="keywordtype">void</span> Protocol::closeHelper()</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    active = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (pendingAck) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        sendAck();</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    shift.<a class="code" href="classyarp_1_1os_1_1ShiftStream.html#ae2aae19a573375f9e6036f3bca452f38">close</a>();</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (delegate != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a932fa38022e4f16330131d413fa2bd45">close</a>();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keyword">delete</span> delegate;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        delegate = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span> (recv_delegate != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        recv_delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a932fa38022e4f16330131d413fa2bd45">close</a>();</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keyword">delete</span> recv_delegate;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        recv_delegate = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> (send_delegate != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        send_delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a932fa38022e4f16330131d413fa2bd45">close</a>();</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="keyword">delete</span> send_delegate;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        send_delegate = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;}</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="keywordtype">bool</span> Protocol::sendAck()</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;{</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    pendingAck = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a49d47917e4231bb17224b90abeb6d04c">requireAck</a>()) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        ok = delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#afc1f917c275b69b59f04229d5f9c92dd">sendAck</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="classyarp_1_1os_1_1ConnectionState.html#aee31bb2bfc02862ffcedeccf84ece140">os</a>().<a class="code" href="classyarp_1_1os_1_1OutputStream.html#a36ab9b168185c63a46c4b8bd70205e97">flush</a>();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">getStreams</a>().<a class="code" href="classyarp_1_1os_1_1TwoWayStream.html#a27beeb95dfd11f84284fca27144973f3">endPacket</a>();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="keywordtype">bool</span> Protocol::expectIndex()</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">// We&#39;ll eventually need to send an acknowledgement</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// (if the carrier in use requires that).</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    pendingAck = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    messageLen = 0;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="comment">// This is where a message can be considered to begin.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// If things go wrong on an unreliable carrier (e.g. on</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// udp), we should skip to the beginning of the next</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// message, as marked by this call.</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">getStreams</a>().<a class="code" href="classyarp_1_1os_1_1TwoWayStream.html#aa4c7a1e96bfc722e8bed3460b4a32cfd">beginPacket</a>();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    ref = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordtype">bool</span> ok = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> (delegate != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="comment">// What we actually do here is carrier-specific.</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="comment">// Perhaps we do nothing at all.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        ok = delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#ac30068b63b452ecfc18c8932388ff800">expectIndex</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (ok) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="comment">// Set up a reader for the user payload.</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        reader.<a class="code" href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#ab80ef26e720613c296781237753ec5f7">reset</a>(<a class="code" href="classyarp_1_1os_1_1ConnectionState.html#ae5bc55a55a1038c23603c4e287781213">is</a>(), &amp;<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">getStreams</a>(), <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">getRoute</a>(), messageLen, delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a53cf1b392dbc454b9a5aa53d887d7757">isTextMode</a>(), delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Connection.html#a50a7696d0ace7622264fb8f6b634bb72">isBareMode</a>());</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="comment">// Pass on a reference to the object being</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="comment">// send, if we know it, for local connections.</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">if</span> (ref != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            reader.<a class="code" href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#aeb9038bd9619233a95ba500ce3265c65">setReference</a>(ref);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        reader.<a class="code" href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#ab80ef26e720613c296781237753ec5f7">reset</a>(<a class="code" href="classyarp_1_1os_1_1ConnectionState.html#ae5bc55a55a1038c23603c4e287781213">is</a>(), &amp;<a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">getStreams</a>(), <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">getRoute</a>(), 0, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="keywordtype">void</span> Protocol::setCarrier(<span class="keyword">const</span> std::string&amp; carrierNameBase)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;{</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">// Set up the carrier for this connection.  The carrier</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// has all the protocol-specific behavior.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    std::string carrierName = carrierNameBase;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span> (carrierNameBase.empty()) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        carrierName = <span class="stringliteral">&quot;tcp&quot;</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Route.html">Route</a> route = <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">getRoute</a>();</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    route.<a class="code" href="classyarp_1_1os_1_1Route.html#ac1f6d13db4c1c43c8d9dfe50a7c7a8a6">setCarrierName</a>(carrierName);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af7442a632ae86af31308426e813d3c07">setRoute</a>(route);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">if</span> (delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        delegate = <a class="code" href="classyarp_1_1os_1_1Carriers.html#a92af949ab4c0690338164d1d7d372f37">Carriers::chooseCarrier</a>(carrierName);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">if</span> (delegate != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            <span class="keywordflow">if</span> (delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#acf8d41a1e2095d257ad213b97edb656b">modifiesIncomingData</a>()) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keywordflow">if</span> (active) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;Carrier \&quot;%s\&quot; cannot be used this way, try \&quot;tcp+recv.%s\&quot; instead.\n&quot;</span>, carrierName.c_str(), carrierName.c_str());</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">close</a>();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="comment">// Configure the carrier.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="keywordflow">if</span> (!delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a084d803edf7040bc544a607f93c8151b">configure</a>(*<span class="keyword">this</span>)) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;Carrier \&quot;%s\&quot; could not be configured.\n&quot;</span>, carrierName.c_str());</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">close</a>();</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#af97ef0bf594a93906dbb451b2835e172">prepareSend</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="keywordtype">bool</span> Protocol::expectHeader()</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;{</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">// A header, for historic reasons, is seen as</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// a protocol fingerprint (at least 8 bytes)</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// and the name of the sender.  In practice,</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">// these callbacks have been stretched to the</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">// point where their names have little bearing</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">// on what the get used for.</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    messageLen = 0;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordtype">bool</span> ok = expectProtocolSpecifier();</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    ok = expectSenderSpecifier();</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="Log_8h.html#a99f6f6827637a7bac4f0596004d6e82f">yAssert</a>(delegate != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    ok = delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#ab94dbc75892185f10eda8e93004dec30">expectExtraHeader</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="keywordtype">bool</span> Protocol::expectProtocolSpecifier()</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;{</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// Historically YARP has used the first 8 bytes of</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// every connection as a way to identify it.  This</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// assumption is showing its age, and should really</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="comment">// be generalized.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordtype">char</span> buf[8];</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Bytes.html">yarp::os::Bytes</a> header((<span class="keywordtype">char</span>*)&amp;buf[0], <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="namespaceyarp_1_1conf.html#a3df5afb43ff7b7cc2b4e3cb9150eab20">yarp::conf::ssize_t</a> len = <a class="code" href="classyarp_1_1os_1_1ConnectionState.html#ae5bc55a55a1038c23603c4e287781213">is</a>().<a class="code" href="classyarp_1_1os_1_1InputStream.html#a937dec0f8021c357357463882b22dcd6">readFull</a>(header);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span> (len == -1) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <a class="code" href="Logger_8h.html#a3ac8e9b980e14d08fca14f4bef545c96">YARP_DEBUG</a>(log, <span class="stringliteral">&quot;no connection&quot;</span>);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">size_t</span>)len != header.length()) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <a class="code" href="Logger_8h.html#a3ac8e9b980e14d08fca14f4bef545c96">YARP_DEBUG</a>(log, <span class="stringliteral">&quot;data stream died&quot;</span>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordtype">bool</span> already = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> (delegate != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">if</span> (delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#ade8595d49121366dbd059c00e07032dd">checkHeader</a>(header)) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            already = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span> (!already) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        delegate = <a class="code" href="classyarp_1_1os_1_1Carriers.html#a92af949ab4c0690338164d1d7d372f37">Carriers::chooseCarrier</a>(header);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">if</span> (delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="comment">// Carrier not found; send a human-readable message.</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            std::string msg = <span class="stringliteral">&quot;* Error. Protocol not found.\r\n* Hello. You appear to be trying to communicate with a YARP Port.\r\n* The first 8 bytes sent to a YARP Port are critical for identifying the\r\n* protocol you wish to speak.\r\n* The first 8 bytes you sent were not associated with any particular protocol.\r\n* If you are a human, try typing \&quot;CONNECT foo\&quot; followed by a &lt;RETURN&gt;.\r\n* The 8 bytes \&quot;CONNECT \&quot; correspond to a simple text-mode protocol.\r\n* Goodbye.\r\n&quot;</span>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <a class="code" href="classyarp_1_1os_1_1Bytes.html">yarp::os::Bytes</a> b((<span class="keywordtype">char</span>*)msg.c_str(), msg.length());</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <a class="code" href="classyarp_1_1os_1_1ConnectionState.html#aee31bb2bfc02862ffcedeccf84ece140">os</a>().<a class="code" href="classyarp_1_1os_1_1OutputStream.html#a9ee2201aa922c1124392aeb97849148c">write</a>(b);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <a class="code" href="classyarp_1_1os_1_1ConnectionState.html#aee31bb2bfc02862ffcedeccf84ece140">os</a>().<a class="code" href="classyarp_1_1os_1_1OutputStream.html#a36ab9b168185c63a46c4b8bd70205e97">flush</a>();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span> (delegate == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <a class="code" href="Logger_8h.html#a3ac8e9b980e14d08fca14f4bef545c96">YARP_DEBUG</a>(log, <span class="stringliteral">&quot;unrecognized protocol&quot;</span>);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Route.html">Route</a> r = <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">getRoute</a>();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    r.<a class="code" href="classyarp_1_1os_1_1Route.html#ac1f6d13db4c1c43c8d9dfe50a7c7a8a6">setCarrierName</a>(delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Connection.html#a9cbef5bd6711d353c986a8a9841df91f">getName</a>());</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="classyarp_1_1os_1_1impl_1_1Protocol.html#af7442a632ae86af31308426e813d3c07">setRoute</a>(r);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#aa8bd0df9aab08d985972c36adc176ba5">setParameters</a>(header);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;}</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="keywordtype">bool</span> Protocol::expectSenderSpecifier()</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;{</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="Log_8h.html#a99f6f6827637a7bac4f0596004d6e82f">yAssert</a>(delegate != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">return</span> delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a717a57569bd043f969a6e265e78075ac">expectSenderSpecifier</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="keywordtype">bool</span> Protocol::sendHeader()</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;{</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="Log_8h.html#a99f6f6827637a7bac4f0596004d6e82f">yAssert</a>(delegate != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">return</span> delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#a8b607f200b8b5ecd8d3abc2b37526e5a">sendHeader</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="keywordtype">bool</span> Protocol::expectReplyToHeader()</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;{</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="Log_8h.html#a99f6f6827637a7bac4f0596004d6e82f">yAssert</a>(delegate != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">return</span> delegate-&gt;<a class="code" href="classyarp_1_1os_1_1Carrier.html#aedaef9bb02fa17594a79a42a68422a49">expectReplyToHeader</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="keywordtype">bool</span> Protocol::respondToIndex()</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;{</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclassyarp_1_1os_1_1TwoWayStream_html"><div class="ttname"><a href="classyarp_1_1os_1_1TwoWayStream.html">yarp::os::TwoWayStream</a></div><div class="ttdoc">A stream which can be asked to perform bidirectional communication.</div><div class="ttdef"><b>Definition:</b> <a href="TwoWayStream_8h_source.html#l00028">TwoWayStream.h:29</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a></div><div class="ttdoc">A simple collection of objects that can be described and transmitted in a portable way.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8h_source.html#l00072">Bottle.h:73</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a097f0824cf0c124675144c62d2402d02"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a097f0824cf0c124675144c62d2402d02">yarp::os::impl::Protocol::getSenderSpecifier</a></div><div class="ttdeci">std::string getSenderSpecifier() const override</div><div class="ttdoc">Extract a name for the sender, if the connection type supports that.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00149">Protocol.cpp:149</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_af7442a632ae86af31308426e813d3c07"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#af7442a632ae86af31308426e813d3c07">yarp::os::impl::Protocol::setRoute</a></div><div class="ttdeci">void setRoute(const Route &amp;route) override</div><div class="ttdoc">Set the route associated with this connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00063">Protocol.cpp:63</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a4a93b176589bbca1b5121a365941f3fa"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4a93b176589bbca1b5121a365941f3fa">yarp::os::impl::Protocol::checkStreams</a></div><div class="ttdeci">bool checkStreams() const override</div><div class="ttdoc">Check whether streams are in a good state.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00137">Protocol.cpp:137</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Portable_html"><div class="ttname"><a href="classyarp_1_1os_1_1Portable.html">yarp::os::Portable</a></div><div class="ttdoc">This is a base class for objects that can be both read from and be written to the YARP network.</div><div class="ttdef"><b>Definition:</b> <a href="Portable_8h_source.html#l00028">Portable.h:29</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_afc1f917c275b69b59f04229d5f9c92dd"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#afc1f917c275b69b59f04229d5f9c92dd">yarp::os::Carrier::sendAck</a></div><div class="ttdeci">virtual bool sendAck(ConnectionState &amp;proto)=0</div><div class="ttdoc">Send an acknowledgement, if needed for this carrier.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1StreamConnectionReader_html_ab80ef26e720613c296781237753ec5f7"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#ab80ef26e720613c296781237753ec5f7">yarp::os::impl::StreamConnectionReader::reset</a></div><div class="ttdeci">void reset(yarp::os::InputStream &amp;in, TwoWayStream *str, const Route &amp;route, size_t len, bool textMode, bool bareMode=false)</div><div class="ttdef"><b>Definition:</b> <a href="StreamConnectionReader_8cpp_source.html#l00048">StreamConnectionReader.cpp:48</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Route_html_a6a1d40ac1577aa9443338bbf3de7c081"><div class="ttname"><a href="classyarp_1_1os_1_1Route.html#a6a1d40ac1577aa9443338bbf3de7c081">yarp::os::Route::getCarrierName</a></div><div class="ttdeci">const std::string &amp; getCarrierName() const</div><div class="ttdoc">Get the carrier type of the route.</div><div class="ttdef"><b>Definition:</b> <a href="Route_8cpp_source.html#l00126">Route.cpp:126</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a4d2e210ab875bff598973ab0a6919c31"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a4d2e210ab875bff598973ab0a6919c31">yarp::os::Bottle::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdoc">Gets the number of elements in the bottle.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00233">Bottle.cpp:233</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ShiftStream_html_ae2aae19a573375f9e6036f3bca452f38"><div class="ttname"><a href="classyarp_1_1os_1_1ShiftStream.html#ae2aae19a573375f9e6036f3bca452f38">yarp::os::ShiftStream::close</a></div><div class="ttdeci">void close() override</div><div class="ttdoc">Terminate the stream.</div><div class="ttdef"><b>Definition:</b> <a href="ShiftStream_8cpp_source.html#l00092">ShiftStream.cpp:92</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ShiftStream_html_a61c2c1149f93a2e34811300cfe1184b3"><div class="ttname"><a href="classyarp_1_1os_1_1ShiftStream.html#a61c2c1149f93a2e34811300cfe1184b3">yarp::os::ShiftStream::giveStream</a></div><div class="ttdeci">virtual TwoWayStream * giveStream()</div><div class="ttdoc">Removes the wrapped stream and returns it.</div><div class="ttdef"><b>Definition:</b> <a href="ShiftStream_8cpp_source.html#l00103">ShiftStream.cpp:103</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1OutputProtocol_html"><div class="ttname"><a href="classyarp_1_1os_1_1OutputProtocol.html">yarp::os::OutputProtocol</a></div><div class="ttdoc">The output side of an active connection between two ports.</div><div class="ttdef"><b>Definition:</b> <a href="OutputProtocol_8h_source.html#l00032">OutputProtocol.h:33</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a38e914b168ed6c6d051264caaea8e43c"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a38e914b168ed6c6d051264caaea8e43c">yarp::os::impl::Protocol::getContactable</a></div><div class="ttdeci">Contactable * getContactable() const override</div><div class="ttdoc">Get the port associated with the connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00205">Protocol.cpp:205</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_a8b607f200b8b5ecd8d3abc2b37526e5a"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#a8b607f200b8b5ecd8d3abc2b37526e5a">yarp::os::Carrier::sendHeader</a></div><div class="ttdeci">virtual bool sendHeader(ConnectionState &amp;proto)=0</div><div class="ttdoc">Write a header appropriate to the carrier to the connection, followed by any carrier-specific data.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_af97ef0bf594a93906dbb451b2835e172"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#af97ef0bf594a93906dbb451b2835e172">yarp::os::Carrier::prepareSend</a></div><div class="ttdeci">virtual bool prepareSend(ConnectionState &amp;proto)=0</div><div class="ttdoc">Perform any initialization needed before writing on a connection.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ShiftStream_html_a1d56f0dbd1e81b0cbb85a597d75fed47"><div class="ttname"><a href="classyarp_1_1os_1_1ShiftStream.html#a1d56f0dbd1e81b0cbb85a597d75fed47">yarp::os::ShiftStream::takeStream</a></div><div class="ttdeci">virtual void takeStream(TwoWayStream *stream)</div><div class="ttdoc">Wrap the supplied stream.</div><div class="ttdef"><b>Definition:</b> <a href="ShiftStream_8cpp_source.html#l00097">ShiftStream.cpp:97</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1OutputStream_html_a9ee2201aa922c1124392aeb97849148c"><div class="ttname"><a href="classyarp_1_1os_1_1OutputStream.html#a9ee2201aa922c1124392aeb97849148c">yarp::os::OutputStream::write</a></div><div class="ttdeci">virtual void write(char ch)</div><div class="ttdoc">Write a single byte to the stream.</div><div class="ttdef"><b>Definition:</b> <a href="OutputStream_8cpp_source.html#l00017">OutputStream.cpp:17</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a77e0f1c9f08e388683fb461ee2a602fe"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a77e0f1c9f08e388683fb461ee2a602fe">yarp::os::impl::Protocol::setEnvelope</a></div><div class="ttdeci">void setEnvelope(const std::string &amp;str) override</div><div class="ttdoc">Set the envelope that will be attached to the next message.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00393">Protocol.cpp:393</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_aff588e23f945b4024db5695a15eb48c9"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#aff588e23f945b4024db5695a15eb48c9">yarp::os::Carrier::modifiesOutgoingData</a></div><div class="ttdeci">bool modifiesOutgoingData() const override</div><div class="ttdoc">Check if this carrier modifies outgoing data through the Carrier::modifyOutgoingData method.</div><div class="ttdef"><b>Definition:</b> <a href="Carrier_8cpp_source.html#l00067">Carrier.cpp:67</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a05c3783a7f78650f6d19e52e5974730a"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a05c3783a7f78650f6d19e52e5974730a">yarp::os::impl::Protocol::beginRead</a></div><div class="ttdeci">yarp::os::ConnectionReader &amp; beginRead() override</div><div class="ttdoc">Begin a read operation, with bytes read via the returned yarp::os::ConnectionReader object.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00346">Protocol.cpp:346</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_a084328aa460dc7aac909cf3cb0d5f7c8"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#a084328aa460dc7aac909cf3cb0d5f7c8">yarp::os::Carrier::write</a></div><div class="ttdeci">virtual bool write(ConnectionState &amp;proto, SizedWriter &amp;writer)=0</div><div class="ttdoc">Write a message.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Connection_html_a50a7696d0ace7622264fb8f6b634bb72"><div class="ttname"><a href="classyarp_1_1os_1_1Connection.html#a50a7696d0ace7622264fb8f6b634bb72">yarp::os::Connection::isBareMode</a></div><div class="ttdeci">virtual bool isBareMode() const</div><div class="ttdoc">Check if carrier excludes type information from payload.</div><div class="ttdef"><b>Definition:</b> <a href="Connection_8cpp_source.html#l00020">Connection.cpp:20</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1OutputStream_html"><div class="ttname"><a href="classyarp_1_1os_1_1OutputStream.html">yarp::os::OutputStream</a></div><div class="ttdoc">Simple specification of the minimum functions needed from output streams.</div><div class="ttdef"><b>Definition:</b> <a href="OutputStream_8h_source.html#l00024">OutputStream.h:25</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1InputStream_html_af16c93d5feb0c765e2f5fb753adac7c7"><div class="ttname"><a href="classyarp_1_1os_1_1InputStream.html#af16c93d5feb0c765e2f5fb753adac7c7">yarp::os::InputStream::interrupt</a></div><div class="ttdeci">virtual void interrupt()</div><div class="ttdoc">Interrupt the stream.</div><div class="ttdef"><b>Definition:</b> <a href="InputStream_8cpp_source.html#l00045">InputStream.cpp:45</a></div></div>
<div class="ttc" id="aPortable_8h_html"><div class="ttname"><a href="Portable_8h.html">Portable.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1OutputStream_html_a6df7cbb8c986babad88660e69fc76e44"><div class="ttname"><a href="classyarp_1_1os_1_1OutputStream.html#a6df7cbb8c986babad88660e69fc76e44">yarp::os::OutputStream::setWriteTimeout</a></div><div class="ttdeci">virtual bool setWriteTimeout(double timeout)</div><div class="ttdoc">Set activity timeout.</div><div class="ttdef"><b>Definition:</b> <a href="OutputStream_8cpp_source.html#l00039">OutputStream.cpp:39</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_a717a57569bd043f969a6e265e78075ac"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#a717a57569bd043f969a6e265e78075ac">yarp::os::Carrier::expectSenderSpecifier</a></div><div class="ttdeci">virtual bool expectSenderSpecifier(ConnectionState &amp;proto)=0</div><div class="ttdoc">Expect the name of the sending port.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1StreamConnectionReader_html_aefa0cc021bb3f736d1ffd858716889ae"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#aefa0cc021bb3f736d1ffd858716889ae">yarp::os::impl::StreamConnectionReader::suppressReply</a></div><div class="ttdeci">void suppressReply()</div><div class="ttdef"><b>Definition:</b> <a href="StreamConnectionReader_8cpp_source.html#l00073">StreamConnectionReader.cpp:73</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carriers_html_a92af949ab4c0690338164d1d7d372f37"><div class="ttname"><a href="classyarp_1_1os_1_1Carriers.html#a92af949ab4c0690338164d1d7d372f37">yarp::os::Carriers::chooseCarrier</a></div><div class="ttdeci">static Carrier * chooseCarrier(const std::string &amp;name)</div><div class="ttdoc">Select a carrier by name.</div><div class="ttdef"><b>Definition:</b> <a href="Carriers_8cpp_source.html#l00232">Carriers.cpp:232</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_ad5896efaca2438c41c2bc84944213649"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#ad5896efaca2438c41c2bc84944213649">yarp::os::impl::Protocol::reply</a></div><div class="ttdeci">void reply(SizedWriter &amp;writer) override</div><div class="ttdoc">Reply to a message we have just read.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00326">Protocol.cpp:326</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Connection_html_a9cbef5bd6711d353c986a8a9841df91f"><div class="ttname"><a href="classyarp_1_1os_1_1Connection.html#a9cbef5bd6711d353c986a8a9841df91f">yarp::os::Connection::getName</a></div><div class="ttdeci">virtual std::string getName() const =0</div><div class="ttdoc">Get the name of this connection type (&quot;tcp&quot;, &quot;mcast&quot;, &quot;shmem&quot;, ...)</div></div>
<div class="ttc" id="aCarriers_8h_html"><div class="ttname"><a href="Carriers_8h.html">Carriers.h</a></div></div>
<div class="ttc" id="aStreamConnectionReader_8h_html"><div class="ttname"><a href="StreamConnectionReader_8h.html">StreamConnectionReader.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a92b4910a7ddb98edd0189d355a7def30"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a92b4910a7ddb98edd0189d355a7def30">yarp::os::impl::Protocol::getInputStream</a></div><div class="ttdeci">InputStream &amp; getInputStream() override</div><div class="ttdoc">Access the input stream associated with this connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00275">Protocol.cpp:275</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_ac474f512158ba71d839490ae601344b1"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#ac474f512158ba71d839490ae601344b1">yarp::os::impl::Protocol::close</a></div><div class="ttdeci">void close() override</div><div class="ttdoc">Negotiate an end to operations.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00248">Protocol.cpp:248</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_a49d47917e4231bb17224b90abeb6d04c"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#a49d47917e4231bb17224b90abeb6d04c">yarp::os::Carrier::requireAck</a></div><div class="ttdeci">bool requireAck() const override=0</div><div class="ttdoc">Check if carrier has flow control, requiring sent messages to be acknowledged by recipient.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Route_html"><div class="ttname"><a href="classyarp_1_1os_1_1Route.html">yarp::os::Route</a></div><div class="ttdoc">Information about a connection between two ports.</div><div class="ttdef"><b>Definition:</b> <a href="Route_8h_source.html#l00031">Route.h:32</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a1a142bbb4f868958451fc5fddd1ccb18"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a1a142bbb4f868958451fc5fddd1ccb18">yarp::os::impl::Protocol::endRead</a></div><div class="ttdeci">void endRead() override</div><div class="ttdoc">End the current read operation, begin by beginRead().</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00370">Protocol.cpp:370</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_a53cf1b392dbc454b9a5aa53d887d7757"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#a53cf1b392dbc454b9a5aa53d887d7757">yarp::os::Carrier::isTextMode</a></div><div class="ttdeci">bool isTextMode() const override=0</div><div class="ttdoc">Check if carrier is textual in nature.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_aedb62edee84f0966f0ccab170f2cb9d2"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#aedb62edee84f0966f0ccab170f2cb9d2">yarp::os::impl::Protocol::Protocol</a></div><div class="ttdeci">Protocol(TwoWayStream *stream)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00030">Protocol.cpp:30</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_aedaef9bb02fa17594a79a42a68422a49"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#aedaef9bb02fa17594a79a42a68422a49">yarp::os::Carrier::expectReplyToHeader</a></div><div class="ttdeci">virtual bool expectReplyToHeader(ConnectionState &amp;proto)=0</div><div class="ttdoc">Process reply to header, if one is expected for this carrier.</div></div>
<div class="ttc" id="aShiftStream_8h_html"><div class="ttname"><a href="ShiftStream_8h.html">ShiftStream.h</a></div></div>
<div class="ttc" id="aTwoWayStream_8h_html"><div class="ttname"><a href="TwoWayStream_8h.html">TwoWayStream.h</a></div></div>
<div class="ttc" id="aProtocol_8h_html"><div class="ttname"><a href="Protocol_8h.html">Protocol.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a3a84336bb13328a1da79eb923310e998"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a3a84336bb13328a1da79eb923310e998">yarp::os::impl::Protocol::rename</a></div><div class="ttdeci">void rename(const Route &amp;route) override</div><div class="ttdoc">Relabel the route after the fact (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00281">Protocol.cpp:281</a></div></div>
<div class="ttc" id="aNetType_8h_html"><div class="ttname"><a href="NetType_8h.html">NetType.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a3c2a1e74f4e5dc9dbe1a14da2a48717f"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a3c2a1e74f4e5dc9dbe1a14da2a48717f">yarp::os::impl::Protocol::open</a></div><div class="ttdeci">bool open(const std::string &amp;name) override</div><div class="ttdoc">Start negotiating a carrier, using the given name as our own if a name is needed (this should general...</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00211">Protocol.cpp:211</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a9a98533da1dfef02172cfcae62439f00"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">yarp::os::Bottle::check</a></div><div class="ttdeci">bool check(const std::string &amp;key) const override</div><div class="ttdoc">Check if there exists a property of the given name.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00259">Bottle.cpp:259</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_ad8ae792a5ea4963ac79c9af5fd77da82"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#ad8ae792a5ea4963ac79c9af5fd77da82">yarp::os::impl::Protocol::getInput</a></div><div class="ttdeci">InputProtocol &amp; getInput() override</div><div class="ttdoc">Get an interface for doing read operations on the connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00340">Protocol.cpp:340</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a2f5dc6fdf7f9acd482b605940d21da03"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a2f5dc6fdf7f9acd482b605940d21da03">yarp::os::impl::Protocol::setTimeout</a></div><div class="ttdeci">bool setTimeout(double timeout) override</div><div class="ttdoc">Set the timeout to be used for network operations.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00383">Protocol.cpp:383</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a4053d8e6e0f56a114455ed44fe60dca7"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4053d8e6e0f56a114455ed44fe60dca7">yarp::os::impl::Protocol::suppressReply</a></div><div class="ttdeci">void suppressReply() override</div><div class="ttdoc">Make sure that any attempt to send a reply to input will be denied.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00377">Protocol.cpp:377</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a71f045a85beaa88ae82d06ecc430f5cc"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a71f045a85beaa88ae82d06ecc430f5cc">yarp::os::impl::Protocol::getStreams</a></div><div class="ttdeci">TwoWayStream &amp; getStreams() override</div><div class="ttdoc">Access the streams associated with the connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00116">Protocol.cpp:116</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ConnectionState_html_aee31bb2bfc02862ffcedeccf84ece140"><div class="ttname"><a href="classyarp_1_1os_1_1ConnectionState.html#aee31bb2bfc02862ffcedeccf84ece140">yarp::os::ConnectionState::os</a></div><div class="ttdeci">OutputStream &amp; os()</div><div class="ttdoc">Shorthand for getOutputStream()</div><div class="ttdef"><b>Definition:</b> <a href="ConnectionState_8h_source.html#l00123">ConnectionState.h:123</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a1956b21e1ed0c9010369152a9908cdb6"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a1956b21e1ed0c9010369152a9908cdb6">yarp::os::impl::Protocol::attachPort</a></div><div class="ttdeci">void attachPort(yarp::os::Contactable *port) override</div><div class="ttdoc">Set the port to be associated with the connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00408">Protocol.cpp:408</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1PortReader_html"><div class="ttname"><a href="classyarp_1_1os_1_1PortReader.html">yarp::os::PortReader</a></div><div class="ttdoc">Interface implemented by all objects that can read themselves from the network, such as Bottle object...</div><div class="ttdef"><b>Definition:</b> <a href="PortReader_8h_source.html#l00027">PortReader.h:28</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a6cd61ddbda2c4970bbe8087cf5986e42"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a6cd61ddbda2c4970bbe8087cf5986e42">yarp::os::Bottle::get</a></div><div class="ttdeci">Value &amp; get(size_type index) const</div><div class="ttdoc">Reads a Value v from a certain part of the list.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00228">Bottle.cpp:228</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a4b8c7bfc833935dbffdf6be07fb55162"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a4b8c7bfc833935dbffdf6be07fb55162">yarp::os::impl::Protocol::getReceiver</a></div><div class="ttdeci">Connection &amp; getReceiver() override</div><div class="ttdoc">It is possible to chain a basic connection with a modifier.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00399">Protocol.cpp:399</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_ab94dbc75892185f10eda8e93004dec30"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#ab94dbc75892185f10eda8e93004dec30">yarp::os::Carrier::expectExtraHeader</a></div><div class="ttdeci">virtual bool expectExtraHeader(ConnectionState &amp;proto)=0</div><div class="ttdoc">Receive any carrier-specific header.</div></div>
<div class="ttc" id="aLogger_8h_html_a3ac8e9b980e14d08fca14f4bef545c96"><div class="ttname"><a href="Logger_8h.html#a3ac8e9b980e14d08fca14f4bef545c96">YARP_DEBUG</a></div><div class="ttdeci">#define YARP_DEBUG(log, x)</div><div class="ttdef"><b>Definition:</b> <a href="Logger_8h_source.html#l00091">Logger.h:91</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_acf8d41a1e2095d257ad213b97edb656b"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#acf8d41a1e2095d257ad213b97edb656b">yarp::os::Carrier::modifiesIncomingData</a></div><div class="ttdeci">bool modifiesIncomingData() const override</div><div class="ttdoc">Check if this carrier modifies incoming data through the Carrier::modifyIncomingData method.</div><div class="ttdef"><b>Definition:</b> <a href="Carrier_8cpp_source.html#l00049">Carrier.cpp:49</a></div></div>
<div class="ttc" id="aLogger_8h_html"><div class="ttname"><a href="Logger_8h.html">Logger.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1TwoWayStream_html_a27beeb95dfd11f84284fca27144973f3"><div class="ttname"><a href="classyarp_1_1os_1_1TwoWayStream.html#a27beeb95dfd11f84284fca27144973f3">yarp::os::TwoWayStream::endPacket</a></div><div class="ttdeci">virtual void endPacket()=0</div><div class="ttdoc">Mark the end of a logical packet (see beginPacket).</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_af6124e69cc994fa2317f927021a7a953"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#af6124e69cc994fa2317f927021a7a953">yarp::os::impl::Protocol::getRoute</a></div><div class="ttdeci">const Route &amp; getRoute() const override</div><div class="ttdoc">Get the route associated with this connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00110">Protocol.cpp:110</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_ade8595d49121366dbd059c00e07032dd"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#ade8595d49121366dbd059c00e07032dd">yarp::os::Carrier::checkHeader</a></div><div class="ttdeci">virtual bool checkHeader(const Bytes &amp;header)=0</div><div class="ttdoc">Given the first 8 bytes received on a connection, decide if this is the right carrier type to use for...</div></div>
<div class="ttc" id="anamespaceyarp_1_1conf_html_a3df5afb43ff7b7cc2b4e3cb9150eab20"><div class="ttname"><a href="namespaceyarp_1_1conf.html#a3df5afb43ff7b7cc2b4e3cb9150eab20">yarp::conf::ssize_t</a></div><div class="ttdeci">::ssize_t ssize_t</div><div class="ttdef"><b>Definition:</b> <a href="numeric_8h_source.html#l00060">numeric.h:60</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_aa8bd0df9aab08d985972c36adc176ba5"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#aa8bd0df9aab08d985972c36adc176ba5">yarp::os::Carrier::setParameters</a></div><div class="ttdeci">virtual void setParameters(const Bytes &amp;header)=0</div><div class="ttdoc">Configure this carrier based on the first 8 bytes of the connection.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_ae78a2bc284f521aa47f3fd7718e23ead"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#ae78a2bc284f521aa47f3fd7718e23ead">yarp::os::impl::Protocol::~Protocol</a></div><div class="ttdeci">virtual ~Protocol()</div><div class="ttdoc">Destructor.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00057">Protocol.cpp:57</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a9e8c5e1b4b35be7573fc320756205490"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a9e8c5e1b4b35be7573fc320756205490">yarp::os::impl::Protocol::setReference</a></div><div class="ttdeci">void setReference(yarp::os::Portable *ref) override</div><div class="ttdoc">Give a direct pointer to an object being sent on the connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00143">Protocol.cpp:143</a></div></div>
<div class="ttc" id="aLogger_8h_html_a5b9096e58765e7831d54d0c250ffc8a8"><div class="ttname"><a href="Logger_8h.html#a5b9096e58765e7831d54d0c250ffc8a8">YARP_INFO</a></div><div class="ttdeci">#define YARP_INFO(log, x)</div><div class="ttdef"><b>Definition:</b> <a href="Logger_8h_source.html#l00089">Logger.h:89</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1OutputStream_html_a36ab9b168185c63a46c4b8bd70205e97"><div class="ttname"><a href="classyarp_1_1os_1_1OutputStream.html#a36ab9b168185c63a46c4b8bd70205e97">yarp::os::OutputStream::flush</a></div><div class="ttdeci">virtual void flush()</div><div class="ttdoc">Make sure all pending write operations are finished.</div><div class="ttdef"><b>Definition:</b> <a href="OutputStream_8cpp_source.html#l00028">OutputStream.cpp:28</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ShiftStream_html_af1d87f1b3bfe1cf53fa2a4c7490da81b"><div class="ttname"><a href="classyarp_1_1os_1_1ShiftStream.html#af1d87f1b3bfe1cf53fa2a4c7490da81b">yarp::os::ShiftStream::getOutputStream</a></div><div class="ttdeci">OutputStream &amp; getOutputStream() override</div><div class="ttdoc">Get an OutputStream to write to.</div><div class="ttdef"><b>Definition:</b> <a href="ShiftStream_8cpp_source.html#l00069">ShiftStream.cpp:69</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a91b553eb6eab17922edad3ef21755332"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a91b553eb6eab17922edad3ef21755332">yarp::os::impl::Protocol::interrupt</a></div><div class="ttdeci">void interrupt() override</div><div class="ttdoc">Try to get operations interrupted.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00254">Protocol.cpp:254</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1SizedWriter_html_ac3e1782595367c4a072c6986070a6aab"><div class="ttname"><a href="classyarp_1_1os_1_1SizedWriter.html#ac3e1782595367c4a072c6986070a6aab">yarp::os::SizedWriter::getReplyHandler</a></div><div class="ttdeci">virtual PortReader * getReplyHandler()=0</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ShiftStream_html_a7399bad996e627e59a12757c3ba6bc55"><div class="ttname"><a href="classyarp_1_1os_1_1ShiftStream.html#a7399bad996e627e59a12757c3ba6bc55">yarp::os::ShiftStream::getInputStream</a></div><div class="ttdeci">InputStream &amp; getInputStream() override</div><div class="ttdoc">Get an InputStream to read from.</div><div class="ttdef"><b>Definition:</b> <a href="ShiftStream_8cpp_source.html#l00060">ShiftStream.cpp:60</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_ac48549429fd1433a2781e5c57d54eb7a"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#ac48549429fd1433a2781e5c57d54eb7a">yarp::os::Carrier::expectAck</a></div><div class="ttdeci">virtual bool expectAck(ConnectionState &amp;proto)=0</div><div class="ttdoc">Receive an acknowledgement, if expected for this carrier.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bytes_html"><div class="ttname"><a href="classyarp_1_1os_1_1Bytes.html">yarp::os::Bytes</a></div><div class="ttdoc">A simple abstraction for a block of bytes.</div><div class="ttdef"><b>Definition:</b> <a href="Bytes_8h_source.html#l00027">Bytes.h:28</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1StreamConnectionReader_html_aeb9038bd9619233a95ba500ce3265c65"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#aeb9038bd9619233a95ba500ce3265c65">yarp::os::impl::StreamConnectionReader::setReference</a></div><div class="ttdeci">virtual void setReference(yarp::os::Portable *obj)</div><div class="ttdef"><b>Definition:</b> <a href="StreamConnectionReader_8cpp_source.html#l00160">StreamConnectionReader.cpp:160</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1StreamConnectionReader_html_aa51ad92b670f685f26f4962be26f8207"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#aa51ad92b670f685f26f4962be26f8207">yarp::os::impl::StreamConnectionReader::flushWriter</a></div><div class="ttdeci">virtual void flushWriter()</div><div class="ttdef"><b>Definition:</b> <a href="StreamConnectionReader_8cpp_source.html#l00143">StreamConnectionReader.cpp:143</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_a932fa38022e4f16330131d413fa2bd45"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#a932fa38022e4f16330131d413fa2bd45">yarp::os::Carrier::close</a></div><div class="ttdeci">virtual void close()</div><div class="ttdoc">Close the carrier.</div><div class="ttdef"><b>Definition:</b> <a href="Carrier_8cpp_source.html#l00087">Carrier.cpp:87</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a0a998cff34eed869bf0094e69caaa21c"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a0a998cff34eed869bf0094e69caaa21c">yarp::os::impl::Protocol::isOk</a></div><div class="ttdeci">bool isOk() const override</div><div class="ttdoc">Check if the connection is valid and can be used.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00287">Protocol.cpp:287</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Route_html_ac1f6d13db4c1c43c8d9dfe50a7c7a8a6"><div class="ttname"><a href="classyarp_1_1os_1_1Route.html#ac1f6d13db4c1c43c8d9dfe50a7c7a8a6">yarp::os::Route::setCarrierName</a></div><div class="ttdeci">void setCarrierName(const std::string &amp;carrierName)</div><div class="ttdoc">Set the carrier type of the route.</div><div class="ttdef"><b>Definition:</b> <a href="Route_8cpp_source.html#l00131">Route.cpp:131</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1InputStream_html_ab33565fbce25d9060a6401fab0bc672e"><div class="ttname"><a href="classyarp_1_1os_1_1InputStream.html#ab33565fbce25d9060a6401fab0bc672e">yarp::os::InputStream::setReadTimeout</a></div><div class="ttdeci">virtual bool setReadTimeout(double timeout)</div><div class="ttdoc">Set activity timeout.</div><div class="ttdef"><b>Definition:</b> <a href="InputStream_8cpp_source.html#l00049">InputStream.cpp:49</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a17c06d0f6664adf9a7d2cbe0db86508e"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a17c06d0f6664adf9a7d2cbe0db86508e">yarp::os::impl::Protocol::giveStreams</a></div><div class="ttdeci">TwoWayStream * giveStreams() override</div><div class="ttdoc">Take ownership of the streams associated with the connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00131">Protocol.cpp:131</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ConnectionReader_html"><div class="ttname"><a href="classyarp_1_1os_1_1ConnectionReader.html">yarp::os::ConnectionReader</a></div><div class="ttdoc">An interface for reading from a network connection.</div><div class="ttdef"><b>Definition:</b> <a href="ConnectionReader_8h_source.html#l00039">ConnectionReader.h:40</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_a084d803edf7040bc544a607f93c8151b"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#a084d803edf7040bc544a607f93c8151b">yarp::os::Carrier::configure</a></div><div class="ttdeci">virtual bool configure(ConnectionState &amp;proto)</div><div class="ttdoc">Give carrier a shot at looking at how the connection is set up.</div><div class="ttdef"><b>Definition:</b> <a href="Carrier_8cpp_source.html#l00105">Carrier.cpp:105</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1TwoWayStream_html_aa4c7a1e96bfc722e8bed3460b4a32cfd"><div class="ttname"><a href="classyarp_1_1os_1_1TwoWayStream.html#aa4c7a1e96bfc722e8bed3460b4a32cfd">yarp::os::TwoWayStream::beginPacket</a></div><div class="ttdeci">virtual void beginPacket()=0</div><div class="ttdoc">Mark the beginning of a logical packet.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1OutputStream_html_a88ed49f557bdce2d130810bebc62af31"><div class="ttname"><a href="classyarp_1_1os_1_1OutputStream.html#a88ed49f557bdce2d130810bebc62af31">yarp::os::OutputStream::isOk</a></div><div class="ttdeci">virtual bool isOk() const =0</div><div class="ttdoc">Check if the stream is ok or in an error state.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1InputStream_html_a937dec0f8021c357357463882b22dcd6"><div class="ttname"><a href="classyarp_1_1os_1_1InputStream.html#a937dec0f8021c357357463882b22dcd6">yarp::os::InputStream::readFull</a></div><div class="ttdeci">yarp::conf::ssize_t readFull(Bytes &amp;b)</div><div class="ttdoc">Keep reading until buffer is full.</div><div class="ttdef"><b>Definition:</b> <a href="InputStream_8cpp_source.html#l00099">InputStream.cpp:99</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a5564af56a1eb6875b81f90c1eca99c6f"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a5564af56a1eb6875b81f90c1eca99c6f">yarp::os::impl::Protocol::isReplying</a></div><div class="ttdeci">bool isReplying() const override</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00414">Protocol.cpp:414</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_aa2d1335cc764c48d1b4c4cde104ed51e"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#aa2d1335cc764c48d1b4c4cde104ed51e">yarp::os::impl::Protocol::setRemainingLength</a></div><div class="ttdeci">void setRemainingLength(int len) override</div><div class="ttdoc">Tell the connection that the given number of bytes are left to be read.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00190">Protocol.cpp:190</a></div></div>
<div class="ttc" id="aCarrier_8h_html"><div class="ttname"><a href="Carrier_8h.html">Carrier.h</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_html"><div class="ttname"><a href="namespaceyarp_1_1os.html">yarp::os</a></div><div class="ttdoc">An interface to the operating system, including Port based communication.</div><div class="ttdef"><b>Definition:</b> <a href="AbstractCarrier_8h_source.html#l00017">AbstractCarrier.h:17</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Logger_html"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Logger.html">yarp::os::impl::Logger</a></div><div class="ttdoc">This is a wrapper for message logging.</div><div class="ttdef"><b>Definition:</b> <a href="Logger_8h_source.html#l00034">Logger.h:35</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_ab98aeb943076ea6506968b7fae96ed7f"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#ab98aeb943076ea6506968b7fae96ed7f">yarp::os::impl::Protocol::getLog</a></div><div class="ttdeci">Log &amp; getLog() const override</div><div class="ttdoc">Access a connection-specific logging object.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00184">Protocol.cpp:184</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Route_html_aa9f8b41204a624642782b17a69523c59"><div class="ttname"><a href="classyarp_1_1os_1_1Route.html#aa9f8b41204a624642782b17a69523c59">yarp::os::Route::setFromName</a></div><div class="ttdeci">void setFromName(const std::string &amp;fromName)</div><div class="ttdoc">Set the source of the route.</div><div class="ttdef"><b>Definition:</b> <a href="Route_8cpp_source.html#l00101">Route.cpp:101</a></div></div>
<div class="ttc" id="afakeMotionControl_8cpp_html_a1e803cea7d2670ece91f5465281446ba"><div class="ttname"><a href="fakeMotionControl_8cpp.html#a1e803cea7d2670ece91f5465281446ba">toString</a></div><div class="ttdeci">std::string toString(const T &amp;value)</div><div class="ttdoc">convert an arbitrary type to string.</div><div class="ttdef"><b>Definition:</b> <a href="fakeMotionControl_8cpp_source.html#l00113">fakeMotionControl.cpp:113</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_ac30068b63b452ecfc18c8932388ff800"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#ac30068b63b452ecfc18c8932388ff800">yarp::os::Carrier::expectIndex</a></div><div class="ttdeci">virtual bool expectIndex(ConnectionState &amp;proto)=0</div><div class="ttdoc">Expect a message header, if there is one for this carrier.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Connection_html"><div class="ttname"><a href="classyarp_1_1os_1_1Connection.html">yarp::os::Connection</a></div><div class="ttdoc">A controller for an individual connection.</div><div class="ttdef"><b>Definition:</b> <a href="Connection_8h_source.html#l00029">Connection.h:30</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ShiftStream_html_a40e105022dc18b9c52b5bec3fdb711e3"><div class="ttname"><a href="classyarp_1_1os_1_1ShiftStream.html#a40e105022dc18b9c52b5bec3fdb711e3">yarp::os::ShiftStream::isOk</a></div><div class="ttdeci">bool isOk() const override</div><div class="ttdoc">Check if the stream is ok or in an error state.</div><div class="ttdef"><b>Definition:</b> <a href="ShiftStream_8cpp_source.html#l00120">ShiftStream.cpp:120</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a86e345848b2e955dfde1ad509d03624c"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a86e345848b2e955dfde1ad509d03624c">yarp::os::impl::Protocol::takeStreams</a></div><div class="ttdeci">void takeStreams(TwoWayStream *streams) override</div><div class="ttdoc">Provide streams to be used with the connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00122">Protocol.cpp:122</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_aac94339bf75f0d2433b0a89d3f19ec98"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#aac94339bf75f0d2433b0a89d3f19ec98">yarp::os::impl::Protocol::getOutput</a></div><div class="ttdeci">OutputProtocol &amp; getOutput() override</div><div class="ttdoc">Get an interface for doing write operations on the connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00334">Protocol.cpp:334</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a69bf227e31ba6f80521d079449df5eba"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a69bf227e31ba6f80521d079449df5eba">yarp::os::impl::Protocol::getEnvelope</a></div><div class="ttdeci">const std::string &amp; getEnvelope() const override</div><div class="ttdoc">Read the envelope associated with the current message.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00178">Protocol.cpp:178</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ConnectionState_html_ae5bc55a55a1038c23603c4e287781213"><div class="ttname"><a href="classyarp_1_1os_1_1ConnectionState.html#ae5bc55a55a1038c23603c4e287781213">yarp::os::ConnectionState::is</a></div><div class="ttdeci">InputStream &amp; is()</div><div class="ttdoc">Shorthand for getInputStream()</div><div class="ttdef"><b>Definition:</b> <a href="ConnectionState_8h_source.html#l00131">ConnectionState.h:131</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1StreamConnectionReader_html_a3d83aa05c221de1730806aaac1cfd597"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1StreamConnectionReader.html#a3d83aa05c221de1730806aaac1cfd597">yarp::os::impl::StreamConnectionReader::setProtocol</a></div><div class="ttdeci">void setProtocol(Protocol *protocol)</div><div class="ttdef"><b>Definition:</b> <a href="StreamConnectionReader_8cpp_source.html#l00068">StreamConnectionReader.cpp:68</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Route_html_a6c82c3face96e368e8e806908fd8fb07"><div class="ttname"><a href="classyarp_1_1os_1_1Route.html#a6c82c3face96e368e8e806908fd8fb07">yarp::os::Route::setToName</a></div><div class="ttdeci">void setToName(const std::string &amp;toName)</div><div class="ttdoc">Set the destination of the route.</div><div class="ttdef"><b>Definition:</b> <a href="Route_8cpp_source.html#l00111">Route.cpp:111</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a5a029b824ce967d21ce2ed92508ac9cf"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a5a029b824ce967d21ce2ed92508ac9cf">yarp::os::Value::asList</a></div><div class="ttdeci">virtual Bottle * asList() const</div><div class="ttdoc">Get list value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00243">Value.cpp:243</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_acb317c609d9fea8895f49cc5c8a65abd"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#acb317c609d9fea8895f49cc5c8a65abd">yarp::os::impl::Protocol::getSender</a></div><div class="ttdeci">Connection &amp; getSender() override</div><div class="ttdoc">It is possible to chain a basic connection with a modifier.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00426">Protocol.cpp:426</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1InputProtocol_html"><div class="ttname"><a href="classyarp_1_1os_1_1InputProtocol.html">yarp::os::InputProtocol</a></div><div class="ttdoc">The input side of an active connection between two ports.</div><div class="ttdef"><b>Definition:</b> <a href="InputProtocol_8h_source.html#l00037">InputProtocol.h:38</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a807e82fec8408b7be003fa1c491eda2c"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a807e82fec8408b7be003fa1c491eda2c">yarp::os::Value::toString</a></div><div class="ttdeci">std::string toString() const override</div><div class="ttdoc">Return a standard text representation of the content of the object.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00359">Value.cpp:359</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a></div><div class="ttdoc">A single value (typically within a Bottle).</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00046">Value.h:47</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Route_html_a9beaa65ef1683ab12367720e2e98d0f8"><div class="ttname"><a href="classyarp_1_1os_1_1Route.html#a9beaa65ef1683ab12367720e2e98d0f8">yarp::os::Route::getFromName</a></div><div class="ttdeci">const std::string &amp; getFromName() const</div><div class="ttdoc">Get the source of the route.</div><div class="ttdef"><b>Definition:</b> <a href="Route_8cpp_source.html#l00096">Route.cpp:96</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_aaabf81f5b26b3914a2c1e0d66641427e"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#aaabf81f5b26b3914a2c1e0d66641427e">yarp::os::impl::Protocol::getConnection</a></div><div class="ttdeci">Connection &amp; getConnection() override</div><div class="ttdoc">Access the controller for this connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00196">Protocol.cpp:196</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Log_html"><div class="ttname"><a href="classyarp_1_1os_1_1Log.html">yarp::os::Log</a></div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00049">Log.h:50</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_ae20c98fae067b02a90f74d385af1137e"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#ae20c98fae067b02a90f74d385af1137e">yarp::os::Carrier::reply</a></div><div class="ttdeci">virtual bool reply(ConnectionState &amp;proto, SizedWriter &amp;writer)</div><div class="ttdef"><b>Definition:</b> <a href="Carriers_8cpp_source.html#l00309">Carriers.cpp:309</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1InputStream_html"><div class="ttname"><a href="classyarp_1_1os_1_1InputStream.html">yarp::os::InputStream</a></div><div class="ttdoc">Simple specification of the minimum functions needed from input streams.</div><div class="ttdef"><b>Definition:</b> <a href="InputStream_8h_source.html#l00028">InputStream.h:29</a></div></div>
<div class="ttc" id="aLog_8h_html_a99f6f6827637a7bac4f0596004d6e82f"><div class="ttname"><a href="Log_8h.html#a99f6f6827637a7bac4f0596004d6e82f">yAssert</a></div><div class="ttdeci">#define yAssert(x)</div><div class="ttdef"><b>Definition:</b> <a href="Log_8h_source.html#l00112">Log.h:112</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1SizedWriter_html_a762c122aab5c1a16b4df20cf7897c543"><div class="ttname"><a href="classyarp_1_1os_1_1SizedWriter.html#a762c122aab5c1a16b4df20cf7897c543">yarp::os::SizedWriter::stopWrite</a></div><div class="ttdeci">virtual void stopWrite() const =0</div><div class="ttdoc">Call when all writing is finished.</div></div>
<div class="ttc" id="anamespaceyarp_1_1os_1_1impl_html"><div class="ttname"><a href="namespaceyarp_1_1os_1_1impl.html">yarp::os::impl</a></div><div class="ttdoc">The components from which ports and connections are built.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a7c4fbd5f0e16ec8d52c6895083ba53fd"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a7c4fbd5f0e16ec8d52c6895083ba53fd">yarp::os::impl::Protocol::write</a></div><div class="ttdeci">bool write(SizedWriter &amp;writer) override</div><div class="ttdoc">Write a message on the connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00293">Protocol.cpp:293</a></div></div>
<div class="ttc" id="aBottle_8h_html"><div class="ttname"><a href="Bottle_8h.html">Bottle.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1SizedWriter_html"><div class="ttname"><a href="classyarp_1_1os_1_1SizedWriter.html">yarp::os::SizedWriter</a></div><div class="ttdoc">Minimal requirements for an efficient Writer.</div><div class="ttdef"><b>Definition:</b> <a href="SizedWriter_8h_source.html#l00035">SizedWriter.h:36</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a6e011c4135ccb1bde7bc233ee5dcadaa"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a6e011c4135ccb1bde7bc233ee5dcadaa">yarp::os::impl::Protocol::beginWrite</a></div><div class="ttdeci">void beginWrite() override</div><div class="ttdoc">Notify connection that we intend to write to it.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00420">Protocol.cpp:420</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1impl_1_1Protocol_html_a106ecf10b4116163a0963c443fdd4e3a"><div class="ttname"><a href="classyarp_1_1os_1_1impl_1_1Protocol.html#a106ecf10b4116163a0963c443fdd4e3a">yarp::os::impl::Protocol::getOutputStream</a></div><div class="ttdeci">OutputStream &amp; getOutputStream() override</div><div class="ttdoc">Access the output stream associated with this connection.</div><div class="ttdef"><b>Definition:</b> <a href="Protocol_8cpp_source.html#l00269">Protocol.cpp:269</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a3aaf3d68715913bf052c4729485ba42c"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a3aaf3d68715913bf052c4729485ba42c">yarp::os::Bottle::append</a></div><div class="ttdeci">void append(const Bottle &amp;alt)</div><div class="ttdoc">Append the content of the given bottle to the current list.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00362">Bottle.cpp:362</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_a01dd9e789b734394be9f9dbb16297b3c"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#a01dd9e789b734394be9f9dbb16297b3c">yarp::os::Carrier::supportReply</a></div><div class="ttdeci">bool supportReply() const override=0</div><div class="ttdoc">This flag is used by YARP to determine whether the connection can carry RPC traffic,...</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Contactable_html"><div class="ttname"><a href="classyarp_1_1os_1_1Contactable.html">yarp::os::Contactable</a></div><div class="ttdoc">An abstract port.</div><div class="ttdef"><b>Definition:</b> <a href="Contactable_8h_source.html#l00030">Contactable.h:31</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Carrier_html_a202825b56a69d0e3fbccd3154eed3c90"><div class="ttname"><a href="classyarp_1_1os_1_1Carrier.html#a202825b56a69d0e3fbccd3154eed3c90">yarp::os::Carrier::respondToHeader</a></div><div class="ttdeci">virtual bool respondToHeader(ConnectionState &amp;proto)=0</div><div class="ttdoc">Respond to the header.</div></div>
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.2.2</span></li>
    <li class="navelem"><a class="el" href="dir_d946d32291de7db32f6a943fb45d46f4.html">src</a></li><li class="navelem"><a class="el" href="dir_1dc3d61bcf265c9a7599e8bad4c460f9.html">libYARP_OS</a></li><li class="navelem"><a class="el" href="dir_a193bc8fac33aaaab51f4c097c886417.html">src</a></li><li class="navelem"><a class="el" href="Protocol_8cpp.html">Protocol.cpp</a></li>
    <li class="footer">Generated on Tue Nov 3 2020 16:49:10 for YARP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
