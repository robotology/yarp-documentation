<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: Persistent connections</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.1.2' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('persistent_connections.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Persistent connections </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Paul Fitzpatrick</dd></dl>
<p>When a connection is made between two YARP ports, that connection lasts until it is explicitly disconnected by user action, or until one of the ports is closed.</p>
<p>It is also possible to specify connections that should be made whenever possible. These are called "persistent connections".</p>
<p>Normally, to connect two ports from the command line, you do: </p><pre class="fragment">yarp connect &lt;source-port&gt; &lt;target-port&gt; [optional-carrier]
</pre><p> for example: </p><pre class="fragment">yarp connect /src /dest mcast
</pre><p> If both the /src and /dest ports exist, this will create a connection between them that will last until it is disconnected by a matching call to "yarp disconnect", or until one of the ports closes.</p>
<p>To create a persistent connection, you instead do: </p><pre class="fragment">yarp connect --persist &lt;source-port&gt; &lt;target-port&gt; [optional-carrier]
</pre><p> for example: </p><pre class="fragment">yarp --persist connect /src /dest mcast
</pre><p> This command will succeed even if /src or /dest do not exist at the moment. Whenever a port called /src or /dest is created, YARP will check if it is possible to create this connection, and do so if it can.</p>
<h1><a class="anchor" id="persistent_connections_example"></a>
An example of a persistent connection</h1>
<p>For example, suppose we do: </p><pre class="fragment">yarp connect --persist /write /read
</pre><p> And then in two terminals we do: </p><pre class="fragment">yarp write /write
yarp read /read
</pre><p> The "yarp write" and "yarp read" programs will be connected automatically, and something typed on the "yarp write" console will appear on the "yarp read" console.</p>
<p>If either program is killed and restarted, the connection will reappear.</p>
<h1><a class="anchor" id="persistent_connections_list"></a>
Listing persistent connections</h1>
<p>To view all persistent connections, type: </p><pre class="fragment">yarp connect --persist
</pre><p>To view all persistent connections involving a particular port, type: </p><pre class="fragment">yarp connect --persist /port
</pre><h1><a class="anchor" id="persistent_connections_remove"></a>
Getting rid of a persistent connection</h1>
<p>To stop the automatic creation of connections between two ports /src and /dest, do: </p><pre class="fragment">yarp disconnect --persist /src /dest
</pre><h1><a class="anchor" id="persistent_connections_topics"></a>
Persistence via topics</h1>
<p>It is occasionally useful to view a collection of ports as a single "topic" to read from or write to. A topic can be created in YARP by doing: </p><pre class="fragment">yarp topic &lt;topic-name&gt;
</pre><p> For example: </p><pre class="fragment">yarp topic /topic
</pre><p> A topic can be thought of as a repeater port; anything it receives from any of its inputs, it resends to all its outputs. This bus-like behavior is often useful, but a bit inefficient. So in fact YARP topics are entirely virtual, with their effect achieved via direct connections between the ports connected to the virtual topic port.</p>
<p>To be concrete, here's how topics work. Persistent connections can be made between ports and a topic: </p><pre class="fragment">yarp connect --persist /src1 /topic
yarp connect --persist /src2 /topic
yarp connect --persist /src3 /topic
yarp connect --persist /topic /dest1
yarp connect --persist /topic /dest2
yarp connect --persist /topic /dest3
</pre><p> Every input to the topic will be connected to every output from the topic. For example, if all of the ports /src1, /src2, /dest1, and /dest2 exist, then the following connections will be made and maintained: </p><pre class="fragment">yarp connect /src1 /dest1
yarp connect /src1 /dest2
yarp connect /src1 /dest3
yarp connect /src2 /dest1
yarp connect /src2 /dest2
yarp connect /src2 /dest3
yarp connect /src3 /dest1
yarp connect /src3 /dest2
yarp connect /src3 /dest3
</pre><p> (if carriers are specified in the persistent connections, the carriers for outgoing connections from the topic are respected and those for incoming connections to the topic are ignored).</p>
<h1><a class="anchor" id="persistent_connections_topics_list"></a>
Listing topics</h1>
<p>To get a list of all topics, do: </p><pre class="fragment">yarp topic --list
</pre><h1><a class="anchor" id="persistent_connections_topics_remove"></a>
Removing topics</h1>
<p>To remove a topic, do: </p><pre class="fragment">yarp topic --remove /topic
</pre><h1><a class="anchor" id="persistent_connections_code"></a>
Using persistent connections from code</h1>
<p>Normally, to connect two ports directly in code, you do: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Network_8h.html">yarp/os/Network.h</a>&gt;</span></div>
<div class="line">...</div>
<div class="line">yarp::os::Network <a class="code" href="namespaceyarp.html">yarp</a>;</div>
<div class="line"><a class="code" href="namespaceyarp.html">yarp</a>.connect(<span class="stringliteral">&quot;/source&quot;</span>,<span class="stringliteral">&quot;/dest&quot;</span>);</div>
</div><!-- fragment --><p> It is also possible to request connections via topics. If, in one program, we do: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Network_8h.html">yarp/os/Network.h</a>&gt;</span></div>
<div class="line">...</div>
<div class="line">yarp::os::Network <a class="code" href="namespaceyarp.html">yarp</a>;</div>
<div class="line"><a class="code" href="namespaceyarp.html">yarp</a>.connect(<span class="stringliteral">&quot;/camera1&quot;</span>,<span class="stringliteral">&quot;topic://vision&quot;</span>);</div>
</div><!-- fragment --><p> and in another, we do: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Network_8h.html">yarp/os/Network.h</a>&gt;</span></div>
<div class="line">...</div>
<div class="line">yarp::os::Network <a class="code" href="namespaceyarp.html">yarp</a>;</div>
<div class="line"><a class="code" href="namespaceyarp.html">yarp</a>.connect(<span class="stringliteral">&quot;topic://vision&quot;</span>,<span class="stringliteral">&quot;/viewer&quot;</span>);</div>
</div><!-- fragment --><p> Then the /camera1 port will end up connecting to the /viewer port whenever both are available.</p>
<p>The "topic://" prefix is not needed if the "/vision" topic has been explicitly created as described in <a class="el" href="persistent_connections.html#persistent_connections_topics">Persistence via topics</a>.</p>
<p>One note of caution: when connecting to a topic, the "connect" command may return before all existing ports connected with that topic becoming connected to each other. If you rely on a connection existing, test for it using either <a class="el" href="classyarp_1_1os_1_1NetworkBase.html#af098c0fbf555e5f04e38a015751d672c" title="Check if a connection exists between two ports.">yarp::os::Network::isConnected</a> or <a class="el" href="classyarp_1_1os_1_1Port.html#a871895f00c4b8f151fba3e440bcae7ba" title="Determine how many connections are arriving into this port.">yarp::os::Port::getInputCount</a> or <a class="el" href="classyarp_1_1os_1_1Port.html#a0791ebe0cfb9d7734aefe9edae827755" title="Determine how many output connections this port has.">yarp::os::Port::getOutputCount</a>.</p>
<p>To connect two ports persistently, without any intermediate topic (only possible with native YARP name service), use code like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Network_8h.html">yarp/os/Network.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ContactStyle_8h.html">yarp/os/ContactStyle.h</a>&gt;</span></div>
<div class="line">...</div>
<div class="line">yarp::os::Network <a class="code" href="namespaceyarp.html">yarp</a>;</div>
<div class="line"><a class="code" href="classyarp_1_1os_1_1ContactStyle.html">yarp::os::ContactStyle</a> style;</div>
<div class="line">style.<a class="code" href="classyarp_1_1os_1_1ContactStyle.html#afc59519f5d8785a7270ac248b917140c">persistent</a> = <span class="keyword">true</span>;</div>
<div class="line">Network::connect(<span class="stringliteral">&quot;/foo&quot;</span>,<span class="stringliteral">&quot;/bar&quot;</span>,style);</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aNetwork_8h_html"><div class="ttname"><a href="Network_8h.html">Network.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ContactStyle_html"><div class="ttname"><a href="classyarp_1_1os_1_1ContactStyle.html">yarp::os::ContactStyle</a></div><div class="ttdoc">Preferences for how to communicate with a contact.</div><div class="ttdef"><b>Definition:</b> <a href="ContactStyle_8h_source.html#l00026">ContactStyle.h:27</a></div></div>
<div class="ttc" id="aContactStyle_8h_html"><div class="ttname"><a href="ContactStyle_8h.html">ContactStyle.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1ContactStyle_html_afc59519f5d8785a7270ac248b917140c"><div class="ttname"><a href="classyarp_1_1os_1_1ContactStyle.html#afc59519f5d8785a7270ac248b917140c">yarp::os::ContactStyle::persistent</a></div><div class="ttdeci">bool persistent</div><div class="ttdoc">Specify whether a requested connection should be persistent.</div><div class="ttdef"><b>Definition:</b> <a href="ContactStyle_8h_source.html#l00066">ContactStyle.h:66</a></div></div>
<div class="ttc" id="anamespaceyarp_html"><div class="ttname"><a href="namespaceyarp.html">yarp</a></div><div class="ttdoc">The main, catch-all namespace for YARP.</div><div class="ttdef"><b>Definition:</b> <a href="numeric_8h_source.html#l00047">numeric.h:47</a></div></div>
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.1.2</span></li>
    <li class="footer">Generated on Tue Nov 3 2020 16:43:15 for YARP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
