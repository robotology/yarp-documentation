<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: The ResourceFinder Class (advanced)</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.4.6' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('yarp_resource_finder_advanced.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">The ResourceFinder Class (advanced) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sec_intro">Introduction</a></li>
<li class="level1"><a href="#sec_final-discussion">Discussion</a></li>
<li class="level1"><a href="#sec_code">Code</a></li>
</ul>
</div>
<div class="textblock"><p>In this tutorial we show more details of how to use the <a class="el" href="classyarp_1_1os_1_1ResourceFinder.html" title="Helper class for finding config files and other external resources.">yarp::os::ResourceFinder</a> to locate files.</p>
<h1><a class="anchor" id="sec_intro"></a>
Introduction</h1>
<p>In a previous tutorial (<a class="el" href="yarp_resource_finder_basic.html">The ResourceFinder Class (basic)</a>) we showed how to use the ResourceFinder to organize modules parameters in files and place them in what we called <em>context</em> directories in a directory inside the home of the user (e.g. in Linux this was: $HOME/.local/share/yarp/contexts).</p>
<p>We show here that the ResourceFinder is also useful to handle access to all files needed by a module.</p>
<p>In this example our (hypothetical) module performs object recognition on images. It accepts the following parameters:</p>
<pre class="fragment">--robot name: the name of the robot, used for connecting to a port that streams images
--model filename: a ppm file that stores a template image
</pre><p>Similarly to the previous tutorial we prepare a file that stores the initialization parameters of our module.</p>
<pre class="fragment">or.ini:

robot robby
model bottle.ppm
</pre><p>we place this file together with the template bottle.ppm in a directory called 'orBottle' in $YARP_DATA_HOME/contexts .</p>
<p>The main function will be something like:</p>
<div class="fragment"><div class="line">ResourceFinder rf;</div>
<div class="line">rf.setDefaultConfigFile(<span class="stringliteral">&quot;or.ini&quot;</span>);</div>
<div class="line">rf.configure(argc, argv);</div>
</div><!-- fragment --><p>This creates an instance of the ResourceFinder, and configures it from data from the command line.</p>
<p>This code shows how to query the value of the parameters:</p>
<div class="fragment"><div class="line">std::string robotName=rf.find(<span class="stringliteral">&quot;robot&quot;</span>).asString();</div>
</div><!-- fragment --><p>Now we can read the file specified in the parameter 'model' by calling:</p>
<div class="fragment"><div class="line">std::string model=rf.findFile(<span class="stringliteral">&quot;model&quot;</span>);</div>
</div><!-- fragment --><p>RF searches the file 'bottle.ppm' in the current initialization context. If successful "model" is a string that contains the full path to the file. Otherwise the string is empty.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (model==<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">    {</div>
<div class="line">        cout&lt;&lt;<span class="stringliteral">&quot;Sorry no model was found, check config parameters&quot;</span>&lt;&lt;endl;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot;Using object model: &quot;</span> &lt;&lt; model.c_str() &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// we can now read the image from disk using full path name</span></div>
<div class="line">...</div>
<div class="line">...</div>
</div><!-- fragment --><p>Simply run:</p>
<div class="fragment"><div class="line">tutorial_rf_advanced --context orBottle</div>
</div><!-- fragment --><p>It is quite easy to change configuration files (and model) by switching the initialization context of the module:</p>
<div class="fragment"><div class="line">tutorial_rf_advanced --context orCup</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_final-discussion"></a>
Discussion</h1>
<p>We have shown how to use the ResourceFinder class to pass not only parameters but also binary files to a module. We have seen that it is again easy to re-configure a module simply by switching its initialization context.</p>
<p>From these tutorials you might have had the feeling it is better to create a new directory for each new configuration file for a module. This is not always the case. For simple modules (i.e. modules that require only a limited set of parameters to run) it will be much better to just use one context and separate configuration files. The name of the configuration file used by the ResourceFinder is determined by the line:</p>
<div class="fragment"><div class="line">rf.setDefaultConfigFile(<span class="stringliteral">&quot;or.ini&quot;</span>);</div>
</div><!-- fragment --><p>this is the <em>default</em> name, but it can be modified at runtime by running the module with the parameter <em>&ndash;from</em>, as exaplained in the previous tutorial:</p>
<div class="fragment"><div class="line">tutorial_rf_advanced --context orBottle --from or2.ini</div>
</div><!-- fragment --><p>In other cases, especially when a module uses several resource files, it is more appropriate to duplicate all files in a different context directory. What solution is more appropriate depends on the specific case.</p>
<p>You should now read the tutorial <a class="el" href="yarp_resource_finder_installation.html">How to install files for the ResourceFinder</a> which describes how to use CMake to configure your build so that configuration files are automatically installed. It also links to the documentation of the yarp-config tool, that helps to manage context directories (inspecting the system for all the existing contexts, copying and removing them to/from the user home).</p>
<p>See also the <a class="el" href="classyarp_1_1os_1_1ResourceFinder.html" title="Helper class for finding config files and other external resources.">yarp::os::ResourceFinder</a> class documentation.</p>
<h1><a class="anchor" id="sec_code"></a>
Code</h1>
<p>See code in: example/resourceFinder/tutorial_rf_advanced.cpp </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.4.6</span></li>
    <li class="footer">Generated on Sat Jul 3 2021 02:17:09 for YARP by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
