<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: src/portmonitors/image_compression_ffmpeg/ffmpegPortmonitor.h Source File</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.10.1' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<script src="https://cookiehub.net/c2/44d56061.js"></script>
<script type="text/javascript">
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('consent', 'default', {'ad_storage': 'denied', 'analytics_storage': 'denied', 'wait_for_update': 500});
document.addEventListener("DOMContentLoaded", function(event) {
var cpm = {};
window.cookiehub.load(cpm);
});
</script>
<!--
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.eu/other/personal_data_notice.html"
  }
})});
</script>
-->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ffmpegPortmonitor_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ffmpegPortmonitor.h</div></div>
</div><!--header-->
<div class="contents">
<a href="ffmpegPortmonitor_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * SPDX-FileCopyrightText: 2006-2021 Istituto Italiano di Tecnologia (IIT)</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> * SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> */</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#ifndef YARP_FFMPEG_CARRIER_FFMPEGPORTMONITOR_H</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#define YARP_FFMPEG_CARRIER_FFMPEGPORTMONITOR_H</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">// YARP imports</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;<a class="code" href="Bottle_8h.html">yarp/os/Bottle.h</a>&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;<a class="code" href="Things_8h.html">yarp/os/Things.h</a>&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;<a class="code" href="Image_8h.html">yarp/sig/Image.h</a>&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;<a class="code" href="MonitorObject_8h.html">yarp/os/MonitorObject.h</a>&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">// Ffmpeg imports</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">    #include &lt;libavcodec/avcodec.h&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>}</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="foldopen" id="foldopen00033" data-start="{" data-end="};">
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html">   33</a></span><span class="keyword">class </span><a class="code hl_class" href="classFfmpegMonitorObject.html">FfmpegMonitorObject</a> : <span class="keyword">public</span> <a class="code hl_class" href="classyarp_1_1os_1_1MonitorObject.html">yarp::os::MonitorObject</a></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>{</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#ac178e515106b0362e8756632bd9a1aa6">create</a>(<span class="keyword">const</span> <a class="code hl_class" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a>&amp; options) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#af4bde074b5f89cb84a8e2f189019ab26">destroy</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#ac4986d4d412e7a325f940f671d907df8">setparam</a>(<span class="keyword">const</span> <a class="code hl_class" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a>&amp; params) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#acabc1b0c5ca0515d851e89bcb2e4d65a">getparam</a>(<a class="code hl_class" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a>&amp; params) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#a3c83c43b5a89060a8956171a4d7c2926">accept</a>(<a class="code hl_class" href="classyarp_1_1os_1_1Things.html">yarp::os::Things</a>&amp; thing) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>        <a class="code hl_class" href="classyarp_1_1os_1_1Things.html">yarp::os::Things</a>&amp; <a class="code hl_function" href="classFfmpegMonitorObject.html#a94bf295ce404010c0991ada9e93976fe">update</a>(<a class="code hl_class" href="classyarp_1_1os_1_1Things.html">yarp::os::Things</a>&amp; thing) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="keyword">protected</span>:</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        <span class="keywordtype">int</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#a30ba51d8dd51cbfbcbbf7838b702c71c">compress</a>(<a class="code hl_class" href="classyarp_1_1sig_1_1Image.html">yarp::sig::Image</a>* img, AVPacket* pkt);</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        <span class="keywordtype">int</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#ad879ca0b9bae10b490fd7b48567b3604">decompress</a>(AVPacket* pkt, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> pixelCode);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#a3b61c51bb39e3373921e56b4131b6888">getParamsFromCommandLine</a>(std::string carrierString, <span class="keyword">const</span> AVCodec *&amp;codecOut, AVPixelFormat &amp;pixelFormatOut, <span class="keywordtype">int</span> &amp;frameRate);</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>        <span class="keywordtype">int</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#a61e157817130937d82ffc465281bd45d">setCommandLineParams</a>();</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classFfmpegMonitorObject.html#a19f30cfd76af929127e3b96c4c3f6cae">updateStatistics</a>(<a class="code hl_class" href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a> &amp;inputBottle, <span class="keywordtype">double</span> currentLag);</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#ab69d168b2258b596385103546aad58bb">  118</a></span>        <a class="code hl_class" href="classyarp_1_1os_1_1Things.html">yarp::os::Things</a> <a class="code hl_variable" href="classFfmpegMonitorObject.html#ab69d168b2258b596385103546aad58bb">th</a>;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">  124</a></span>        <a class="code hl_class" href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a> <a class="code hl_variable" href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">data</a>;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">  130</a></span>        <a class="code hl_class" href="classyarp_1_1sig_1_1FlexImage.html">yarp::sig::FlexImage</a> <a class="code hl_variable" href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">imageOut</a>;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a761637a2b2b350b84c903d878625fc35">  136</a></span>        <a class="code hl_class" href="classyarp_1_1sig_1_1Image.html">yarp::sig::Image</a> <a class="code hl_variable" href="classFfmpegMonitorObject.html#a761637a2b2b350b84c903d878625fc35">imageBottleBuffer</a>;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#abf1d53be6b768cbb9f463e60b2498b38">  142</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="classFfmpegMonitorObject.html#abf1d53be6b768cbb9f463e60b2498b38">senderSide</a>;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">  148</a></span>        <span class="keyword">const</span> AVCodec *<a class="code hl_variable" href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">codec</a>;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">  154</a></span>        AVCodecContext *<a class="code hl_variable" href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">codecContext</a> = NULL;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a344113d17e050d31d7dc865fe7ae0530">  160</a></span>        AVPixelFormat <a class="code hl_variable" href="classFfmpegMonitorObject.html#a344113d17e050d31d7dc865fe7ae0530">pixelFormat</a>{AV_PIX_FMT_YUV420P};</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a6bf62c495c8caf76c2d4fd13fc1050e1">  166</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="classFfmpegMonitorObject.html#a6bf62c495c8caf76c2d4fd13fc1050e1">firstTime</a>;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#abd34ab9147b2e053536349b340115a5c">  172</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="classFfmpegMonitorObject.html#abd34ab9147b2e053536349b340115a5c">printStatistics</a>;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#ab634f181895c321035a380fa3010f4cb">  177</a></span>        <span class="keywordtype">double</span> <a class="code hl_variable" href="classFfmpegMonitorObject.html#ab634f181895c321035a380fa3010f4cb">previousFrameTime</a>;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#afd78a489441afb7369064ea5781d66a1">  182</a></span>        <span class="keywordtype">double</span> <a class="code hl_variable" href="classFfmpegMonitorObject.html#afd78a489441afb7369064ea5781d66a1">bandwidthRunningAverage</a>;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#aa4455ffb6ea46ad83eb3159c507b8ed4">  187</a></span>        <span class="keywordtype">double</span> <a class="code hl_variable" href="classFfmpegMonitorObject.html#aa4455ffb6ea46ad83eb3159c507b8ed4">lagRunningAverage</a>;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#a25c682a129b1d803405f198f209e91ce">  192</a></span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="classFfmpegMonitorObject.html#a25c682a129b1d803405f198f209e91ce">statisticsCounter</a>;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#add2f60e00edcab7c7a4668b802e2754e">  197</a></span>        <span class="keywordtype">double</span> <a class="code hl_variable" href="classFfmpegMonitorObject.html#add2f60e00edcab7c7a4668b802e2754e">previousStatisticPrintTime</a>;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="classFfmpegMonitorObject.html#ade74d4e5d3d012600817df0f0b5467c8">  203</a></span>        std::map&lt;std::string, std::string&gt; <a class="code hl_variable" href="classFfmpegMonitorObject.html#ade74d4e5d3d012600817df0f0b5467c8">paramsMap</a>;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>};</div>
</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aBottle_8h_html"><div class="ttname"><a href="Bottle_8h.html">Bottle.h</a></div></div>
<div class="ttc" id="aImage_8h_html"><div class="ttname"><a href="Image_8h.html">Image.h</a></div></div>
<div class="ttc" id="aMonitorObject_8h_html"><div class="ttname"><a href="MonitorObject_8h.html">MonitorObject.h</a></div></div>
<div class="ttc" id="aThings_8h_html"><div class="ttname"><a href="Things_8h.html">Things.h</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html"><div class="ttname"><a href="classFfmpegMonitorObject.html">FfmpegMonitorObject</a></div><div class="ttdoc">image_compression_ffmpeg: This portmonitor uses Ffmpeg to compress and decompress video streams with ...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00033">ffmpegPortmonitor.h:34</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a19f30cfd76af929127e3b96c4c3f6cae"><div class="ttname"><a href="classFfmpegMonitorObject.html#a19f30cfd76af929127e3b96c4c3f6cae">FfmpegMonitorObject::updateStatistics</a></div><div class="ttdeci">void updateStatistics(yarp::os::Bottle &amp;inputBottle, double currentLag)</div><div class="ttdoc">Print some network statistics.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00232">ffmpegPortmonitor.cpp:232</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a2562cfb685be4c15f9f3fa91378742a5"><div class="ttname"><a href="classFfmpegMonitorObject.html#a2562cfb685be4c15f9f3fa91378742a5">FfmpegMonitorObject::imageOut</a></div><div class="ttdeci">yarp::sig::FlexImage imageOut</div><div class="ttdoc">The final decompressed image that will be sent to the original destination.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00130">ffmpegPortmonitor.h:130</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a25c682a129b1d803405f198f209e91ce"><div class="ttname"><a href="classFfmpegMonitorObject.html#a25c682a129b1d803405f198f209e91ce">FfmpegMonitorObject::statisticsCounter</a></div><div class="ttdeci">int statisticsCounter</div><div class="ttdoc">Utility counter for printing statistics.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00192">ffmpegPortmonitor.h:192</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a30ba51d8dd51cbfbcbbf7838b702c71c"><div class="ttname"><a href="classFfmpegMonitorObject.html#a30ba51d8dd51cbfbcbbf7838b702c71c">FfmpegMonitorObject::compress</a></div><div class="ttdeci">int compress(yarp::sig::Image *img, AVPacket *pkt)</div><div class="ttdoc">This function performs all the compression actions on the incoming Image and saves the resulting comp...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00423">ffmpegPortmonitor.cpp:423</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a344113d17e050d31d7dc865fe7ae0530"><div class="ttname"><a href="classFfmpegMonitorObject.html#a344113d17e050d31d7dc865fe7ae0530">FfmpegMonitorObject::pixelFormat</a></div><div class="ttdeci">AVPixelFormat pixelFormat</div><div class="ttdoc">Ffmpeg pixel format.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00160">ffmpegPortmonitor.h:160</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a3b61c51bb39e3373921e56b4131b6888"><div class="ttname"><a href="classFfmpegMonitorObject.html#a3b61c51bb39e3373921e56b4131b6888">FfmpegMonitorObject::getParamsFromCommandLine</a></div><div class="ttdeci">bool getParamsFromCommandLine(std::string carrierString, const AVCodec *&amp;codecOut, AVPixelFormat &amp;pixelFormatOut, int &amp;frameRate)</div><div class="ttdoc">This function parses the command line parameters from a string containing the entire command used to ...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00715">ffmpegPortmonitor.cpp:715</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a3c83c43b5a89060a8956171a4d7c2926"><div class="ttname"><a href="classFfmpegMonitorObject.html#a3c83c43b5a89060a8956171a4d7c2926">FfmpegMonitorObject::accept</a></div><div class="ttdeci">bool accept(yarp::os::Things &amp;thing) override</div><div class="ttdoc">This function is used by the port monitor to decide if an incoming packet can be accepted (it tries t...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00201">ffmpegPortmonitor.cpp:201</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a61e157817130937d82ffc465281bd45d"><div class="ttname"><a href="classFfmpegMonitorObject.html#a61e157817130937d82ffc465281bd45d">FfmpegMonitorObject::setCommandLineParams</a></div><div class="ttdeci">int setCommandLineParams()</div><div class="ttdoc">This function iterates over the attribute paramsMap and sets all the specified parameters into the at...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00902">ffmpegPortmonitor.cpp:902</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a6bf62c495c8caf76c2d4fd13fc1050e1"><div class="ttname"><a href="classFfmpegMonitorObject.html#a6bf62c495c8caf76c2d4fd13fc1050e1">FfmpegMonitorObject::firstTime</a></div><div class="ttdeci">bool firstTime</div><div class="ttdoc">Boolean variable used to check if the current call to the &quot;compression&quot; (or &quot;decompression&quot;) function...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00166">ffmpegPortmonitor.h:166</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a761637a2b2b350b84c903d878625fc35"><div class="ttname"><a href="classFfmpegMonitorObject.html#a761637a2b2b350b84c903d878625fc35">FfmpegMonitorObject::imageBottleBuffer</a></div><div class="ttdeci">yarp::sig::Image imageBottleBuffer</div><div class="ttdoc">The final decompressed image that will be sent to the original destination.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00136">ffmpegPortmonitor.h:136</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a94bf295ce404010c0991ada9e93976fe"><div class="ttname"><a href="classFfmpegMonitorObject.html#a94bf295ce404010c0991ada9e93976fe">FfmpegMonitorObject::update</a></div><div class="ttdeci">yarp::os::Things &amp; update(yarp::os::Things &amp;thing) override</div><div class="ttdoc">This function is the one that manipulates the incoming packet.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00267">ffmpegPortmonitor.cpp:267</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_a97cceae14b03f03aba03ccafac8195cf"><div class="ttname"><a href="classFfmpegMonitorObject.html#a97cceae14b03f03aba03ccafac8195cf">FfmpegMonitorObject::data</a></div><div class="ttdeci">yarp::os::Bottle data</div><div class="ttdoc">The bottle that is filled with compressed image and all the information needed for decompression (it ...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00124">ffmpegPortmonitor.h:124</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_aa3fa05ccc84387dd42864555ff70c036"><div class="ttname"><a href="classFfmpegMonitorObject.html#aa3fa05ccc84387dd42864555ff70c036">FfmpegMonitorObject::codec</a></div><div class="ttdeci">const AVCodec * codec</div><div class="ttdoc">Ffmpeg structure containing all codec information needed for compression / decompression.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00148">ffmpegPortmonitor.h:148</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_aa4455ffb6ea46ad83eb3159c507b8ed4"><div class="ttname"><a href="classFfmpegMonitorObject.html#aa4455ffb6ea46ad83eb3159c507b8ed4">FfmpegMonitorObject::lagRunningAverage</a></div><div class="ttdeci">double lagRunningAverage</div><div class="ttdoc">Variable storing the current lag for statistics.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00187">ffmpegPortmonitor.h:187</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ab634f181895c321035a380fa3010f4cb"><div class="ttname"><a href="classFfmpegMonitorObject.html#ab634f181895c321035a380fa3010f4cb">FfmpegMonitorObject::previousFrameTime</a></div><div class="ttdeci">double previousFrameTime</div><div class="ttdoc">Seconds since epoch of the previous frame;.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00177">ffmpegPortmonitor.h:177</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ab69d168b2258b596385103546aad58bb"><div class="ttname"><a href="classFfmpegMonitorObject.html#ab69d168b2258b596385103546aad58bb">FfmpegMonitorObject::th</a></div><div class="ttdeci">yarp::os::Things th</div><div class="ttdoc">The object returned by the &quot;update&quot; function; it can be a yarp::os::Bottle (sender side) or a yarp::s...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00118">ffmpegPortmonitor.h:118</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_abd34ab9147b2e053536349b340115a5c"><div class="ttname"><a href="classFfmpegMonitorObject.html#abd34ab9147b2e053536349b340115a5c">FfmpegMonitorObject::printStatistics</a></div><div class="ttdeci">bool printStatistics</div><div class="ttdoc">Boolean variable used to check whether the bandwidth statistics should be printed.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00172">ffmpegPortmonitor.h:172</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_abf1d53be6b768cbb9f463e60b2498b38"><div class="ttname"><a href="classFfmpegMonitorObject.html#abf1d53be6b768cbb9f463e60b2498b38">FfmpegMonitorObject::senderSide</a></div><div class="ttdeci">bool senderSide</div><div class="ttdoc">Boolean variable that tells if the current execution is in sender side or not.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00142">ffmpegPortmonitor.h:142</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ac178e515106b0362e8756632bd9a1aa6"><div class="ttname"><a href="classFfmpegMonitorObject.html#ac178e515106b0362e8756632bd9a1aa6">FfmpegMonitorObject::create</a></div><div class="ttdeci">bool create(const yarp::os::Property &amp;options) override</div><div class="ttdoc">This function is called when the object is created and it is used to initialize all its attributes.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00076">ffmpegPortmonitor.cpp:76</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ac4986d4d412e7a325f940f671d907df8"><div class="ttname"><a href="classFfmpegMonitorObject.html#ac4986d4d412e7a325f940f671d907df8">FfmpegMonitorObject::setparam</a></div><div class="ttdeci">bool setparam(const yarp::os::Property &amp;params) override</div><div class="ttdoc">This will be called when the portmonitor carrier parameters are set via YARP admin port.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00189">ffmpegPortmonitor.cpp:189</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_acabc1b0c5ca0515d851e89bcb2e4d65a"><div class="ttname"><a href="classFfmpegMonitorObject.html#acabc1b0c5ca0515d851e89bcb2e4d65a">FfmpegMonitorObject::getparam</a></div><div class="ttdeci">bool getparam(yarp::os::Property &amp;params) override</div><div class="ttdoc">This will be called when the portmonitor carrier parameters are requested via YARP admin port.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00195">ffmpegPortmonitor.cpp:195</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ad879ca0b9bae10b490fd7b48567b3604"><div class="ttname"><a href="classFfmpegMonitorObject.html#ad879ca0b9bae10b490fd7b48567b3604">FfmpegMonitorObject::decompress</a></div><div class="ttdeci">int decompress(AVPacket *pkt, int w, int h, int pixelCode)</div><div class="ttdoc">This function decompresses the incoming AVPacket passed as parameter and saves decompressed data into...</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00584">ffmpegPortmonitor.cpp:584</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_add2f60e00edcab7c7a4668b802e2754e"><div class="ttname"><a href="classFfmpegMonitorObject.html#add2f60e00edcab7c7a4668b802e2754e">FfmpegMonitorObject::previousStatisticPrintTime</a></div><div class="ttdeci">double previousStatisticPrintTime</div><div class="ttdoc">Utility variable to store the time in which the last time the statistics have been printed.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00197">ffmpegPortmonitor.h:197</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_ade74d4e5d3d012600817df0f0b5467c8"><div class="ttname"><a href="classFfmpegMonitorObject.html#ade74d4e5d3d012600817df0f0b5467c8">FfmpegMonitorObject::paramsMap</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; paramsMap</div><div class="ttdoc">Structure that maps every parameter inserted from command line into its value (both as strings).</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00203">ffmpegPortmonitor.h:203</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_af4bde074b5f89cb84a8e2f189019ab26"><div class="ttname"><a href="classFfmpegMonitorObject.html#af4bde074b5f89cb84a8e2f189019ab26">FfmpegMonitorObject::destroy</a></div><div class="ttdeci">void destroy(void) override</div><div class="ttdoc">This function is called when the execution is terminated and the object is destroyed.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8cpp_source.html#l00174">ffmpegPortmonitor.cpp:174</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_afa49170dd9d42a56912745abe55d9642"><div class="ttname"><a href="classFfmpegMonitorObject.html#afa49170dd9d42a56912745abe55d9642">FfmpegMonitorObject::codecContext</a></div><div class="ttdeci">AVCodecContext * codecContext</div><div class="ttdoc">Ffmpeg structure containing all codec context information needed for compression / decompression.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00154">ffmpegPortmonitor.h:154</a></div></div>
<div class="ttc" id="aclassFfmpegMonitorObject_html_afd78a489441afb7369064ea5781d66a1"><div class="ttname"><a href="classFfmpegMonitorObject.html#afd78a489441afb7369064ea5781d66a1">FfmpegMonitorObject::bandwidthRunningAverage</a></div><div class="ttdeci">double bandwidthRunningAverage</div><div class="ttdoc">Variable storing the current bandwidth average for statistics.</div><div class="ttdef"><b>Definition</b> <a href="ffmpegPortmonitor_8h_source.html#l00182">ffmpegPortmonitor.h:182</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a></div><div class="ttdoc">A simple collection of objects that can be described and transmitted in a portable way.</div><div class="ttdef"><b>Definition</b> <a href="Bottle_8h_source.html#l00063">Bottle.h:64</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1MonitorObject_html"><div class="ttname"><a href="classyarp_1_1os_1_1MonitorObject.html">yarp::os::MonitorObject</a></div><div class="ttdef"><b>Definition</b> <a href="MonitorObject_8h_source.html#l00019">MonitorObject.h:20</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a></div><div class="ttdoc">A class for storing options and configuration information.</div><div class="ttdef"><b>Definition</b> <a href="Property_8h_source.html#l00030">Property.h:33</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Things_html"><div class="ttname"><a href="classyarp_1_1os_1_1Things.html">yarp::os::Things</a></div><div class="ttdoc">Base class for generic things.</div><div class="ttdef"><b>Definition</b> <a href="Things_8h_source.html#l00017">Things.h:18</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1FlexImage_html"><div class="ttname"><a href="classyarp_1_1sig_1_1FlexImage.html">yarp::sig::FlexImage</a></div><div class="ttdoc">Image class with user control of representation details.</div><div class="ttdef"><b>Definition</b> <a href="Image_8h_source.html#l00363">Image.h:363</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html">yarp::sig::Image</a></div><div class="ttdoc">Base class for storing images.</div><div class="ttdef"><b>Definition</b> <a href="Image_8h_source.html#l00079">Image.h:79</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.10.1</span></li>
    <li class="navelem"><a class="el" href="dir_d946d32291de7db32f6a943fb45d46f4.html">src</a></li><li class="navelem"><a class="el" href="dir_ed56939134dbd2b7345279494eb57894.html">portmonitors</a></li><li class="navelem"><a class="el" href="dir_53cdc3d2d5aa5349dc4cfaa6465357e0.html">image_compression_ffmpeg</a></li><li class="navelem"><a class="el" href="ffmpegPortmonitor_8h.html">ffmpegPortmonitor.h</a></li>
    <li class="footer">Generated on Wed Nov 27 2024 02:35:15 for YARP by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
