<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: yarpmanager: edit, run and manage multiple programs on a set of machines</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.6.0' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('yarpmanager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">yarpmanager: edit, run and manage multiple programs on a set of machines </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#yarpmanager_features">Features</a></li>
<li class="level1"><a href="#yarpmanager_concepts">Some Concepts</a></li>
<li class="level1"><a href="#yarpmanager_configuration">Configuration</a></li>
<li class="level1"><a href="#yarpmanager_examples">Running examples</a><ul><li class="level2"><a href="#yarpmanager_example_y">Using yarpmanager</a></li>
<li class="level2"><a href="#yarpmanager_example_g">Using yarpmanager</a></li>
</ul>
</li>
<li class="level1"><a href="#yarpmanager_application">Application description file</a><ul><li class="level2"><a href="#yarpmanager_app_notes">Notes</a></li>
</ul>
</li>
<li class="level1"><a href="#yarpmanager_resource">Resource description file</a><ul><li class="level2"><a href="#yarpmanager_res_notes">Notes</a></li>
</ul>
</li>
<li class="level1"><a href="#yarpmanager_module">Module description file</a><ul><li class="level2"><a href="#yarpmanager_mode_notes">Notes</a></li>
</ul>
</li>
<li class="level1"><a href="#yarpmanager_create">Create new XML description file</a><ul><li class="level2"><a href="#yarpmanager_create_notes">Notes</a></li>
</ul>
</li>
<li class="level1"><a href="#yarpmanager_export">Generate application dependency graph</a></li>
<li class="level1"><a href="#yarpmanager_faq">Frequently asked questions</a><ul><li class="level2"><a href="#yarpmanager_wait_launch">How to postpone launching a module?</a></li>
<li class="level2"><a href="#yarpmanager_quick_launch">How to quickly launch a single application in command line?</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>The command-line utility "yarpmanager-console" and its graphical companions "yarpmanager" are tools for running and managing multiple programs on a set of machines.</p>
<div class="image">
<img src="ymgui.png" alt=""/>
<div class="caption">
yarpmanager-console and yarpmanager</div></div>
<h1><a class="anchor" id="yarpmanager_features"></a>
Features</h1>
<ul>
<li>Running, stopping, killing and monitoring multiple programs on localhost or remote machines.</li>
<li>Establishing port's connections manually and automatically.</li>
<li>Managing multiple programs which are grouped as different applications.</li>
<li>Running programs concerning their dependencies.</li>
<li>Recovering programs from failure.</li>
<li>Using internal launcher to speed up program execution on localhost.</li>
<li>Automatically assigning programs to machines using load balancing and smart resource discovery mechanism for improving performance.</li>
<li>Discovering information and status of machines in cluster of computers (e.g. Hardware, platform, CPU load).</li>
<li>Allowing users to specify resource dependencies of program using module description file.</li>
<li>Allowing users to provide information about specific devices (e.g GPU) of machines using resource description file.</li>
<li>Creating new Application, Module and Resource using XML template file.</li>
<li>Including multiple instances of an application inside another application.</li>
<li>Renaming ports name at run time using port prefix mechanism.</li>
<li>Modifying program's parameters from GUI.</li>
<li>Modifying and reloading XML description files from GUI.</li>
</ul>
<h1><a class="anchor" id="yarpmanager_concepts"></a>
Some Concepts</h1>
<ul>
<li><b>Module</b>, is an executable binary file (program) which is developed using YARP or any other libraries.</li>
<li><b>Application</b>, refers to a collection of modules, connections and other applications.</li>
<li><b>Resource</b> refers to any physical or logical resources which are needed by module. (e.g Computer, Memory, GPU, Platform)</li>
</ul>
<p>See application, <a class="el" href="RFModule_8cpp.html#a1d6c9f7b18610db6fe60c9a439277d42">module</a> and resource for more information on how to use XML model to describe each of these concepts.</p>
<h1><a class="anchor" id="yarpmanager_configuration"></a>
Configuration</h1>
<p>Default configuration file known as "ymanager.ini" can be automatically loaded by yarpmanager from the same folder running the manager; or it can be indicated by parameter "--from" and "--context", following YARP Resource Finder policies (see <a class="el" href="yarp_resource_finder_basic.html">The ResourceFinder Class (basic)</a>). Using the configuration files, one can explicitly indicates the paths where yarpmanager should search for applications, resources or modules. If the configuration file is not provided, then yarpmanager will search for the corresponding XML files in the YARP data directories (see <a class="el" href="yarp_data_dirs.html">YARP data directories</a>).</p>
<pre class="fragment">$ yarpmanager --from &lt;path to my_config_file&gt;
</pre><p>The below example shows the syntax of configuration file:</p>
<pre class="fragment"># Path to the folder which contains application description files
apppath =  "./xml/applications"
load_subfolders = yes

# Path to the folder which contains module description files
modpath =  "./xml/modules"

# Path to the folder which contains module description files
respath =  "./xml/resources"

# Fault tolerance
# parameters: yes|No
watchdog = no

# Module failure awareness (if watchdog is enabled)
# parameters: Ignore|terminate|prompt|recover
module_failure = prompt

# Connection failure awareness (if watchdog is enabled)
# parameters: Ignore|terminate|prompt
connection_failure = prompt

# Automatically establish all connections
# parameters: Yes|no
auto_connect = no

# Appearance (for yarpmanager)
# parameters: No|dark|light
color_theme = dark

# External editor (e.g. gedit, notepad)
external_editor = gvim
</pre><p>Items 'apppath', 'modpath' and 'respath' respectively point to the folder where the XML description files of Applications, Modules and Resources can be found. All description file names must have ".xml" extension. If 'load_subfolders=yes', applications description files will be recursively loaded from sub folders of 'apppath'. Set 'external_editor' to your preferable text editor. It will be used by yarpmanager for editing XML file.</p>
<h1><a class="anchor" id="yarpmanager_examples"></a>
Running examples</h1>
<p>First make sure you have a name server running. Open a terminal and type: </p><pre class="fragment">$ yarpserver
</pre><h2><a class="anchor" id="yarpmanager_example_y"></a>
Using yarpmanager</h2>
<p>Open another terminal and try this: </p><pre class="fragment">$ cd &lt;path to YARP local repository&gt;/data/yarpmanager/tests
$ yarpmanager-console
&gt;&gt; help
     # a list of yarpmanager-console keywords
&gt;&gt; list app
     # you should see EyesViewer-Localhost, FakeEyes, ...
&gt;&gt; load app EyesViewer-Localhost
&gt;&gt; run
&gt;&gt; connect
     # you should see moving red bar
&gt;&gt; disconnect
&gt;&gt; stop
&gt;&gt; exit
</pre><h2><a class="anchor" id="yarpmanager_example_g"></a>
Using yarpmanager</h2>
<p>Open another terminal and try this: </p><pre class="fragment">$ cd &lt;path to YARP local repository&gt;/data/yarpmanager/tests
$ yarpmanager
</pre><ul>
<li>From "Entities" frame, click the triangle beside Applications, then double-click "EyesViewer-Localhost".</li>
<li>From menu "Manage" press "Run" to run all modules</li>
<li>From menu "Manage" press "Connect" to establish all connections.</li>
<li>To terminate application, chose "Manage"&gt;"Disconnect" and "Manage"&gt;"Stop".</li>
</ul>
<p>To run "EyesViewer-Cluster" using load balancer you need to have yarprun running as server. Open a terminal and type: </p><pre class="fragment">$ yarprun --server /node1
</pre><p>Open another one and type: </p><pre class="fragment">$ yarprun --server /node2
</pre><p>Then try this: </p><pre class="fragment">$ cd &lt;path to YARP local repository&gt;/data/yarpmanager/tests
$ yarpmanager
</pre><ul>
<li>From "Entities" frame, click the triangle beside Applications, then double-click "EyesViewer-Cluster".</li>
<li>From the right side, right-click on the frame where you can see all modules and form the pop-up menu chose "Assign hosts". You will see that modules will be automatically assigned to available nodes. (here /node1 and /node2)</li>
<li>From menu "Manage" press "Run" to run all modules</li>
<li>From menu "Manage" press "Connect" to establish all connections.</li>
<li>To terminate application, chose "Manage"&gt;"Disconnect" and "Manage"&gt;"Stop".</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>You can use "Assign hosts" whenever all modules are stopped and connections are disconnected.</dd></dl>
<h1><a class="anchor" id="yarpmanager_application"></a>
Application description file</h1>
<p>Application description file is a collection of modules (programs) or other applications and connections.</p>
<p>Here is an example of application description file in XML format: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">application</span>&gt;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">&lt;!-- Generic information--&gt;</span></div>
<div class="line">  &lt;<span class="keywordtype">name</span>&gt;<span class="keyword">ApplicationName</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">description</span>&gt;<span class="keyword">Template</span> <span class="keyword">Application</span>&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">version</span>&gt;&lt;/<span class="keywordtype">version</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">authors</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">author</span> <span class="keyword">email</span>=<span class="stringliteral">&quot;&quot;</span>&gt; <span class="keyword">first</span> <span class="keyword">author.name</span> &lt;/<span class="keywordtype">author</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">author</span> <span class="keyword">email</span>=<span class="stringliteral">&quot;&quot;</span>&gt; <span class="keyword">second</span> <span class="keyword">author.name</span> &lt;/<span class="keywordtype">author</span>&gt;</div>
<div class="line">      ...</div>
<div class="line">  &lt;/<span class="keywordtype">authors</span>&gt;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">&lt;!-- Required modules. --&gt;</span></div>
<div class="line">  &lt;<span class="keywordtype">module</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">name</span>&gt;&lt;/<span class="keywordtype">name</span>&gt;                     <span class="comment">&lt;!-- module/command name --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">parameters</span>&gt;&lt;/<span class="keywordtype">parameters</span>&gt;         <span class="comment">&lt;!-- parameters --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">node</span>&gt;&lt;/<span class="keywordtype">node</span>&gt;                     <span class="comment">&lt;!-- hostname to lunch the module  e.g. localhost, /node1 --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">workdir</span>&gt;&lt;/<span class="keywordtype">workdir</span>&gt;               <span class="comment">&lt;!-- work directory --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">environment</span>&gt;&lt;/<span class="keywordtype">environment</span>&gt;       <span class="comment">&lt;!-- set some environment variables for the module. e.g. &#39;VAR1=val; VAR2=val&#39; --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">deployer</span>&gt; &lt;/<span class="keywordtype">deployer</span>&gt;            <span class="comment">&lt;!-- use a third-party program to run the module. e.g. &#39;yarpdev&#39; for YARP devices/plugins --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">display</span>&gt;&lt;/<span class="keywordtype">display</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">stdio</span>&gt;&lt;/<span class="keywordtype">stdio</span>&gt;                   <span class="comment">&lt;!-- redirect the stdio to another host. (Obsolete!) --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">prefix</span>&gt;&lt;/<span class="keywordtype">prefix</span>&gt;                 <span class="comment">&lt;!-- prefix name will be added to all the ports open by module. e.g. /my-prefix --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">dependencies</span>&gt;                    <span class="comment">&lt;!-- module execution will be postponed until the dependencies are satisfied --&gt;</span></div>
<div class="line">          &lt;<span class="keywordtype">port</span> <span class="keyword">timeout</span>=<span class="stringliteral">&quot;5.0&quot;</span>&gt;&lt;/<span class="keywordtype">port</span>&gt;</div>
<div class="line">          &lt;<span class="keywordtype">port</span> <span class="keyword">timeout</span>=<span class="stringliteral">&quot;5.0&quot;</span> <span class="keyword">request</span>=<span class="stringliteral">&quot;ready&quot;</span> <span class="keyword">reply</span>=<span class="stringliteral">&quot;yes&quot;</span>&gt;&lt;/<span class="keywordtype">port</span>&gt;</div>
<div class="line">          ...</div>
<div class="line">      &lt;/<span class="keywordtype">dependencies</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">ensure</span>&gt;</div>
<div class="line">          &lt;<span class="keywordtype">wait</span> <span class="keyword">when</span>=<span class="stringliteral">&quot;start&quot;</span>&gt;10.0&lt;/<span class="keywordtype">wait</span>&gt;   <span class="comment">&lt;!-- wait for 10.0 sec after running the module  --&gt;</span></div>
<div class="line">          &lt;<span class="keywordtype">wait</span> <span class="keyword">when</span>=<span class="stringliteral">&quot;stop&quot;</span>&gt;5.0&lt;/<span class="keywordtype">wait</span>&gt;     <span class="comment">&lt;!-- wait for 5.0 sec before stopping the module --&gt;</span></div>
<div class="line">      &lt;/<span class="keywordtype">ensure</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">module</span>&gt;</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">&lt;!-- Embedded applications --&gt;</span></div>
<div class="line">  &lt;<span class="keywordtype">application</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">name</span>&gt;<span class="keyword">Application_Name</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">prefix</span>&gt;&lt;/<span class="keywordtype">prefix</span>&gt;</div>
<div class="line">   &lt;/<span class="keywordtype">application</span>&gt;</div>
<div class="line">   ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">&lt;!-- Required connections --&gt;</span></div>
<div class="line">  &lt;<span class="keywordtype">connection</span> <span class="keyword">persist</span>=<span class="stringliteral">&quot;true&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">from</span> <span class="keyword">qos</span>=<span class="stringliteral">&quot;level:high; priority:10; policy:1&quot;</span>&gt;&lt;/<span class="keywordtype">from</span>&gt;   <span class="comment">&lt;!-- setting the channel Quality of Service --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">to</span>&gt;&lt;/<span class="keywordtype">to</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">protocol</span>&gt;&lt;/<span class="keywordtype">protocol</span>&gt;                                   <span class="comment">&lt;!-- YARP carrier e.g. tcp/udp --&gt;</span></div>
<div class="line">  &lt;/<span class="keywordtype">connection</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">connection</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">from</span> <span class="keyword">external</span>=<span class="stringliteral">&quot;true&quot;</span>&gt;&lt;/<span class="keywordtype">from</span>&gt;    <span class="comment">&lt;!-- external means that the port is open by a module external to this application --&gt;</span></div>
<div class="line">      &lt;<span class="keywordtype">to</span>&gt;&lt;/<span class="keywordtype">to</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">protocol</span>&gt;&lt;/<span class="keywordtype">protocol</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">connection</span>&gt;</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">&lt;/<span class="keywordtype">application</span>&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="yarpmanager_app_notes"></a>
Notes</h2>
<ul>
<li>In application description file, if you set &lt;node&gt;&lt;/node&gt; to "localhost", the manager will use an internal module launcher to run the module on localhost.</li>
<li>Leaving &lt;node&gt;&lt;/node&gt; empty, later you can use the load balancer to automatically assign module to a node for better performance.</li>
<li>&lt;prefix&gt; refers to port name's prefix. It will be added to the names of all ports that the module opens. For example, if a module open "/Port1" and &lt;prefix&gt;/MyPrefix&lt;/prefix&gt;, after launching the module, the real port name will be "/Myprefix/Port1".</li>
<li>Other applications can be integrated by indicating their names. Setting &lt;prefix&gt; for an included application, port prefix will be applied to all modules and connections which are not set as external.</li>
<li>Persistent connection can be created by setting "persist" property of the corresponding connection tags. They are created by using YARP topics as described in <a class="el" href="persistent_connections.html">Persistent connections</a> and will be removed when the application is unloaded from manager (i.e. closing the application window in yarpmanager).</li>
<li>The &lt;port&gt; tags inside &lt;dependencies&gt; indicate that the execution of the current module should be postponed until the ports become available. yarpmanager waits for the ports and continuously checks their availability. If one of the required ports is not available within the time indicated by the "timeout" property, the module will not be launched.</li>
<li>It is also possible to send a specific RPC request to a port to get status about the internal state of a module. This is useful when launching a module should be postponed until other modules get launched and ready. This can be done by specifying the request using "request" property and the expected reply using "reply" property in a &lt;port&gt; tag. The manager sends the request to the relevant port and check if the received reply matches the one indicated in the "reply" property before launching the module. If the reply does not match the expected one, the corresponding module will not launched.</li>
<li>The &lt;ensure&gt;&gt; and &lt;wait&gt; tags can be used to enforce an arbitrary wait after launching a module. In this case, the manager waits for that specific time to consider the module successfully launched.</li>
<li>The &lt;display&gt; tag specifies the visibility of the process window:<ul>
<li>--visible_na (default):the window is visible and inactive (it does not get the focus)</li>
<li>--minimized: the window is minimized</li>
<li>--hidden: the process is invisible. This option is useful for console/terminal applications. Notice that on the graphical yarpmanager you can see the standard output using the ''attach to stdout'' functionality (right click on the application and select it from the menu).</li>
</ul>
</li>
<li>It is also possible to configure the Qos properties of a connection directly from the manager. This can be done using the "qos" attribute of &lt;connection&gt; tag or independently using &lt;from&gt; and &lt;to&gt; tags. The Qos properties provided within the &lt;connection&gt; tag will be applied to both side of the connection. The attribute accepts a string in form of multiple pairs of "property:value" which are separated using ";". For example, qos="level:high; priority:10; policy:1" configure the connection packet priority level to 'HIGH' and the scheduling policy/priority of the connection-dedicated thread respectively to 1 (i.e. SCHED_FIFO in Linux) and 10. Alternatively the packet priority level can be configured using "dscp:&lt;value&gt;" or "tos:&lt;value&gt;". Please refer to <a class="el" href="classyarp_1_1os_1_1QosStyle.html" title="Preferences for the port&#39;s Quality of Service.">yarp::os::QosStyle</a> and <a class="el" href="classyarp_1_1os_1_1NetworkBase.html#aea259445c04863115eda7f4be2aec52d" title="Adjust the Qos preferences of a connection.">yarp::os::NetworkBase::setConnectionQos</a> APIs for further information.</li>
</ul>
<h1><a class="anchor" id="yarpmanager_resource"></a>
Resource description file</h1>
<p>The resource description file can be used to provide a general information of the machines that are part of the cluster. In very simple form, the resource description file is a list of the names of machines in the cluster.</p>
<p>Here is an example of resource description file in XML format: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">resources</span>&gt;</div>
<div class="line">    <span class="comment">&lt;!-- Multiple computers can be introduced --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">computer</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">name</span>&gt;<span class="keyword">hostname1</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">description</span>&gt;<span class="keyword">Template</span> <span class="keyword">resource</span>&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">&lt;!-- A disabled resource will not be used by load balancer. --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">disable</span>&gt;<span class="keyword">no</span>&lt;/<span class="keywordtype">disable</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">computer</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">computer</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">name</span>&gt;<span class="keyword">hostname2</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">description</span>&gt;<span class="keyword">a</span> <span class="keyword">computer</span> <span class="keyword">with</span> <span class="keyword">GPU</span> <span class="keyword">device</span>&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">disable</span>&gt;<span class="keyword">no</span>&lt;/<span class="keywordtype">disable</span>&gt;</div>
<div class="line">        <span class="comment">&lt;!-- GPU description section. --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">gpu</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">name</span>&gt;<span class="keyword">Tesla</span> <span class="keyword">C1060</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">cores</span>&gt;240&lt;/<span class="keywordtype">cores</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">frequency</span>&gt;1600&lt;/<span class="keywordtype">frequency</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">capability</span>&gt;1.3&lt;/<span class="keywordtype">capability</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">registers_block</span>&gt;128&lt;/<span class="keywordtype">registers_block</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">thread_block</span>&gt;512&lt;/<span class="keywordtype">thread_block</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">overlap</span>&gt;<span class="keyword">yes</span>&lt;/<span class="keywordtype">overlap</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">global_memory</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">total_space</span>&gt;4000000&lt;/<span class="keywordtype">total_space</span>&gt;</div>
<div class="line">            &lt;/<span class="keywordtype">global_memory</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">shared_memory</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">total_space</span>&gt;128&lt;/<span class="keywordtype">total_space</span>&gt;</div>
<div class="line">            &lt;/<span class="keywordtype">shared_memory</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">constant_memory</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">total_space</span>&gt;16&lt;/<span class="keywordtype">total_space</span>&gt;</div>
<div class="line">            &lt;/<span class="keywordtype">constant_memory</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">gpu</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">computer</span>&gt;</div>
<div class="line">    ...</div>
<div class="line">&lt;/<span class="keywordtype">resources</span>&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="yarpmanager_res_notes"></a>
Notes</h2>
<ul>
<li>Platform, Memory, Storage and Processor specification will be discovered automatically by yarpmanager; but, peripherals such as GPU should to be specifically introduced.</li>
</ul>
<h1><a class="anchor" id="yarpmanager_module"></a>
Module description file</h1>
<p>Module description file can be used to provide general information of module and its dependencies. It is mainly used by load balancer to automatically assign machines to module which satisfy the dependencies. By default, if there is no module description, load balancer assumes that the module can be executed on every available machines. Despite it is <b>not</b> <b>mandatory</b>, it is always useful to have XML description of each module which shows how it should be used for application building (e.g parameters, inputs, outputs).</p>
<p>Here is an example of module description file in XML format: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">module</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">name</span>&gt;<span class="keyword">module_name</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">description</span>&gt;<span class="keyword">Template</span> <span class="keyword">module</span>&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">version</span>&gt;1.0&lt;/<span class="keywordtype">version</span>&gt;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">&lt;!-- &lt;arguments&gt; can have multiple &lt;param&gt; tags--&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">arguments</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">param</span> <span class="keyword">desc</span>=<span class="stringliteral">&quot;first parameter&quot;</span>&gt; <span class="keyword">param1</span> &lt;/<span class="keywordtype">param</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">arguments</span>&gt;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">&lt;!-- &lt;authors&gt; can have multiple &lt;author&gt; tags. --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">authors</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">author</span> <span class="keyword">email</span>=<span class="stringliteral">&quot;&quot;</span>&gt; <span class="keyword">author1</span> &lt;/<span class="keywordtype">author</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">authors</span>&gt;</div>
<div class="line"> </div>
<div class="line">     <span class="comment">&lt;!-- &lt;data&gt; can have multiple &lt;input&gt; or &lt;output&gt; tags. --&gt;</span></div>
<div class="line">     &lt;<span class="keywordtype">data</span>&gt;</div>
<div class="line">        <span class="comment">&lt;!-- input data if available--&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">input</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">type</span>&gt;<span class="keyword">DataType</span>&lt;/<span class="keywordtype">type</span>&gt;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">&lt;!-- input port which receives the data. --&gt;</span></div>
<div class="line">            &lt;<span class="keywordtype">port</span> <span class="keyword">carrier</span>=<span class="stringliteral">&quot;tcp&quot;</span>&gt;/<span class="keyword">portname</span>&lt;/<span class="keywordtype">port</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">required</span>&gt;<span class="keyword">yes</span>&lt;/<span class="keywordtype">required</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">priority</span>&gt;<span class="keyword">no</span>&lt;/<span class="keywordtype">priority</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">description</span>&gt;&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">input</span>&gt;</div>
<div class="line">        ...</div>
<div class="line"> </div>
<div class="line">        <span class="comment">&lt;!-- output data if available --&gt;</span></div>
<div class="line">        &lt;<span class="keywordtype">output</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">type</span>&gt;<span class="keyword">DataType</span>&lt;/<span class="keywordtype">type</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">port</span> <span class="keyword">carrier</span>=<span class="stringliteral">&quot;tcp&quot;</span>&gt;/<span class="keyword">portname</span>&lt;/<span class="keywordtype">port</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">description</span>&gt;&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">output</span>&gt;</div>
<div class="line">        ...</div>
<div class="line"> </div>
<div class="line">    &lt;/<span class="keywordtype">data</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">dependencies</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">computer</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">gpu</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">capability</span>&gt;1.3&lt;/<span class="keywordtype">capability</span>&gt;</div>
<div class="line">            &lt;/<span class="keywordtype">gpu</span>&gt;</div>
<div class="line">            ...</div>
<div class="line">        &lt;/<span class="keywordtype">computer</span>&gt;</div>
<div class="line">        ...</div>
<div class="line">    &lt;/<span class="keywordtype">dependencies</span>&gt;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">&lt;!-- specific libraries or header files which are used for development --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">development</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">header</span>&gt;&lt;/<span class="keywordtype">header</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">library</span>&gt;&lt;/<span class="keywordtype">library</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">development</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;/<span class="keywordtype">module</span>&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="yarpmanager_mode_notes"></a>
Notes</h2>
<ul>
<li>&lt;name&gt; should match its executable file name.</li>
<li>&lt;type&gt; refers to nominal type of data (e.g. ImageFrame, String).</li>
<li>Required input means that execution of module depends on availability of the input data. Notice that not all the input are required for a module to perform its task (e.g. status request input).</li>
<li>&lt;priority&gt;yes&lt;/priority&gt; forces the execution of module to be delayed until the port become available.</li>
<li>Physical and logical resource dependencies can be introduced using &lt;dependencies&gt; tag. Dependencies must follow resource conceptional models. Currently available models are 'memory', 'processor', 'storage', 'yarp_port', 'platform' and 'gpu'. All resource dependencies should be introduced inside &lt;computer&gt;&lt;/computer&gt; tags. Resources inside a &lt;computer&gt; tag, represent conjunctional dependency. Resources from different &lt;computer&gt; tags can be seen as disjunctions. Meaning that, if a module depends on either resource R1 or R2, they can be introduced inside two different &lt;computer&gt; tags. Resource dependencies should be introduced if they are really required. For example, if module's performance drops significantly in case of memory swapping, a memory resource dependency can be introduced with the required memory space.</li>
<li>In a multi-platform cluster of computers, if a module depends on specific platform (Operating system), &lt;platform&gt; dependency should be introduced.</li>
</ul>
<p>Resource conceptional model which can be used as module's dependency: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">platform</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">name</span>&gt;&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">distribution</span>&gt;&lt;/<span class="keywordtype">distribution</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">release</span>&gt;&lt;/<span class="keywordtype">release</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">platform</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keywordtype">yarp_port</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">name</span>&gt;&lt;/<span class="keywordtype">name</span>&gt;   <span class="comment">&lt;!-- YARP port name --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">yarp_port</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keywordtype">memory</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">free_space</span>&gt;&lt;/<span class="keywordtype">free_space</span>&gt;    <span class="comment">&lt;!-- in KB --&gt;</span></div>
<div class="line">&lt;/<span class="keywordtype">memory</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keywordtype">storage</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">free_space</span>&gt;&lt;/<span class="keywordtype">free_space</span>&gt;    <span class="comment">&lt;!-- in KB --&gt;</span></div>
<div class="line">&lt;/<span class="keywordtype">storage</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keywordtype">processor</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">architecture</span>&gt;&lt;/<span class="keywordtype">architecture</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">cores</span>&gt;&lt;/<span class="keywordtype">cores</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">frequency</span>&gt;&lt;/<span class="keywordtype">frequency</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">model</span>&gt;&lt;/<span class="keywordtype">model</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">processor</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;<span class="keywordtype">gpu</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">name</span>&gt;&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">cores</span>&gt;&lt;/<span class="keywordtype">cores</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">capability</span>&gt;&lt;/<span class="keywordtype">capability</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">registers_block</span>&gt;&lt;/<span class="keywordtype">registers_block</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">thread_block</span>&gt;&lt;/<span class="keywordtype">thread_block</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">overlap</span>&gt;&lt;/<span class="keywordtype">overlap</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">global_memory</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">total_space</span>&gt;&lt;/<span class="keywordtype">total_space</span>&gt;     <span class="comment">&lt;!-- in KB --&gt;</span></div>
<div class="line">    &lt;/<span class="keywordtype">global_memory</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">shared_memory</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">total_space</span>&gt;&lt;/<span class="keywordtype">total_space</span>&gt;     <span class="comment">&lt;!-- in KB --&gt;</span></div>
<div class="line">    &lt;/<span class="keywordtype">shared_memory</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">constant_memory</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">total_space</span>&gt;&lt;/<span class="keywordtype">total_space</span>&gt;     <span class="comment">&lt;!-- in KB --&gt;</span></div>
<div class="line">    &lt;/<span class="keywordtype">constant_memory</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">gpu</span>&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="yarpmanager_create"></a>
Create new XML description file</h1>
<p>yarpmanager allows for creating new application, module and resource description file using predefined templates. To create a new XML file, first make sure you set 'external_editor' to your preferable editor (e.g. gedit, notepad) then</p><ul>
<li>From "File&gt;New" menu chose "New Application". ("New Module" for module and "New Resource" for resource)</li>
<li>Chose your application folder and enter proper name (e.g "my-test-app.xml") to save it. The template file will be open using 'external_editor'.</li>
<li>Modify and save it.</li>
<li>Open it using yarpmanager.</li>
</ul>
<h2><a class="anchor" id="yarpmanager_create_notes"></a>
Notes</h2>
<ul>
<li>yarpmanager allows for identical application names (they will be listed as MyApp(1), MyApp(2), ...). But it is strongly recommended to have unique proper name for each application. Notice that, duplicate names for modules and resources are not allowed and will be ignored by yarpmanager.</li>
<li>If you modify the XML description file, you need to "reopen" it. Identically, you can "remove" and "open" it from GUI.</li>
</ul>
<h1><a class="anchor" id="yarpmanager_export"></a>
Generate application dependency graph</h1>
<p>The arrangement of modules and resources within an application can be visualized as dependency graph. For Instance, dependency graph of application "EyesViewer-Localhost" used in above example is shown below. </p><div class="image">
<img src="app-graph.jpg" alt=""/>
<div class="caption">
EyesViewer-Localhost</div></div>
<p>As shown in the graph, application "EyesViewer-Localhost" consists of two instances of "FakeEyes" with their relevant modules. Each module is associated with a node marked as "MultipleResource". It is linked to machines which satisfy its requirements. Notice that here, "localhost" is specifically assigned by user to each modules; Thus there is no link to machines "node1" and "node2". The graph is generated in DOT format which can be visualized using Graphviz tools. To generate the graph:</p><ul>
<li>Open an application using yarpmanager (See above example example_g)</li>
<li>From "Edit" menu chose "Export graph"</li>
<li>Give a name (e.g "MyApp.dot") and save it.</li>
</ul>
<p>Or open an application using yarpmanager (See above example example_y) and type : </p><pre class="fragment">&gt;&gt; export MyApp.dot
</pre><p>To visualize the graph, Linux users can open a terminal and try this: </p><pre class="fragment">$ sudo apt-get install graphviz
$ dot -Tpdf -o MyApp.pdf MyApp.dot
</pre><p>Windows users can download Graphviz tools from <a href="http://www.graphviz.org/Download_windows.php">http://www.graphviz.org/Download_windows.php</a> and in windows console type :</p>
<pre class="fragment"> C:\...\&gt; dot -Tpdf -o MyApp.pdf MyApp.dot
</pre><h1><a class="anchor" id="yarpmanager_faq"></a>
Frequently asked questions</h1>
<h2><a class="anchor" id="yarpmanager_wait_launch"></a>
How to postpone launching a module?</h2>
<p>It can very often happen that you need to launch a module after some other modules already launched and are running. This is usually the case where a module needs to access some ports which should be open by other modules. To achieve this behavior, you simply needs to indicate which ports your module needs to be available using &lt;dependencies&gt; tag of the corresponding module in the application description file (see app_notes).</p>
<h2><a class="anchor" id="yarpmanager_quick_launch"></a>
How to quickly launch a single application in command line?</h2>
<p>Imagine you need to run a single application (e.g., eyesviewer-localhost.xml) without using Guis. All you need is to use 'yarpmanager-console', give your application description file as its parameter and ask it to run the modules and connect them:</p>
<pre class="fragment">     yarpmanager-console --application my-app.xml --run --connect
</pre><p>If you want to run the application without getting blocked in yarpmanager-console, you can ask it to quit after running the application.</p>
<pre class="fragment">     yarpmanager-console --application my-app.xml --run --connect --exit --silent
</pre><p>The '&ndash;silent' parameter avoids showing the verbose messages. Try 'yarpmanager-console &ndash;help' for further information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.6.0</span></li>
    <li class="footer">Generated on Wed Jun 1 2022 14:48:31 for YARP by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
