<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: YARP config files</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.6.0' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('yarp_config_files.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">YARP config files </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#yarp_config_file_basics">A minimal config file</a></li>
<li class="level1"><a href="#yarp_config_file_reading">Accessing the minimal config file from code</a></li>
<li class="level1"><a href="#yarp_config_file_add">A config file with sections</a></li>
<li class="level1"><a href="#yarp_config_file_nesting">Nesting configuration files</a></li>
<li class="level1"><a href="#yarp_config_file_lists">Section collections</a></li>
<li class="level1"><a href="#yarp_config_file_includes">Combining section collections and includes</a></li>
<li class="level1"><a href="#yarp_config_file_dir_includes">Combining section collections and directory includes</a></li>
<li class="level1"><a href="#yarp_config_file_comments">Comments in config files</a></li>
<li class="level1"><a href="#yarp_config_file_quoting">Quoting in config files</a></li>
<li class="level1"><a href="#yarp_config_file_continue">Continuing across lines</a></li>
<li class="level1"><a href="#yarp_config_list_syntax">List syntax</a></li>
<li class="level1"><a href="#yarp_config_file_environment">Expansion of variables</a></li>
<li class="level1"><a href="#yarp_config_file_equals">Compatibility with other INI readers</a></li>
<li class="level1"><a href="#yarp_config_command">Command line configuration switches</a></li>
</ul>
</div>
<div class="textblock"><p>This tutorial covers how to write and read configuration files in YARP's native format.</p>
<p>In brief, YARP config files look a lot like <a href="http://en.wikipedia.org/wiki/INI_file">INI files</a> but are actually closer in spirit to <a href="http://en.wikipedia.org/wiki/S-expression">S-expressions</a>. YARP config files translate into <code><a class="el" href="classyarp_1_1os_1_1Property.html" title="A class for storing options and configuration information.">yarp::os::Property</a></code> objects (see e.g. the <code><a class="el" href="classyarp_1_1os_1_1Property.html#a275d87fffe69cd2333b777b721967ab3" title="Interprets a file as a list of properties.">yarp::os::Property::fromConfigFile</a></code> command).</p>
<h1><a class="anchor" id="yarp_config_file_basics"></a>
A minimal config file</h1>
<p>Here is a minimal config file, let's call it "config.ini" (the extension doesn't matter): </p><div class="fragment"><div class="line">width 10</div>
<div class="line">height 15</div>
</div><!-- fragment --><p>The format of each line is the same as that of the string representation of the <a class="el" href="classyarp_1_1os_1_1Bottle.html" title="A simple collection of objects that can be described and transmitted in a portable way.">yarp::os::Bottle</a> class, defined here: <a class="el" href="data_rep.html">Standard data representation format</a>. In summary, each line is a list of items (strings, numbers, sublists, etc) separated by spaces/tabs. We call each top-level list a "group", and assign a name to each group based on its first element.</p>
<p>This "config.ini" example contains two groups, one called "width", and the other called "height".</p>
<h1><a class="anchor" id="yarp_config_file_reading"></a>
Accessing the minimal config file from code</h1>
<p>We could read the example config file in <a class="el" href="yarp_config_files.html#yarp_config_file_basics">the above section</a>, by doing the following in code: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Property_8h.html">yarp/os/Property.h</a>&gt;</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="yarpros_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>() {</div>
<div class="line">  <a class="code" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a> prop;</div>
<div class="line">  prop.<a class="code" href="classyarp_1_1os_1_1Property.html#a275d87fffe69cd2333b777b721967ab3">fromConfigFile</a>(<span class="stringliteral">&quot;config.ini&quot;</span>);</div>
<div class="line">  <span class="comment">// ... query prop object here ...</span></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aProperty_8h_html"><div class="ttname"><a href="Property_8h.html">Property.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a></div><div class="ttdoc">A class for storing options and configuration information.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8h_source.html#l00030">Property.h:33</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html_a275d87fffe69cd2333b777b721967ab3"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html#a275d87fffe69cd2333b777b721967ab3">yarp::os::Property::fromConfigFile</a></div><div class="ttdeci">bool fromConfigFile(const std::string &amp;fname, bool wipe=true)</div><div class="ttdoc">Interprets a file as a list of properties.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8cpp_source.html#l01098">Property.cpp:1098</a></div></div>
<div class="ttc" id="ayarpros_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="yarpros_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="yarpros_8cpp_source.html#l00265">yarpros.cpp:265</a></div></div>
</div><!-- fragment --><p> The Property object prop will contain all the groups in the configuration file. The groups can be accessed by iterating, or by using the <a class="el" href="classyarp_1_1os_1_1Property.html#ad7972fbb839e05b8932f1759ed670386" title="Gets a list corresponding to a given keyword.">yarp::os::Property::findGroup</a> command. This takes a keyword as an argument, and returns the group that has that keyword as its first element. So for config.ini: </p><div class="fragment"><div class="line">prop.<a class="code" href="classyarp_1_1os_1_1Property.html#ad7972fbb839e05b8932f1759ed670386">findGroup</a>(<span class="stringliteral">&quot;width&quot;</span>)  <span class="comment">// gives the list [width,10]</span></div>
<div class="line">prop.<a class="code" href="classyarp_1_1os_1_1Property.html#ad7972fbb839e05b8932f1759ed670386">findGroup</a>(<span class="stringliteral">&quot;height&quot;</span>) <span class="comment">// gives the list [height,15]</span></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html_ad7972fbb839e05b8932f1759ed670386"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html#ad7972fbb839e05b8932f1759ed670386">yarp::os::Property::findGroup</a></div><div class="ttdeci">Bottle &amp; findGroup(const std::string &amp;key) const override</div><div class="ttdoc">Gets a list corresponding to a given keyword.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8cpp_source.html#l01142">Property.cpp:1142</a></div></div>
</div><!-- fragment --><p> In general, the list of values associated with a group can be found with the tail command, which drops the keyword: </p><div class="fragment"><div class="line">prop.<a class="code" href="classyarp_1_1os_1_1Property.html#ad7972fbb839e05b8932f1759ed670386">findGroup</a>(<span class="stringliteral">&quot;width&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9bac31d80e659b650cb643449b93d171">tail</a>() <span class="comment">// gives the list [10]</span></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a9bac31d80e659b650cb643449b93d171"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a9bac31d80e659b650cb643449b93d171">yarp::os::Bottle::tail</a></div><div class="ttdeci">Bottle tail() const</div><div class="ttdoc">Get all but the first element of a bottle.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00388">Bottle.cpp:388</a></div></div>
</div><!-- fragment --><p> Since it is common to use groups of two elements to represent simple key-value pairs, there is a shorthand command <a class="el" href="classyarp_1_1os_1_1Property.html#a01b2c87730d92ac79189a139874b8f32" title="Gets a value corresponding to a given keyword.">yarp::os::Property::find</a> to get the second element of a group directly. It returns a <a class="el" href="classyarp_1_1os_1_1Value.html" title="A single value (typically within a Bottle).">yarp::os::Value</a> object which can easily be converted to regular C types. </p><div class="fragment"><div class="line">prop.<a class="code" href="classyarp_1_1os_1_1Property.html#a01b2c87730d92ac79189a139874b8f32">find</a>(<span class="stringliteral">&quot;width&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">asInt32</a>()  <span class="comment">// gives the int 10</span></div>
<div class="line">prop.<a class="code" href="classyarp_1_1os_1_1Property.html#a01b2c87730d92ac79189a139874b8f32">find</a>(<span class="stringliteral">&quot;height&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">asInt32</a>() <span class="comment">// gives the int 15</span></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html_a01b2c87730d92ac79189a139874b8f32"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html#a01b2c87730d92ac79189a139874b8f32">yarp::os::Property::find</a></div><div class="ttdeci">Value &amp; find(const std::string &amp;key) const override</div><div class="ttdoc">Gets a value corresponding to a given keyword.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8cpp_source.html#l01051">Property.cpp:1051</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a4775a45e57c40460b0202c74f1a9bc4e"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">yarp::os::Value::asInt32</a></div><div class="ttdeci">virtual std::int32_t asInt32() const</div><div class="ttdoc">Get 32-bit integer value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00204">Value.cpp:204</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="yarp_config_file_add"></a>
A config file with sections</h1>
<p><a class="el" href="structConfiguration.html">Configuration</a> files often need to have nesting, with values organized into sections. Special tags of the form "[NAME]" are one way to achieve this with YARP config files (or INI-style configuration files in general). For example, for a file containing: </p><div class="fragment"><div class="line">[SIZE]</div>
<div class="line">width 10</div>
<div class="line">height 15</div>
<div class="line">[APPEARANCE]</div>
<div class="line">color red</div>
</div><!-- fragment --><p> the Property object we read in code will now contain the two groups "SIZE" and "APPEARANCE", which will have "width", "height", and "color" nested within them. In other words: </p><div class="fragment"><div class="line">prop.<a class="code" href="classyarp_1_1os_1_1Property.html#ad7972fbb839e05b8932f1759ed670386">findGroup</a>(<span class="stringliteral">&quot;SIZE&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;width&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">asInt32</a>() <span class="comment">// gives 10</span></div>
<div class="line">prop.<a class="code" href="classyarp_1_1os_1_1Property.html#ad7972fbb839e05b8932f1759ed670386">findGroup</a>(<span class="stringliteral">&quot;APPEARANCE&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;color&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>() <span class="comment">// gives &quot;red&quot;</span></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_aeed416df930c8e0f599e5fcbebb66324"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">yarp::os::Bottle::find</a></div><div class="ttdeci">Value &amp; find(const std::string &amp;key) const override</div><div class="ttdoc">Gets a value corresponding to a given keyword.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00287">Bottle.cpp:287</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_af2125ceb5eb007b6cd6ab77666682117"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">yarp::os::Value::asString</a></div><div class="ttdeci">virtual std::string asString() const</div><div class="ttdoc">Get string value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00234">Value.cpp:234</a></div></div>
</div><!-- fragment --><p>In fact, in YARP config files, the above structure could also be written as: </p><div class="fragment"><div class="line">SIZE (width 10) (height 15)</div>
<div class="line">APPEARANCE (color red)</div>
</div><!-- fragment --><p> This is exactly equivalent. The special [SECTION] syntax is just a convenience, familiar to many from INI files.</p>
<p>Here is the rule. Any list on a separate line in a configuration file, with any degree of nesting, is a group. That means it can be found using the findGroup/find commands, with its name being given by its first element. Any sublists within that group can be found recursively in code using findGroup/find, again with their names being given by their first element.</p>
<p>What happens if there are multiple groups at the same level with the same name? That is undefined, and whatever YARP's current behavior is for this case is not guaranteed to remain so in the future.</p>
<h1><a class="anchor" id="yarp_config_file_nesting"></a>
Nesting configuration files</h1>
<p>To include one configuration file, say "preamble.ini", inside another one, do: </p><div class="fragment"><div class="line">[include <span class="stringliteral">&quot;preamble.ini&quot;</span>]</div>
</div><!-- fragment --><p> This will insert the content of preamble.ini as if cut-and-pasted. If the .ini file is not located in the current directory you have to specify the path to reach it.</p>
<p>If you would rather have the content included within a subsection called FOO, do instead: </p><div class="fragment"><div class="line">[include FOO <span class="stringliteral">&quot;preamble.ini&quot;</span>]</div>
</div><!-- fragment --><p> This last form will result in any sections within preamble.ini being nested within FOO.</p>
<p>For example, if preamble.ini is: </p><div class="fragment"><div class="line">alpha 0.5</div>
<div class="line">[tweaks]</div>
<div class="line">pnudge 10 -10</div>
</div><!-- fragment --><p> Then with a config.ini of: </p><div class="fragment"><div class="line">x 10</div>
<div class="line">y 10</div>
<div class="line">[include <span class="stringliteral">&quot;preamble.ini&quot;</span>]</div>
</div><!-- fragment --><p> we end up with top-level groups of x, y, alpha, and tweaks. With a config.ini of: </p><div class="fragment"><div class="line">x 10</div>
<div class="line">y 10</div>
<div class="line">[include setup <span class="stringliteral">&quot;preamble.ini&quot;</span>]</div>
</div><!-- fragment --><p> we end up with top-level groups of x, y, and setup (alpha and tweaks are nested within setup).</p>
<p>It is also possible to include a whole directory. In this case, all files with the extension ".ini" from that directory will be merged together. An example is given in <a class="el" href="yarp_config_files.html#yarp_config_file_dir_includes">Combining section collections and directory includes</a>.</p>
<h1><a class="anchor" id="yarp_config_file_nesting"></a>
Nesting configuration files</h1>
<p>If you need to include a configuration file from a specific context, using <a class="el" href="classyarp_1_1os_1_1ResourceFinder.html" title="Helper class for finding config files and other external resources.">yarp::os::ResourceFinder</a> (<a class="el" href="yarp_resource_finder_tutorials.html">ResourceFinder Tutorials and Specification</a>) do: </p><div class="fragment"><div class="line">[<span class="keyword">import</span> contextname filename.ini]</div>
</div><!-- fragment --><p> The import tag also supports multi-level nesting. The imported file is inserted at the specific point where the import directive is found, as if cut-and-pasted. It is not possibile to import a file inside a section, as done using the syntax [include FOO filename.ini] previously described. The options included by the imported file may be overwritten by the options located in the parent configuration file (or viceversa), so be careful about the order in which the parameters are processed. This mechanism can be exploited to include a base configuration file and then override specific parameters.</p>
<h1><a class="anchor" id="yarp_config_file_lists"></a>
Section collections</h1>
<p>Occasionally a config file needs a list of sections containing similar entries. One convenient way to achieve that is with a "section prefix". For example: </p><div class="fragment"><div class="line">[camera left]</div>
<div class="line">geom 0.7 0.3</div>
<div class="line">color_correct 0.01 0.0 -0.1</div>
<div class="line">[camera right]</div>
<div class="line">geom -0.7 0.3</div>
<div class="line">color_correct 0.0 0.0 0.0</div>
</div><!-- fragment --><p>This configuration file is equivalent to:</p>
<div class="fragment"><div class="line">camera left right</div>
<div class="line">[left]</div>
<div class="line">geom 0.7 0.3</div>
<div class="line">color_correct 0.01 0.0 -0.1</div>
<div class="line">[right]</div>
<div class="line">geom -0.7 0.3</div>
<div class="line">color_correct 0.0 0.0 0.0</div>
</div><!-- fragment --><p>So we have a handy "camera" list accessible as prop.findGroup("camera").tail() that gives us the names of the camera-related groups.</p>
<h1><a class="anchor" id="yarp_config_file_includes"></a>
Combining section collections and includes</h1>
<p>As of YARP 2.2.8, section collections and include file features can be combined. In other words, one can have a configuration file like this: </p><div class="fragment"><div class="line">[include camera left <span class="stringliteral">&quot;cam_left.ini&quot;</span>]</div>
<div class="line">[include camera right <span class="stringliteral">&quot;cam_right.ini&quot;</span>]</div>
</div><!-- fragment --><p> This takes the material in "cam_left.ini" and places it in a section called "left", and similarly places the material in "cam_right.ini" in a section called "right", and then creates a group called "camera" equivalent to the following line: </p><div class="fragment"><div class="line">camera left right</div>
</div><!-- fragment --><h1><a class="anchor" id="yarp_config_file_dir_includes"></a>
Combining section collections and directory includes</h1>
<p>As of YARP 2.3.21, it is possible to include a whole directory in place of a file. That gives new possibilities for section collections. Suppose we have a file cam/left.ini containing: </p><div class="fragment"><div class="line">[camera left]</div>
<div class="line">geom 0.7 0.3</div>
<div class="line">color_correct 0.01 0.0 -0.1</div>
</div><!-- fragment --><p> And a file cam/right.ini containing: </p><div class="fragment"><div class="line">[camera right]</div>
<div class="line">geom -0.7 0.3</div>
<div class="line">color_correct 0.0 0.0 0.0</div>
</div><!-- fragment --><p> And a file all.ini containing: </p><div class="fragment"><div class="line">[include <span class="stringliteral">&quot;cam&quot;</span>]</div>
</div><!-- fragment --><p>Loading all.ini is equivalent to loading: </p><div class="fragment"><div class="line">camera left right</div>
<div class="line">[left]</div>
<div class="line">geom 0.7 0.3</div>
<div class="line">color_correct 0.01 0.0 -0.1</div>
<div class="line">[right]</div>
<div class="line">geom -0.7 0.3</div>
<div class="line">color_correct 0.0 0.0 0.0</div>
</div><!-- fragment --><p>Note the ordering of files read may not be defined.</p>
<h1><a class="anchor" id="yarp_config_file_comments"></a>
Comments in config files</h1>
<p>Use the # character, or //, as your prefer. </p><div class="fragment"><div class="line"><span class="preprocessor"># this is a comment</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">// this is also a comment</span></div>
</div><!-- fragment --><h1><a class="anchor" id="yarp_config_file_quoting"></a>
Quoting in config files</h1>
<p>Keys, values, and section names containing spaces or special characters should be surrounded by double-quotes, for example: </p><div class="fragment"><div class="line"><span class="stringliteral">&quot;a long key whose string value looks like a list&quot;</span> <span class="stringliteral">&quot;(1 2 3)&quot;</span></div>
</div><!-- fragment --><p> maps the string "a long key whose string value looks like a list" to the string "(1 2 3)".</p>
<p>If the quote character needs to be included in a string it can be itself quoted by preceding it with a backslash character.</p>
<h1><a class="anchor" id="yarp_config_file_continue"></a>
Continuing across lines</h1>
<p>A long line can be continued on the next line by breaking the line up with a backslash character directly before the end of line. For example: </p><div class="fragment"><div class="line">encoders (1 2 3 4 \</div>
<div class="line">5 6 7 8)</div>
</div><!-- fragment --><p> is the same as: </p><div class="fragment"><div class="line">encoders (1 2 3 4 5 6 7 8)</div>
</div><!-- fragment --><h1><a class="anchor" id="yarp_config_list_syntax"></a>
List syntax</h1>
<p>Values in a config file can be any type supported by <a class="el" href="classyarp_1_1os_1_1Bottle.html" title="A simple collection of objects that can be described and transmitted in a portable way.">yarp::os::Bottle</a>. That includes lists, which are surrounded by parentheses and have spaces (not commas) between items: </p><div class="fragment"><div class="line">example_list (1 2 3)</div>
<div class="line">nested_list (foo (red (255 0 0)) (green (0 255 0)))</div>
</div><!-- fragment --><p>Binary blobs are also supported, and are expressed as lists of space-separated numbers surrounded by square parentheses.</p>
<h1><a class="anchor" id="yarp_config_file_environment"></a>
Expansion of variables</h1>
<p>By default, environment variables in the config file written as $NAME or ${NAME} will be expanded. To include a dollar sign without expansion, precede it with a backslash.</p>
<p>Key/value pairs already encountered in the config file can also be used in this way. For example, in an environment where USER is set to paulfitz: </p><div class="fragment"><div class="line">username <span class="stringliteral">&quot;$USER&quot;</span></div>
<div class="line">tmpdir <span class="stringliteral">&quot;/tmp/robot_${username}_cache&quot;</span></div>
</div><!-- fragment --><p> This would give "tmpdir" set to "/tmp/robot_paulfitz_cache".</p>
<p>Extra "pseudo-environment" variables can be made available by calling <a class="el" href="classyarp_1_1os_1_1Property.html#a275d87fffe69cd2333b777b721967ab3" title="Interprets a file as a list of properties.">yarp::os::Property::fromConfigFile</a> with an extra Property argument.</p>
<h1><a class="anchor" id="yarp_config_file_equals"></a>
Compatibility with other INI readers</h1>
<p>Occasionally it is nice to be able to read YARP config files from other systems (e.g. Python has an INI reader). Your best bet to do that is to include an equals sign between keys and values, with spaces around the equals. YARP will accept and ignore this, and it will make other readers happier. For YARP, these two lines are equivalent: </p><div class="fragment"><div class="line">x 10</div>
<div class="line">x = 10</div>
</div><!-- fragment --><p> Don't forget the spaces, and don't do anything fancy beyond key/value pairs.</p>
<h1><a class="anchor" id="yarp_config_command"></a>
Command line configuration switches</h1>
<p>The <a class="el" href="classyarp_1_1os_1_1ResourceFinder.html" title="Helper class for finding config files and other external resources.">yarp::os::ResourceFinder</a> class bundles together some common ways to configure YARP programs. An instance of this class is usually passed the command line arguments: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="yarpros_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line">  ResourceFinder prop;</div>
<div class="line">  prop.configure(argc,argv);</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>The <a class="el" href="classyarp_1_1os_1_1ResourceFinder.html" title="Helper class for finding config files and other external resources.">yarp::os::ResourceFinder</a> class can be used just like the <a class="el" href="classyarp_1_1os_1_1Property.html" title="A class for storing options and configuration information.">yarp::os::Property</a> class mentioned in: <a class="el" href="yarp_config_files.html#yarp_config_file_reading">Accessing the minimal config file from code</a>. If the user of the program supplies a <code>&ndash;from config.ini</code> argument that file shall be read as a configuration file. Values can be overridden on the command line. For example, if <code>config.ini</code> contains: </p><div class="fragment"><div class="line">width 10</div>
<div class="line">height 15</div>
</div><!-- fragment --><p> And the program is called with these arguments: </p><pre class="fragment">--from config.ini --width 200
</pre><p> In this case, we get: </p><div class="fragment"><div class="line">prop.find(<span class="stringliteral">&quot;width&quot;</span>).asInt32()   <span class="comment">// gives the int 200</span></div>
<div class="line">prop.find(<span class="stringliteral">&quot;height&quot;</span>).asInt32()  <span class="comment">// gives the int 15</span></div>
</div><!-- fragment --><p> This can be handy to override one or two values in a long config file without needing to copy it and modify it. One wrinkle remains &ndash; how to override values that are in sections? For example, if <code>config.ini</code> is: </p><div class="fragment"><div class="line">[SIZE]</div>
<div class="line">width 10</div>
<div class="line">height 15</div>
<div class="line">[APPEARANCE]</div>
<div class="line">color red</div>
</div><!-- fragment --><p> Then calling the program with <code>&ndash;width 200</code> would simply add a new top-level <code>width</code> value without modifying the <code>width</code> in the <code>SIZE</code> section. As of yarp 2.3.20, it is possible to use a nested notation in the command line, and call the program as: </p><pre class="fragment">--from config.ini --SIZE::width 200
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.6.0</span></li>
    <li class="footer">Generated on Wed Jun 1 2022 14:48:32 for YARP by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
