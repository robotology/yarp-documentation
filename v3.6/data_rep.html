<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: Standard data representation format</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.6.0' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('data_rep.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Standard data representation format </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#data_rep_base">The NetType data-types</a></li>
<li class="level1"><a href="#data_rep_bin">Binary format</a></li>
<li class="level1"><a href="#data_rep_text">Text format</a></li>
<li class="level1"><a href="#data_rep_mapping">Examples</a></li>
<li class="level1"><a href="#data_rep_code">In practice</a><ul><li class="level2"><a href="#data_rep_code_cmd">Command-line mapping</a></li>
<li class="level2"><a href="#data_rep_code_config">Configuration-file mapping</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>The policy for representing data externally in YARP is chosen carefully to encourage both efficiency and the ability to read/write network data by hand.</p>
<p>We define the following: </p><ul>
<li>A standard set of data-types </li>
<li>A standard binary format </li>
<li>A standard text format </li>
<li>A standard mapping between the two formats</li>
</ul>
<h1><a class="anchor" id="data_rep_base"></a>
The NetType data-types</h1>
<p>We limit our basic data-types to ones which can be easily read, written, and distinguished from each other in text form. The types, and their arbitrary names, are:</p>
<ul>
<li>NetInt: an integer </li>
<li>NetFloat: a floating point number </li>
<li>NetString: a string </li>
<li>NetBlob: An arbitrary sequence of bytes </li>
<li>NetVocab: A short identifier that can be interpreted either as an integer or a string </li>
<li>NetList: An arbitrary sequence of NetTypes (they do not need to all be the same type, and can include NetLists)</li>
</ul>
<p>Some of the types have limitations on them because of how they are represented in binary format. The important point is that they can all be represented easily in both text and binary form.</p>
<h1><a class="anchor" id="data_rep_bin"></a>
Binary format</h1>
<ul>
<li>NetInt: Represented as a 32-bit little-endian signed integer. </li>
<li>NetFloat: Represented as a 64-bit C "double" floating-point number (IEEE 754 double-precision). </li>
<li>NetString: Represented as a null-terminated sequence of bytes. </li>
<li>NetList: The NetList representation is discussed separately. </li>
<li>NetVocab: Represented as a 32-bit little-endian signed integer. If interpreted as a string, with the lowest order 8-bits as the first character, and the highest order non-zero 8-bits as the last character. </li>
<li>NetBlob: Represented as a NetInt giving the number N of bytes, and then the sequence of N bytes.</li>
</ul>
<p>The NetList representation is as follows. Every NetType is assigned a code:</p>
<ul>
<li>NetInt.code is 1 </li>
<li>NetFloat.code is 10 </li>
<li>NetString.code is 4 </li>
<li>NetBlob.code is 12 </li>
<li>NetVocab.code is 9 </li>
<li>NetList.code is 256 if it may contain elements of diverse types, or 256+T.code if it contains elements of a single type T.</li>
</ul>
<p>Suppose a NetList is the list of NetTypes (e1 e2 e3 ... eN). If the elements are all of the same type T (other than NetList itself) then the list is represented as: </p><ul>
<li>A NetInt containing the number NetList.code+T.code, followed by </li>
<li>A NetInt containing the number of elements, N, followed by </li>
<li>The representations of the N individual elements.</li>
</ul>
<p>If the elements are not all of the same type, or are all NetLists in turn, then the list is represented as: </p><ul>
<li>A NetInt containing the number NetList.code, followed by </li>
<li>A NetInt containing the number of elements, N, followed by </li>
<li>The representations of the N individual elements, where each element is preceded by a NetInt containing their type code.</li>
</ul>
<h1><a class="anchor" id="data_rep_text"></a>
Text format</h1>
<ul>
<li>NetInt: Represented in the text forms supported by C99 strtol, e.g. -15, 9991, 0xfa, ... </li>
<li>NetFloat: Represented in text forms supported by ANSI C strtod, except that a period must be present in order distinguish this type from NetInts, e.g. 10.57, .0 </li>
<li>NetString: Represented as characters within double-quotes, with special characters escaped C-style. The quotes may be omitted for strings that contain only alphanumeric characters. </li>
<li>NetList: The NetList representation is a white-space separated list of elements. Nested lists are placed within parentheses. </li>
<li>NetVocab: Represented as a short string between square brackets, e.g. [get]. There should be at most 4 characters between the brackets. </li>
<li>NetBlob: Represented as a series of numbers between curly braces, e.g. {1 10 255 6 3}. Each number represents a byte.</li>
</ul>
<h1><a class="anchor" id="data_rep_mapping"></a>
Examples</h1>
<p>The list of primes less than 20 would be represented as: </p><pre class="fragment">text: 2 3 5 7 11 13 17 19
binary: [4:257] [4:8] [4:2] [4:3] [4:5] [4:7] [4:11] [4:13] [4:17] [4:19]
</pre><p> where [b:n] represents the number n in b bytes.</p>
<p>A list of numbers followed by a list of strings might be: </p><pre class="fragment">text: (91 92 93) (this is a "good list")
binary: [4:256] [4:2] [4:257] [4:3] [4:91] [4:92] [4:93] [4:260] [4:4]
[4:5] [5:"this"] [4:3] [3:"is"] [4:2] [2:"a"] [4:10] [10:"good list"]
</pre><h1><a class="anchor" id="data_rep_code"></a>
In practice</h1>
<p>The <a class="el" href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a> class in YARP is a useful helper class for reading/writing the standard data format in binary and text mode.</p>
<p>We also use mappings from common non-network external data such as command line-options and configuration files.</p>
<h2><a class="anchor" id="data_rep_code_cmd"></a>
Command-line mapping</h2>
<p>Command-line options of the form: </p><pre class="fragment">--opt1 arga argb --opt2 argc --opt3
</pre><p> are interpreted to correspond to a list with the following elements in unspecified order (expressed here as text) </p><pre class="fragment">(opt1 arga argb) (opt2 argc) (opt3)
</pre><p> This mapping is implemented by <a class="el" href="classyarp_1_1os_1_1Property.html#af6bb398936ab0710d5c5d4960622663f">yarp::os::Property::fromCommand()</a>. </p><div class="fragment"><div class="line"><a class="code" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a> p;</div>
<div class="line"><span class="keywordtype">int</span> argc = 5;</div>
<div class="line"><span class="keywordtype">char</span> *argv[] = { <span class="stringliteral">&quot;fake_program&quot;</span>, <span class="stringliteral">&quot;--size&quot;</span>, <span class="stringliteral">&quot;10&quot;</span>, <span class="stringliteral">&quot;20&quot;</span>, <span class="stringliteral">&quot;--name&quot;</span>, <span class="stringliteral">&quot;mr frog&quot;</span> };</div>
<div class="line">p.<a class="code" href="classyarp_1_1os_1_1Property.html#af6bb398936ab0710d5c5d4960622663f">fromCommand</a>(argc, argv[]);</div>
<div class="line">std::string result = p.<a class="code" href="classyarp_1_1os_1_1Property.html#a037386dffde2bcc681291568da2a9ae8">toString</a>();</div>
<div class="line"><span class="comment">// result will be a permutation of (size 10 20) (name &quot;mr frog&quot;)</span></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a></div><div class="ttdoc">A class for storing options and configuration information.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8h_source.html#l00030">Property.h:33</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html_a037386dffde2bcc681291568da2a9ae8"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html#a037386dffde2bcc681291568da2a9ae8">yarp::os::Property::toString</a></div><div class="ttdeci">std::string toString() const override</div><div class="ttdoc">Return a standard text representation of the content of the object.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8cpp_source.html#l01069">Property.cpp:1069</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html_af6bb398936ab0710d5c5d4960622663f"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html#af6bb398936ab0710d5c5d4960622663f">yarp::os::Property::fromCommand</a></div><div class="ttdeci">void fromCommand(int argc, char *argv[], bool skipFirst=true, bool wipe=true)</div><div class="ttdoc">Interprets a list of command arguments as a list of properties.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8cpp_source.html#l01074">Property.cpp:1074</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="data_rep_code_config"></a>
Configuration-file mapping</h2>
<p><a class="el" href="structConfiguration.html">Configuration</a> files of the form: </p><pre class="fragment">[SECTION1]
opt1 arga argb
opt2 argc
[SECTION2]
joints 5
mins 0 0 0 0 10
maxs 100 100 50 100 20
</pre><p> are interpreted to correspond to a list with the following elements (expressed here as text) </p><pre class="fragment">(SECTION1 (opt1 arga argb) (opt2 argc))
(SECTION2 (joints 5) (mins 0 0 0 0 10) (maxs 100 100 50 100 20))
</pre><p> This mapping is implemented by <a class="el" href="classyarp_1_1os_1_1Property.html#a275d87fffe69cd2333b777b721967ab3">yarp::os::Property::fromConfigFile()</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.6.0</span></li>
    <li class="footer">Generated on Wed Jun 1 2022 14:48:31 for YARP by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
