<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: src/devices/usbCamera/linux/V4L_camera.cpp Source File</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.5.1' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('V4L__camera_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">V4L_camera.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="V4L__camera_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * SPDX-FileCopyrightText: 2006-2021 Istituto Italiano di Tecnologia (IIT)</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * SPDX-License-Identifier: LGPL-2.1-or-later</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; </div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="V4L__camera_8h.html">V4L_camera.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="list_8h.html">list.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="USBcameraLogComponent_8h.html">USBcameraLogComponent.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="LogStream_8h.html">yarp/os/LogStream.h</a>&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="libYARP__os_2src_2yarp_2os_2Time_8h.html">yarp/os/Time.h</a>&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="Value_8h.html">yarp/os/Value.h</a>&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;ctime&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;opencv2/core/core.hpp&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;opencv2/imgproc/imgproc.hpp&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;opencv2/core/core_c.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceyarp_1_1os.html">yarp::os</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceyarp_1_1dev.html">yarp::dev</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="V4L__camera_8cpp.html#a717981617f3ba9924718214be0336256">   25</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="V4L__camera_8cpp.html#a717981617f3ba9924718214be0336256">getEpochTimeShift</a>()</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keyword">struct </span>timeval epochtime;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">struct </span>timespec vsTime;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    gettimeofday(&amp;epochtime, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    clock_gettime(CLOCK_MONOTONIC, &amp;vsTime);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordtype">double</span> uptime = vsTime.tv_sec + vsTime.tv_nsec / 1000000000.0;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordtype">double</span> epoch = epochtime.tv_sec + epochtime.tv_usec / 1000000.0;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">return</span> epoch - uptime;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keywordtype">double</span> V4L_camera::checkDouble(<a class="code" href="classyarp_1_1os_1_1Searchable.html">yarp::os::Searchable</a>&amp; config, <span class="keyword">const</span> <span class="keywordtype">char</span>* key)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">if</span> (config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(key)) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keywordflow">return</span> config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(key).<a class="code" href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">asFloat64</a>();</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">return</span> -1.0;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="V4L__camera_8cpp.html#ae51cc7b0e0c3e88577e6d075fa80c95a">   48</a></span>&#160;<span class="preprocessor">#define NOT_PRESENT -1</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keywordtype">int</span> V4L_camera::convertYARP_to_V4L(<span class="keywordtype">int</span> feature)</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca3ef1568e8f7106b4616f6186518b447b">YARP_FEATURE_BRIGHTNESS</a>:</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordflow">return</span> V4L2_CID_BRIGHTNESS;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7cabf3009b9eb9429598eb3a06d7fb614bc">YARP_FEATURE_SHUTTER</a>: <span class="comment">// this maps also on exposure</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">return</span> V4L2_CID_EXPOSURE;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca19c3395b4fcacc21d78a10b773fa0d1c">YARP_FEATURE_SHARPNESS</a>:</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">return</span> V4L2_CID_SHARPNESS;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4913b42184efec33c9fc45314e14cdf7">YARP_FEATURE_HUE</a>:</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keywordflow">return</span> V4L2_CID_HUE;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca9e33ad23bfff813dbd1022af37762672">YARP_FEATURE_SATURATION</a>:</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordflow">return</span> V4L2_CID_SATURATION;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca5c25cc47446d924a67689a4af54d25fb">YARP_FEATURE_GAMMA</a>:</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">return</span> V4L2_CID_GAMMA;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7caea53ce4037d3f75effa2e1c896bc7e8a">YARP_FEATURE_GAIN</a>:</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">return</span> V4L2_CID_GAIN;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca87702ef72c21f90bebfa73fa77052faa">YARP_FEATURE_IRIS</a>:</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">return</span> V4L2_CID_IRIS_ABSOLUTE;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="comment">//         case YARP_FEATURE_WHITE_BALANCE:  -&gt; this has to e mapped on the couple V4L2_CID_BLUE_BALANCE &amp;&amp; V4L2_CID_RED_BALANCE</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="comment">// not yet implemented  //</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"></span>        <span class="comment">//         case YARP_FEATURE_FOCUS:          return DC1394_FEATURE_FOCUS;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="comment">//         case YARP_FEATURE_TEMPERATURE:    return DC1394_FEATURE_TEMPERATURE;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="comment">//         case YARP_FEATURE_TRIGGER:        return DC1394_FEATURE_TRIGGER;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">//         case YARP_FEATURE_TRIGGER_DELAY:  return DC1394_FEATURE_TRIGGER_DELAY;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="comment">//         case YARP_FEATURE_FRAME_RATE:     return DC1394_FEATURE_FRAME_RATE;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="comment">//         case YARP_FEATURE_ZOOM:           return DC1394_FEATURE_ZOOM;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="comment">//         case YARP_FEATURE_PAN:            return DC1394_FEATURE_PAN;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="comment">//         case YARP_FEATURE_TILT:           return DC1394_FEATURE_TILT;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="V4L__camera_8cpp.html#ae51cc7b0e0c3e88577e6d075fa80c95a">NOT_PRESENT</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a9ec4aa6beea4021978de8ce8712b0937">   87</a></span>&#160;<a class="code" href="classV4L__camera.html#a9ec4aa6beea4021978de8ce8712b0937">V4L_camera::V4L_camera</a>() :</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <a class="code" href="classyarp_1_1os_1_1PeriodicThread.html">PeriodicThread</a>(1.0 / <a class="code" href="V4L__camera_8h.html#a1fb0bde510a6add8f28e8361a4d00813">DEFAULT_FRAMERATE</a>), doCropping(false), toEpochOffset(<a class="code" href="V4L__camera_8cpp.html#a717981617f3ba9924718214be0336256">getEpochTimeShift</a>())</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    verbose = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    param.<a class="code" href="structVideo__params.html#a27d5f61e86444e474b8e13856862268a">fps</a> = <a class="code" href="V4L__camera_8h.html#a1fb0bde510a6add8f28e8361a4d00813">DEFAULT_FRAMERATE</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    param.<a class="code" href="structVideo__params.html#a5b7c774ace23f22fb356fdc63e365b96">io</a> = <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a086ff945a7be166d4e465dd5b8ae8749">IO_METHOD_MMAP</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a> = <span class="stringliteral">&quot;/dev/video0&quot;</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a> = -1;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a> = 0;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    param.<a class="code" href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">camModel</a> = <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacda78c0d1b59eb75cc76daf62a03e1a43f3">STANDARD_UVC</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    param.<a class="code" href="structVideo__params.html#ada050962ee6c8cc3af9427b4d8da2d05">dual</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    param.<a class="code" href="structVideo__params.html#abe4f447ff65a1f30e3370da83742e440">addictionalResize</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a> = 0;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a> = 0;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a> = 0;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    param.<a class="code" href="structVideo__params.html#a6e7d10b8280945d5e148ee0e12093a8e">resizeHeight</a> = 0;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    _v4lconvert_data = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    myCounter = 0;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    timeTot = 0;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> = <a class="code" href="V4L__camera_8h.html#a93493eb8fae5549bd5be67f3449245e0">DEFAULT_WIDTH</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a> = <a class="code" href="V4L__camera_8h.html#a1879f9e5604a01f0983829846001ab23">DEFAULT_HEIGHT</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    param.<a class="code" href="structVideo__params.html#a53cddeafaeb3bf7376801407dd690a43">raw_image</a> = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    param.<a class="code" href="structVideo__params.html#af885d554e7f90136dc0cc8d014ac0d67">raw_image_size</a> = 0;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    param.<a class="code" href="structVideo__params.html#a1711ba61ad9d83ed7493dc7743e228b2">read_image</a> = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    param.<a class="code" href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">src_image</a> = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    param.<a class="code" href="structVideo__params.html#af7afa851d905587fdace8c6f04b68f42">src_image_size</a> = 0;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a> = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    param.<a class="code" href="structVideo__params.html#af40c139681fd2b0cdfd996b62fcd981b">dst_image_size_rgb</a> = 0;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    use_exposure_absolute = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    camMap[<span class="stringliteral">&quot;default&quot;</span>] = <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacda78c0d1b59eb75cc76daf62a03e1a43f3">STANDARD_UVC</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    camMap[<span class="stringliteral">&quot;leopard_python&quot;</span>] = <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacdacebe991834d4f300ec5da5d5eef91729">LEOPARD_PYTHON</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    configFx = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    configFy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    configPPx = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    configPPy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    configRet = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    configDistM = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    configIntrins = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    configured = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// leopard debugging</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    pixel_fmt_leo = V4L2_PIX_FMT_SGRBG8;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    bit_shift = 2; <span class="comment">// after firmware update, the shift has to be 2 instead of 4</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    bit_bayer = 8;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;}</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a2bb5522eb923d5a6c10b324377ba37b2">  141</a></span>&#160;<a class="code" href="classyarp_1_1os_1_1Stamp.html">yarp::os::Stamp</a> <a class="code" href="classV4L__camera.html#a2bb5522eb923d5a6c10b324377ba37b2">V4L_camera::getLastInputStamp</a>()</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> timeStamp;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keywordtype">int</span> V4L_camera::convertV4L_to_YARP_format(<span class="keywordtype">int</span> format)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">switch</span> (format) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_GREY:</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4aee1fd390ce5dbd89ba1994759f609483">VOCAB_PIXEL_MONO</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_Y16:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a27d76c9893d80f63662832d3ed725fb7">VOCAB_PIXEL_MONO16</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_RGB24:</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4afa5a4049fbf6c06a36e68803ea477af6">VOCAB_PIXEL_RGB</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">//     case V4L2_PIX_FMT_ABGR32  : return VOCAB_PIXEL_BGRA; //unsupported by linux travis configuration</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_BGR24:</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a7459748a75059b915b3e9ec88eb207ed">VOCAB_PIXEL_BGR</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_SGRBG8:</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a7e2b49464cca8161a9d85c9db01e0549">VOCAB_PIXEL_ENCODING_BAYER_GRBG8</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_SBGGR8:</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a2cc27a656da7ba90e877e62a83a353af">VOCAB_PIXEL_ENCODING_BAYER_BGGR8</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_SBGGR16:</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a0251518b09a80ca69fb280de9a426f36">VOCAB_PIXEL_ENCODING_BAYER_BGGR16</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_SGBRG8:</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4ad4ac708aa291887b3db4e5b1b3b0b34f">VOCAB_PIXEL_ENCODING_BAYER_GBRG8</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_SRGGB8:</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a7b9ef944b0b8375e023286af0e73150b">VOCAB_PIXEL_ENCODING_BAYER_RGGB8</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_YUV420:</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a119739a88920900f75992188d99f8e27">VOCAB_PIXEL_YUV_420</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_YUV444:</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a2ff7130f833bbc772acaf30dc19f8b9b">VOCAB_PIXEL_YUV_444</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_YYUV:</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a8aa740e7d79f195ecfe330d781b6a818">VOCAB_PIXEL_YUV_422</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">case</span> V4L2_PIX_FMT_YUV411P:</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4af0b275e745a6ec310ad5c3a9ed8fc9d3">VOCAB_PIXEL_YUV_411</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="V4L__camera_8cpp.html#ae51cc7b0e0c3e88577e6d075fa80c95a">NOT_PRESENT</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keywordtype">void</span> V4L_camera::populateConfigurations()</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">struct </span>v4l2_fmtdesc fmt;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">struct </span>v4l2_frmsizeenum frmsize;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">struct </span>v4l2_frmivalenum frmival;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    fmt.index = 0;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">while</span> (ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_ENUM_FMT, &amp;fmt) &gt;= 0) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        memset(&amp;frmsize, 0, <span class="keyword">sizeof</span>(v4l2_frmsizeenum));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        frmsize.pixel_format = fmt.pixelformat;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        frmsize.index = 0;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        frmsize.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">while</span> (xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_ENUM_FRAMESIZES, &amp;frmsize) &gt;= 0) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">if</span> (frmsize.type == V4L2_FRMSIZE_TYPE_DISCRETE) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                memset(&amp;frmival, 0, <span class="keyword">sizeof</span>(v4l2_frmivalenum));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                frmival.index = 0;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                frmival.pixel_format = fmt.pixelformat;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                frmival.width = frmsize.discrete.width;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                frmival.height = frmsize.discrete.height;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                frmsize.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="keywordflow">while</span> (xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_ENUM_FRAMEINTERVALS, &amp;frmival) &gt;= 0) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    <a class="code" href="structyarp_1_1dev_1_1CameraConfig.html">CameraConfig</a> c;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    c.<a class="code" href="structyarp_1_1dev_1_1CameraConfig.html#a78607caa8c3f831a88b326b4b5dac501">pixelCoding</a> = (<a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4">YarpVocabPixelTypesEnum</a>)convertV4L_to_YARP_format(frmival.pixel_format);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    c.<a class="code" href="structyarp_1_1dev_1_1CameraConfig.html#a27dd4b4cc589091c64a65d2bd407ed8d">width</a> = frmival.width;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    c.<a class="code" href="structyarp_1_1dev_1_1CameraConfig.html#abd70bb6d085abb83adddd1c6992b0dee">height</a> = frmival.height;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    c.<a class="code" href="structyarp_1_1dev_1_1CameraConfig.html#aa777c4d3112b6a708534fce3aa3f4025">framerate</a> = (1.0 * frmival.discrete.denominator) / frmival.discrete.numerator;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    param.<a class="code" href="structVideo__params.html#a30b9a437f8567529c7505e3621222300">configurations</a>.<a class="code" href="classyarp_1_1sig_1_1VectorOf.html#a3b340b29d04e3fd3edaaf8aaba1ac41d">push_back</a>(c);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                    frmival.index++;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            frmsize.index++;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        fmt.index++;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="classV4L__camera.html#afc2ee406af9137b5111848af0f9b7071">  221</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#afc2ee406af9137b5111848af0f9b7071">V4L_camera::open</a>(<a class="code" href="classyarp_1_1os_1_1Searchable.html">yarp::os::Searchable</a>&amp; config)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keyword">struct </span><a class="code" href="namespaceyarp_1_1os.html#a7cc26d1e03b2b433cbbfbf5597125031">stat</a> st;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;input params are &quot;</span> &lt;&lt; config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa8e76c64a9251dc4485022aa7140d150">toString</a>();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (!fromConfig(config)) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// stat file</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (-1 == <a class="code" href="namespaceyarp_1_1os.html#a7cc26d1e03b2b433cbbfbf5597125031">stat</a>(param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str(), &amp;st)) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Cannot identify &#39;%s&#39;: %d, %s&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str(), errno, strerror(errno));</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">// check if it is a device</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (!S_ISCHR(st.st_mode)) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;%s is no device&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// open device</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a> = v4l2_open(param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str(), O_RDWR <span class="comment">/* required */</span> | O_NONBLOCK, 0);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// check if opening was successfull</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (-1 == param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Cannot open &#39;%s&#39;: %d, %s&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str(), errno, strerror(errno));</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// if previous instance crashed, maybe will help (?)</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    captureStop();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    deviceUninit();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    v4l2_close(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">yarp::os::Time::delay</a>(1);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">// re-open device</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a> = v4l2_open(param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str(), O_RDWR <span class="comment">/* required */</span> | O_NONBLOCK, 0);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// check if opening was successfull</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (-1 == param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Cannot open &#39;%s&#39;: %d, %s&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str(), errno, strerror(errno));</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// Initting video device</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    deviceInit();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        enumerate_controls();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (!check_V4L2_control(V4L2_CID_EXPOSURE)) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        use_exposure_absolute = check_V4L2_control(V4L2_CID_EXPOSURE_ABSOLUTE);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    captureStart();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">yarp::os::Time::delay</a>(0.5);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="classyarp_1_1os_1_1PeriodicThread.html#abf3184a8c1c38830b7813c9205b36ea3">start</a>();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    populateConfigurations();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// Configure the device settings from input file</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7caea53ce4037d3f75effa2e1c896bc7e8a">YARP_FEATURE_GAIN</a>, checkDouble(config, <span class="stringliteral">&quot;gain&quot;</span>));</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>, checkDouble(config, <span class="stringliteral">&quot;exposure&quot;</span>));</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca3ef1568e8f7106b4616f6186518b447b">YARP_FEATURE_BRIGHTNESS</a>, checkDouble(config, <span class="stringliteral">&quot;brightness&quot;</span>));</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca19c3395b4fcacc21d78a10b773fa0d1c">YARP_FEATURE_SHARPNESS</a>, checkDouble(config, <span class="stringliteral">&quot;sharpness&quot;</span>));</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a>&amp; white_balance = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#ac1d084873c863c7d4bcb8ca36cf84367">findGroup</a>(<span class="stringliteral">&quot;white_balance&quot;</span>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (!white_balance.<a class="code" href="classyarp_1_1os_1_1Bottle.html#ad014b5d06b10e037c462abfcf34a9e45">isNull</a>()) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>, white_balance.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a6cd61ddbda2c4970bbe8087cf5986e42">get</a>(2).<a class="code" href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">asFloat64</a>(), white_balance.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a6cd61ddbda2c4970bbe8087cf5986e42">get</a>(1).<a class="code" href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">asFloat64</a>());</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4913b42184efec33c9fc45314e14cdf7">YARP_FEATURE_HUE</a>, checkDouble(config, <span class="stringliteral">&quot;hue&quot;</span>));</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca9e33ad23bfff813dbd1022af37762672">YARP_FEATURE_SATURATION</a>, checkDouble(config, <span class="stringliteral">&quot;saturation&quot;</span>));</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca5c25cc47446d924a67689a4af54d25fb">YARP_FEATURE_GAMMA</a>, checkDouble(config, <span class="stringliteral">&quot;gamma&quot;</span>));</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7cabf3009b9eb9429598eb3a06d7fb614bc">YARP_FEATURE_SHUTTER</a>, checkDouble(config, <span class="stringliteral">&quot;shutter&quot;</span>));</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">setFeature</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca87702ef72c21f90bebfa73fa77052faa">YARP_FEATURE_IRIS</a>, checkDouble(config, <span class="stringliteral">&quot;iris&quot;</span>));</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a7c55c7f09678660ee062601f4f4c81ea">  300</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classV4L__camera.html#a7c55c7f09678660ee062601f4f4c81ea">V4L_camera::getRgbHeight</a>()</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;{</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classV4L__camera.html#ae553d7af3e789b1662364d12e8f39b21">height</a>();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a12373ffebb76b14f0743f8c6aeff6da2">  305</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classV4L__camera.html#a12373ffebb76b14f0743f8c6aeff6da2">V4L_camera::getRgbWidth</a>()</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classV4L__camera.html#a97930cfea05ed32d41e27c7f6acd2848">width</a>();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;}</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="classV4L__camera.html#af5b526f73874728daffa5ec02f810509">  310</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#af5b526f73874728daffa5ec02f810509">V4L_camera::getRgbSupportedConfigurations</a>(<a class="code" href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::VectorOf&lt;CameraConfig&gt;</a>&amp; configurations)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    configurations = param.<a class="code" href="structVideo__params.html#a30b9a437f8567529c7505e3621222300">configurations</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="classV4L__camera.html#ab170599eea2c84bcf5bddd79142d1150">  315</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#ab170599eea2c84bcf5bddd79142d1150">V4L_camera::getRgbResolution</a>(<span class="keywordtype">int</span>&amp; width, <span class="keywordtype">int</span>&amp; height)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="classV4L__camera.html#a97930cfea05ed32d41e27c7f6acd2848">width</a> = param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="classV4L__camera.html#ae553d7af3e789b1662364d12e8f39b21">height</a> = param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a444ecec82cda991ca1886c4fc2307e5c">  322</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a444ecec82cda991ca1886c4fc2307e5c">V4L_camera::setRgbResolution</a>(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;{</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a85500356c2f7d1057d4568227e7f35b7">wait</a>();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    captureStop();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    deviceUninit();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> = <a class="code" href="classV4L__camera.html#a97930cfea05ed32d41e27c7f6acd2848">width</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a> = <a class="code" href="classV4L__camera.html#ae553d7af3e789b1662364d12e8f39b21">height</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordtype">bool</span> res = deviceInit();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    captureStart();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a80da4fca9bbce7a9c0f0485a2e9eeab9">  335</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a80da4fca9bbce7a9c0f0485a2e9eeab9">V4L_camera::getRgbFOV</a>(<span class="keywordtype">double</span>&amp; horizontalFov, <span class="keywordtype">double</span>&amp; verticalFov)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    horizontalFov = param.<a class="code" href="structVideo__params.html#abbe44c5c6b063a6d3d16712eb9cb4854">horizontalFov</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    verticalFov = param.<a class="code" href="structVideo__params.html#aef46e14f48d1751f03a43b4d6a8925b0">verticalFov</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> configFx &amp;&amp; configFy;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a383d6ac50d75f8f5c78c05628cf0b104">  342</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a383d6ac50d75f8f5c78c05628cf0b104">V4L_camera::setRgbFOV</a>(<span class="keywordtype">double</span> horizontalFov, <span class="keywordtype">double</span> verticalFov)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;cannot set fov&quot;</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a5f4b5454a295c31c0f2a890241a03bc9">  348</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a5f4b5454a295c31c0f2a890241a03bc9">V4L_camera::getRgbIntrinsicParam</a>(<a class="code" href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a>&amp; intrinsic)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    intrinsic = param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">return</span> configIntrins;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a0e500f85df662fc5afc0a7ede3c3b649">  354</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a0e500f85df662fc5afc0a7ede3c3b649">V4L_camera::getRgbMirroring</a>(<span class="keywordtype">bool</span>&amp; mirror)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;{</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    mirror = (ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, V4L2_CID_HFLIP) != 0);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a1174985d32b49dbf5da3e473eeb49021">  361</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a1174985d32b49dbf5da3e473eeb49021">V4L_camera::setRgbMirroring</a>(<span class="keywordtype">bool</span> mirror)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, V4L2_CID_HFLIP, &amp;mirror);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;V4L2_CID_HFLIP - Unable to mirror image-&quot;</span> &lt;&lt; strerror(errno);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="keywordtype">bool</span> V4L_camera::fromConfig(<a class="code" href="classyarp_1_1os_1_1Searchable.html">yarp::os::Searchable</a>&amp; config)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;verbose&quot;</span>)) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        verbose = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (!config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;width&quot;</span>)) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;width parameter not found, using default value of &quot;</span> &lt;&lt; <a class="code" href="V4L__camera_8h.html#a93493eb8fae5549bd5be67f3449245e0">DEFAULT_WIDTH</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> = <a class="code" href="V4L__camera_8h.html#a93493eb8fae5549bd5be67f3449245e0">DEFAULT_WIDTH</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;width&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">asInt32</a>();</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (!config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;height&quot;</span>)) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;height parameter not found, using default value of &quot;</span> &lt;&lt; <a class="code" href="V4L__camera_8h.html#a1879f9e5604a01f0983829846001ab23">DEFAULT_HEIGHT</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a> = <a class="code" href="V4L__camera_8h.html#a1879f9e5604a01f0983829846001ab23">DEFAULT_HEIGHT</a>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a> = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;height&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">asInt32</a>();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span> (!config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;framerate&quot;</span>)) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;framerate parameter not found, using default value of &quot;</span> &lt;&lt; <a class="code" href="V4L__camera_8h.html#a1fb0bde510a6add8f28e8361a4d00813">DEFAULT_FRAMERATE</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        param.<a class="code" href="structVideo__params.html#a27d5f61e86444e474b8e13856862268a">fps</a> = <a class="code" href="V4L__camera_8h.html#a1fb0bde510a6add8f28e8361a4d00813">DEFAULT_FRAMERATE</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        param.<a class="code" href="structVideo__params.html#a27d5f61e86444e474b8e13856862268a">fps</a> = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;framerate&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">asInt32</a>();</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (!config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;d&quot;</span>)) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;No camera identifier was specified! (e.g. &#39;--d /dev/video0&#39; on Linux OS)&quot;</span>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a> = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;d&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    param.<a class="code" href="structVideo__params.html#ae26ed0a556750e3e7c23e932dd67e0aa">flip</a> = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;flip&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(<span class="stringliteral">&quot;false&quot;</span>)).asBool();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (!config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;camModel&quot;</span>)) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;No &#39;camModel&#39; was specified, working with &#39;standard&#39; uvc&quot;</span>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        param.<a class="code" href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">camModel</a> = <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacda78c0d1b59eb75cc76daf62a03e1a43f3">STANDARD_UVC</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        std::map&lt;std::string, supported_cams&gt;::iterator it = camMap.find(config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;camModel&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>());</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordflow">if</span> (it != camMap.end()) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            param.<a class="code" href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">camModel</a> = it-&gt;second;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;cam model name : &quot;</span> &lt;&lt; config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;camModel&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>() &lt;&lt; <span class="stringliteral">&quot;  -- number : &quot;</span> &lt;&lt; it-&gt;second;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;Unknown camera model &lt;&quot;</span> &lt;&lt; config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;camModel&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">asString</a>() &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;Supported models are: &quot;</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">for</span> (it = camMap.begin(); it != camMap.end(); it++) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot; &lt;%s&gt;&quot;</span>, it-&gt;first.c_str());</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// Check for addictional leopard parameter for debugging purpose</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">camModel</a> == <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacdacebe991834d4f300ec5da5d5eef91729">LEOPARD_PYTHON</a>) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;-------------------------------\nusbCamera: Using leopard camera!!&quot;</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        bit_shift = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;shift&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(bit_shift), <span class="stringliteral">&quot;right shift of &lt;n&gt; bits&quot;</span>).asInt32();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        bit_bayer = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;bit_bayer&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(bit_bayer), <span class="stringliteral">&quot;uses &lt;n&gt; bits bayer conversion&quot;</span>).asInt32();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">switch</span> (bit_bayer) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            pixel_fmt_leo = V4L2_PIX_FMT_SGRBG8;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">case</span> 10:</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            pixel_fmt_leo = V4L2_PIX_FMT_SGRBG10;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">case</span> 12:</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            pixel_fmt_leo = V4L2_PIX_FMT_SGRBG12;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;bayer conversion with &quot;</span> &lt;&lt; bit_bayer &lt;&lt; <span class="stringliteral">&quot;not supported&quot;</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;--------------------------------&quot;</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; bit_shift &lt;&lt; <span class="stringliteral">&quot;bits of right shift applied to raw data&quot;</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;Bits used for de-bayer &quot;</span> &lt;&lt; bit_bayer;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">//crop is used to pass from 16:9 to 4:3</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span> (config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;crop&quot;</span>)) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        doCropping = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Cropping enabled.&quot;</span>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        doCropping = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a> isDual = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;dual&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0), <span class="stringliteral">&quot;Is this a dual camera? Two cameras merged into a single frame&quot;</span>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span> (config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;dual&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a3f49bd86a14537ca63f59297513e80eb">asBool</a>()) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        param.<a class="code" href="structVideo__params.html#ada050962ee6c8cc3af9427b4d8da2d05">dual</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Using dual input camera.&quot;</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        param.<a class="code" href="structVideo__params.html#ada050962ee6c8cc3af9427b4d8da2d05">dual</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">int</span> type = 0;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (!config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;pixelType&quot;</span>)) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;No &#39;pixelType&#39; was specified!&quot;</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        type = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">find</a>(<span class="stringliteral">&quot;pixelType&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">asInt32</a>();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4aee1fd390ce5dbd89ba1994759f609483">VOCAB_PIXEL_MONO</a>:</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="comment">// Pixel type raw is the native one from the camera</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        param.<a class="code" href="structVideo__params.html#a35d820842ea715d22d48b36b8ccbaa24">pixelType</a> = convertV4L_to_YARP_format(param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.pixelformat);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4afa5a4049fbf6c06a36e68803ea477af6">VOCAB_PIXEL_RGB</a>:</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">// is variable param.pixelType really required??</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        param.<a class="code" href="structVideo__params.html#a35d820842ea715d22d48b36b8ccbaa24">pixelType</a> = V4L2_PIX_FMT_RGB24;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;no valid pixel format found!! This should not happen!!&quot;</span>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>* retM;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    retM = Value::makeList(<span class="stringliteral">&quot;1.0 0.0 0.0 0.0 1.0 0.0 0.0 0.0 1.0&quot;</span>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    configFx = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;horizontalFov&quot;</span>);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    configFy = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;verticalFov&quot;</span>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    configPPx = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;principalPointX&quot;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    configPPy = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;principalPointY&quot;</span>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    configRet = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;rectificationMatrix&quot;</span>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    configDistM = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;distortionModel&quot;</span>);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classyarp_1_1os_1_1Bottle.html">Bottle</a> bt;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    bt = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#ac1d084873c863c7d4bcb8ca36cf84367">findGroup</a>(<span class="stringliteral">&quot;cameraDistortionModelGroup&quot;</span>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (!bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#ad014b5d06b10e037c462abfcf34a9e45">isNull</a>()) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;name&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#ac232fce34f45ca6b07d6b89d08bb2dab">isNull</a>() || bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;k1&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#ac232fce34f45ca6b07d6b89d08bb2dab">isNull</a>()</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            || bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;k2&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#ac232fce34f45ca6b07d6b89d08bb2dab">isNull</a>() || bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;k3&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#ac232fce34f45ca6b07d6b89d08bb2dab">isNull</a>()</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            || bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;t1&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#ac232fce34f45ca6b07d6b89d08bb2dab">isNull</a>() || bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">find</a>(<span class="stringliteral">&quot;t2&quot;</span>).<a class="code" href="classyarp_1_1os_1_1Value.html#ac232fce34f45ca6b07d6b89d08bb2dab">isNull</a>()) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;group cameraDistortionModelGroup incomplete, &quot;</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        <span class="stringliteral">&quot;fields k1, k2, k3, t1, t2, name are required when using cameraDistortionModelGroup&quot;</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            configIntrins = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            configIntrins = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        configIntrins = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    param.<a class="code" href="structVideo__params.html#abbe44c5c6b063a6d3d16712eb9cb4854">horizontalFov</a> = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;horizontalFov&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;desired horizontal fov of test image&quot;</span>).asFloat64();</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    param.<a class="code" href="structVideo__params.html#aef46e14f48d1751f03a43b4d6a8925b0">verticalFov</a> = config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;verticalFov&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;desired vertical fov of test image&quot;</span>).asFloat64();</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;mirror&quot;</span>)) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classV4L__camera.html#a1174985d32b49dbf5da3e473eeb49021">setRgbMirroring</a>(config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;mirror&quot;</span>,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                          <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0),</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                                          <span class="stringliteral">&quot;mirroring disabled by default&quot;</span>)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                 .asBool())) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;cannot set mirroring option&quot;</span>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;focalLengthX&quot;</span>, config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;focalLengthX&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;Horizontal component of the focal lenght&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;focalLengthY&quot;</span>, config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;focalLengthY&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;Vertical component of the focal lenght&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;principalPointX&quot;</span>, config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;principalPointX&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;X coordinate of the principal point&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;principalPointY&quot;</span>, config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;principalPointY&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;Y coordinate of the principal point&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;rectificationMatrix&quot;</span>, config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;rectificationMatrix&quot;</span>, *retM, <span class="stringliteral">&quot;Matrix that describes the lens&#39; distortion&quot;</span>));</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;distortionModel&quot;</span>, config.<a class="code" href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">check</a>(<span class="stringliteral">&quot;distortionModel&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(<span class="stringliteral">&quot;&quot;</span>), <span class="stringliteral">&quot;Reference to group of parameters describing the distortion model of the camera&quot;</span>).asString());</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> (bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#ad014b5d06b10e037c462abfcf34a9e45">isNull</a>()) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;k1&quot;</span>, 0.0);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;k2&quot;</span>, 0.0);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;k3&quot;</span>, 0.0);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;t1&quot;</span>, 0.0);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;t2&quot;</span>, 0.0);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;name&quot;</span>, bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">check</a>(<span class="stringliteral">&quot;name&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(<span class="stringliteral">&quot;&quot;</span>), <span class="stringliteral">&quot;Name of the distortion model&quot;</span>).asString());</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;k1&quot;</span>, bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">check</a>(<span class="stringliteral">&quot;k1&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;Radial distortion coefficient of the lens&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;k2&quot;</span>, bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">check</a>(<span class="stringliteral">&quot;k2&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;Radial distortion coefficient of the lens&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;k3&quot;</span>, bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">check</a>(<span class="stringliteral">&quot;k3&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;Radial distortion coefficient of the lens&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;t1&quot;</span>, bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">check</a>(<span class="stringliteral">&quot;t1&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;Tangential distortion of the lens&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        param.<a class="code" href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">intrinsic</a>.<a class="code" href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">put</a>(<span class="stringliteral">&quot;t2&quot;</span>, bt.<a class="code" href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">check</a>(<span class="stringliteral">&quot;t2&quot;</span>, <a class="code" href="classyarp_1_1os_1_1Value.html">Value</a>(0.0), <span class="stringliteral">&quot;Tangential distortion of the lens&quot;</span>).asFloat64());</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keyword">delete</span> retM;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;using following device &quot;</span> &lt;&lt; param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a> &lt;&lt; <span class="stringliteral">&quot;with the configuration: &quot;</span> &lt;&lt; param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a> &lt;&lt; <span class="stringliteral">&quot;; camModel is &quot;</span> &lt;&lt; param.<a class="code" href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">camModel</a>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keywordtype">int</span> V4L_camera::getfd()</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="keywordtype">bool</span> V4L_camera::threadInit()</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;{</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    timeStart = timeNow = timeElapsed = <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">yarp::os::Time::now</a>();</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    frameCounter = 0;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="keywordtype">void</span> V4L_camera::run()</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (full_FrameRead()) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        frameCounter++;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;Failed acquiring new frame&quot;</span>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    timeNow = <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">yarp::os::Time::now</a>();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> ((timeElapsed = timeNow - timeStart) &gt; 1.0f) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;frames acquired %d in %f sec&quot;</span>, frameCounter, timeElapsed);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        frameCounter = 0;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        timeStart = timeNow;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="keywordtype">void</span> V4L_camera::threadRelease()</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;{</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;}</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="keywordtype">bool</span> V4L_camera::deviceInit()</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;{</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keyword">struct </span>v4l2_capability cap;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keyword">struct </span>v4l2_cropcap cropcap;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keyword">struct </span>v4l2_crop crop;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keyword">struct </span>v4l2_streamparm frameint;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    configured = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QUERYCAP, &amp;cap)) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">if</span> (EINVAL == errno) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;%s is no V4L2 device&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <a class="code" href="list_8cpp.html#a6795b0f37503488654aff05f6459e6f2">list_cap_v4l2</a>(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span> (!(cap.capabilities &amp; V4L2_CAP_VIDEO_CAPTURE)) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;%s is no video capture device&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;%s is good V4L2_CAP_VIDEO_CAPTURE&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">switch</span> (param.<a class="code" href="structVideo__params.html#a5b7c774ace23f22fb356fdc63e365b96">io</a>) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a6d138b4c4e5691ae5318dca4a80e8e79">IO_METHOD_READ</a>:</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">if</span> (!(cap.capabilities &amp; V4L2_CAP_READWRITE)) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;%s does not support read i/o&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a086ff945a7be166d4e465dd5b8ae8749">IO_METHOD_MMAP</a>:</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27ab03186564baddf26b211a7b6fe7e8fe3">IO_METHOD_USERPTR</a>:</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">if</span> (!(cap.capabilities &amp; V4L2_CAP_STREAMING)) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;%s does not support streaming i/o&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Unknown io method for device %s&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(cropcap);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    cropcap.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">if</span> (0 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_CROPCAP, &amp;cropcap)) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        crop.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        crop.c = cropcap.defrect; <span class="comment">/* reset to default */</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="comment">/* Reset cropping to default if possible.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">         * Don&#39;t care about errors</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_S_CROP, &amp;crop);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    _v4lconvert_data = v4lconvert_create(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">if</span> (_v4lconvert_data == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;Failed to initialize v4lconvert. Conversion to required format may not work&quot;</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">     * dst_fmt is the image format the user require.</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">     * With try_format, V4l does an handshake with the camera and the best match from</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">     * the available formats provided by the camera is selected.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">     * src_fmt will contain the source format, i.e. the configuration to be sent to the</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">     * camera to optimize the conversion which will be done afterwards.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">     * VERY IMPORTANT NOTE:</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">     * In case no match is found for the user input provided in dst_fmt, than dst_fmt</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">     * itself may be changed to provide the best conversion possible similar to user</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">     * input. In particular, pixel format conversion together with rescaling may not</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">     * be possible to achieve. In this case only pixel format conversion will be done</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">     * and we need to take care of the rescaling.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width = param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height = param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.field = V4L2_FIELD_NONE;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.pixelformat = param.<a class="code" href="structVideo__params.html#a35d820842ea715d22d48b36b8ccbaa24">pixelType</a>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span> (v4lconvert_try_format(_v4lconvert_data, &amp;(param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>), &amp;(param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>)) != 0) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;v4lconvert_try_format -&gt; Error is: %s&quot;</span>, v4lconvert_get_error_message(_v4lconvert_data));</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="comment">// Check if dst_fmt has been changed by the v4lconvert_try_format</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width != param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> ||</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height != param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a> ||</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.pixelformat != param.<a class="code" href="structVideo__params.html#a35d820842ea715d22d48b36b8ccbaa24">pixelType</a>) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a677a97e364857e0eafefacd5cff5dc7e">yCWarning</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;Conversion from HW supported configuration into user requested format will require addictional step.\n&quot;</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;Performance issue may arise.&quot;</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        param.<a class="code" href="structVideo__params.html#abe4f447ff65a1f30e3370da83742e440">addictionalResize</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="comment">// Compute offsets for cropping image in case the source image and the one</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="comment">// required by the user have different form factors, i.e 16/9 vs 4/3</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordtype">double</span> inputFF = (double)param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width / (<span class="keywordtype">double</span>)param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordtype">double</span> outputFF = (double)param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> / (<span class="keywordtype">double</span>)param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="keywordflow">if</span> (outputFF &lt; inputFF) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <span class="comment">// Use all vertical pixels, crop lateral pixels to get the central portion of the image</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a> = 0;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            param.<a class="code" href="structVideo__params.html#a6e7d10b8280945d5e148ee0e12093a8e">resizeHeight</a> = param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keywordflow">if</span> (!param.<a class="code" href="structVideo__params.html#ada050962ee6c8cc3af9427b4d8da2d05">dual</a>) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a> = (param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width - (param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height * outputFF)) / 2;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a> = param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width - param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a> * 2;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a> = (param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width - (param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height * outputFF)) / 4; <span class="comment">//  &quot;/4&quot; is  &quot;/2&quot;  2 times because there are 2 images</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a> = param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width / 2 - param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a> * 2;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="comment">// Use all horizontal pixels, crop top/bottom pixels to get the central portion of the image</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a> = 0;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            <span class="keywordflow">if</span> (!param.<a class="code" href="structVideo__params.html#ada050962ee6c8cc3af9427b4d8da2d05">dual</a>) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a> = param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a> = (param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height - (param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width / outputFF)) / 2;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                param.<a class="code" href="structVideo__params.html#a6e7d10b8280945d5e148ee0e12093a8e">resizeHeight</a> = param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height - param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a> * 2;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a> = param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width / 2;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a> = (param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height - (param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width / outputFF)) / 2;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                param.<a class="code" href="structVideo__params.html#a6e7d10b8280945d5e148ee0e12093a8e">resizeHeight</a> = param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height - param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a> * 2;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        param.<a class="code" href="structVideo__params.html#abe4f447ff65a1f30e3370da83742e440">addictionalResize</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a> = 0;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a> = param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> / 2;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a> = 0;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        param.<a class="code" href="structVideo__params.html#a6e7d10b8280945d5e148ee0e12093a8e">resizeHeight</a> = param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_S_FMT, &amp;param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>)) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;xioctl error VIDIOC_S_FMT&quot;</span> &lt;&lt; strerror(errno);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">/* If the user has set the fps to -1, don&#39;t try to set the frame interval */</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a27d5f61e86444e474b8e13856862268a">fps</a> != -1) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(frameint);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="comment">/* Attempt to set the frame interval. */</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        frameint.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        frameint.parm.capture.timeperframe.numerator = 1;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        frameint.parm.capture.timeperframe.denominator = param.<a class="code" href="structVideo__params.html#a27d5f61e86444e474b8e13856862268a">fps</a>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_S_PARM, &amp;frameint)) {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Unable to set frame interval.&quot;</span>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    param.<a class="code" href="structVideo__params.html#af7afa851d905587fdace8c6f04b68f42">src_image_size</a> = param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.sizeimage;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    param.<a class="code" href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">src_image</a> = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[param.<a class="code" href="structVideo__params.html#af7afa851d905587fdace8c6f04b68f42">src_image_size</a>];</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    param.<a class="code" href="structVideo__params.html#af40c139681fd2b0cdfd996b62fcd981b">dst_image_size_rgb</a> = param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width * param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height * 3;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a> = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[param.<a class="code" href="structVideo__params.html#af40c139681fd2b0cdfd996b62fcd981b">dst_image_size_rgb</a>];</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// raw image is for non-standard type only, for example leopard_python</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">camModel</a> == <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacdacebe991834d4f300ec5da5d5eef91729">LEOPARD_PYTHON</a>) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="comment">/* This camera sends bayer 10bit over 2bytes for each piece of information,</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">         * therefore the total size of the image is 2 times the number of pixels.</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        param.<a class="code" href="structVideo__params.html#af885d554e7f90136dc0cc8d014ac0d67">raw_image_size</a> = param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.width * param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.height * 2;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        param.<a class="code" href="structVideo__params.html#a53cddeafaeb3bf7376801407dd690a43">raw_image</a> = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[param.<a class="code" href="structVideo__params.html#af885d554e7f90136dc0cc8d014ac0d67">raw_image_size</a>];</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        param.<a class="code" href="structVideo__params.html#a1711ba61ad9d83ed7493dc7743e228b2">read_image</a> = param.<a class="code" href="structVideo__params.html#a53cddeafaeb3bf7376801407dd690a43">raw_image</a>; <span class="comment">// store the image read in the raw_image buffer</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    } <span class="keywordflow">else</span> <span class="comment">// This buffer should not be used for STANDARD_UVC cameras</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        param.<a class="code" href="structVideo__params.html#a1711ba61ad9d83ed7493dc7743e228b2">read_image</a> = param.<a class="code" href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">src_image</a>; <span class="comment">// store the image read in the src_image buffer</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        param.<a class="code" href="structVideo__params.html#af885d554e7f90136dc0cc8d014ac0d67">raw_image_size</a> = 0;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        param.<a class="code" href="structVideo__params.html#a53cddeafaeb3bf7376801407dd690a43">raw_image</a> = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">switch</span> (param.<a class="code" href="structVideo__params.html#a5b7c774ace23f22fb356fdc63e365b96">io</a>) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a6d138b4c4e5691ae5318dca4a80e8e79">IO_METHOD_READ</a>:</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        readInit(param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.sizeimage);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a086ff945a7be166d4e465dd5b8ae8749">IO_METHOD_MMAP</a>:</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        mmapInit();</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27ab03186564baddf26b211a7b6fe7e8fe3">IO_METHOD_USERPTR</a>:</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        userptrInit(param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.sizeimage);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <a class="code" href="list_8cpp.html#ab7b03a3048121e5a8640ff5623a5e72b">query_current_image_fmt_v4l2</a>(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    configured = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="keywordtype">bool</span> V4L_camera::deviceUninit()</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    configured = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">switch</span> (param.<a class="code" href="structVideo__params.html#a5b7c774ace23f22fb356fdc63e365b96">io</a>) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a6d138b4c4e5691ae5318dca4a80e8e79">IO_METHOD_READ</a>:</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        free(param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[0].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a086ff945a7be166d4e465dd5b8ae8749">IO_METHOD_MMAP</a>:</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>; ++i) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            <span class="keywordflow">if</span> (-1 == v4l2_munmap(param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[i].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a>, param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[i].<a class="code" href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">length</a>)) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="comment">//             memset(param.req, 0, sizeof(struct v4l2_requestbuffers));</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.count = 0;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.memory = V4L2_MEMORY_MMAP;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="keywordflow">if</span> (xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_REQBUFS, &amp;param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>) &lt; 0) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_REQBUFS - Failed to delete buffers: %s (errno %d)&quot;</span>, strerror(errno), errno);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27ab03186564baddf26b211a7b6fe7e8fe3">IO_METHOD_USERPTR</a>:</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>; ++i) {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            free(param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[i].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a>);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        free(param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a53cddeafaeb3bf7376801407dd690a43">raw_image</a> != <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keyword">delete</span>[] param.<a class="code" href="structVideo__params.html#a53cddeafaeb3bf7376801407dd690a43">raw_image</a>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        param.<a class="code" href="structVideo__params.html#a53cddeafaeb3bf7376801407dd690a43">raw_image</a> = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">src_image</a> != <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keyword">delete</span>[] param.<a class="code" href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">src_image</a>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        param.<a class="code" href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">src_image</a> = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a> != <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keyword">delete</span>[] param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a> = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    }</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (_v4lconvert_data != <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        v4lconvert_destroy(_v4lconvert_data);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        _v4lconvert_data = <a class="code" href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;}</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a4cf8e60d06e8a5a2b0a0547da1d3cc8c">  869</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a4cf8e60d06e8a5a2b0a0547da1d3cc8c">V4L_camera::close</a>()</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;{</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="classyarp_1_1os_1_1PeriodicThread.html#ae7bfaf38164987a3cbb6179049c42e75">stop</a>(); <span class="comment">// stop yarp thread acquiring images</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a> != -1) {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        captureStop();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        deviceUninit();</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">if</span> (-1 == v4l2_close(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>)) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;Error closing V4l2 device&quot;</span>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a> = -1;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;}</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno"><a class="line" href="classV4L__camera.html#aea5755ac396f6f4d391baab0c3f4ee33">  888</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#aea5755ac396f6f4d391baab0c3f4ee33">V4L_camera::getImage</a>(<a class="code" href="classyarp_1_1sig_1_1ImageOf.html">yarp::sig::ImageOf&lt;yarp::sig::PixelRgb&gt;</a>&amp; image)</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;{</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    image.<a class="code" href="classyarp_1_1sig_1_1Image.html#a973864b80bf12a2f1575234d8d64fc37">resize</a>(<a class="code" href="classV4L__camera.html#a97930cfea05ed32d41e27c7f6acd2848">width</a>(), <a class="code" href="classV4L__camera.html#ae553d7af3e789b1662364d12e8f39b21">height</a>());</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordtype">bool</span> res = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a85500356c2f7d1057d4568227e7f35b7">wait</a>();</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> (configured) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        imagePreProcess();</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        imageProcess();</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordflow">if</span> (!param.<a class="code" href="structVideo__params.html#abe4f447ff65a1f30e3370da83742e440">addictionalResize</a>) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            memcpy(image.<a class="code" href="classyarp_1_1sig_1_1Image.html#a581675815272442f61670c023115ec77">getRawImage</a>(), param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a>, param.<a class="code" href="structVideo__params.html#af40c139681fd2b0cdfd996b62fcd981b">dst_image_size_rgb</a>);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            memcpy(image.<a class="code" href="classyarp_1_1sig_1_1Image.html#a581675815272442f61670c023115ec77">getRawImage</a>(), param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>.data, param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>.total() * 3);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        res = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;unable to get the buffer, device uninitialized&quot;</span>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        res = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;}</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno"><a class="line" href="classV4L__camera.html#ab2140bb60f11c71ed12b122823070ad9">  913</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#aea5755ac396f6f4d391baab0c3f4ee33">V4L_camera::getImage</a>(<a class="code" href="classyarp_1_1sig_1_1ImageOf.html">yarp::sig::ImageOf&lt;yarp::sig::PixelMono&gt;</a>&amp; image)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;{</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    image.<a class="code" href="classyarp_1_1sig_1_1Image.html#a973864b80bf12a2f1575234d8d64fc37">resize</a>(<a class="code" href="classV4L__camera.html#a97930cfea05ed32d41e27c7f6acd2848">width</a>(), <a class="code" href="classV4L__camera.html#ae553d7af3e789b1662364d12e8f39b21">height</a>());</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordtype">bool</span> res = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a85500356c2f7d1057d4568227e7f35b7">wait</a>();</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">if</span> (configured) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        imagePreProcess();</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        memcpy(image.<a class="code" href="classyarp_1_1sig_1_1Image.html#a581675815272442f61670c023115ec77">getRawImage</a>(), param.<a class="code" href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">src_image</a>, param.<a class="code" href="structVideo__params.html#af7afa851d905587fdace8c6f04b68f42">src_image_size</a>);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        res = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;unable to get the buffer, device uninitialized&quot;</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        res = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno"><a class="line" href="classV4L__camera.html#ae553d7af3e789b1662364d12e8f39b21">  935</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classV4L__camera.html#ae553d7af3e789b1662364d12e8f39b21">V4L_camera::height</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">     * return user setting because at the end of the day, this is what</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">     * the image must look like</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">return</span> param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;}</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a97930cfea05ed32d41e27c7f6acd2848">  948</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classV4L__camera.html#a97930cfea05ed32d41e27c7f6acd2848">V4L_camera::width</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">     * return user setting because at the end of the day, this is what</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">     * the image must look like</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">return</span> param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a>;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;}</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno"><a class="line" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">  965</a></span>&#160;<span class="keywordtype">int</span> V4L_camera::xioctl(<span class="keywordtype">int</span> fd, <span class="keywordtype">int</span> request, <span class="keywordtype">void</span>* argp)</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;{</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        r = v4l2_ioctl(fd, request, argp);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    } <span class="keywordflow">while</span> (-1 == r &amp;&amp; EINTR == errno);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;}</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="keyword">struct </span>v4l2_queryctrl <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="keyword">struct </span>v4l2_querymenu <a class="code" href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a>;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="keywordtype">void</span> V4L_camera::enumerate_menu()</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;{</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Menu items:&quot;</span>);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    memset(&amp;<a class="code" href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a>));</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a>.id = <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a>.index = (__u32)<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.minimum; <a class="code" href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a>.index &lt;= (__u32)<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.maximum; <a class="code" href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a>.index++) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordflow">if</span> (0 == ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QUERYMENU, &amp;<a class="code" href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a>)) {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot; %s&quot;</span>, <a class="code" href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a>.name);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QUERYMENU: %d, %s&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;}</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="keywordtype">bool</span> V4L_camera::enumerate_controls()</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;{</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    memset(&amp;<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>));</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id = V4L2_CID_BASE; <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id &lt; V4L2_CID_LASTP1; <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id++) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <span class="keywordflow">if</span> (0 == ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QUERYCTRL, &amp;<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>)) {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.flags &amp; V4L2_CTRL_FLAG_DISABLED) {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Control %s (id %d)&quot;</span>, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.name, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.type == V4L2_CTRL_TYPE_MENU) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                enumerate_menu();</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            }</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <span class="keywordflow">if</span> (errno == EINVAL) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QUERYCTRL: %d, %s&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id = V4L2_CID_PRIVATE_BASE;; <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id++) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keywordflow">if</span> (0 == ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QUERYCTRL, &amp;<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>)) {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.flags &amp; V4L2_CTRL_FLAG_DISABLED) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Control %s&quot;</span>, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.name);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.type == V4L2_CTRL_TYPE_MENU) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                enumerate_menu();</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <span class="keywordflow">if</span> (errno == EINVAL) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QUERYCTRL: %d, %s&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;}</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="keywordtype">bool</span> V4L_camera::full_FrameRead()</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;{</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordtype">bool</span> got_it = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordtype">void</span>* image_ret = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numberOfTimeouts;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    fd_set fds;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keyword">struct </span>timeval tv;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordtype">int</span> r;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    numberOfTimeouts = 0;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    count = 10; <span class="comment">//trials</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; count; i++) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        FD_ZERO(&amp;fds);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        FD_SET(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, &amp;fds);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="comment">/* Timeout. */</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        tv.tv_sec = 1;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        tv.tv_usec = 0;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        r = select(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a> + 1, &amp;fds, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, &amp;tv);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordflow">if</span> (r &lt; 0) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            <span class="keywordflow">if</span> (EINTR == errno) {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="keywordflow">return</span> image_ret != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        }</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">if</span> (0 == r) {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            numberOfTimeouts++;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a677a97e364857e0eafefacd5cff5dc7e">yCWarning</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;timeout while reading image [%d/%d]&quot;</span>, numberOfTimeouts, count);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                got_it = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((r &gt; 0) &amp;&amp; (FD_ISSET(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, &amp;fds))) {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            <span class="keywordflow">if</span> (frameRead()) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                <span class="comment">//yCTrace(USBCAMERA, &quot;got an image&quot;);</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                got_it = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a677a97e364857e0eafefacd5cff5dc7e">yCWarning</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;trial %d failed&quot;</span>, i);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a677a97e364857e0eafefacd5cff5dc7e">yCWarning</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;select woke up for something else&quot;</span>);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="comment">/* EAGAIN - continue select loop. */</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">return</span> got_it;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="keywordtype">bool</span> V4L_camera::frameRead()</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;{</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keyword">struct </span>v4l2_buffer buf;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a85500356c2f7d1057d4568227e7f35b7">wait</a>();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">switch</span> (param.<a class="code" href="structVideo__params.html#a5b7c774ace23f22fb356fdc63e365b96">io</a>) {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a6d138b4c4e5691ae5318dca4a80e8e79">IO_METHOD_READ</a>:</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">if</span> (-1 == v4l2_read(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[0].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a>, param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[0].<a class="code" href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">length</a>)) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        timeStamp.<a class="code" href="classyarp_1_1os_1_1Stamp.html#a2589971bf4eed0eb8d6c8f89b143efbc">update</a>(toEpochOffset + buf.timestamp.tv_sec + buf.timestamp.tv_usec / 1000000.0);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <span class="comment">//             imageProcess(param.buffers[0].start);</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a086ff945a7be166d4e465dd5b8ae8749">IO_METHOD_MMAP</a>:</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(buf);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        buf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        buf.memory = V4L2_MEMORY_MMAP;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_DQBUF, &amp;buf)) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;usbCamera VIDIOC_DQBUF&quot;</span>);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        }</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">if</span> (!(buf.index &lt; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>)) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        }</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        memcpy(param.<a class="code" href="structVideo__params.html#a1711ba61ad9d83ed7493dc7743e228b2">read_image</a>, param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[buf.index].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a>, param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[0].<a class="code" href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">length</a>);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <span class="comment">//            imageProcess(param.raw_image);</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        timeStamp.<a class="code" href="classyarp_1_1os_1_1Stamp.html#a2589971bf4eed0eb8d6c8f89b143efbc">update</a>(toEpochOffset + buf.timestamp.tv_sec + buf.timestamp.tv_usec / 1000000.0);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QBUF, &amp;buf)) {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QBUF&quot;</span>);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27ab03186564baddf26b211a7b6fe7e8fe3">IO_METHOD_USERPTR</a>:</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(buf);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        buf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        buf.memory = V4L2_MEMORY_USERPTR;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_DQBUF, &amp;buf)) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_DQBUF&quot;</span>);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>; ++i) {</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            <span class="keywordflow">if</span> (buf.m.userptr == (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[i].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a> &amp;&amp; buf.length == param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[i].<a class="code" href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">length</a>) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            }</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">if</span> (!(i &lt; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>)) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        }</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        memcpy(param.<a class="code" href="structVideo__params.html#a1711ba61ad9d83ed7493dc7743e228b2">read_image</a>, param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[buf.index].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a>, param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[0].<a class="code" href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">length</a>);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        timeStamp.<a class="code" href="classyarp_1_1os_1_1Stamp.html#a2589971bf4eed0eb8d6c8f89b143efbc">update</a>(toEpochOffset + buf.timestamp.tv_sec + buf.timestamp.tv_usec / 1000000.0);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QBUF, &amp;buf)) {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QBUF&quot;</span>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;frameRead no read method configured&quot;</span>);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    mutex.<a class="code" href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">post</a>();</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment"> * This function is intended to perform custom code to adapt</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment"> * non standard pixel types to a standard one, in order to</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment"> * use standard conversion libraries afterward.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="keywordtype">void</span> V4L_camera::imagePreProcess()</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;{</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">switch</span> (param.<a class="code" href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">camModel</a>) {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacdacebe991834d4f300ec5da5d5eef91729">LEOPARD_PYTHON</a>:</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        <span class="comment">// Here we are resizing the byte information from 10 to 8 bits.</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="comment">// Width and Height are not modified by this operation.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="keyword">const</span> uint _pixelNum = param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.width * param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.height;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        uint16_t* raw_p = (uint16_t*)param.<a class="code" href="structVideo__params.html#a53cddeafaeb3bf7376801407dd690a43">raw_image</a>;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        for (uint i = 0; i &lt; _pixelNum; i++) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            param.<a class="code" href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">src_image</a>[i] = (<span class="keywordtype">unsigned</span> char)(raw_p[i] &gt;&gt; bit_shift);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="comment">// Set the correct pixel type fot the v4l_convert to work on.</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.bytesperline = param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.width;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>.fmt.pix.pixelformat = pixel_fmt_leo;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacda78c0d1b59eb75cc76daf62a03e1a43f3">STANDARD_UVC</a>:</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="comment">// Nothing to do here</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    }</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;}</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="keywordtype">void</span> V4L_camera::imageProcess()</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;{</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> initted = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    timeStart = <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">yarp::os::Time::now</a>();</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="comment">// imagePreProcess() should already be called before entering here!!</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="comment">// src_fmt and dst_fmt must be alredy fixed up if needed!!</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="comment">// Convert from src type to RGB</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordflow">if</span> (v4lconvert_convert((v4lconvert_data*)_v4lconvert_data,</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                           &amp;param.<a class="code" href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">src_fmt</a>,</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                           &amp;param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>,</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                           param.<a class="code" href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">src_image</a>,</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                           param.<a class="code" href="structVideo__params.html#af7afa851d905587fdace8c6f04b68f42">src_image_size</a>,</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                           param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a>,</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                           param.<a class="code" href="structVideo__params.html#af40c139681fd2b0cdfd996b62fcd981b">dst_image_size_rgb</a>)</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        &lt; 0) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keywordflow">if</span> ((err % 20) == 0) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;error converting \n\t Error message is: %s&quot;</span>, v4lconvert_get_error_message(_v4lconvert_data));</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            err = 0;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        err++;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    }</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#abe4f447ff65a1f30e3370da83742e440">addictionalResize</a>) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">if</span> (!param.<a class="code" href="structVideo__params.html#ada050962ee6c8cc3af9427b4d8da2d05">dual</a>) {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            cv::Mat img(cv::Size(param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width, param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height), CV_8UC3, param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a>);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            cv::Rect crop(param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a>, param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a>, param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a>, param.<a class="code" href="structVideo__params.html#a6e7d10b8280945d5e148ee0e12093a8e">resizeHeight</a>);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            cv::resize(img(crop), param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>, cvSize(param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a>, param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a>), 0, 0, cv::INTER_CUBIC);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <span class="comment">// Load whole image in a cv::Mat</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            cv::Mat img(cv::Size(param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width, param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height), CV_8UC3, param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a>);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            cv::Mat img_right;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            cv::Rect crop(param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a>, param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a>, param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a>, param.<a class="code" href="structVideo__params.html#a6e7d10b8280945d5e148ee0e12093a8e">resizeHeight</a>);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            cv::resize(img(crop), param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>, cvSize(param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> / 2, param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a>), 0, 0, cv::INTER_CUBIC);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            cv::Rect crop2(param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a> + param.<a class="code" href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">resizeOffset_x</a> * 2, param.<a class="code" href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">resizeOffset_y</a>, param.<a class="code" href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">resizeWidth</a>, param.<a class="code" href="structVideo__params.html#a6e7d10b8280945d5e148ee0e12093a8e">resizeHeight</a>);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            cv::resize(img(crop2), img_right, cvSize(param.<a class="code" href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">user_width</a> / 2, param.<a class="code" href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">user_height</a>), 0, 0, cv::INTER_CUBIC);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            cv::hconcat(param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>, img_right, param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#ae26ed0a556750e3e7c23e932dd67e0aa">flip</a>) {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            cv::flip(param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>, param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>, 1);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        }</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#ae26ed0a556750e3e7c23e932dd67e0aa">flip</a>) {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            cv::Mat img(cv::Size(param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.width, param.<a class="code" href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">dst_fmt</a>.fmt.pix.height), CV_8UC3, param.<a class="code" href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">dst_image_rgb</a>);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a> = img;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            cv::flip(param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>, param.<a class="code" href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">outMat</a>, 1);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    timeElapsed = <a class="code" href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">yarp::os::Time::now</a>() - timeStart;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    myCounter++;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    timeTot += timeElapsed;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">if</span> ((myCounter % 60) == 0) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="keywordflow">if</span> (!initted) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            timeTot = 0;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            myCounter = 0;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            initted = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    }</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;}</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="keywordtype">void</span> V4L_camera::captureStop()</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;{</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = 0;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keywordtype">int</span> type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">switch</span> (param.<a class="code" href="structVideo__params.html#a5b7c774ace23f22fb356fdc63e365b96">io</a>) {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a6d138b4c4e5691ae5318dca4a80e8e79">IO_METHOD_READ</a>:</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="comment">//do nothing</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a086ff945a7be166d4e465dd5b8ae8749">IO_METHOD_MMAP</a>:</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_STREAMOFF, &amp;type);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &lt; 0) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="keywordflow">if</span> (errno != 9) { <span class="comment">/* errno = 9 means the capture was allready stoped*/</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_STREAMOFF - Unable to stop capture: %d, %s&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;}</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="keywordtype">void</span> V4L_camera::captureStart()</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;{</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keyword">enum</span> v4l2_buf_type type;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160; </div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">switch</span> (param.<a class="code" href="structVideo__params.html#a5b7c774ace23f22fb356fdc63e365b96">io</a>) {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a6d138b4c4e5691ae5318dca4a80e8e79">IO_METHOD_READ</a>:</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="comment">/* Nothing to do. */</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a086ff945a7be166d4e465dd5b8ae8749">IO_METHOD_MMAP</a>:</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>; ++i) {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            <span class="keyword">struct </span>v4l2_buffer buf;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(buf);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            buf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            buf.memory = V4L2_MEMORY_MMAP;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            buf.index = i;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QBUF, &amp;buf)) {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QBUF&quot;</span>);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        }</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160; </div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_STREAMON, &amp;type)) {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_STREAMON&quot;</span>);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        }</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27ab03186564baddf26b211a7b6fe7e8fe3">IO_METHOD_USERPTR</a>:</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>; ++i) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <span class="keyword">struct </span>v4l2_buffer buf;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(buf);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            buf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            buf.memory = V4L2_MEMORY_USERPTR;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            buf.index = i;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            buf.m.userptr = (<span class="keywordtype">unsigned</span> long)param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[i].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            buf.length = param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[i].<a class="code" href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">length</a>;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            if (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QBUF, &amp;buf)) {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QBUF&quot;</span>);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            }</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_STREAMON, &amp;type)) {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_STREAMON&quot;</span>);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="keywordtype">bool</span> V4L_camera::readInit(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> buffer_size)</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;{</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a> = (<span class="keyword">struct </span><a class="code" href="structbuffer.html">buffer</a>*)calloc(1, <span class="keyword">sizeof</span>(*(param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>)));</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;cannot allocate buffer, out of memory&quot;</span>);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    }</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[0].<a class="code" href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">length</a> = buffer_size;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[0].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a> = malloc(buffer_size);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[0].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;cannot allocate buffer, out of memory&quot;</span>);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="keywordtype">bool</span> V4L_camera::mmapInit()</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;{</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a> = <a class="code" href="V4L__camera_8h.html#a50b34ba92cdf1719e959917a170b086c">VIDIOC_REQBUFS_COUNT</a>;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.count = param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.memory = V4L2_MEMORY_MMAP;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160; </div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_REQBUFS, &amp;param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>)) {</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="keywordflow">if</span> (EINVAL == errno) {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;%s does not support memory mapping&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Error on device %s requesting memory mapping (VIDIOC_REQBUFS)&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    }</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.count &lt; 1) {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Insufficient buffer memory on %s&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.count == 1) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Only 1 buffer was available, you may encounter performance issue acquiring images from device %s&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160; </div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a> = (<span class="keyword">struct </span><a class="code" href="structbuffer.html">buffer</a>*)calloc(param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.count, <span class="keyword">sizeof</span>(*(param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>)));</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160; </div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keyword">struct </span>v4l2_buffer buf;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordflow">for</span> (param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a> = 0; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a> &lt; param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.count; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>++) {</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(buf);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        buf.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        buf.memory = V4L2_MEMORY_MMAP;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        buf.index = param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; </div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QUERYBUF, &amp;buf)) {</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QUERYBUF&quot;</span>);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        }</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>].<a class="code" href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">length</a> = buf.length;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a> = v4l2_mmap(<span class="keyword">nullptr</span>, buf.length, PROT_READ | PROT_WRITE, MAP_SHARED, param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, buf.m.offset);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <span class="keywordflow">if</span> (MAP_FAILED == param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a>) {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;mmap&quot;</span>);</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    }</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;}</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; </div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="keywordtype">bool</span> V4L_camera::userptrInit(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> buffer_size)</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;{</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> page_size;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160; </div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    page_size = getpagesize();</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    buffer_size = (buffer_size + page_size - 1) &amp; ~(page_size - 1);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <a class="code" href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a>(param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.count = <a class="code" href="V4L__camera_8h.html#a50b34ba92cdf1719e959917a170b086c">VIDIOC_REQBUFS_COUNT</a>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>.memory = V4L2_MEMORY_USERPTR;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; </div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="keywordflow">if</span> (-1 == xioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_REQBUFS, &amp;param.<a class="code" href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">req</a>)) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordflow">if</span> (EINVAL == errno) {</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;%s does not support user pointer i/o&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Error requesting VIDIOC_REQBUFS for device %s&quot;</span>, param.<a class="code" href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">deviceId</a>.c_str());</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    }</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a> = (<span class="keyword">struct </span><a class="code" href="structbuffer.html">buffer</a>*)calloc(4, <span class="keyword">sizeof</span>(*(param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>)));</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;cannot allocate buffer, out of memory&quot;</span>);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">for</span> (param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a> = 0; param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a> &lt; 4; ++param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>].<a class="code" href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">length</a> = buffer_size;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a> = memalign(<span class="comment">/* boundary */</span> page_size, buffer_size);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160; </div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">buffers</a>[param.<a class="code" href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">n_buffers</a>].<a class="code" href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">start</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;cannot allocate buffer, out of memory&quot;</span>);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        }</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;}</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="keywordtype">bool</span> V4L_camera::set_V4L2_control(uint32_t <span class="keywordtype">id</span>, <span class="keywordtype">double</span> value, <span class="keywordtype">bool</span> verbatim)</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;{</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordflow">if</span> (value &lt; 0) {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    }</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160; </div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keyword">struct </span>v4l2_queryctrl <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keyword">struct </span>v4l2_control control;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160; </div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    memset(&amp;<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>));</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id = id;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="keywordflow">if</span> (-1 == ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QUERYCTRL, &amp;<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>)) {</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        <span class="keywordflow">if</span> (errno != EINVAL) {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QUERYCTRL: %d, %s&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Cannot set control &lt;%s&gt; (id 0x%0X) is not supported&quot;</span>, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.name, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        }</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160; </div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.flags &amp; V4L2_CTRL_FLAG_DISABLED) {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Control %s is disabled&quot;</span>, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.name);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    }</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    memset(&amp;control, 0, <span class="keyword">sizeof</span>(control));</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    control.id = id;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">if</span> (verbatim) {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        control.value = value;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">camModel</a> == <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacdacebe991834d4f300ec5da5d5eef91729">LEOPARD_PYTHON</a>) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;            <span class="keywordflow">if</span> ((V4L2_CID_EXPOSURE == <span class="keywordtype">id</span>) || (V4L2_CID_EXPOSURE_ABSOLUTE == <span class="keywordtype">id</span>) || (V4L2_CID_EXPOSURE_AUTO == <span class="keywordtype">id</span>)) {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.maximum = 8000;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.minimum = 0;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        }</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        control.value = (int32_t)(value * (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.maximum - <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.minimum) + <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.minimum);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keywordflow">if</span> (-1 == ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_S_CTRL, &amp;control)) {</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_S_CTRL: %d, %s&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        <span class="keywordflow">if</span> (errno == ERANGE) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Normalized input value %f ( equivalent to raw value of %d) was out of range for control %s: Min and Max are: %d - %d&quot;</span>, value, control.value, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.name, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.minimum, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.maximum);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        }</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;set control %s to %d done!&quot;</span>, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.name, control.value);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160; </div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;}</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="keywordtype">bool</span> V4L_camera::check_V4L2_control(uint32_t <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;{</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="comment">//     yCTrace(USBCAMERA);</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keyword">struct </span>v4l2_queryctrl <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keyword">struct </span>v4l2_control control;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    memset(&amp;control, 0, <span class="keyword">sizeof</span>(control));</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    memset(&amp;<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>));</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    control.id = id;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id = id;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keywordflow">if</span> (-1 == ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QUERYCTRL, &amp;<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>)) {</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        <span class="keywordflow">if</span> (errno != EINVAL) {</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QUERYCTRL: %d, %s&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        }</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;}</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="keywordtype">double</span> V4L_camera::get_V4L2_control(uint32_t <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> verbatim)</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;{</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keyword">struct </span>v4l2_queryctrl <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keyword">struct </span>v4l2_control control;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; </div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    memset(&amp;control, 0, <span class="keyword">sizeof</span>(control));</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    memset(&amp;<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>));</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    control.id = id;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.id = id;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160; </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">if</span> (-1 == ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_QUERYCTRL, &amp;<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>)) {</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <span class="keywordflow">if</span> (errno != EINVAL) {</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_QUERYCTRL: %d, %s&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">return</span> -1.0;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    }</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160; </div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.flags &amp; V4L2_CTRL_FLAG_DISABLED) {</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;Control %s is disabled&quot;</span>, <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.name);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <span class="keywordflow">if</span> (-1 == ioctl(param.<a class="code" href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">fd</a>, VIDIOC_G_CTRL, &amp;control)) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>, <span class="stringliteral">&quot;VIDIOC_G_CTRL: %d, %s&quot;</span>, errno, strerror(errno));</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <span class="keywordflow">return</span> -1.0;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    }</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">if</span> (verbatim) {</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="keywordflow">return</span> control.value;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    }</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">if</span> (param.<a class="code" href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">camModel</a> == <a class="code" href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacdacebe991834d4f300ec5da5d5eef91729">LEOPARD_PYTHON</a>) {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <span class="keywordflow">if</span> ((V4L2_CID_EXPOSURE == <span class="keywordtype">id</span>) || (V4L2_CID_EXPOSURE_ABSOLUTE == <span class="keywordtype">id</span>) || (V4L2_CID_EXPOSURE_AUTO == <span class="keywordtype">id</span>)) {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;            <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.maximum = 8000;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.minimum = 0;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)(control.value - <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.minimum) / (<a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.maximum - <a class="code" href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a>.minimum);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;}</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160; </div>
<div class="line"><a name="l01614"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a7bc03aae430d6b853eaa6efbe07e2824"> 1614</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a7bc03aae430d6b853eaa6efbe07e2824">V4L_camera::getCameraDescription</a>(<a class="code" href="structCameraDescriptor.html">CameraDescriptor</a>* camera)</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;{</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    camera-&gt;<a class="code" href="structCameraDescriptor.html#ac561d9c58155f7f945630ae44da2420e">busType</a> = <a class="code" href="IFrameGrabberControls_8h.html#a5e19c75c2809d2f27eb33a29d1971b46a2f4f9ff60278d511660c21e211133666">BUS_USB</a>;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    camera-&gt;<a class="code" href="structCameraDescriptor.html#a2e19afe877eca17ad42e31ade96783a0">deviceDescription</a> = <span class="stringliteral">&quot;USB3 camera&quot;</span>;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;}</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160; </div>
<div class="line"><a name="l01621"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a50d309fddcec79aa4f67dda6e4a04c42"> 1621</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a50d309fddcec79aa4f67dda6e4a04c42">V4L_camera::hasFeature</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">bool</span>* _hasFeature)</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;{</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordtype">bool</span> tmpMan(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="keywordtype">bool</span> tmpAuto(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="keywordtype">bool</span> tmpOnce(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160; </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>:</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        tmpMan = check_V4L2_control(V4L2_CID_RED_BALANCE) &amp;&amp; check_V4L2_control(V4L2_CID_BLUE_BALANCE);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        tmpOnce = check_V4L2_control(V4L2_CID_DO_WHITE_BALANCE);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        tmpAuto = check_V4L2_control(V4L2_CID_AUTO_WHITE_BALANCE);</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160; </div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        tmpMan = check_V4L2_control(V4L2_CID_EXPOSURE) || check_V4L2_control(V4L2_CID_EXPOSURE_ABSOLUTE);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        tmpAuto = check_V4L2_control(V4L2_CID_EXPOSURE_AUTO);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        tmpMan = check_V4L2_control(convertYARP_to_V4L(feature));</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    *_hasFeature = tmpMan || tmpOnce || tmpAuto;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;}</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"><a class="line" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2"> 1648</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">V4L_camera::setFeature</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">double</span> value)</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;{</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        <span class="keywordflow">if</span> (use_exposure_absolute) {</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_EXPOSURE_ABSOLUTE, value);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_EXPOSURE, value);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        }</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(convertYARP_to_V4L(feature), value);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    }</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;}</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160; </div>
<div class="line"><a name="l01667"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a982084a0d87b59f273d34a0c28556a63"> 1667</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a982084a0d87b59f273d34a0c28556a63">V4L_camera::getFeature</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">double</span>* value)</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;{</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordtype">double</span> tmp = 0.0;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        <span class="keywordflow">if</span> (use_exposure_absolute) {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            tmp = get_V4L2_control(V4L2_CID_EXPOSURE_ABSOLUTE);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            tmp = get_V4L2_control(V4L2_CID_EXPOSURE);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        }</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        tmp = get_V4L2_control(convertYARP_to_V4L(feature));</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    }</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160; </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">if</span> (tmp == -1) {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    }</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    *value = tmp;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;}</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"><a class="line" href="classV4L__camera.html#aa5d74edd5cf571e27f381c9bc9edeba4"> 1692</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">V4L_camera::setFeature</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">double</span> value1, <span class="keywordtype">double</span> value2)</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;{</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">if</span> (feature == <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>) {</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &amp;= set_V4L2_control(V4L2_CID_AUTO_WHITE_BALANCE, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &amp;= set_V4L2_control(V4L2_CID_AUTO_N_PRESET_WHITE_BALANCE, V4L2_WHITE_BALANCE_MANUAL);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &amp;= set_V4L2_control(V4L2_CID_RED_BALANCE, value1);</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> &amp;= set_V4L2_control(V4L2_CID_BLUE_BALANCE, value2);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;}</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160; </div>
<div class="line"><a name="l01705"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a3d5f8a93f6c512d65f8207c35f3a8424"> 1705</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a982084a0d87b59f273d34a0c28556a63">V4L_camera::getFeature</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">double</span>* value1, <span class="keywordtype">double</span>* value2)</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;{</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">if</span> (feature == <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>) {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        *value1 = get_V4L2_control(V4L2_CID_RED_BALANCE);</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        *value2 = get_V4L2_control(V4L2_CID_BLUE_BALANCE);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="keywordflow">return</span> !((*value1 == -1) || (*value2 == -1));</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;}</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a68ff5ad2f44424b9450f544eab8e9f28"> 1715</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a68ff5ad2f44424b9450f544eab8e9f28">V4L_camera::hasOnOff</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">bool</span>* _hasOnOff)</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;{</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordtype">bool</span> _hasAuto;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="comment">// I can&#39;t find any meaning of setting a feature to off on V4l ... what it is supposed to do????</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="comment">// The following do have a way to set them auto/manual</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>:</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">hasAuto</a>(feature, &amp;_hasAuto)) {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            *_hasOnOff = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            *_hasOnOff = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="comment">// try it out</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        <a class="code" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">hasAuto</a>(feature, &amp;_hasAuto);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keywordflow">if</span> (_hasAuto) {</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            *_hasOnOff = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            *_hasOnOff = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    }</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;}</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160; </div>
<div class="line"><a name="l01743"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a762f38fd4422f0829b16a94f6980cfbe"> 1743</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a762f38fd4422f0829b16a94f6980cfbe">V4L_camera::setActive</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">bool</span> onoff)</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;{</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">// I can&#39;t find any meaning of setting a feature to off on V4l ... what it is supposed to do????</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="keywordtype">bool</span> tmp;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>:</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        tmp = set_V4L2_control(V4L2_CID_AUTO_WHITE_BALANCE, onoff);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        <span class="keywordflow">if</span> (tmp) {</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            isActive_vector[feature] = onoff;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        }</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        <span class="keywordflow">if</span> (onoff) {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            set_V4L2_control(V4L2_LOCK_EXPOSURE, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            <a class="code" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">hasAuto</a>(feature, &amp;tmp);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <span class="keywordflow">if</span> (tmp) {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                tmp = set_V4L2_control(V4L2_CID_EXPOSURE_AUTO, V4L2_EXPOSURE_AUTO);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                tmp = set_V4L2_control(V4L2_CID_EXPOSURE_AUTO, V4L2_EXPOSURE_MANUAL);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            }</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160; </div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;            <span class="keywordflow">if</span> (tmp) {</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                isActive_vector[feature] = onoff;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            }</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <span class="keywordtype">bool</span> man = set_V4L2_control(V4L2_CID_EXPOSURE_AUTO, V4L2_EXPOSURE_MANUAL);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            <span class="keywordflow">if</span> (!man) {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                man = set_V4L2_control(V4L2_CID_EXPOSURE_AUTO, V4L2_EXPOSURE_SHUTTER_PRIORITY, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                <span class="keywordflow">if</span> (!man) {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                    <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;Cannot set manual exposure&quot;</span>;</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                }</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            set_V4L2_control(V4L2_LOCK_EXPOSURE, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            isActive_vector[feature] = onoff;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="keywordflow">default</span>: <span class="comment">// what to do in each case?</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keywordflow">if</span> (onoff) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            isActive_vector[feature] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        }</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        isActive_vector[feature] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    }</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;}</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; </div>
<div class="line"><a name="l01793"></a><span class="lineno"><a class="line" href="classV4L__camera.html#aa6a447dd479a03cd92d54cef45536008"> 1793</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#aa6a447dd479a03cd92d54cef45536008">V4L_camera::getActive</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">bool</span>* _isActive)</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;{</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>:</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <span class="keywordtype">double</span> tmp = get_V4L2_control(V4L2_CID_AUTO_WHITE_BALANCE);</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        <span class="keywordflow">if</span> (tmp == 1) {</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            *_isActive = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            *_isActive = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        }</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    }</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160; </div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    {</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <span class="keywordtype">bool</span> _hasMan(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        <span class="keywordtype">bool</span> _hasMan2(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        <a class="code" href="classV4L__camera.html#a50d309fddcec79aa4f67dda6e4a04c42">hasFeature</a>(V4L2_CID_EXPOSURE, &amp;_hasMan) || <a class="code" href="classV4L__camera.html#a50d309fddcec79aa4f67dda6e4a04c42">hasFeature</a>(V4L2_CID_EXPOSURE_ABSOLUTE, &amp;_hasMan2); <span class="comment">// check manual version (normal and asbolute)</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        <span class="keywordtype">double</span> _hasAuto = get_V4L2_control(V4L2_CID_EXPOSURE_AUTO, <span class="keyword">true</span>); <span class="comment">// check auto version</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160; </div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        *_isActive = (_hasAuto == V4L2_EXPOSURE_AUTO) || _hasMan || _hasMan2;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    }</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160; </div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        *_isActive = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160; </div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;}</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160; </div>
<div class="line"><a name="l01826"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977"> 1826</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">V4L_camera::hasAuto</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">bool</span>* _hasAuto)</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;{</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>:</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        *_hasAuto = check_V4L2_control(V4L2_CID_AUTO_WHITE_BALANCE);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca3ef1568e8f7106b4616f6186518b447b">YARP_FEATURE_BRIGHTNESS</a>:</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        *_hasAuto = check_V4L2_control(V4L2_CID_AUTOBRIGHTNESS);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160; </div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7caea53ce4037d3f75effa2e1c896bc7e8a">YARP_FEATURE_GAIN</a>:</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        *_hasAuto = check_V4L2_control(V4L2_CID_AUTOGAIN);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160; </div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        *_hasAuto = check_V4L2_control(V4L2_CID_EXPOSURE_AUTO);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160; </div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4913b42184efec33c9fc45314e14cdf7">YARP_FEATURE_HUE</a>:</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        *_hasAuto = check_V4L2_control(V4L2_CID_HUE_AUTO);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160; </div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        *_hasAuto = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    }</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;}</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160; </div>
<div class="line"><a name="l01856"></a><span class="lineno"><a class="line" href="classV4L__camera.html#affb750ae4dcd069d4fa9abe6c5f9ae05"> 1856</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#affb750ae4dcd069d4fa9abe6c5f9ae05">V4L_camera::hasManual</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">bool</span>* _hasManual)</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;{</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordflow">if</span> (feature == <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>) {</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        *_hasManual = check_V4L2_control(V4L2_CID_RED_BALANCE) &amp;&amp; check_V4L2_control(V4L2_CID_BLUE_BALANCE);</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    }</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160; </div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">if</span> (feature == <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>) {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        *_hasManual = check_V4L2_control(V4L2_CID_EXPOSURE) || check_V4L2_control(V4L2_CID_EXPOSURE_ABSOLUTE);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    }</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classV4L__camera.html#a50d309fddcec79aa4f67dda6e4a04c42">hasFeature</a>(feature, _hasManual);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;}</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a4725839217b69cc72422a4e908d97e7d"> 1870</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a4725839217b69cc72422a4e908d97e7d">V4L_camera::hasOnePush</a>(<span class="keywordtype">int</span> feature, <span class="keywordtype">bool</span>* _hasOnePush)</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;{</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="comment">// I&#39;m not able to map a &#39;onePush&#39; request on V4L api</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>:</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        *_hasOnePush = check_V4L2_control(V4L2_CID_DO_WHITE_BALANCE);</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; </div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        *_hasOnePush = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    }</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;}</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160; </div>
<div class="line"><a name="l01885"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a2425d7b39c1726d92873d9d65872c8b8"> 1885</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a2425d7b39c1726d92873d9d65872c8b8">V4L_camera::setMode</a>(<span class="keywordtype">int</span> feature, <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0">FeatureMode</a> mode)</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;{</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>:</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        <span class="keywordflow">if</span> (mode == <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486">MODE_AUTO</a>) {</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_AUTO_WHITE_BALANCE, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_AUTO_WHITE_BALANCE, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        }</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160; </div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        <span class="keywordtype">bool</span> _tmpAuto;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        <a class="code" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">hasAuto</a>(V4L2_CID_EXPOSURE_AUTO, &amp;_tmpAuto);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        <span class="keywordflow">if</span> (_tmpAuto) {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            <span class="keywordflow">if</span> (mode == <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486">MODE_AUTO</a>) {</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_EXPOSURE_AUTO, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_EXPOSURE_AUTO, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = mode != <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486">MODE_AUTO</a>;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160; </div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7caea53ce4037d3f75effa2e1c896bc7e8a">YARP_FEATURE_GAIN</a>:</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;        <span class="keywordflow">if</span> (mode == <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486">MODE_AUTO</a>) {</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;GAIN: set mode auto&quot;</span>;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_AUTOGAIN, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;GAIN: set mode manual&quot;</span>;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_AUTOGAIN, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        }</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160; </div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca3ef1568e8f7106b4616f6186518b447b">YARP_FEATURE_BRIGHTNESS</a>:</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    {</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        <span class="keywordtype">bool</span> _tmpAuto;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <a class="code" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">hasAuto</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca3ef1568e8f7106b4616f6186518b447b">YARP_FEATURE_BRIGHTNESS</a>, &amp;_tmpAuto);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <span class="keywordflow">if</span> (_tmpAuto) {</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;            <span class="keywordflow">if</span> (mode == <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486">MODE_AUTO</a>) {</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_AUTOBRIGHTNESS, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_AUTOBRIGHTNESS, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;            }</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = mode != <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486">MODE_AUTO</a>;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        }</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    }</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160; </div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4913b42184efec33c9fc45314e14cdf7">YARP_FEATURE_HUE</a>:</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        <span class="keywordflow">if</span> (mode == <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486">MODE_AUTO</a>) {</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_HUE_AUTO, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;            <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = set_V4L2_control(V4L2_CID_HUE_AUTO, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        }</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; </div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(<a class="code" href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a>) &lt;&lt; <span class="stringliteral">&quot;Feature &quot;</span> &lt;&lt; feature &lt;&lt; <span class="stringliteral">&quot; does not support auto mode&quot;</span>;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    }</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a>;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;}</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"><a class="line" href="classV4L__camera.html#a0ab3ab0819a24ee622db6aa74f26217f"> 1954</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#a0ab3ab0819a24ee622db6aa74f26217f">V4L_camera::getMode</a>(<span class="keywordtype">int</span> feature, <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0">FeatureMode</a>* mode)</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;{</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keywordtype">bool</span> _tmpAuto;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <span class="keywordflow">switch</span> (feature) {</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>:</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    {</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = get_V4L2_control(V4L2_CID_AUTO_WHITE_BALANCE);</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        *mode = <a class="code" href="classyarp_1_1dev_1_1IFrameGrabberControls.html#ae5e966381c633b216b470b4a9c0ce01f">toFeatureMode</a>(<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> != 0.0);</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    }</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a>:</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = get_V4L2_control(V4L2_CID_EXPOSURE_AUTO);</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> == -1.0) {</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            *mode = <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0a52efbc15969a1887156a463d344c4b8e">MODE_MANUAL</a>;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        }</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160; </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> == V4L2_EXPOSURE_MANUAL) {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            *mode = <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0a52efbc15969a1887156a463d344c4b8e">MODE_MANUAL</a>;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            *mode = <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486">MODE_AUTO</a>;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        }</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    }</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160; </div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca3ef1568e8f7106b4616f6186518b447b">YARP_FEATURE_BRIGHTNESS</a>:</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        <a class="code" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">hasAuto</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca3ef1568e8f7106b4616f6186518b447b">YARP_FEATURE_BRIGHTNESS</a>, &amp;_tmpAuto);</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        *mode = <a class="code" href="classyarp_1_1dev_1_1IFrameGrabberControls.html#ae5e966381c633b216b470b4a9c0ce01f">toFeatureMode</a>(_tmpAuto);</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        <span class="keywordflow">if</span> (!_tmpAuto) {</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            *mode = <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0a52efbc15969a1887156a463d344c4b8e">MODE_MANUAL</a>;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            <span class="keywordtype">double</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = get_V4L2_control(V4L2_CID_AUTOBRIGHTNESS);</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            *mode = <a class="code" href="classyarp_1_1dev_1_1IFrameGrabberControls.html#ae5e966381c633b216b470b4a9c0ce01f">toFeatureMode</a>(<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> != 0.0);</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        }</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160; </div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7caea53ce4037d3f75effa2e1c896bc7e8a">YARP_FEATURE_GAIN</a>:</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        <a class="code" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">hasAuto</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7caea53ce4037d3f75effa2e1c896bc7e8a">YARP_FEATURE_GAIN</a>, &amp;_tmpAuto);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        *mode = <a class="code" href="classyarp_1_1dev_1_1IFrameGrabberControls.html#ae5e966381c633b216b470b4a9c0ce01f">toFeatureMode</a>(_tmpAuto);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        <span class="keywordflow">if</span> (!_tmpAuto) {</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;            *mode = <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0a52efbc15969a1887156a463d344c4b8e">MODE_MANUAL</a>;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            <span class="keywordtype">double</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = get_V4L2_control(V4L2_CID_AUTOGAIN);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            *mode = <a class="code" href="classyarp_1_1dev_1_1IFrameGrabberControls.html#ae5e966381c633b216b470b4a9c0ce01f">toFeatureMode</a>(<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> != 0.0);</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4913b42184efec33c9fc45314e14cdf7">YARP_FEATURE_HUE</a>:</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <a class="code" href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">hasAuto</a>(<a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4913b42184efec33c9fc45314e14cdf7">YARP_FEATURE_HUE</a>, &amp;_tmpAuto);</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        *mode = <a class="code" href="classyarp_1_1dev_1_1IFrameGrabberControls.html#ae5e966381c633b216b470b4a9c0ce01f">toFeatureMode</a>(_tmpAuto);</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        <span class="keywordflow">if</span> (!_tmpAuto) {</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;            *mode = <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0a52efbc15969a1887156a463d344c4b8e">MODE_MANUAL</a>;</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;            <span class="keywordtype">double</span> <a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> = get_V4L2_control(V4L2_CID_HUE_AUTO);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            *mode = <a class="code" href="classyarp_1_1dev_1_1IFrameGrabberControls.html#ae5e966381c633b216b470b4a9c0ce01f">toFeatureMode</a>(<a class="code" href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a> != 0.0);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        }</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160; </div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        *mode = <a class="code" href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0a52efbc15969a1887156a463d344c4b8e">MODE_MANUAL</a>;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    }</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;}</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160; </div>
<div class="line"><a name="l02021"></a><span class="lineno"><a class="line" href="classV4L__camera.html#aa0f156f0aae85706c1f3cf8c1d168039"> 2021</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classV4L__camera.html#aa0f156f0aae85706c1f3cf8c1d168039">V4L_camera::setOnePush</a>(<span class="keywordtype">int</span> feature)</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;{</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="comment">// I&#39;m not able to map a &#39;onePush&#39; request on each V4L api</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <span class="keywordflow">if</span> (feature == <a class="code" href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a>) {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;        <span class="keywordflow">return</span> set_V4L2_control(V4L2_CID_DO_WHITE_BALANCE, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    }</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;}</div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a5e19c75c2809d2f27eb33a29d1971b46a2f4f9ff60278d511660c21e211133666"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a5e19c75c2809d2f27eb33a29d1971b46a2f4f9ff60278d511660c21e211133666">BUS_USB</a></div><div class="ttdeci">@ BUS_USB</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00019">IFrameGrabberControls.h:18</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7ca19c3395b4fcacc21d78a10b773fa0d1c"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca19c3395b4fcacc21d78a10b773fa0d1c">YARP_FEATURE_SHARPNESS</a></div><div class="ttdeci">@ YARP_FEATURE_SHARPNESS</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00036">IFrameGrabberControls.h:36</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7ca3ef1568e8f7106b4616f6186518b447b"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca3ef1568e8f7106b4616f6186518b447b">YARP_FEATURE_BRIGHTNESS</a></div><div class="ttdeci">@ YARP_FEATURE_BRIGHTNESS</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00034">IFrameGrabberControls.h:34</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7ca4913b42184efec33c9fc45314e14cdf7"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4913b42184efec33c9fc45314e14cdf7">YARP_FEATURE_HUE</a></div><div class="ttdeci">@ YARP_FEATURE_HUE</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00038">IFrameGrabberControls.h:38</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca4df547bc4c98408084c2b40938a4e400">YARP_FEATURE_WHITE_BALANCE</a></div><div class="ttdeci">@ YARP_FEATURE_WHITE_BALANCE</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00037">IFrameGrabberControls.h:37</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7ca5c25cc47446d924a67689a4af54d25fb"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca5c25cc47446d924a67689a4af54d25fb">YARP_FEATURE_GAMMA</a></div><div class="ttdeci">@ YARP_FEATURE_GAMMA</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00040">IFrameGrabberControls.h:40</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca75cebb523b60405eff98051c7e12af6d">YARP_FEATURE_EXPOSURE</a></div><div class="ttdeci">@ YARP_FEATURE_EXPOSURE</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00035">IFrameGrabberControls.h:35</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7ca87702ef72c21f90bebfa73fa77052faa"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca87702ef72c21f90bebfa73fa77052faa">YARP_FEATURE_IRIS</a></div><div class="ttdeci">@ YARP_FEATURE_IRIS</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00043">IFrameGrabberControls.h:43</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7ca9e33ad23bfff813dbd1022af37762672"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7ca9e33ad23bfff813dbd1022af37762672">YARP_FEATURE_SATURATION</a></div><div class="ttdeci">@ YARP_FEATURE_SATURATION</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00039">IFrameGrabberControls.h:39</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7cabf3009b9eb9429598eb3a06d7fb614bc"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7cabf3009b9eb9429598eb3a06d7fb614bc">YARP_FEATURE_SHUTTER</a></div><div class="ttdeci">@ YARP_FEATURE_SHUTTER</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00041">IFrameGrabberControls.h:41</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_a79239ff26e3523a2969e48b9b69c0b7caea53ce4037d3f75effa2e1c896bc7e8a"><div class="ttname"><a href="IFrameGrabberControls_8h.html#a79239ff26e3523a2969e48b9b69c0b7caea53ce4037d3f75effa2e1c896bc7e8a">YARP_FEATURE_GAIN</a></div><div class="ttdeci">@ YARP_FEATURE_GAIN</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00042">IFrameGrabberControls.h:42</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_addf3d0bdd8c9014717d017adf1491be0"><div class="ttname"><a href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0">FeatureMode</a></div><div class="ttdeci">FeatureMode</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00021">IFrameGrabberControls.h:21</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_addf3d0bdd8c9014717d017adf1491be0a52efbc15969a1887156a463d344c4b8e"><div class="ttname"><a href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0a52efbc15969a1887156a463d344c4b8e">MODE_MANUAL</a></div><div class="ttdeci">@ MODE_MANUAL</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00023">IFrameGrabberControls.h:23</a></div></div>
<div class="ttc" id="aIFrameGrabberControls_8h_html_addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486"><div class="ttname"><a href="IFrameGrabberControls_8h.html#addf3d0bdd8c9014717d017adf1491be0adf9227ae7f4f43eb87b8648334d70486">MODE_AUTO</a></div><div class="ttdeci">@ MODE_AUTO</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00025">IFrameGrabberControls.h:24</a></div></div>
<div class="ttc" id="aImplementAxisInfo_8cpp_html_ab295c2135096172ff421e6b33358407d"><div class="ttname"><a href="ImplementAxisInfo_8cpp.html#ab295c2135096172ff421e6b33358407d">ret</a></div><div class="ttdeci">bool ret</div><div class="ttdef"><b>Definition:</b> <a href="ImplementAxisInfo_8cpp_source.html#l00070">ImplementAxisInfo.cpp:70</a></div></div>
<div class="ttc" id="aLogStream_8h_html"><div class="ttname"><a href="LogStream_8h.html">LogStream.h</a></div></div>
<div class="ttc" id="aLog_8cpp_html_a611cc9b5f655508482f3d7a9751c182a"><div class="ttname"><a href="Log_8cpp.html#a611cc9b5f655508482f3d7a9751c182a">CLEAR</a></div><div class="ttdeci">#define CLEAR</div><div class="ttdef"><b>Definition:</b> <a href="Log_8cpp_source.html#l00192">Log.cpp:192</a></div></div>
<div class="ttc" id="aUSBcameraLogComponent_8cpp_html_aba21069a8d6b182ca5be92a45e7a6208"><div class="ttname"><a href="USBcameraLogComponent_8cpp.html#aba21069a8d6b182ca5be92a45e7a6208">USBCAMERA</a></div><div class="ttdeci">const yarp::os::LogComponent &amp; USBCAMERA()</div><div class="ttdef"><b>Definition:</b> <a href="USBcameraLogComponent_8cpp_source.html#l00008">USBcameraLogComponent.cpp:8</a></div></div>
<div class="ttc" id="aUSBcameraLogComponent_8h_html"><div class="ttname"><a href="USBcameraLogComponent_8h.html">USBcameraLogComponent.h</a></div></div>
<div class="ttc" id="aV4L__camera_8cpp_html_a4599757ee13f72ce4fa8931ef7c3b5c5"><div class="ttname"><a href="V4L__camera_8cpp.html#a4599757ee13f72ce4fa8931ef7c3b5c5">queryctrl</a></div><div class="ttdeci">struct v4l2_queryctrl queryctrl</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00965">V4L_camera.cpp:980</a></div></div>
<div class="ttc" id="aV4L__camera_8cpp_html_a717981617f3ba9924718214be0336256"><div class="ttname"><a href="V4L__camera_8cpp.html#a717981617f3ba9924718214be0336256">getEpochTimeShift</a></div><div class="ttdeci">static double getEpochTimeShift()</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00025">V4L_camera.cpp:25</a></div></div>
<div class="ttc" id="aV4L__camera_8cpp_html_a7ca5f65882135b65a91fbe97f4a663d1"><div class="ttname"><a href="V4L__camera_8cpp.html#a7ca5f65882135b65a91fbe97f4a663d1">querymenu</a></div><div class="ttdeci">struct v4l2_querymenu querymenu</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00965">V4L_camera.cpp:981</a></div></div>
<div class="ttc" id="aV4L__camera_8cpp_html_ae51cc7b0e0c3e88577e6d075fa80c95a"><div class="ttname"><a href="V4L__camera_8cpp.html#ae51cc7b0e0c3e88577e6d075fa80c95a">NOT_PRESENT</a></div><div class="ttdeci">#define NOT_PRESENT</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00048">V4L_camera.cpp:48</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html"><div class="ttname"><a href="V4L__camera_8h.html">V4L_camera.h</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html_a1879f9e5604a01f0983829846001ab23"><div class="ttname"><a href="V4L__camera_8h.html#a1879f9e5604a01f0983829846001ab23">DEFAULT_HEIGHT</a></div><div class="ttdeci">#define DEFAULT_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00044">V4L_camera.h:44</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html_a1fb0bde510a6add8f28e8361a4d00813"><div class="ttname"><a href="V4L__camera_8h.html#a1fb0bde510a6add8f28e8361a4d00813">DEFAULT_FRAMERATE</a></div><div class="ttdeci">#define DEFAULT_FRAMERATE</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00045">V4L_camera.h:45</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html_a50b34ba92cdf1719e959917a170b086c"><div class="ttname"><a href="V4L__camera_8h.html#a50b34ba92cdf1719e959917a170b086c">VIDIOC_REQBUFS_COUNT</a></div><div class="ttdeci">#define VIDIOC_REQBUFS_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00046">V4L_camera.h:46</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html_a93493eb8fae5549bd5be67f3449245e0"><div class="ttname"><a href="V4L__camera_8h.html#a93493eb8fae5549bd5be67f3449245e0">DEFAULT_WIDTH</a></div><div class="ttdeci">#define DEFAULT_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00043">V4L_camera.h:43</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html_a981ad4215da813a58b928c703ac4cacda78c0d1b59eb75cc76daf62a03e1a43f3"><div class="ttname"><a href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacda78c0d1b59eb75cc76daf62a03e1a43f3">STANDARD_UVC</a></div><div class="ttdeci">@ STANDARD_UVC</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00057">V4L_camera.h:57</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html_a981ad4215da813a58b928c703ac4cacdacebe991834d4f300ec5da5d5eef91729"><div class="ttname"><a href="V4L__camera_8h.html#a981ad4215da813a58b928c703ac4cacdacebe991834d4f300ec5da5d5eef91729">LEOPARD_PYTHON</a></div><div class="ttdeci">@ LEOPARD_PYTHON</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00058">V4L_camera.h:58</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html_ac67fbcc615b56da3f9e3d51b1a2d2d27a086ff945a7be166d4e465dd5b8ae8749"><div class="ttname"><a href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a086ff945a7be166d4e465dd5b8ae8749">IO_METHOD_MMAP</a></div><div class="ttdeci">@ IO_METHOD_MMAP</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00051">V4L_camera.h:51</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html_ac67fbcc615b56da3f9e3d51b1a2d2d27a6d138b4c4e5691ae5318dca4a80e8e79"><div class="ttname"><a href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27a6d138b4c4e5691ae5318dca4a80e8e79">IO_METHOD_READ</a></div><div class="ttdeci">@ IO_METHOD_READ</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00050">V4L_camera.h:50</a></div></div>
<div class="ttc" id="aV4L__camera_8h_html_ac67fbcc615b56da3f9e3d51b1a2d2d27ab03186564baddf26b211a7b6fe7e8fe3"><div class="ttname"><a href="V4L__camera_8h.html#ac67fbcc615b56da3f9e3d51b1a2d2d27ab03186564baddf26b211a7b6fe7e8fe3">IO_METHOD_USERPTR</a></div><div class="ttdeci">@ IO_METHOD_USERPTR</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00052">V4L_camera.h:52</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a0ab3ab0819a24ee622db6aa74f26217f"><div class="ttname"><a href="classV4L__camera.html#a0ab3ab0819a24ee622db6aa74f26217f">V4L_camera::getMode</a></div><div class="ttdeci">bool getMode(int feature, FeatureMode *mode) override</div><div class="ttdoc">Get the current mode for the feature.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01954">V4L_camera.cpp:1954</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a0e500f85df662fc5afc0a7ede3c3b649"><div class="ttname"><a href="classV4L__camera.html#a0e500f85df662fc5afc0a7ede3c3b649">V4L_camera::getRgbMirroring</a></div><div class="ttdeci">bool getRgbMirroring(bool &amp;mirror) override</div><div class="ttdoc">Get the mirroring setting of the sensor.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00354">V4L_camera.cpp:354</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a1174985d32b49dbf5da3e473eeb49021"><div class="ttname"><a href="classV4L__camera.html#a1174985d32b49dbf5da3e473eeb49021">V4L_camera::setRgbMirroring</a></div><div class="ttdeci">bool setRgbMirroring(bool mirror) override</div><div class="ttdoc">Set the mirroring setting of the sensor.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00361">V4L_camera.cpp:361</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a12373ffebb76b14f0743f8c6aeff6da2"><div class="ttname"><a href="classV4L__camera.html#a12373ffebb76b14f0743f8c6aeff6da2">V4L_camera::getRgbWidth</a></div><div class="ttdeci">int getRgbWidth() override</div><div class="ttdoc">Return the width of each frame.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00305">V4L_camera.cpp:305</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a2425d7b39c1726d92873d9d65872c8b8"><div class="ttname"><a href="classV4L__camera.html#a2425d7b39c1726d92873d9d65872c8b8">V4L_camera::setMode</a></div><div class="ttdeci">bool setMode(int feature, FeatureMode mode) override</div><div class="ttdoc">Set the requested mode for the feature.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01885">V4L_camera.cpp:1885</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a2bb5522eb923d5a6c10b324377ba37b2"><div class="ttname"><a href="classV4L__camera.html#a2bb5522eb923d5a6c10b324377ba37b2">V4L_camera::getLastInputStamp</a></div><div class="ttdeci">yarp::os::Stamp getLastInputStamp() override</div><div class="ttdoc">Return the time stamp relative to the last acquisition.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00141">V4L_camera.cpp:141</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a383d6ac50d75f8f5c78c05628cf0b104"><div class="ttname"><a href="classV4L__camera.html#a383d6ac50d75f8f5c78c05628cf0b104">V4L_camera::setRgbFOV</a></div><div class="ttdeci">bool setRgbFOV(double horizontalFov, double verticalFov) override</div><div class="ttdoc">Set the field of view (FOV) of the rgb camera.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00342">V4L_camera.cpp:342</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a444ecec82cda991ca1886c4fc2307e5c"><div class="ttname"><a href="classV4L__camera.html#a444ecec82cda991ca1886c4fc2307e5c">V4L_camera::setRgbResolution</a></div><div class="ttdeci">bool setRgbResolution(int width, int height) override</div><div class="ttdoc">Set the resolution of the rgb image from the camera.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00322">V4L_camera.cpp:322</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a4725839217b69cc72422a4e908d97e7d"><div class="ttname"><a href="classV4L__camera.html#a4725839217b69cc72422a4e908d97e7d">V4L_camera::hasOnePush</a></div><div class="ttdeci">bool hasOnePush(int feature, bool *_hasOnePush) override</div><div class="ttdoc">Check if the requested feature has the 'onePush' mode.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01870">V4L_camera.cpp:1870</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a4cf8e60d06e8a5a2b0a0547da1d3cc8c"><div class="ttname"><a href="classV4L__camera.html#a4cf8e60d06e8a5a2b0a0547da1d3cc8c">V4L_camera::close</a></div><div class="ttdeci">bool close() override</div><div class="ttdoc">close device</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00869">V4L_camera.cpp:869</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a50d309fddcec79aa4f67dda6e4a04c42"><div class="ttname"><a href="classV4L__camera.html#a50d309fddcec79aa4f67dda6e4a04c42">V4L_camera::hasFeature</a></div><div class="ttdeci">bool hasFeature(int feature, bool *hasFeature) override</div><div class="ttdoc">Check if camera has the requested feature (saturation, brightness ...</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01621">V4L_camera.cpp:1621</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a5f4b5454a295c31c0f2a890241a03bc9"><div class="ttname"><a href="classV4L__camera.html#a5f4b5454a295c31c0f2a890241a03bc9">V4L_camera::getRgbIntrinsicParam</a></div><div class="ttdeci">bool getRgbIntrinsicParam(yarp::os::Property &amp;intrinsic) override</div><div class="ttdoc">Get the intrinsic parameters of the rgb camera.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00348">V4L_camera.cpp:348</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a68ff5ad2f44424b9450f544eab8e9f28"><div class="ttname"><a href="classV4L__camera.html#a68ff5ad2f44424b9450f544eab8e9f28">V4L_camera::hasOnOff</a></div><div class="ttdeci">bool hasOnOff(int feature, bool *_hasOnOff) override</div><div class="ttdoc">Check if the camera has the ability to turn on/off the requested feature.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01715">V4L_camera.cpp:1715</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a762f38fd4422f0829b16a94f6980cfbe"><div class="ttname"><a href="classV4L__camera.html#a762f38fd4422f0829b16a94f6980cfbe">V4L_camera::setActive</a></div><div class="ttdeci">bool setActive(int feature, bool onoff) override</div><div class="ttdoc">Set the requested feature on or off.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01743">V4L_camera.cpp:1743</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a7bc03aae430d6b853eaa6efbe07e2824"><div class="ttname"><a href="classV4L__camera.html#a7bc03aae430d6b853eaa6efbe07e2824">V4L_camera::getCameraDescription</a></div><div class="ttdeci">bool getCameraDescription(CameraDescriptor *camera) override</div><div class="ttdoc">Get a basic description of the camera hw.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01614">V4L_camera.cpp:1614</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a7c55c7f09678660ee062601f4f4c81ea"><div class="ttname"><a href="classV4L__camera.html#a7c55c7f09678660ee062601f4f4c81ea">V4L_camera::getRgbHeight</a></div><div class="ttdeci">int getRgbHeight() override</div><div class="ttdoc">Return the height of each frame.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00300">V4L_camera.cpp:300</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a80da4fca9bbce7a9c0f0485a2e9eeab9"><div class="ttname"><a href="classV4L__camera.html#a80da4fca9bbce7a9c0f0485a2e9eeab9">V4L_camera::getRgbFOV</a></div><div class="ttdeci">bool getRgbFOV(double &amp;horizontalFov, double &amp;verticalFov) override</div><div class="ttdoc">Get the field of view (FOV) of the rgb camera.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00335">V4L_camera.cpp:335</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a93b271d525e27b2623eacd87df2ed977"><div class="ttname"><a href="classV4L__camera.html#a93b271d525e27b2623eacd87df2ed977">V4L_camera::hasAuto</a></div><div class="ttdeci">bool hasAuto(int feature, bool *_hasAuto) override</div><div class="ttdoc">Check if the requested feature has the 'auto' mode.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01826">V4L_camera.cpp:1826</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a97930cfea05ed32d41e27c7f6acd2848"><div class="ttname"><a href="classV4L__camera.html#a97930cfea05ed32d41e27c7f6acd2848">V4L_camera::width</a></div><div class="ttdeci">int width() const override</div><div class="ttdoc">Return the width of each frame.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00948">V4L_camera.cpp:948</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a982084a0d87b59f273d34a0c28556a63"><div class="ttname"><a href="classV4L__camera.html#a982084a0d87b59f273d34a0c28556a63">V4L_camera::getFeature</a></div><div class="ttdeci">bool getFeature(int feature, double *value) override</div><div class="ttdoc">Get the current value for the requested feature.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01667">V4L_camera.cpp:1667</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_a9ec4aa6beea4021978de8ce8712b0937"><div class="ttname"><a href="classV4L__camera.html#a9ec4aa6beea4021978de8ce8712b0937">V4L_camera::V4L_camera</a></div><div class="ttdeci">V4L_camera()</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00087">V4L_camera.cpp:87</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_aa0f156f0aae85706c1f3cf8c1d168039"><div class="ttname"><a href="classV4L__camera.html#aa0f156f0aae85706c1f3cf8c1d168039">V4L_camera::setOnePush</a></div><div class="ttdeci">bool setOnePush(int feature) override</div><div class="ttdoc">Set the requested feature to a value (saturation, brightness ...</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l02021">V4L_camera.cpp:2021</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_aa1163a7f0fc2b41dc5ede2be88acf5f2"><div class="ttname"><a href="classV4L__camera.html#aa1163a7f0fc2b41dc5ede2be88acf5f2">V4L_camera::setFeature</a></div><div class="ttdeci">bool setFeature(int feature, double value) override</div><div class="ttdoc">Set the requested feature to a value (saturation, brightness ...</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01648">V4L_camera.cpp:1648</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_aa6a447dd479a03cd92d54cef45536008"><div class="ttname"><a href="classV4L__camera.html#aa6a447dd479a03cd92d54cef45536008">V4L_camera::getActive</a></div><div class="ttdeci">bool getActive(int feature, bool *_isActive) override</div><div class="ttdoc">Get the current status of the feature, on or off.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01793">V4L_camera.cpp:1793</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_ab170599eea2c84bcf5bddd79142d1150"><div class="ttname"><a href="classV4L__camera.html#ab170599eea2c84bcf5bddd79142d1150">V4L_camera::getRgbResolution</a></div><div class="ttdeci">bool getRgbResolution(int &amp;width, int &amp;height) override</div><div class="ttdoc">Get the resolution of the rgb image from the camera.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00315">V4L_camera.cpp:315</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_ae553d7af3e789b1662364d12e8f39b21"><div class="ttname"><a href="classV4L__camera.html#ae553d7af3e789b1662364d12e8f39b21">V4L_camera::height</a></div><div class="ttdeci">int height() const override</div><div class="ttdoc">Return the height of each frame.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00935">V4L_camera.cpp:935</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_aea5755ac396f6f4d391baab0c3f4ee33"><div class="ttname"><a href="classV4L__camera.html#aea5755ac396f6f4d391baab0c3f4ee33">V4L_camera::getImage</a></div><div class="ttdeci">bool getImage(yarp::sig::ImageOf&lt; yarp::sig::PixelRgb &gt; &amp;image) override</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00888">V4L_camera.cpp:888</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_af5b526f73874728daffa5ec02f810509"><div class="ttname"><a href="classV4L__camera.html#af5b526f73874728daffa5ec02f810509">V4L_camera::getRgbSupportedConfigurations</a></div><div class="ttdeci">bool getRgbSupportedConfigurations(yarp::sig::VectorOf&lt; yarp::dev::CameraConfig &gt; &amp;configurations) override</div><div class="ttdoc">Get the possible configurations of the camera.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00310">V4L_camera.cpp:310</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_afc2ee406af9137b5111848af0f9b7071"><div class="ttname"><a href="classV4L__camera.html#afc2ee406af9137b5111848af0f9b7071">V4L_camera::open</a></div><div class="ttdeci">bool open(yarp::os::Searchable &amp;config) override</div><div class="ttdoc">open device</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l00221">V4L_camera.cpp:221</a></div></div>
<div class="ttc" id="aclassV4L__camera_html_affb750ae4dcd069d4fa9abe6c5f9ae05"><div class="ttname"><a href="classV4L__camera.html#affb750ae4dcd069d4fa9abe6c5f9ae05">V4L_camera::hasManual</a></div><div class="ttdeci">bool hasManual(int feature, bool *_hasManual) override</div><div class="ttdoc">Check if the requested feature has the 'manual' mode.</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8cpp_source.html#l01856">V4L_camera.cpp:1856</a></div></div>
<div class="ttc" id="aclassyarp_1_1dev_1_1IFrameGrabberControls_html_ae5e966381c633b216b470b4a9c0ce01f"><div class="ttname"><a href="classyarp_1_1dev_1_1IFrameGrabberControls.html#ae5e966381c633b216b470b4a9c0ce01f">yarp::dev::IFrameGrabberControls::toFeatureMode</a></div><div class="ttdeci">FeatureMode toFeatureMode(bool _auto)</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00232">IFrameGrabberControls.h:232</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html">yarp::os::Bottle</a></div><div class="ttdoc">A simple collection of objects that can be described and transmitted in a portable way.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8h_source.html#l00073">Bottle.h:74</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a6cd61ddbda2c4970bbe8087cf5986e42"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a6cd61ddbda2c4970bbe8087cf5986e42">yarp::os::Bottle::get</a></div><div class="ttdeci">Value &amp; get(size_type index) const</div><div class="ttdoc">Reads a Value v from a certain part of the list.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00246">Bottle.cpp:246</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_a9a98533da1dfef02172cfcae62439f00"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#a9a98533da1dfef02172cfcae62439f00">yarp::os::Bottle::check</a></div><div class="ttdeci">bool check(const std::string &amp;key) const override</div><div class="ttdoc">Check if there exists a property of the given name.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00277">Bottle.cpp:277</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_ad014b5d06b10e037c462abfcf34a9e45"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#ad014b5d06b10e037c462abfcf34a9e45">yarp::os::Bottle::isNull</a></div><div class="ttdeci">bool isNull() const override</div><div class="ttdoc">Checks if the object is invalid.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00370">Bottle.cpp:370</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Bottle_html_aeed416df930c8e0f599e5fcbebb66324"><div class="ttname"><a href="classyarp_1_1os_1_1Bottle.html#aeed416df930c8e0f599e5fcbebb66324">yarp::os::Bottle::find</a></div><div class="ttdeci">Value &amp; find(const std::string &amp;key) const override</div><div class="ttdoc">Gets a value corresponding to a given keyword.</div><div class="ttdef"><b>Definition:</b> <a href="Bottle_8cpp_source.html#l00287">Bottle.cpp:287</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1PeriodicThread_html"><div class="ttname"><a href="classyarp_1_1os_1_1PeriodicThread.html">yarp::os::PeriodicThread</a></div><div class="ttdoc">An abstraction for a periodic thread.</div><div class="ttdef"><b>Definition:</b> <a href="PeriodicThread_8h_source.html#l00027">PeriodicThread.h:28</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1PeriodicThread_html_abf3184a8c1c38830b7813c9205b36ea3"><div class="ttname"><a href="classyarp_1_1os_1_1PeriodicThread.html#abf3184a8c1c38830b7813c9205b36ea3">yarp::os::PeriodicThread::start</a></div><div class="ttdeci">bool start()</div><div class="ttdoc">Call this to start the thread.</div><div class="ttdef"><b>Definition:</b> <a href="PeriodicThread_8cpp_source.html#l00382">PeriodicThread.cpp:382</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1PeriodicThread_html_ae7bfaf38164987a3cbb6179049c42e75"><div class="ttname"><a href="classyarp_1_1os_1_1PeriodicThread.html#ae7bfaf38164987a3cbb6179049c42e75">yarp::os::PeriodicThread::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdoc">Call this to stop the thread, this call blocks until the thread is terminated (and releaseThread() ca...</div><div class="ttdef"><b>Definition:</b> <a href="PeriodicThread_8cpp_source.html#l00367">PeriodicThread.cpp:367</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html">yarp::os::Property</a></div><div class="ttdoc">A class for storing options and configuration information.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8h_source.html#l00031">Property.h:34</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Property_html_a2c90f76cba15b8cc9d1c88cf55b253a1"><div class="ttname"><a href="classyarp_1_1os_1_1Property.html#a2c90f76cba15b8cc9d1c88cf55b253a1">yarp::os::Property::put</a></div><div class="ttdeci">void put(const std::string &amp;key, const std::string &amp;value)</div><div class="ttdoc">Associate the given key with the given string.</div><div class="ttdef"><b>Definition:</b> <a href="Property_8cpp_source.html#l01015">Property.cpp:1015</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html">yarp::os::Searchable</a></div><div class="ttdoc">A base class for nested structures that can be searched.</div><div class="ttdef"><b>Definition:</b> <a href="Searchable_8h_source.html#l00065">Searchable.h:66</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_a4a254e53809b70f78822c7f0e1b2b5c6"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#a4a254e53809b70f78822c7f0e1b2b5c6">yarp::os::Searchable::find</a></div><div class="ttdeci">virtual Value &amp; find(const std::string &amp;key) const =0</div><div class="ttdoc">Gets a value corresponding to a given keyword.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_aa7b406215b653817f2450ac416b65867"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#aa7b406215b653817f2450ac416b65867">yarp::os::Searchable::check</a></div><div class="ttdeci">virtual bool check(const std::string &amp;key) const =0</div><div class="ttdoc">Check if there exists a property of the given name.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_aa8e76c64a9251dc4485022aa7140d150"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#aa8e76c64a9251dc4485022aa7140d150">yarp::os::Searchable::toString</a></div><div class="ttdeci">virtual std::string toString() const =0</div><div class="ttdoc">Return a standard text representation of the content of the object.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Searchable_html_ac1d084873c863c7d4bcb8ca36cf84367"><div class="ttname"><a href="classyarp_1_1os_1_1Searchable.html#ac1d084873c863c7d4bcb8ca36cf84367">yarp::os::Searchable::findGroup</a></div><div class="ttdeci">virtual Bottle &amp; findGroup(const std::string &amp;key) const =0</div><div class="ttdoc">Gets a list corresponding to a given keyword.</div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Semaphore_html_a85500356c2f7d1057d4568227e7f35b7"><div class="ttname"><a href="classyarp_1_1os_1_1Semaphore.html#a85500356c2f7d1057d4568227e7f35b7">yarp::os::Semaphore::wait</a></div><div class="ttdeci">void wait()</div><div class="ttdoc">Decrement the counter, even if we must wait to do that.</div><div class="ttdef"><b>Definition:</b> <a href="Semaphore_8cpp_source.html#l00096">Semaphore.cpp:96</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Semaphore_html_a99bb4da0df09d6f3181c2a376dd5b8f0"><div class="ttname"><a href="classyarp_1_1os_1_1Semaphore.html#a99bb4da0df09d6f3181c2a376dd5b8f0">yarp::os::Semaphore::post</a></div><div class="ttdeci">void post()</div><div class="ttdoc">Increment the counter.</div><div class="ttdef"><b>Definition:</b> <a href="Semaphore_8cpp_source.html#l00111">Semaphore.cpp:111</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Stamp_html"><div class="ttname"><a href="classyarp_1_1os_1_1Stamp.html">yarp::os::Stamp</a></div><div class="ttdoc">An abstraction for a time stamp and/or sequence number.</div><div class="ttdef"><b>Definition:</b> <a href="Stamp_8h_source.html#l00021">Stamp.h:22</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Stamp_html_a2589971bf4eed0eb8d6c8f89b143efbc"><div class="ttname"><a href="classyarp_1_1os_1_1Stamp.html#a2589971bf4eed0eb8d6c8f89b143efbc">yarp::os::Stamp::update</a></div><div class="ttdeci">void update()</div><div class="ttdoc">Set the timestamp to the current time, and increment the sequence number (wrapping to 0 if the sequen...</div><div class="ttdef"><b>Definition:</b> <a href="Stamp_8cpp_source.html#l00124">Stamp.cpp:124</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html">yarp::os::Value</a></div><div class="ttdoc">A single value (typically within a Bottle).</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00044">Value.h:45</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a0003d9cf199c58ecd412825528fe10d0"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a0003d9cf199c58ecd412825528fe10d0">yarp::os::Value::asFloat64</a></div><div class="ttdeci">virtual yarp::conf::float64_t asFloat64() const</div><div class="ttdoc">Get 64-bit floating point value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00222">Value.cpp:222</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a3f49bd86a14537ca63f59297513e80eb"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a3f49bd86a14537ca63f59297513e80eb">yarp::os::Value::asBool</a></div><div class="ttdeci">virtual bool asBool() const</div><div class="ttdoc">Get boolean value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00186">Value.cpp:186</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_a4775a45e57c40460b0202c74f1a9bc4e"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#a4775a45e57c40460b0202c74f1a9bc4e">yarp::os::Value::asInt32</a></div><div class="ttdeci">virtual std::int32_t asInt32() const</div><div class="ttdoc">Get 32-bit integer value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00204">Value.cpp:204</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_ac232fce34f45ca6b07d6b89d08bb2dab"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#ac232fce34f45ca6b07d6b89d08bb2dab">yarp::os::Value::isNull</a></div><div class="ttdeci">bool isNull() const override</div><div class="ttdoc">Checks if the object is invalid.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00380">Value.cpp:380</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Value_html_af2125ceb5eb007b6cd6ab77666682117"><div class="ttname"><a href="classyarp_1_1os_1_1Value.html#af2125ceb5eb007b6cd6ab77666682117">yarp::os::Value::asString</a></div><div class="ttdeci">virtual std::string asString() const</div><div class="ttdoc">Get string value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00234">Value.cpp:234</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1ImageOf_html"><div class="ttname"><a href="classyarp_1_1sig_1_1ImageOf.html">yarp::sig::ImageOf&lt; yarp::sig::PixelRgb &gt;</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_a581675815272442f61670c023115ec77"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#a581675815272442f61670c023115ec77">yarp::sig::Image::getRawImage</a></div><div class="ttdeci">unsigned char * getRawImage() const</div><div class="ttdoc">Access to the internal image buffer.</div><div class="ttdef"><b>Definition:</b> <a href="Image_8cpp_source.html#l00541">Image.cpp:541</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1Image_html_a973864b80bf12a2f1575234d8d64fc37"><div class="ttname"><a href="classyarp_1_1sig_1_1Image.html#a973864b80bf12a2f1575234d8d64fc37">yarp::sig::Image::resize</a></div><div class="ttdeci">void resize(size_t imgWidth, size_t imgHeight)</div><div class="ttdoc">Reallocate an image to be of a desired size, throwing away its current contents.</div><div class="ttdef"><b>Definition:</b> <a href="Image_8cpp_source.html#l00452">Image.cpp:452</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1VectorOf_html"><div class="ttname"><a href="classyarp_1_1sig_1_1VectorOf.html">yarp::sig::VectorOf</a></div><div class="ttdoc">Provides:</div><div class="ttdef"><b>Definition:</b> <a href="Vector_8h_source.html#l00118">Vector.h:119</a></div></div>
<div class="ttc" id="aclassyarp_1_1sig_1_1VectorOf_html_a3b340b29d04e3fd3edaaf8aaba1ac41d"><div class="ttname"><a href="classyarp_1_1sig_1_1VectorOf.html#a3b340b29d04e3fd3edaaf8aaba1ac41d">yarp::sig::VectorOf::push_back</a></div><div class="ttdeci">void push_back(const T &amp;elem)</div><div class="ttdoc">Push a new element in the vector: size is changed.</div><div class="ttdef"><b>Definition:</b> <a href="Vector_8h_source.html#l00250">Vector.h:250</a></div></div>
<div class="ttc" id="acompiler_8h_html_a23abdfbfa658e1f341f9d044ffd090b3"><div class="ttname"><a href="compiler_8h.html#a23abdfbfa658e1f341f9d044ffd090b3">YARP_NULLPTR</a></div><div class="ttdeci">#define YARP_NULLPTR</div><div class="ttdoc">Expands to either the standard nullptr or to 0 elsewhere.</div><div class="ttdef"><b>Definition:</b> <a href="compiler_8h_source.html#l02937">compiler.h:2937</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a18e11e963a9867766b3ac49614348799"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a></div><div class="ttdeci">#define yCInfo(component,...)</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00132">LogComponent.h:132</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a224fd66c5d833ba0367a2ed54bcc279a"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a></div><div class="ttdeci">#define yCError(component,...)</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00154">LogComponent.h:154</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a3ffb0d629a2cfebb6abdc73e93a11bce"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a3ffb0d629a2cfebb6abdc73e93a11bce">yCTrace</a></div><div class="ttdeci">#define yCTrace(component,...)</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00085">LogComponent.h:85</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a677a97e364857e0eafefacd5cff5dc7e"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a677a97e364857e0eafefacd5cff5dc7e">yCWarning</a></div><div class="ttdeci">#define yCWarning(component,...)</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00143">LogComponent.h:143</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a8227343e844aca96bb821dd566d8cbb2"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a8227343e844aca96bb821dd566d8cbb2">yCDebug</a></div><div class="ttdeci">#define yCDebug(component,...)</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00109">LogComponent.h:109</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2Time_8h_html"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2Time_8h.html">Time.h</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4">YarpVocabPixelTypesEnum</a></div><div class="ttdeci">YarpVocabPixelTypesEnum</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00042">Image.h:43</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4a0251518b09a80ca69fb280de9a426f36"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a0251518b09a80ca69fb280de9a426f36">VOCAB_PIXEL_ENCODING_BAYER_BGGR16</a></div><div class="ttdeci">@ VOCAB_PIXEL_ENCODING_BAYER_BGGR16</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00062">Image.h:62</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4a119739a88920900f75992188d99f8e27"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a119739a88920900f75992188d99f8e27">VOCAB_PIXEL_YUV_420</a></div><div class="ttdeci">@ VOCAB_PIXEL_YUV_420</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00067">Image.h:67</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4a27d76c9893d80f63662832d3ed725fb7"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a27d76c9893d80f63662832d3ed725fb7">VOCAB_PIXEL_MONO16</a></div><div class="ttdeci">@ VOCAB_PIXEL_MONO16</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00046">Image.h:46</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4a2cc27a656da7ba90e877e62a83a353af"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a2cc27a656da7ba90e877e62a83a353af">VOCAB_PIXEL_ENCODING_BAYER_BGGR8</a></div><div class="ttdeci">@ VOCAB_PIXEL_ENCODING_BAYER_BGGR8</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00061">Image.h:61</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4a2ff7130f833bbc772acaf30dc19f8b9b"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a2ff7130f833bbc772acaf30dc19f8b9b">VOCAB_PIXEL_YUV_444</a></div><div class="ttdeci">@ VOCAB_PIXEL_YUV_444</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00068">Image.h:68</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4a7459748a75059b915b3e9ec88eb207ed"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a7459748a75059b915b3e9ec88eb207ed">VOCAB_PIXEL_BGR</a></div><div class="ttdeci">@ VOCAB_PIXEL_BGR</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00052">Image.h:52</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4a7b9ef944b0b8375e023286af0e73150b"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a7b9ef944b0b8375e023286af0e73150b">VOCAB_PIXEL_ENCODING_BAYER_RGGB8</a></div><div class="ttdeci">@ VOCAB_PIXEL_ENCODING_BAYER_RGGB8</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00065">Image.h:65</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4a7e2b49464cca8161a9d85c9db01e0549"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a7e2b49464cca8161a9d85c9db01e0549">VOCAB_PIXEL_ENCODING_BAYER_GRBG8</a></div><div class="ttdeci">@ VOCAB_PIXEL_ENCODING_BAYER_GRBG8</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00059">Image.h:59</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4a8aa740e7d79f195ecfe330d781b6a818"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4a8aa740e7d79f195ecfe330d781b6a818">VOCAB_PIXEL_YUV_422</a></div><div class="ttdeci">@ VOCAB_PIXEL_YUV_422</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00069">Image.h:69</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4ad4ac708aa291887b3db4e5b1b3b0b34f"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4ad4ac708aa291887b3db4e5b1b3b0b34f">VOCAB_PIXEL_ENCODING_BAYER_GBRG8</a></div><div class="ttdeci">@ VOCAB_PIXEL_ENCODING_BAYER_GBRG8</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00063">Image.h:63</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4aee1fd390ce5dbd89ba1994759f609483"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4aee1fd390ce5dbd89ba1994759f609483">VOCAB_PIXEL_MONO</a></div><div class="ttdeci">@ VOCAB_PIXEL_MONO</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00045">Image.h:45</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4af0b275e745a6ec310ad5c3a9ed8fc9d3"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4af0b275e745a6ec310ad5c3a9ed8fc9d3">VOCAB_PIXEL_YUV_411</a></div><div class="ttdeci">@ VOCAB_PIXEL_YUV_411</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00071">Image.h:70</a></div></div>
<div class="ttc" id="alibYARP__sig_2src_2yarp_2sig_2Image_8h_html_a2e411d9f65992414d37bdcfec7f737b4afa5a4049fbf6c06a36e68803ea477af6"><div class="ttname"><a href="libYARP__sig_2src_2yarp_2sig_2Image_8h.html#a2e411d9f65992414d37bdcfec7f737b4afa5a4049fbf6c06a36e68803ea477af6">VOCAB_PIXEL_RGB</a></div><div class="ttdeci">@ VOCAB_PIXEL_RGB</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__sig_2src_2yarp_2sig_2Image_8h_source.html#l00047">Image.h:47</a></div></div>
<div class="ttc" id="alist_8cpp_html_a6795b0f37503488654aff05f6459e6f2"><div class="ttname"><a href="list_8cpp.html#a6795b0f37503488654aff05f6459e6f2">list_cap_v4l2</a></div><div class="ttdeci">void list_cap_v4l2(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="list_8cpp_source.html#l00278">list.cpp:278</a></div></div>
<div class="ttc" id="alist_8cpp_html_ab7b03a3048121e5a8640ff5623a5e72b"><div class="ttname"><a href="list_8cpp.html#ab7b03a3048121e5a8640ff5623a5e72b">query_current_image_fmt_v4l2</a></div><div class="ttdeci">void query_current_image_fmt_v4l2(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="list_8cpp_source.html#l00044">list.cpp:44</a></div></div>
<div class="ttc" id="alist_8h_html"><div class="ttname"><a href="list_8h.html">list.h</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1dev_html"><div class="ttname"><a href="namespaceyarp_1_1dev.html">yarp::dev</a></div><div class="ttdoc">An interface for the device drivers.</div><div class="ttdef"><b>Definition:</b> <a href="audioBufferSizeData_8cpp_source.html#l00014">audioBufferSizeData.cpp:14</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_1_1Time_html_a9909c5613bb1daee8f1fd92e1f4c95f6"><div class="ttname"><a href="namespaceyarp_1_1os_1_1Time.html#a9909c5613bb1daee8f1fd92e1f4c95f6">yarp::os::Time::now</a></div><div class="ttdeci">double now()</div><div class="ttdoc">Return the current time in seconds, relative to an arbitrary starting point.</div><div class="ttdef"><b>Definition:</b> <a href="Time_8cpp_source.html#l00121">Time.cpp:121</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_1_1Time_html_aca80809e0597551745954e2547e581ee"><div class="ttname"><a href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">yarp::os::Time::delay</a></div><div class="ttdeci">void delay(double seconds)</div><div class="ttdoc">Wait for a certain number of seconds.</div><div class="ttdef"><b>Definition:</b> <a href="Time_8cpp_source.html#l00111">Time.cpp:111</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_html"><div class="ttname"><a href="namespaceyarp_1_1os.html">yarp::os</a></div><div class="ttdoc">An interface to the operating system, including Port based communication.</div><div class="ttdef"><b>Definition:</b> <a href="AbstractCarrier_8h_source.html#l00014">AbstractCarrier.h:14</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_html_a7cc26d1e03b2b433cbbfbf5597125031"><div class="ttname"><a href="namespaceyarp_1_1os.html#a7cc26d1e03b2b433cbbfbf5597125031">yarp::os::stat</a></div><div class="ttdeci">int stat(const char *path)</div><div class="ttdoc">Portable wrapper for the stat() function.</div><div class="ttdef"><b>Definition:</b> <a href="Os_8cpp_source.html#l00085">Os.cpp:85</a></div></div>
<div class="ttc" id="astructCameraDescriptor_html"><div class="ttname"><a href="structCameraDescriptor.html">CameraDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00027">IFrameGrabberControls.h:27</a></div></div>
<div class="ttc" id="astructCameraDescriptor_html_a2e19afe877eca17ad42e31ade96783a0"><div class="ttname"><a href="structCameraDescriptor.html#a2e19afe877eca17ad42e31ade96783a0">CameraDescriptor::deviceDescription</a></div><div class="ttdeci">std::string deviceDescription</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00029">IFrameGrabberControls.h:29</a></div></div>
<div class="ttc" id="astructCameraDescriptor_html_ac561d9c58155f7f945630ae44da2420e"><div class="ttname"><a href="structCameraDescriptor.html#ac561d9c58155f7f945630ae44da2420e">CameraDescriptor::busType</a></div><div class="ttdeci">BusType busType</div><div class="ttdef"><b>Definition:</b> <a href="IFrameGrabberControls_8h_source.html#l00028">IFrameGrabberControls.h:28</a></div></div>
<div class="ttc" id="astructVideo__params_html_a0b95adba54b7feab3f4d68b7d23203e7"><div class="ttname"><a href="structVideo__params.html#a0b95adba54b7feab3f4d68b7d23203e7">Video_params::deviceId</a></div><div class="ttdeci">std::string deviceId</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00072">V4L_camera.h:72</a></div></div>
<div class="ttc" id="astructVideo__params_html_a1066ad9ebc3894a083d9c97888e79df4"><div class="ttname"><a href="structVideo__params.html#a1066ad9ebc3894a083d9c97888e79df4">Video_params::dst_fmt</a></div><div class="ttdeci">struct v4l2_format dst_fmt</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00116">V4L_camera.h:118</a></div></div>
<div class="ttc" id="astructVideo__params_html_a1711ba61ad9d83ed7493dc7743e228b2"><div class="ttname"><a href="structVideo__params.html#a1711ba61ad9d83ed7493dc7743e228b2">Video_params::read_image</a></div><div class="ttdeci">unsigned char * read_image</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00097">V4L_camera.h:97</a></div></div>
<div class="ttc" id="astructVideo__params_html_a2183f023eb87200fe45c194c19279c68"><div class="ttname"><a href="structVideo__params.html#a2183f023eb87200fe45c194c19279c68">Video_params::n_buffers</a></div><div class="ttdeci">unsigned int n_buffers</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00115">V4L_camera.h:115</a></div></div>
<div class="ttc" id="astructVideo__params_html_a27d5f61e86444e474b8e13856862268a"><div class="ttname"><a href="structVideo__params.html#a27d5f61e86444e474b8e13856862268a">Video_params::fps</a></div><div class="ttdeci">int fps</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00087">V4L_camera.h:87</a></div></div>
<div class="ttc" id="astructVideo__params_html_a30b9a437f8567529c7505e3621222300"><div class="ttname"><a href="structVideo__params.html#a30b9a437f8567529c7505e3621222300">Video_params::configurations</a></div><div class="ttdeci">yarp::sig::VectorOf&lt; yarp::dev::CameraConfig &gt; configurations</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00112">V4L_camera.h:112</a></div></div>
<div class="ttc" id="astructVideo__params_html_a35d820842ea715d22d48b36b8ccbaa24"><div class="ttname"><a href="structVideo__params.html#a35d820842ea715d22d48b36b8ccbaa24">Video_params::pixelType</a></div><div class="ttdeci">size_t pixelType</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00120">V4L_camera.h:120</a></div></div>
<div class="ttc" id="astructVideo__params_html_a364f5c9723588011ab1a92cfed3b6c58"><div class="ttname"><a href="structVideo__params.html#a364f5c9723588011ab1a92cfed3b6c58">Video_params::buffers</a></div><div class="ttdeci">struct buffer * buffers</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00116">V4L_camera.h:116</a></div></div>
<div class="ttc" id="astructVideo__params_html_a3fff4c89095c74f30e543a8e42357952"><div class="ttname"><a href="structVideo__params.html#a3fff4c89095c74f30e543a8e42357952">Video_params::user_height</a></div><div class="ttdeci">__u32 user_height</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00079">V4L_camera.h:79</a></div></div>
<div class="ttc" id="astructVideo__params_html_a44d263901f83bf645784b1b1ef138fe2"><div class="ttname"><a href="structVideo__params.html#a44d263901f83bf645784b1b1ef138fe2">Video_params::src_fmt</a></div><div class="ttdeci">struct v4l2_format src_fmt</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00116">V4L_camera.h:117</a></div></div>
<div class="ttc" id="astructVideo__params_html_a53cddeafaeb3bf7376801407dd690a43"><div class="ttname"><a href="structVideo__params.html#a53cddeafaeb3bf7376801407dd690a43">Video_params::raw_image</a></div><div class="ttdeci">unsigned char * raw_image</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00092">V4L_camera.h:92</a></div></div>
<div class="ttc" id="astructVideo__params_html_a5b7c774ace23f22fb356fdc63e365b96"><div class="ttname"><a href="structVideo__params.html#a5b7c774ace23f22fb356fdc63e365b96">Video_params::io</a></div><div class="ttdeci">io_method io</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00086">V4L_camera.h:86</a></div></div>
<div class="ttc" id="astructVideo__params_html_a5d70750b53c6de8df6791ab50de5b608"><div class="ttname"><a href="structVideo__params.html#a5d70750b53c6de8df6791ab50de5b608">Video_params::dst_image_rgb</a></div><div class="ttdeci">unsigned char * dst_image_rgb</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00106">V4L_camera.h:106</a></div></div>
<div class="ttc" id="astructVideo__params_html_a6410324a1d22d59d61439bc32f5cf570"><div class="ttname"><a href="structVideo__params.html#a6410324a1d22d59d61439bc32f5cf570">Video_params::resizeOffset_x</a></div><div class="ttdeci">int resizeOffset_x</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00075">V4L_camera.h:75</a></div></div>
<div class="ttc" id="astructVideo__params_html_a6e7d10b8280945d5e148ee0e12093a8e"><div class="ttname"><a href="structVideo__params.html#a6e7d10b8280945d5e148ee0e12093a8e">Video_params::resizeHeight</a></div><div class="ttdeci">int resizeHeight</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00076">V4L_camera.h:76</a></div></div>
<div class="ttc" id="astructVideo__params_html_a76be8f8f8d790d90cb758322a9a51576"><div class="ttname"><a href="structVideo__params.html#a76be8f8f8d790d90cb758322a9a51576">Video_params::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00071">V4L_camera.h:71</a></div></div>
<div class="ttc" id="astructVideo__params_html_a7822ccd6e6447f2fd14fdbb4fe105626"><div class="ttname"><a href="structVideo__params.html#a7822ccd6e6447f2fd14fdbb4fe105626">Video_params::intrinsic</a></div><div class="ttdeci">yarp::os::Property intrinsic</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00083">V4L_camera.h:83</a></div></div>
<div class="ttc" id="astructVideo__params_html_a8644510cef55d2f0f01cce0187216aa5"><div class="ttname"><a href="structVideo__params.html#a8644510cef55d2f0f01cce0187216aa5">Video_params::resizeWidth</a></div><div class="ttdeci">int resizeWidth</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00076">V4L_camera.h:76</a></div></div>
<div class="ttc" id="astructVideo__params_html_a95b3f89184e1832dade01486e04b6d55"><div class="ttname"><a href="structVideo__params.html#a95b3f89184e1832dade01486e04b6d55">Video_params::resizeOffset_y</a></div><div class="ttdeci">int resizeOffset_y</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00075">V4L_camera.h:75</a></div></div>
<div class="ttc" id="astructVideo__params_html_aa437ec2f2c83a3e2bed755cb8e535924"><div class="ttname"><a href="structVideo__params.html#aa437ec2f2c83a3e2bed755cb8e535924">Video_params::req</a></div><div class="ttdeci">struct v4l2_requestbuffers req</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00116">V4L_camera.h:119</a></div></div>
<div class="ttc" id="astructVideo__params_html_ab7999fb2c395ca3eb50117bc0fe4a89b"><div class="ttname"><a href="structVideo__params.html#ab7999fb2c395ca3eb50117bc0fe4a89b">Video_params::user_width</a></div><div class="ttdeci">__u32 user_width</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00078">V4L_camera.h:78</a></div></div>
<div class="ttc" id="astructVideo__params_html_abbe44c5c6b063a6d3d16712eb9cb4854"><div class="ttname"><a href="structVideo__params.html#abbe44c5c6b063a6d3d16712eb9cb4854">Video_params::horizontalFov</a></div><div class="ttdeci">double horizontalFov</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00081">V4L_camera.h:81</a></div></div>
<div class="ttc" id="astructVideo__params_html_abdde63c6260816d6f2f983058fb699e5"><div class="ttname"><a href="structVideo__params.html#abdde63c6260816d6f2f983058fb699e5">Video_params::src_image</a></div><div class="ttdeci">unsigned char * src_image</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00101">V4L_camera.h:101</a></div></div>
<div class="ttc" id="astructVideo__params_html_abe4f447ff65a1f30e3370da83742e440"><div class="ttname"><a href="structVideo__params.html#abe4f447ff65a1f30e3370da83742e440">Video_params::addictionalResize</a></div><div class="ttdeci">bool addictionalResize</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00074">V4L_camera.h:74</a></div></div>
<div class="ttc" id="astructVideo__params_html_ad2357e1771711ee409c50e4c7bc2092f"><div class="ttname"><a href="structVideo__params.html#ad2357e1771711ee409c50e4c7bc2092f">Video_params::outMat</a></div><div class="ttdeci">cv::Mat outMat</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00110">V4L_camera.h:110</a></div></div>
<div class="ttc" id="astructVideo__params_html_ad3261712016d4261d96fa7ee73537e0b"><div class="ttname"><a href="structVideo__params.html#ad3261712016d4261d96fa7ee73537e0b">Video_params::camModel</a></div><div class="ttdeci">supported_cams camModel</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00121">V4L_camera.h:121</a></div></div>
<div class="ttc" id="astructVideo__params_html_ada050962ee6c8cc3af9427b4d8da2d05"><div class="ttname"><a href="structVideo__params.html#ada050962ee6c8cc3af9427b4d8da2d05">Video_params::dual</a></div><div class="ttdeci">bool dual</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00084">V4L_camera.h:84</a></div></div>
<div class="ttc" id="astructVideo__params_html_ae26ed0a556750e3e7c23e932dd67e0aa"><div class="ttname"><a href="structVideo__params.html#ae26ed0a556750e3e7c23e932dd67e0aa">Video_params::flip</a></div><div class="ttdeci">bool flip</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00113">V4L_camera.h:113</a></div></div>
<div class="ttc" id="astructVideo__params_html_aef46e14f48d1751f03a43b4d6a8925b0"><div class="ttname"><a href="structVideo__params.html#aef46e14f48d1751f03a43b4d6a8925b0">Video_params::verticalFov</a></div><div class="ttdeci">double verticalFov</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00082">V4L_camera.h:82</a></div></div>
<div class="ttc" id="astructVideo__params_html_af40c139681fd2b0cdfd996b62fcd981b"><div class="ttname"><a href="structVideo__params.html#af40c139681fd2b0cdfd996b62fcd981b">Video_params::dst_image_size_rgb</a></div><div class="ttdeci">unsigned int dst_image_size_rgb</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00107">V4L_camera.h:107</a></div></div>
<div class="ttc" id="astructVideo__params_html_af7afa851d905587fdace8c6f04b68f42"><div class="ttname"><a href="structVideo__params.html#af7afa851d905587fdace8c6f04b68f42">Video_params::src_image_size</a></div><div class="ttdeci">unsigned int src_image_size</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00102">V4L_camera.h:102</a></div></div>
<div class="ttc" id="astructVideo__params_html_af885d554e7f90136dc0cc8d014ac0d67"><div class="ttname"><a href="structVideo__params.html#af885d554e7f90136dc0cc8d014ac0d67">Video_params::raw_image_size</a></div><div class="ttdeci">unsigned int raw_image_size</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00093">V4L_camera.h:93</a></div></div>
<div class="ttc" id="astructbuffer_html"><div class="ttname"><a href="structbuffer.html">buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00062">V4L_camera.h:63</a></div></div>
<div class="ttc" id="astructbuffer_html_a4f467cc251f2f4504d484913c7da47bd"><div class="ttname"><a href="structbuffer.html#a4f467cc251f2f4504d484913c7da47bd">buffer::length</a></div><div class="ttdeci">size_t length</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00065">V4L_camera.h:65</a></div></div>
<div class="ttc" id="astructbuffer_html_a8be3721dc0863d9dd7460504bbaeb0d1"><div class="ttname"><a href="structbuffer.html#a8be3721dc0863d9dd7460504bbaeb0d1">buffer::start</a></div><div class="ttdeci">void * start</div><div class="ttdef"><b>Definition:</b> <a href="V4L__camera_8h_source.html#l00064">V4L_camera.h:64</a></div></div>
<div class="ttc" id="astructyarp_1_1dev_1_1CameraConfig_html"><div class="ttname"><a href="structyarp_1_1dev_1_1CameraConfig.html">yarp::dev::CameraConfig</a></div><div class="ttdoc">Struct describing a possible camera configuration.</div><div class="ttdef"><b>Definition:</b> <a href="IRgbVisualParams_8h_source.html#l00027">IRgbVisualParams.h:28</a></div></div>
<div class="ttc" id="astructyarp_1_1dev_1_1CameraConfig_html_a27dd4b4cc589091c64a65d2bd407ed8d"><div class="ttname"><a href="structyarp_1_1dev_1_1CameraConfig.html#a27dd4b4cc589091c64a65d2bd407ed8d">yarp::dev::CameraConfig::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="IRgbVisualParams_8h_source.html#l00029">IRgbVisualParams.h:29</a></div></div>
<div class="ttc" id="astructyarp_1_1dev_1_1CameraConfig_html_a78607caa8c3f831a88b326b4b5dac501"><div class="ttname"><a href="structyarp_1_1dev_1_1CameraConfig.html#a78607caa8c3f831a88b326b4b5dac501">yarp::dev::CameraConfig::pixelCoding</a></div><div class="ttdeci">YarpVocabPixelTypesEnum pixelCoding</div><div class="ttdef"><b>Definition:</b> <a href="IRgbVisualParams_8h_source.html#l00032">IRgbVisualParams.h:32</a></div></div>
<div class="ttc" id="astructyarp_1_1dev_1_1CameraConfig_html_aa777c4d3112b6a708534fce3aa3f4025"><div class="ttname"><a href="structyarp_1_1dev_1_1CameraConfig.html#aa777c4d3112b6a708534fce3aa3f4025">yarp::dev::CameraConfig::framerate</a></div><div class="ttdeci">double framerate</div><div class="ttdef"><b>Definition:</b> <a href="IRgbVisualParams_8h_source.html#l00031">IRgbVisualParams.h:31</a></div></div>
<div class="ttc" id="astructyarp_1_1dev_1_1CameraConfig_html_abd70bb6d085abb83adddd1c6992b0dee"><div class="ttname"><a href="structyarp_1_1dev_1_1CameraConfig.html#abd70bb6d085abb83adddd1c6992b0dee">yarp::dev::CameraConfig::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="IRgbVisualParams_8h_source.html#l00030">IRgbVisualParams.h:30</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.5.1</span></li>
    <li class="navelem"><a class="el" href="dir_d946d32291de7db32f6a943fb45d46f4.html">src</a></li><li class="navelem"><a class="el" href="dir_abd80c029d214e783ff905e909ed9db6.html">devices</a></li><li class="navelem"><a class="el" href="dir_6e74fbd2f2f2c7670fff8fc7066466c6.html">usbCamera</a></li><li class="navelem"><a class="el" href="dir_f2daf63d1f6e5fcf080504ae184218c2.html">linux</a></li><li class="navelem"><a class="el" href="V4L__camera_8cpp.html">V4L_camera.cpp</a></li>
    <li class="footer">Generated on Sat Dec 25 2021 02:23:02 for YARP by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
