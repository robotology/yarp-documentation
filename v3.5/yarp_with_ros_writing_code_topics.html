<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YARP: Writing code to talk to ROS topics</title>
<link rel="shortcut icon" href="yarp-favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = { VERSION: '3.5.1' };
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="yarp-doxygen-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version_switch.js"></script>
<link rel="stylesheet" type="text/css" href="cookieconsent.min.css" />
<script src="cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "#237afc",
    }
  },
  "theme": "classic",
  "content": {
    "message": "INFORMATION NOTICE ON COOKIES : This website uses only browsing/session cookies. Users can choose whether or not to accept the use of cookies and access the website. By clicking on \"Further information\", the full information notice on the types of cookies will be displayed and you will be able  to choose whether or not to accept them whilst browsing on the website.",
    "dismiss": "ACCEPT and close",
    "link": "Further information",
    "href": "http://www.icub.org/other/personal_data_notice.html"
  }
})});
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="yarp-robot-64.png"/></td>
  <td id="projectalign" style="padding-left: 1.5em;">
   <div id="projectname">YARP</div>
   <div id="projectbrief">Yet Another Robot Platform</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('yarp_with_ros_writing_code_topics.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Writing code to talk to ROS topics </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>While you can configure conventional YARP ports to talk to ROS topics (see <a class="el" href="yarp_with_ros_existing_yarp_ports.html">Use ROS with existing YARP programs</a>), YARP provides specialized classes that simplify this task:</p>
<ul>
<li><code><a class="el" href="classyarp_1_1os_1_1Node.html" title="The Node class.">yarp::os::Node</a></code>: a class to create a ROS node. </li>
<li><code><a class="el" href="classyarp_1_1os_1_1Subscriber.html" title="A port specialized for reading data of a constant type published on a topic.">yarp::os::Subscriber</a></code>: a class to subscribe to a topic. </li>
<li><code><a class="el" href="classyarp_1_1os_1_1Publisher.html" title="A port specialized for publishing data of a constant type on a topic.">yarp::os::Publisher</a></code>: a class to publish to a topic.</li>
</ul>
<p>An important thing to keep in mind is that YARP needs to be aware of ROS types. If you are writing new code it is easy to generate ROS compatible YARP data types starting.</p>
<p>For example the following code shows how to write a program that listen to the /chatter topic. In this case we use the ROS type std_msgs/String.</p>
<p>The first thing to do is to generate a YARP compatible type for std_msgs/String:</p>
<div class="fragment"><div class="line">$ yarpidl_rosmsg String</div>
</div><!-- fragment --><p>This will produce the file <code>yarp/rosmsg/String.h</code> which can be used directly in our YARP program.</p>
<p>Type the following code in a file, e.g. listener.cpp:</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SPDX-FileCopyrightText: 2006-2021 Istituto Italiano di Tecnologia (IIT)</span></div>
<div class="line"><span class="comment"> * SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html">yarp/os/LogComponent.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="LogStream_8h.html">yarp/os/LogStream.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Network_8h.html">yarp/os/Network.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Node_8h.html">yarp/os/Node.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="libYARP__os_2src_2yarp_2os_2Subscriber_8h.html">yarp/os/Subscriber.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="yarp_2rosmsg_2std__msgs_2String_8h.html">yarp/rosmsg/std_msgs/String.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using</span> <a class="code" href="classyarp_1_1os_1_1Network.html">yarp::os::Network</a>;</div>
<div class="line"><span class="keyword">using</span> <a class="code" href="classyarp_1_1os_1_1Node.html">yarp::os::Node</a>;</div>
<div class="line"><span class="keyword">using</span> <a class="code" href="classyarp_1_1os_1_1Subscriber.html">yarp::os::Subscriber</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>{</div>
<div class="line"><a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a86dd8a06be6e589f92112c953c8f8009">YARP_LOG_COMPONENT</a>(LISTENER, <span class="stringliteral">&quot;yarp.example.ros.listener&quot;</span>)</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="yarpros_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="yarp-v3_85-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h.html#a115a3e86265819f41c93ff12c2538d1f">YARP_UNUSED</a>(argc);</div>
<div class="line">    <a class="code" href="yarp-v3_85-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h.html#a115a3e86265819f41c93ff12c2538d1f">YARP_UNUSED</a>(argv);</div>
<div class="line"> </div>
<div class="line">    Network <a class="code" href="namespaceyarp.html">yarp</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* creates a node called /yarp/listener */</span></div>
<div class="line">    Node node(<span class="stringliteral">&quot;/yarp/listener&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* subscribe to topic chatter */</span></div>
<div class="line">    <a class="code" href="classyarp_1_1os_1_1Subscriber.html">yarp::os::Subscriber&lt;yarp::rosmsg::std_msgs::String&gt;</a> subscriber;</div>
<div class="line">    <span class="keywordflow">if</span> (!subscriber.<a class="code" href="classyarp_1_1os_1_1Subscriber.html#a6f5e3dcc17a8b388c56ff0dc7d231c0b">topic</a>(<span class="stringliteral">&quot;/chatter&quot;</span>)) {</div>
<div class="line">        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(LISTENER) &lt;&lt; <span class="stringliteral">&quot;Failed to subscriber to /chatter&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* read data from the topic */</span></div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line">        <a class="code" href="classyarp_1_1rosmsg_1_1std__msgs_1_1String.html">yarp::rosmsg::std_msgs::String</a> data;</div>
<div class="line">        subscriber.<a class="code" href="classyarp_1_1os_1_1Subscriber.html#a2da220901940835cd00f43e7dfbbf58d">read</a>(data);</div>
<div class="line">        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a>(LISTENER) &lt;&lt; <span class="stringliteral">&quot;Received:&quot;</span> &lt;&lt; data.<a class="code" href="classyarp_1_1rosmsg_1_1std__msgs_1_1String.html#af0ca491ca74eb3dd189da0b4037950e6">data</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aLogStream_8h_html"><div class="ttname"><a href="LogStream_8h.html">LogStream.h</a></div></div>
<div class="ttc" id="aNetwork_8h_html"><div class="ttname"><a href="Network_8h.html">Network.h</a></div></div>
<div class="ttc" id="aNode_8h_html"><div class="ttname"><a href="Node_8h.html">Node.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Network_html"><div class="ttname"><a href="classyarp_1_1os_1_1Network.html">yarp::os::Network</a></div><div class="ttdoc">Utilities for manipulating the YARP network, including initialization and shutdown.</div><div class="ttdef"><b>Definition:</b> <a href="Network_8h_source.html#l00782">Network.h:783</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Node_html"><div class="ttname"><a href="classyarp_1_1os_1_1Node.html">yarp::os::Node</a></div><div class="ttdoc">The Node class.</div><div class="ttdef"><b>Definition:</b> <a href="Node_8h_source.html#l00023">Node.h:24</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Subscriber_html"><div class="ttname"><a href="classyarp_1_1os_1_1Subscriber.html">yarp::os::Subscriber</a></div><div class="ttdoc">A port specialized for reading data of a constant type published on a topic.</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2Subscriber_8h_source.html#l00022">Subscriber.h:23</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Subscriber_html_a2da220901940835cd00f43e7dfbbf58d"><div class="ttname"><a href="classyarp_1_1os_1_1Subscriber.html#a2da220901940835cd00f43e7dfbbf58d">yarp::os::Subscriber::read</a></div><div class="ttdeci">T * read(bool shouldWait=true)</div><div class="ttdoc">Read a message from the port.</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2Subscriber_8h_source.html#l00114">Subscriber.h:114</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Subscriber_html_a6f5e3dcc17a8b388c56ff0dc7d231c0b"><div class="ttname"><a href="classyarp_1_1os_1_1Subscriber.html#a6f5e3dcc17a8b388c56ff0dc7d231c0b">yarp::os::Subscriber::topic</a></div><div class="ttdeci">bool topic(const std::string &amp;name)</div><div class="ttdoc">Set topic to subscribe to.</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2Subscriber_8h_source.html#l00063">Subscriber.h:63</a></div></div>
<div class="ttc" id="aclassyarp_1_1rosmsg_1_1std__msgs_1_1String_html"><div class="ttname"><a href="classyarp_1_1rosmsg_1_1std__msgs_1_1String.html">yarp::rosmsg::std_msgs::String</a></div><div class="ttdef"><b>Definition:</b> <a href="yarp_2rosmsg_2std__msgs_2String_8h_source.html#l00026">String.h:27</a></div></div>
<div class="ttc" id="aclassyarp_1_1rosmsg_1_1std__msgs_1_1String_html_af0ca491ca74eb3dd189da0b4037950e6"><div class="ttname"><a href="classyarp_1_1rosmsg_1_1std__msgs_1_1String.html#af0ca491ca74eb3dd189da0b4037950e6">yarp::rosmsg::std_msgs::String::data</a></div><div class="ttdeci">std::string data</div><div class="ttdef"><b>Definition:</b> <a href="yarp_2rosmsg_2std__msgs_2String_8h_source.html#l00029">String.h:29</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html">LogComponent.h</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a18e11e963a9867766b3ac49614348799"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a18e11e963a9867766b3ac49614348799">yCInfo</a></div><div class="ttdeci">#define yCInfo(component,...)</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00132">LogComponent.h:132</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a224fd66c5d833ba0367a2ed54bcc279a"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a></div><div class="ttdeci">#define yCError(component,...)</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00154">LogComponent.h:154</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2LogComponent_8h_html_a86dd8a06be6e589f92112c953c8f8009"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a86dd8a06be6e589f92112c953c8f8009">YARP_LOG_COMPONENT</a></div><div class="ttdeci">#define YARP_LOG_COMPONENT(name,...)</div><div class="ttdef"><b>Definition:</b> <a href="libYARP__os_2src_2yarp_2os_2LogComponent_8h_source.html#l00077">LogComponent.h:77</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2Subscriber_8h_html"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2Subscriber_8h.html">Subscriber.h</a></div></div>
<div class="ttc" id="anamespaceyarp_html"><div class="ttname"><a href="namespaceyarp.html">yarp</a></div><div class="ttdoc">The main, catch-all namespace for YARP.</div><div class="ttdef"><b>Definition:</b> <a href="dirs_8h_source.html#l00016">dirs.h:16</a></div></div>
<div class="ttc" id="ayarp-v3_85-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h_html_a115a3e86265819f41c93ff12c2538d1f"><div class="ttname"><a href="yarp-v3_85-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h.html#a115a3e86265819f41c93ff12c2538d1f">YARP_UNUSED</a></div><div class="ttdeci">#define YARP_UNUSED(var)</div><div class="ttdef"><b>Definition:</b> <a href="yarp-v3_85-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h_source.html#l00162">api.h:162</a></div></div>
<div class="ttc" id="ayarp_2rosmsg_2std__msgs_2String_8h_html"><div class="ttname"><a href="yarp_2rosmsg_2std__msgs_2String_8h.html">String.h</a></div></div>
<div class="ttc" id="ayarpros_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="yarpros_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="yarpros_8cpp_source.html#l00263">yarpros.cpp:263</a></div></div>
</div><!-- fragment --><p>An example CMakeLists.txt file to compile this code would be:</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.12)</div>
<div class="line">find_package(YARP COMPONENTS os REQUIRED)</div>
<div class="line">add_executable(listener)</div>
<div class="line">target_sources(listener PRIVATE listener.cpp)</div>
<div class="line">target_link_libraries(listener PRIVATE YARP::YARP_os</div>
<div class="line">                                       YARP::YARP_init)</div>
</div><!-- fragment --><p>You can now publish the string "Hello World" to the topic /chatter using ROS:</p>
<div class="fragment"><div class="line">rostopic pub /chatter std_msgs/String &quot;hello yarp&quot; --r 10</div>
</div><!-- fragment --><p>and listen to it using the YARP program above:</p>
<div class="fragment"><div class="line">./listener</div>
</div><!-- fragment --> <pre class="fragment">yarp: Port /yarp/listener active at tcp://192.168.152.130:10002
yarp: Port /chatter-@/yarp/listener active at tcp://192.168.152.130:10003
yarp: Receiving input from /rostopic_36275_1464212662655 to /chatter-@/yarp/listener using tcpros+role.pub+topic./chatter
Received:hello yarp
Received:hello yarp
Received:hello yarp
...
</pre><p>You can verify the existence of a node called /yarp/listener by running:</p>
<div class="fragment"><div class="line">rosnode list</div>
</div><!-- fragment --> <pre class="fragment">/rosout
/yarp/listener
</pre><p>We can now write our own publisher using YARP. The code is quite simple, type it in a file, e.g. talker.cpp:</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SPDX-FileCopyrightText: 2006-2021 Istituto Italiano di Tecnologia (IIT)</span></div>
<div class="line"><span class="comment"> * SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html">yarp/os/LogComponent.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="LogStream_8h.html">yarp/os/LogStream.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Network_8h.html">yarp/os/Network.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Node_8h.html">yarp/os/Node.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Publisher_8h.html">yarp/os/Publisher.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="libYARP__os_2src_2yarp_2os_2Time_8h.html">yarp/os/Time.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="yarp_2rosmsg_2std__msgs_2String_8h.html">yarp/rosmsg/std_msgs/String.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using</span> <a class="code" href="classyarp_1_1os_1_1Network.html">yarp::os::Network</a>;</div>
<div class="line"><span class="keyword">using</span> <a class="code" href="classyarp_1_1os_1_1Node.html">yarp::os::Node</a>;</div>
<div class="line"><span class="keyword">using</span> <a class="code" href="classyarp_1_1os_1_1Publisher.html">yarp::os::Publisher</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>{</div>
<div class="line"><a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a86dd8a06be6e589f92112c953c8f8009">YARP_LOG_COMPONENT</a>(TALKER, <span class="stringliteral">&quot;yarp.example.ros.talker&quot;</span>)</div>
<div class="line">constexpr <span class="keywordtype">double</span> loop_delay = 0.1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="yarpros_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="yarp-v3_85-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h.html#a115a3e86265819f41c93ff12c2538d1f">YARP_UNUSED</a>(argc);</div>
<div class="line">    <a class="code" href="yarp-v3_85-build_2src_2libYARP__conf_2src_2yarp_2conf_2api_8h.html#a115a3e86265819f41c93ff12c2538d1f">YARP_UNUSED</a>(argv);</div>
<div class="line"> </div>
<div class="line">    Network <a class="code" href="namespaceyarp.html">yarp</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* creates a node called /yarp/talker */</span></div>
<div class="line">    Node node(<span class="stringliteral">&quot;/yarp/talker&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* subscribe to topic chatter */</span></div>
<div class="line">    <a class="code" href="classyarp_1_1os_1_1Publisher.html">yarp::os::Publisher&lt;yarp::rosmsg::std_msgs::String&gt;</a> publisher;</div>
<div class="line">    <span class="keywordflow">if</span> (!publisher.<a class="code" href="classyarp_1_1os_1_1Publisher.html#a4771b337645422049d19f5e22f2c7a8d">topic</a>(<span class="stringliteral">&quot;/chatter&quot;</span>)) {</div>
<div class="line">        <a class="code" href="libYARP__os_2src_2yarp_2os_2LogComponent_8h.html#a224fd66c5d833ba0367a2ed54bcc279a">yCError</a>(TALKER) &lt;&lt; <span class="stringliteral">&quot;Failed to create publisher to /chatter&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line">        <span class="comment">/* prepare some data */</span></div>
<div class="line">        <a class="code" href="classyarp_1_1rosmsg_1_1std__msgs_1_1String.html">yarp::rosmsg::std_msgs::String</a> data;</div>
<div class="line">        data.<a class="code" href="classyarp_1_1rosmsg_1_1std__msgs_1_1String.html#af0ca491ca74eb3dd189da0b4037950e6">data</a> = <span class="stringliteral">&quot;Hello from YARP&quot;</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* publish it to the topic */</span></div>
<div class="line">        publisher.<a class="code" href="classyarp_1_1os_1_1Publisher.html#ae019bca419832bd44d796084f6d61173">write</a>(data);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* wait some time to avoid flooding with messages */</span></div>
<div class="line">        <a class="code" href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">yarp::os::Time::delay</a>(loop_delay);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aPublisher_8h_html"><div class="ttname"><a href="Publisher_8h.html">Publisher.h</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Publisher_html"><div class="ttname"><a href="classyarp_1_1os_1_1Publisher.html">yarp::os::Publisher</a></div><div class="ttdoc">A port specialized for publishing data of a constant type on a topic.</div><div class="ttdef"><b>Definition:</b> <a href="Publisher_8h_source.html#l00022">Publisher.h:23</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Publisher_html_a4771b337645422049d19f5e22f2c7a8d"><div class="ttname"><a href="classyarp_1_1os_1_1Publisher.html#a4771b337645422049d19f5e22f2c7a8d">yarp::os::Publisher::topic</a></div><div class="ttdeci">bool topic(const std::string &amp;name)</div><div class="ttdoc">Set topic to publish to.</div><div class="ttdef"><b>Definition:</b> <a href="Publisher_8h_source.html#l00064">Publisher.h:64</a></div></div>
<div class="ttc" id="aclassyarp_1_1os_1_1Publisher_html_ae019bca419832bd44d796084f6d61173"><div class="ttname"><a href="classyarp_1_1os_1_1Publisher.html#ae019bca419832bd44d796084f6d61173">yarp::os::Publisher::write</a></div><div class="ttdeci">void write(bool forceStrict=false)</div><div class="ttdoc">Write the current object being returned by Publisher::prepare.</div><div class="ttdef"><b>Definition:</b> <a href="Publisher_8h_source.html#l00149">Publisher.h:149</a></div></div>
<div class="ttc" id="alibYARP__os_2src_2yarp_2os_2Time_8h_html"><div class="ttname"><a href="libYARP__os_2src_2yarp_2os_2Time_8h.html">Time.h</a></div></div>
<div class="ttc" id="anamespaceyarp_1_1os_1_1Time_html_aca80809e0597551745954e2547e581ee"><div class="ttname"><a href="namespaceyarp_1_1os_1_1Time.html#aca80809e0597551745954e2547e581ee">yarp::os::Time::delay</a></div><div class="ttdeci">void delay(double seconds)</div><div class="ttdoc">Wait for a certain number of seconds.</div><div class="ttdef"><b>Definition:</b> <a href="Time_8cpp_source.html#l00111">Time.cpp:111</a></div></div>
</div><!-- fragment --><p>an example <code>CMakeLists.txt</code> file to compile this code would be:</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.12)</div>
<div class="line">find_package(YARP COMPONENTS os REQUIRED)</div>
<div class="line">add_executable(talker)</div>
<div class="line">target_sources(talker PRIVATE talker.cpp)</div>
<div class="line">target_link_libraries(talker PRIVATE YARP::YARP_os</div>
<div class="line">                                     YARP::YARP_init)</div>
</div><!-- fragment --><p>We can run this code on a terminal: </p><div class="fragment"><div class="line">./talker</div>
</div><!-- fragment --> <pre class="fragment">yarp: Port /yarp/talker active at tcp://192.168.152.130:10004
yarp: Port /chatter+@/yarp/talker active at tcp://192.168.152.130:10006
yarp: Sending output from /chatter+@/yarp/talker to /listener using tcpros
yarp: Removing output from /chatter+@/yarp/talker to /listener
</pre><p>You can verify the existence of a node called <code>/yarp/talker</code> and topic <code>/chatter</code> by running:</p>
<div class="fragment"><div class="line">rosnode list</div>
</div><!-- fragment --> <pre class="fragment">/rosout
/yarp/talker
</pre><div class="fragment"><div class="line">rostopic list</div>
</div><!-- fragment --> <pre class="fragment">/chatter
/rosout
/rosout_agg
</pre><p>And see the output using the listener from ros tutorials:</p>
<div class="fragment"><div class="line">rosrun roscpp_tutorials listener</div>
</div><!-- fragment --> <pre class="fragment">[ INFO] [1464213813.965287858]: I heard: [Hello from YARP]
[ INFO] [1464213814.066799996]: I heard: [Hello from YARP]
[ INFO] [1464213814.169264100]: I heard: [Hello from YARP]
[ INFO] [1464213814.271588965]: I heard: [Hello from YARP]
[ INFO] [1464213814.373758392]: I heard: [Hello from YARP]
...
</pre><p>The following tutorials show how to write your own data type using ROS syntax:</p>
<ul>
<li><a class="el" href="rostypes_tutorial_portable.html">ROS Types in YARP: writing a portable</a> </li>
<li><a class="el" href="rostypes_tutorial_continued.html">ROS Types in YARP: sending data to ROS</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li><span id="projectname_footer">YARP</span></li>
    <li><span id="projectnumber" class="version_switch">3.5.1</span></li>
    <li class="footer">Generated on Sat Dec 25 2021 02:23:10 for YARP by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
